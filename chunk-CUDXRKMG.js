import{a as H}from"./chunk-HATZLTNB.js";import{a as L,c as Y,d as G}from"./chunk-O5ST5JZS.js";import{a as D}from"./chunk-KNK6ZWV7.js";import{$a as m,Ab as y,Ca as V,Ib as u,Jb as S,Ua as F,Uc as U,Vc as k,Wa as O,X as E,Xa as N,Za as f,_a as T,aa as a,ab as _,ba as l,bb as d,cb as b,gb as v,ib as C,ja as $,kb as i,kd as B,ld as R,nd as A,od as z,pd as q,sa as x,ta as p,td as j,yb as g,zb as w}from"./chunk-DYNV3AZ5.js";import"./chunk-6MDQTQU3.js";var M=(s,o)=>o.gfxId;function W(s,o){if(s&1){let t=v();_(0,"img",15),C("dragstart",function(r){let n=a(t),c=n.$implicit,P=n.$index,I=i();return l(I.onDragStartEquipped(r,c,"NEUTRE",P))})("click",function(){let r=a(t).$implicit,n=i();return l(n.selectSortById(r,"NEUTRE"))})("dblclick",function(){let r=a(t).$index,n=i();return l(n.removeSortFromBuild("NEUTRE",r))})("contextmenu",function(r){let n=a(t).$index,c=i();return r.preventDefault(),l(c.removeSortFromBuild("NEUTRE",n))})("dragover",function(r){a(t);let n=i();return l(n.onDragOver(r))})("drop",function(r){let n=a(t).$index,c=i();return l(c.onDrop(r,"NEUTRE",n))}),d()}if(s&2){let t=o.$implicit,e=i();m("src",t?e.imageService.getSortUrl(t):"sorts/empty-sort.png",x)("draggable",t!==0)}}function X(s,o){if(s&1){let t=v();_(0,"img",15),C("dragstart",function(r){let n=a(t),c=n.$implicit,P=n.$index,I=i();return l(I.onDragStartEquipped(r,c,"PASSIF",P))})("click",function(){let r=a(t).$implicit,n=i();return l(n.selectSortById(r,"PASSIF"))})("dblclick",function(){let r=a(t).$index,n=i();return l(n.removeSortFromBuild("PASSIF",r))})("contextmenu",function(r){let n=a(t).$index,c=i();return r.preventDefault(),l(c.removeSortFromBuild("PASSIF",n))})("dragover",function(r){a(t);let n=i();return l(n.onDragOver(r))})("drop",function(r){let n=a(t).$index,c=i();return l(c.onDrop(r,"PASSIF",n))}),d()}if(s&2){let t=o.$implicit,e=i();m("src",t?e.imageService.getSortUrl(t):"sorts/empty-sort.png",x)("draggable",t!==0)}}function Z(s,o){if(s&1){let t=v();_(0,"img",17),C("dragstart",function(r){let n=a(t).$implicit,c=i(2);return l(c.onDragStart(r,n,"NEUTRE"))})("click",function(){let r=a(t).$implicit,n=i(2);return l(n.selectSort(r,"NEUTRE"))})("dblclick",function(){let r=a(t).$implicit,n=i(2);return l(n.addSortToBuild(r,"NEUTRE"))})("contextmenu",function(r){let n=a(t).$implicit,c=i(2);return r.preventDefault(),l(c.addSortToBuild(n,"NEUTRE"))}),d()}if(s&2){let t=o.$implicit,e=i(2);m("src",e.imageService.getSortUrl(t.gfxId),x)("matTooltip",e.getSortName(t))}}function tt(s,o){if(s&1){let t=v();_(0,"img",17),C("dragstart",function(r){let n=a(t).$implicit,c=i(2);return l(c.onDragStart(r,n,"NEUTRE"))})("click",function(){let r=a(t).$implicit,n=i(2);return l(n.selectSort(r,"NEUTRE"))})("dblclick",function(){let r=a(t).$implicit,n=i(2);return l(n.addSortToBuild(r,"NEUTRE"))})("contextmenu",function(r){let n=a(t).$implicit,c=i(2);return r.preventDefault(),l(c.addSortToBuild(n,"NEUTRE"))}),d()}if(s&2){let t=o.$implicit,e=i(2);m("src",e.imageService.getSortUrl(t.gfxId),x)("matTooltip",e.getSortName(t))}}function et(s,o){if(s&1){let t=v();_(0,"img",17),C("dragstart",function(r){let n=a(t).$implicit,c=i(2);return l(c.onDragStart(r,n,"NEUTRE"))})("click",function(){let r=a(t).$implicit,n=i(2);return l(n.selectSort(r,"NEUTRE"))})("dblclick",function(){let r=a(t).$implicit,n=i(2);return l(n.addSortToBuild(r,"NEUTRE"))})("contextmenu",function(r){let n=a(t).$implicit,c=i(2);return r.preventDefault(),l(c.addSortToBuild(n,"NEUTRE"))}),d()}if(s&2){let t=o.$implicit,e=i(2);m("src",e.imageService.getSortUrl(t.gfxId),x)("matTooltip",e.getSortName(t))}}function rt(s,o){if(s&1){let t=v();_(0,"img",17),C("dragstart",function(r){let n=a(t).$implicit,c=i(2);return l(c.onDragStart(r,n,"NEUTRE"))})("click",function(){let r=a(t).$implicit,n=i(2);return l(n.selectSort(r,"NEUTRE"))})("dblclick",function(){let r=a(t).$implicit,n=i(2);return l(n.addSortToBuild(r,"NEUTRE"))})("contextmenu",function(r){let n=a(t).$implicit,c=i(2);return r.preventDefault(),l(c.addSortToBuild(n,"NEUTRE"))}),d()}if(s&2){let t=o.$implicit,e=i(2);m("src",e.imageService.getSortUrl(t.gfxId),x)("matTooltip",e.getSortName(t))}}function nt(s,o){if(s&1&&(f(0,Z,1,2,"img",16,M),f(2,tt,1,2,"img",16,M),f(4,et,1,2,"img",16,M),f(6,rt,1,2,"img",16,M)),s&2){let t=i();T(t.sortService.sortsClasse().sortElementaires.feu),p(2),T(t.sortService.sortsClasse().sortElementaires.eau),p(2),T(t.sortService.sortsClasse().sortElementaires.terre),p(2),T(t.sortService.sortsClasse().sortElementaires.air)}}function ot(s,o){if(s&1){let t=v();_(0,"img",17),C("dragstart",function(r){let n=a(t).$implicit,c=i(2);return l(c.onDragStart(r,n,"NEUTRE"))})("click",function(){let r=a(t).$implicit,n=i(2);return l(n.selectSort(r,"NEUTRE"))})("dblclick",function(){let r=a(t).$implicit,n=i(2);return l(n.addSortToBuild(r,"NEUTRE"))})("contextmenu",function(r){let n=a(t).$implicit,c=i(2);return r.preventDefault(),l(c.addSortToBuild(n,"NEUTRE"))}),d()}if(s&2){let t=o.$implicit,e=i(2);m("src",e.imageService.getSortUrl(t.gfxId),x)("matTooltip",e.getSortName(t))}}function it(s,o){if(s&1&&f(0,ot,1,2,"img",16,M),s&2){let t=i();T(t.sortService.sortsClasse().sortActifs)}}function st(s,o){if(s&1){let t=v();_(0,"img",17),C("dragstart",function(r){let n=a(t).$implicit,c=i(2);return l(c.onDragStart(r,n,"PASSIF"))})("click",function(){let r=a(t).$implicit,n=i(2);return l(n.selectSort(r,"PASSIF"))})("dblclick",function(){let r=a(t).$implicit,n=i(2);return l(n.addSortToBuild(r,"PASSIF"))})("contextmenu",function(r){let n=a(t).$implicit,c=i(2);return r.preventDefault(),l(c.addSortToBuild(n,"PASSIF"))}),d()}if(s&2){let t=o.$implicit,e=i(2);m("src",e.imageService.getSortUrl(t.gfxId),x)("matTooltip",e.getSortName(t))}}function ct(s,o){if(s&1&&f(0,st,1,2,"img",16,M),s&2){let t=i();T(t.sortService.sortsClasse().sortPassifs)}}var h=class s{translateService=E(A);classeFormService=E(Y);sortService=E(H);imageService=E(j);sortFormService=E(G);sortSelected=$(void 0);typeSortSelected=$(void 0);codeBuild=D(this.sortFormService.codeBuild$,{initialValue:""});currentDragSource=null;sortNeutres=D(this.sortFormService.sortNeutres$,{initialValue:[]});sortPassifs=D(this.sortFormService.sortPassifs$,{initialValue:[]});constructor(){this.classeFormService.classe$.subscribe(o=>{o&&(this.sortSelected.set(void 0),this.typeSortSelected.set(void 0))})}selectSort(o,t){this.sortSelected.set(o),this.typeSortSelected.set(t)}selectSortById(o,t){if(t==="NEUTRE"){let e=this.sortService.getDescriptionSortElementaireById(o)||this.sortService.getDescriptionSortActifById(o);e&&(this.sortSelected.set(e),this.typeSortSelected.set("NEUTRE"))}else{let e=this.sortService.getDescriptionSortPassifById(o);e&&(this.sortSelected.set(e),this.typeSortSelected.set("PASSIF"))}}copyToClipboards(){navigator.clipboard.writeText(this.codeBuild()).then()}getSortName(o){return o.name[this.translateService.currentLang]}getSortDescription(o){return o.description[this.translateService.currentLang]}addSortToBuild(o,t){t==="NEUTRE"?this.sortFormService.addSortNeutre(o.gfxId):t==="PASSIF"&&this.sortFormService.addSortPassif(o.gfxId)}removeSortFromBuild(o,t){o==="NEUTRE"?this.sortFormService.removeSortNeutreAt(t):o==="PASSIF"&&this.sortFormService.removeSortPassifAt(t)}onDragStart(o,t,e){this.currentDragSource="list",o.dataTransfer&&(o.dataTransfer.effectAllowed="copy",o.dataTransfer.setData("sortId",t.gfxId.toString()),o.dataTransfer.setData("typeSort",e),o.dataTransfer.setData("source","list"))}onDragStartEquipped(o,t,e,r){if(t===0){o.preventDefault();return}this.currentDragSource="equipped",o.dataTransfer&&(o.dataTransfer.effectAllowed="move",o.dataTransfer.setData("sortId",t.toString()),o.dataTransfer.setData("typeSort",e),o.dataTransfer.setData("source","equipped"),o.dataTransfer.setData("sourceIndex",r.toString()))}onDragOver(o){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.currentDragSource==="equipped"?"move":"copy")}onDrop(o,t,e){if(o.preventDefault(),o.dataTransfer){let r=parseInt(o.dataTransfer.getData("sortId"),10),n=o.dataTransfer.getData("typeSort"),c=o.dataTransfer.getData("source");if(n===t)if(c==="equipped"){let P=parseInt(o.dataTransfer.getData("sourceIndex"),10);t==="NEUTRE"?this.sortFormService.swapSortNeutre(P,e):t==="PASSIF"&&this.sortFormService.swapSortPassif(P,e)}else t==="NEUTRE"?this.sortFormService.addSortNeutreAt(e,r):t==="PASSIF"&&this.sortFormService.addSortPassifAt(e,r)}this.currentDragSource=null}static \u0275fac=function(t){return new(t||s)};static \u0275cmp=V({type:s,selectors:[["app-sorts"]],decls:56,vars:40,consts:[[1,"code-aptitudes"],["readonly","",3,"value"],["aria-hidden","false","fontIcon","file_copy",3,"click","matTooltip","matTooltipShowDelay"],[1,"body"],[1,"column"],[1,"card"],[1,"header"],[1,"sorts-neutres"],["alt","",3,"src","draggable"],[1,"sorts-passifs"],[1,"description-sort"],[1,"sort-title"],["alt","",3,"src"],[1,"description"],[1,"sorts-elementaires"],["alt","",3,"dragstart","click","dblclick","contextmenu","dragover","drop","src","draggable"],["alt","","draggable","true",3,"src","matTooltip"],["alt","","draggable","true",3,"dragstart","click","dblclick","contextmenu","src","matTooltip"]],template:function(t,e){t&1&&(_(0,"div",0),g(1),u(2,"translate"),b(3,"input",1),_(4,"mat-icon",2),u(5,"translate"),C("click",function(){return e.copyToClipboards()}),d()(),_(6,"div",3)(7,"div",4)(8,"div",5)(9,"div",6),g(10),u(11,"translate"),d(),_(12,"span"),g(13),u(14,"translate"),d(),_(15,"div",7),f(16,W,1,2,"img",8,N),d(),_(18,"span"),g(19),u(20,"translate"),d(),_(21,"div",9),f(22,X,1,2,"img",8,N),d()(),_(24,"div",5)(25,"div",6),g(26),u(27,"translate"),d(),_(28,"div",10)(29,"div",11),b(30,"img",12),_(31,"span"),g(32),u(33,"translate"),d()(),_(34,"div",13),g(35),d()()()(),_(36,"div",4)(37,"div",5)(38,"div",6),g(39),u(40,"translate"),d(),_(41,"span"),g(42),u(43,"translate"),d(),_(44,"div",14),F(45,nt,8,0),d(),_(46,"span"),g(47),u(48,"translate"),d(),_(49,"div",9),F(50,it,2,0),d(),_(51,"span"),g(52),u(53,"translate"),d(),_(54,"div",9),F(55,ct,2,0),d()()()()),t&2&&(p(),y(" ",S(2,18,"sorts.code-deck")," : "),p(2),m("value",e.codeBuild()),p(),m("matTooltip",S(5,20,"sorts.copy-code"))("matTooltipShowDelay",300),p(6),y(" ",S(11,22,"sorts.sorts-equipes")," "),p(3),w(S(14,24,"sorts.sorts-neutres")),p(3),T(e.sortNeutres()),p(3),w(S(20,26,"sorts.passifs")),p(3),T(e.sortPassifs()),p(4),y(" ",S(27,28,"sorts.sort-selectionne")," "),p(4),m("src",e.sortSelected()?e.imageService.getSortUrl(e.sortSelected().gfxId):"sorts/empty-sort.png",x),p(2),y(" ",e.sortSelected()?e.getSortName(e.sortSelected()):S(33,30,"sorts.no-sort-selectionne")),p(3),w(e.sortSelected()?e.getSortDescription(e.sortSelected()):""),p(4),y(" ",S(40,32,"sorts.sorts-classe")," "),p(3),w(S(43,34,"sorts.sorts-elementaires")),p(3),O(e.sortService.sortsClasse()!==void 0?45:-1),p(2),w(S(48,36,"sorts.sorts-neutres")),p(3),O(e.sortService.sortsClasse()!==void 0?50:-1),p(2),w(S(53,38,"sorts.passifs")),p(3),O(e.sortService.sortsClasse()!==void 0?55:-1))},dependencies:[q,k,U,R,B,L,z],styles:[".code-aptitudes[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-around;margin-bottom:20px;padding:5px 0;color:#fff;width:90%;margin-left:5%;background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px}.code-aptitudes[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin-left:10px;width:50%;border:2px solid #415A77;border-radius:5px;padding:5px;font-size:16px}.code-aptitudes[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#dfe0e1;color:#1b263b;width:30px;height:30px;text-align:center;align-content:center;cursor:pointer;border-radius:25%;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;margin-left:5px}.code-aptitudes[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:active{background-color:#1b263b;color:#dfe0e1;transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #dfe0e1}.body[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;width:97%;margin:auto}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:48%}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100%;background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;min-width:300px;height:fit-content;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative;margin-bottom:15px}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-bottom:3px solid #415A77;margin-bottom:10px;padding:5px 0}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;margin:10px 0}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;cursor:pointer}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .description-sort[_ngcontent-%COMP%]{margin:0 5%}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .description-sort[_ngcontent-%COMP%]   .sort-title[_ngcontent-%COMP%]{display:flex}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .description-sort[_ngcontent-%COMP%]   .sort-title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .description-sort[_ngcontent-%COMP%]   .sort-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:auto 0}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .description-sort[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin-left:66px;font-size:12px}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sorts-neutres[_ngcontent-%COMP%], .body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sorts-passifs[_ngcontent-%COMP%], .body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sorts-elementaires[_ngcontent-%COMP%]{margin:0 5%;display:grid;justify-items:center;grid-template-columns:repeat(6,1fr);grid-template-rows:repeat(2,1fr);grid-column-gap:2px;grid-row-gap:5px}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sorts-passifs[_ngcontent-%COMP%]{grid-template-rows:repeat(1,1fr);margin-bottom:10px}.body[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .sorts-elementaires[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}"]})};var J=class s{static \u0275fac=function(t){return new(t||s)};static \u0275cmp=V({type:s,selectors:[["app-sorts-router"]],decls:1,vars:0,template:function(t,e){t&1&&b(0,"app-sorts")},dependencies:[h],styles:["[_nghost-%COMP%]{display:flex;margin-top:10px}[_nghost-%COMP%]   app-sorts[_ngcontent-%COMP%]{width:100%}"]})};export{J as SortsRouterComponent};
