import{Ad as u,H as o,L as A,d as m,id as E,md as T,od as t,zd as I}from"./chunk-55AHIQTK.js";var c=class e extends I{static DEFAULT_VALUE=0;urlServices=A(u);recapStat=new m([]);recapStat$=this.recapStat.asObservable();keyEnum="KEY_APTITUDES";mapCode=new Map([[1,-7],[16,80],[17,-2],[27,-4],[36,-3],[23,120],[26,1052],[30,1053],[31,20],[18,173],[19,175],[20,171],[21,-5],[37,177],[9,150],[10,875],[11,149],[12,180],[13,1055],[14,26],[15,71],[34,988],[2,31],[3,41],[4,160],[5,191],[6,184],[8,-6],[35,35]]);form=new T({percentagePV:new t(e.DEFAULT_VALUE,{nonNullable:!0}),resistancesElementaires:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(10)]}),barriere:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(10)]}),soinsRecus:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(5)]}),pdvArmure:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(10)]}),maitriseElem:new t(e.DEFAULT_VALUE,{nonNullable:!0}),maitrisesMelee:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(40)]}),maitrisesDistance:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(40)]}),pdv:new t(e.DEFAULT_VALUE,{nonNullable:!0}),tacle:new t(e.DEFAULT_VALUE,{nonNullable:!0}),esquive:new t(e.DEFAULT_VALUE,{nonNullable:!0}),initiative:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),tacleEsquive:new t(e.DEFAULT_VALUE,{nonNullable:!0}),volonte:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),percentageCC:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),parade:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),maitriseCritique:new t(e.DEFAULT_VALUE,{nonNullable:!0}),maitriseDos:new t(e.DEFAULT_VALUE,{nonNullable:!0}),maitriseBerzerk:new t(e.DEFAULT_VALUE,{nonNullable:!0}),maitriseSoins:new t(e.DEFAULT_VALUE,{nonNullable:!0}),resistancesDos:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),resistancesCritique:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),pa:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),pm:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),po:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),pw:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),controle:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),di:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),resistancesElementairesMajeur:new t(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]})});constructor(){super();let r=this.urlServices.getAptitudesFromUrl();this.init(),r!==void 0&&this.decodeFromUrl(r)}decodeFromUrl(r){let a=r.split("-"),i={};a.forEach(l=>{let[U,p]=l.split(":"),L=parseInt(U,10),s=parseInt(p,10),n=this.mapCode.get(L);if(n!==void 0)switch(n){case-7:i.percentagePV=s;break;case 80:i.resistancesElementaires=s;break;case-2:i.barriere=s;break;case-4:i.soinsRecus=s;break;case-3:i.pdvArmure=s;break;case 120:i.maitriseElem=s;break;case 1052:i.maitrisesMelee=s;break;case 1053:i.maitrisesDistance=s;break;case 20:i.pdv=s;break;case 173:i.tacle=s;break;case 175:i.esquive=s;break;case 171:i.initiative=s;break;case-5:i.tacleEsquive=s;break;case 177:i.volonte=s;break;case 150:i.percentageCC=s;break;case 875:i.parade=s;break;case 149:i.maitriseCritique=s;break;case 180:i.maitriseDos=s;break;case 1055:i.maitriseBerzerk=s;break;case 26:i.maitriseSoins=s;break;case 71:i.resistancesDos=s;break;case 988:i.resistancesCritique=s;break;case 31:i.pa=s;break;case 41:i.pm=s;break;case 160:i.po=s;break;case 191:i.pw=s;break;case 184:i.controle=s;break;case-6:i.di=s;break;case 35:i.resistancesElementairesMajeur=s;break}}),this.setValue(i)}resetIntelligence(){this.form.patchValue({percentagePV:e.DEFAULT_VALUE,resistancesElementaires:e.DEFAULT_VALUE,barriere:e.DEFAULT_VALUE,soinsRecus:e.DEFAULT_VALUE,pdvArmure:e.DEFAULT_VALUE})}resetForce(){this.form.patchValue({maitriseElem:e.DEFAULT_VALUE,maitrisesMelee:e.DEFAULT_VALUE,maitrisesDistance:e.DEFAULT_VALUE,pdv:e.DEFAULT_VALUE})}resetAgilite(){this.form.patchValue({tacle:e.DEFAULT_VALUE,esquive:e.DEFAULT_VALUE,initiative:e.DEFAULT_VALUE,tacleEsquive:e.DEFAULT_VALUE,volonte:e.DEFAULT_VALUE})}resetChance(){this.form.patchValue({percentageCC:e.DEFAULT_VALUE,parade:e.DEFAULT_VALUE,maitriseCritique:e.DEFAULT_VALUE,maitriseDos:e.DEFAULT_VALUE,maitriseBerzerk:e.DEFAULT_VALUE,maitriseSoins:e.DEFAULT_VALUE,resistancesDos:e.DEFAULT_VALUE,resistancesCritique:e.DEFAULT_VALUE})}resetMajeur(){this.form.patchValue({pa:e.DEFAULT_VALUE,pm:e.DEFAULT_VALUE,po:e.DEFAULT_VALUE,pw:e.DEFAULT_VALUE,controle:e.DEFAULT_VALUE,di:e.DEFAULT_VALUE,resistancesElementairesMajeur:e.DEFAULT_VALUE})}nbPointUseInIntelligence(){return Number.parseInt(`${this.form.value.percentagePV}`)+Number.parseInt(`${this.form.value.resistancesElementaires}`)+Number.parseInt(`${this.form.value.barriere}`)+Number.parseInt(`${this.form.value.soinsRecus}`)+Number.parseInt(`${this.form.value.pdvArmure}`)}nbPointUseInForce(){return Number.parseInt(`${this.form.value.maitriseElem}`)+Number.parseInt(`${this.form.value.maitrisesMelee}`)+Number.parseInt(`${this.form.value.maitrisesDistance}`)+Number.parseInt(`${this.form.value.pdv}`)}nbPointUseInAgilite(){return Number.parseInt(`${this.form.value.tacle}`)+Number.parseInt(`${this.form.value.esquive}`)+Number.parseInt(`${this.form.value.initiative}`)+Number.parseInt(`${this.form.value.tacleEsquive}`)+Number.parseInt(`${this.form.value.volonte}`)}nbPointUseInChance(){return Number.parseInt(`${this.form.value.percentageCC}`)+Number.parseInt(`${this.form.value.parade}`)+Number.parseInt(`${this.form.value.maitriseCritique}`)+Number.parseInt(`${this.form.value.maitriseDos}`)+Number.parseInt(`${this.form.value.maitriseBerzerk}`)+Number.parseInt(`${this.form.value.maitriseSoins}`)+Number.parseInt(`${this.form.value.resistancesDos}`)+Number.parseInt(`${this.form.value.resistancesCritique}`)}nbPointUseInMajeur(){return Number.parseInt(`${this.form.value.pa}`)+Number.parseInt(`${this.form.value.pm}`)+Number.parseInt(`${this.form.value.po}`)+Number.parseInt(`${this.form.value.pw}`)+Number.parseInt(`${this.form.value.controle}`)+Number.parseInt(`${this.form.value.di}`)+Number.parseInt(`${this.form.value.resistancesElementairesMajeur}`)}handleChanges(r){let a=[{id:-7,value:4*r.percentagePV,params:[]},{id:80,value:10*r.resistancesElementaires,params:[]},{id:120,value:5*r.maitriseElem,params:[]},{id:1052,value:8*r.maitrisesMelee,params:[]},{id:1053,value:8*r.maitrisesDistance,params:[]},{id:20,value:20*r.pdv,params:[]},{id:173,value:6*r.tacle,params:[]},{id:175,value:6*r.esquive,params:[]},{id:171,value:4*r.initiative,params:[]},{id:177,value:r.volonte,params:[]},{id:150,value:r.percentageCC,params:[]},{id:875,value:r.parade,params:[]},{id:149,value:4*r.maitriseCritique,params:[]},{id:180,value:6*r.maitriseDos,params:[]},{id:1055,value:8*r.maitriseBerzerk,params:[]},{id:26,value:6*r.maitriseSoins,params:[]},{id:71,value:4*r.resistancesDos,params:[]},{id:988,value:4*r.resistancesCritique,params:[]},{id:31,value:r.pa,params:[]},{id:193,value:2*r.pw,params:[]},{id:-6,value:10*r.di,params:[]}];r.resistancesElementairesMajeur>0&&a.push({id:35,value:50,params:[]}),r.tacleEsquive>0&&(a.push({id:173,value:4*r.tacleEsquive,params:[]}),a.push({id:175,value:4*r.tacleEsquive,params:[]})),r.pm>0&&(a.push({id:41,value:r.pm,params:[]}),a.push({id:120,value:20,params:[]})),r.po>0&&(a.push({id:160,value:r.po,params:[]}),a.push({id:120,value:40,params:[]})),r.controle>0&&(a.push({id:184,value:2,params:[]}),a.push({id:120,value:40,params:[]})),this.recapStat.next(a)}setValue(r){this.form.setValue({percentagePV:r?.percentagePV??e.DEFAULT_VALUE,resistancesElementaires:r?.resistancesElementaires??e.DEFAULT_VALUE,barriere:r?.barriere??e.DEFAULT_VALUE,soinsRecus:r?.soinsRecus??e.DEFAULT_VALUE,pdvArmure:r?.pdvArmure??e.DEFAULT_VALUE,maitriseElem:r?.maitriseElem??e.DEFAULT_VALUE,maitrisesMelee:r?.maitrisesMelee??e.DEFAULT_VALUE,maitrisesDistance:r?.maitrisesDistance??e.DEFAULT_VALUE,pdv:r?.pdv??e.DEFAULT_VALUE,tacle:r?.tacle??e.DEFAULT_VALUE,esquive:r?.esquive??e.DEFAULT_VALUE,initiative:r?.initiative??e.DEFAULT_VALUE,tacleEsquive:r?.tacleEsquive??e.DEFAULT_VALUE,volonte:r?.volonte??e.DEFAULT_VALUE,percentageCC:r?.percentageCC??e.DEFAULT_VALUE,parade:r?.parade??e.DEFAULT_VALUE,maitriseCritique:r?.maitriseCritique??e.DEFAULT_VALUE,maitriseDos:r?.maitriseDos??e.DEFAULT_VALUE,maitriseBerzerk:r?.maitriseBerzerk??e.DEFAULT_VALUE,maitriseSoins:r?.maitriseSoins??e.DEFAULT_VALUE,resistancesDos:r?.resistancesDos??e.DEFAULT_VALUE,resistancesCritique:r?.resistancesCritique??e.DEFAULT_VALUE,pa:r?.pa??e.DEFAULT_VALUE,pm:r?.pm??e.DEFAULT_VALUE,po:r?.po??e.DEFAULT_VALUE,pw:r?.pw??e.DEFAULT_VALUE,controle:r?.controle??e.DEFAULT_VALUE,di:r?.di??e.DEFAULT_VALUE,resistancesElementairesMajeur:r?.resistancesElementairesMajeur??e.DEFAULT_VALUE})}setDefaultValue(){this.form.setValue({percentagePV:e.DEFAULT_VALUE,resistancesElementaires:e.DEFAULT_VALUE,barriere:e.DEFAULT_VALUE,soinsRecus:e.DEFAULT_VALUE,pdvArmure:e.DEFAULT_VALUE,maitriseElem:e.DEFAULT_VALUE,maitrisesMelee:e.DEFAULT_VALUE,maitrisesDistance:e.DEFAULT_VALUE,pdv:e.DEFAULT_VALUE,tacle:e.DEFAULT_VALUE,esquive:e.DEFAULT_VALUE,initiative:e.DEFAULT_VALUE,tacleEsquive:e.DEFAULT_VALUE,volonte:e.DEFAULT_VALUE,percentageCC:e.DEFAULT_VALUE,parade:e.DEFAULT_VALUE,maitriseCritique:e.DEFAULT_VALUE,maitriseDos:e.DEFAULT_VALUE,maitriseBerzerk:e.DEFAULT_VALUE,maitriseSoins:e.DEFAULT_VALUE,resistancesDos:e.DEFAULT_VALUE,resistancesCritique:e.DEFAULT_VALUE,pa:e.DEFAULT_VALUE,pm:e.DEFAULT_VALUE,po:e.DEFAULT_VALUE,pw:e.DEFAULT_VALUE,controle:e.DEFAULT_VALUE,di:e.DEFAULT_VALUE,resistancesElementairesMajeur:e.DEFAULT_VALUE})}static \u0275fac=function(a){return new(a||e)};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})};var S=class e{aptitudesFormService=A(c);urlServices=A(u);code=new m("");code$=this.code.asObservable();mapCode=new Map([[1,-7],[16,80],[17,-2],[27,-4],[36,-3],[23,120],[26,1052],[30,1053],[31,20],[18,173],[19,175],[20,171],[21,-5],[37,177],[9,150],[10,875],[11,149],[12,180],[13,1055],[14,26],[15,71],[34,988],[2,31],[3,41],[4,160],[5,191],[6,184],[8,-6],[35,35]]);constructor(){this.aptitudesFormService.recapStat$.subscribe(()=>{this.updateCode()})}updateCode(){let r="",a=this.aptitudesFormService.form.value;if(!a){this.code.next("");return}a.percentagePV&&(r+=`1:${a.percentagePV}-`),a.resistancesElementaires&&(r+=`16:${a.resistancesElementaires}-`),a.barriere&&(r+=`17:${a.barriere}-`),a.soinsRecus&&(r+=`27:${a.soinsRecus}-`),a.pdvArmure&&(r+=`36:${a.pdvArmure}-`),a.maitriseElem&&(r+=`23:${a.maitriseElem}-`),a.maitrisesMelee&&(r+=`26:${a.maitrisesMelee}-`),a.maitrisesDistance&&(r+=`30:${a.maitrisesDistance}-`),a.pdv&&(r+=`31:${a.pdv}-`),a.tacle&&(r+=`18:${a.tacle}-`),a.esquive&&(r+=`19:${a.esquive}-`),a.initiative&&(r+=`20:${a.initiative}-`),a.tacleEsquive&&(r+=`21:${a.tacleEsquive}-`),a.volonte&&(r+=`37:${a.volonte}-`),a.percentageCC&&(r+=`9:${a.percentageCC}-`),a.parade&&(r+=`10:${a.parade}-`),a.maitriseCritique&&(r+=`11:${a.maitriseCritique}-`),a.maitriseDos&&(r+=`12:${a.maitriseDos}-`),a.maitriseBerzerk&&(r+=`13:${a.maitriseBerzerk}-`),a.maitriseSoins&&(r+=`14:${a.maitriseSoins}-`),a.resistancesDos&&(r+=`15:${a.resistancesDos}-`),a.resistancesCritique&&(r+=`34:${a.resistancesCritique}-`),a.pa&&(r+=`2:${a.pa}-`),a.pm&&(r+=`3:${a.pm}-`),a.po&&(r+=`4:${a.po}-`),a.pw&&(r+=`5:${a.pw}-`),a.controle&&(r+=`6:${a.controle}-`),a.di&&(r+=`8:${a.di}-`),a.resistancesElementairesMajeur&&(r+=`35:${a.resistancesElementairesMajeur}-`),r.endsWith("-")&&(r=r.slice(0,-1)),this.urlServices.setAptitudesInUrl(r),this.code.next(r)}saveCode(r){let a=r.split("-"),i={};a.forEach(l=>{let[U,p]=l.split(":"),L=parseInt(U,10),s=parseInt(p,10),n=this.mapCode.get(L);if(n!==void 0)switch(n){case-7:i.percentagePV=s;break;case 80:i.resistancesElementaires=s;break;case-2:i.barriere=s;break;case-4:i.soinsRecus=s;break;case-3:i.pdvArmure=s;break;case 120:i.maitriseElem=s;break;case 1052:i.maitrisesMelee=s;break;case 1053:i.maitrisesDistance=s;break;case 20:i.pdv=s;break;case 173:i.tacle=s;break;case 175:i.esquive=s;break;case 171:i.initiative=s;break;case-5:i.tacleEsquive=s;break;case 177:i.volonte=s;break;case 150:i.percentageCC=s;break;case 875:i.parade=s;break;case 149:i.maitriseCritique=s;break;case 180:i.maitriseDos=s;break;case 1055:i.maitriseBerzerk=s;break;case 26:i.maitriseSoins=s;break;case 71:i.resistancesDos=s;break;case 988:i.resistancesCritique=s;break;case 31:i.pa=s;break;case 41:i.pm=s;break;case 160:i.po=s;break;case 191:i.pw=s;break;case 184:i.controle=s;break;case-6:i.di=s;break;case 35:i.resistancesElementairesMajeur=s;break}}),this.aptitudesFormService.setValue(i)}static \u0275fac=function(a){return new(a||e)};static \u0275prov=o({token:e,factory:e.\u0275fac,providedIn:"root"})};export{c as a,S as b};
