<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<!-- eslint-disable @angular-eslint/template/click-events-have-key-events -->
 <div class="container" 
    [style.cursor]="effectToApply() ? 'url(cursor/' + imageService.getChasseColorUrl(effectToApply()!.chasse) + ') 16 16, auto' : 'default'">
    @if (chasses()) {
        <div class="column">
            <div class="card">
                <div class="header">
                    <span>{{ 'enchantement.chasses' | translate }}</span>
                    <button (click)="chasseFormService.setDefaultValue()">X</button>
                </div>
                <div class="body">
                        @for (chasse of chasses(); track $index) {
                            @let indexParent = $index;
                            <div class="group-item-chasses">
                                <app-image-item
                                    [itemType]="displayTypeItem[$index].itemType" 
                                    [indexItem]="displayTypeItem[$index].indexItem"
                                    [backgroundItemType]="displayTypeItem[$index].background"
                                    (click)="selectItemType(displayTypeItem[$index].itemType)"
                                ></app-image-item>
                                @for (c of chasse.chasses; track $index) {
                                    <div class="container-image"
                                        (click)="applyEffet($index, indexParent)"
                                        (contextmenu)="$event.preventDefault(); changeJokerState($index, indexParent);"
                                        [style.cursor]="cursorDestructStyle(c, effectToApply())"
                                        >
                                        <img [src]="imageService.getChasseColorUrl(c)" [alt]="">
                                        @if(c.idAction) {
                                            <img class="action-image" [src]="imageService.getActionIdUrl(c.idAction)" [alt]="">
                                        }
                                    </div>
                                }
                                <button class="delete" (click)="chasseFormService.clearChasseCombinaison(indexParent)">X</button>
                            </div>
                        }
                </div>
            </div>
        </div>

        <div class="column">
            <div class="card">
                <div class="header">
                    {{ 'enchantement.effets' | translate }}
                </div>
                <div class="body">
                    @for(effet of effetsDescription; track $index) {
                        <button class="effets-description" (click)="chooseEffet(effet)" [class.selected]="effectToApply() && effectToApply()?.id === effet.id"
                            [class.double]="effectIsDouble(effet)">
                            <img [src]="imageService.getChasseColorUrl(effet.chasse)" [alt]="">
                            <span>{{ effet.libelle | translate }}</span>
                            <div class="logos">
                                @for(logo of effet.logos; track $index) {
                                    <img [src]="itemTypeService.getLogo(logo)" [alt]="">
                                }
                            </div>
                        </button>
                    }
                </div>
            </div>
        </div>
    }
</div>