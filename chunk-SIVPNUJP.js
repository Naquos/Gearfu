import{c as P}from"./chunk-MSGFVUGO.js";import{$ as R,Cd as p,Dd as f,I as n,M as o,Xb as L,ca as T,d as l,gb as _,la as U,ma as v,pd as O,ra as b,rd as c,v as N}from"./chunk-5GHXMGLA.js";var y=class r{constructor(e,t){this.el=e;this.renderer=t}isLoading=!0;loadListener;errorListener;platformId=o(T);ngOnInit(){if(!L(this.platformId))return;this.el.nativeElement.getAttribute("loading")||this.renderer.setAttribute(this.el.nativeElement,"loading","lazy"),this.injectStyles(),this.loadListener=this.renderer.listen(this.el.nativeElement,"load",()=>{this.isLoading=!1}),this.errorListener=this.renderer.listen(this.el.nativeElement,"error",()=>{this.isLoading=!1}),this.el.nativeElement.complete&&this.el.nativeElement.naturalHeight!==0&&(this.isLoading=!1)}injectStyles(){let e="lazy-image-styles";if(document.getElementById(e))return;let t=this.renderer.createElement("style");this.renderer.setAttribute(t,"id",e),this.renderer.setAttribute(t,"type","text/css");let a=this.renderer.createText(`
      img.lazy-loading {
        background-color: rgba(255, 255, 255, 0.1) !important;
        animation: lazy-pulse 1.5s ease-in-out infinite;
      }

      img.lazy-loaded {
        background-color: transparent !important;
        animation: none;
      }

      @keyframes lazy-pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
    `);this.renderer.appendChild(t,a),this.renderer.appendChild(document.head,t)}ngOnDestroy(){this.loadListener&&this.loadListener(),this.errorListener&&this.errorListener()}static \u0275fac=function(t){return new(t||r)(v(R),v(U))};static \u0275dir=b({type:r,selectors:[["img"]],hostVars:4,hostBindings:function(t,s){t&2&&_("lazy-loading",s.isLoading)("lazy-loaded",!s.isLoading)}})};var g=(i=>(i[i.Feca=1]="Feca",i[i.Osamodas=2]="Osamodas",i[i.Enutrof=3]="Enutrof",i[i.Sram=4]="Sram",i[i.Xelor=5]="Xelor",i[i.Ecaflip=6]="Ecaflip",i[i.Eniripsa=7]="Eniripsa",i[i.Iop=8]="Iop",i[i.Cra=9]="Cra",i[i.Sadida=10]="Sadida",i[i.Sacrieur=11]="Sacrieur",i[i.Pandawa=12]="Pandawa",i[i.Roublard=13]="Roublard",i[i.Zobal=14]="Zobal",i[i.Ouginak=15]="Ouginak",i[i.Steamer=16]="Steamer",i[i.Eliotrope=18]="Eliotrope",i[i.Huppermage=19]="Huppermage",i))(g||{});var A=class r extends p{static DEFAULT_VALUE=7;urlServices=o(f);classe=new l(r.DEFAULT_VALUE);classe$=this.classe.asObservable();keyEnum="KEY_CLASSE";form=new c(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super();let e=this.urlServices.getClasseFromUrl();this.init(),e!==void 0&&this.setValue(e)}handleChanges(e){this.classe.next(e),this.urlServices.setClasseInUrl(e)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}getValue(){return this.classe.getValue()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};var F=class r extends p{classeFormService=o(A);urlServices=o(f);levelFormService=o(P);static DEFAULT_SORT_NEUTRE=[0,0,0,0,0,0,0,0,0,0,0,0];static DEFAULT_SORT_PASSIF=[0,0,0,0,0,0];sortNeutres=new l(r.DEFAULT_SORT_NEUTRE);sortNeutres$=this.sortNeutres.asObservable();sortPassifs=new l(r.DEFAULT_SORT_PASSIF);sortPassifs$=this.sortPassifs.asObservable();codeBuild=new l("");codeBuild$=this.codeBuild.asObservable();firstLoad=!0;unlockedEmplacementSortNeutre=[0,0,0,0,0,0,10,20,30,40,60,80];unlockedEmplacementSortPassif=[10,30,50,100,150,200];keyEnum="KEY_SORT";form=new O({sortNeutres:new c(r.DEFAULT_SORT_NEUTRE,{nonNullable:!0}),sortPassifs:new c(r.DEFAULT_SORT_PASSIF,{nonNullable:!0})});constructor(){super();let e=this.urlServices.getSortsFromUrl();this.init(),this.classeFormService.classe$.pipe(N()).subscribe(()=>{this.firstLoad?e&&this.decodeAndSaveCodeBuild(e):this.setDefaultValue(),this.firstLoad=!1})}handleChanges(e){this.sortNeutres.next(e.sortNeutres??r.DEFAULT_SORT_NEUTRE),this.sortPassifs.next(e.sortPassifs??r.DEFAULT_SORT_PASSIF);let t=this.generateCodeBuild(e);this.codeBuild.next(t),this.urlServices.setSortsInUrl(t)}setValue(e){this.form.setValue({sortNeutres:e?.sortNeutres??r.DEFAULT_SORT_NEUTRE,sortPassifs:e?.sortPassifs??r.DEFAULT_SORT_PASSIF})}generateCodeBuild(e){let t=e.sortNeutres?.join("-")||"",s=e.sortPassifs?.join("-")||"";return`${t}-${s}`}decodeAndSaveCodeBuild(e){let t=e.split("-"),s=t.slice(0,12).map(h=>parseInt(h,10)),a=t.slice(12).map(h=>parseInt(h,10));this.setValue({sortNeutres:s,sortPassifs:a})}sortAlreadySet(e){let t=this.sortNeutres.getValue(),s=this.sortPassifs.getValue();return t.includes(e)||s.includes(e)}setDefaultValue(){this.form.setValue({sortNeutres:[...r.DEFAULT_SORT_NEUTRE],sortPassifs:[...r.DEFAULT_SORT_PASSIF]})}addSortNeutreAt(e,t){this.sortAlreadySet(t)&&this.removeSortNeutre(t);let s=this.sortNeutres.getValue();this.unlockedEmplacementSortNeutre[e]>this.levelFormService.getValue()||(s[e]=t,this.form.controls.sortNeutres.setValue(s))}addSortNeutre(e){if(this.sortAlreadySet(e))return;let t=this.sortNeutres.getValue(),s=t.indexOf(0);s!==-1&&this.unlockedEmplacementSortNeutre[s]<=this.levelFormService.getValue()&&(t[s]=e,this.form.controls.sortNeutres.setValue(t))}addSortPassifAt(e,t){if(this.sortAlreadySet(t)&&this.removeSortPassif(t),this.unlockedEmplacementSortPassif[e]>this.levelFormService.getValue())return;let s=this.sortPassifs.getValue();s[e]=t,this.form.controls.sortPassifs.setValue(s)}addSortPassif(e){if(this.sortAlreadySet(e))return;let t=this.sortPassifs.getValue(),s=t.indexOf(0);s!==-1&&this.unlockedEmplacementSortPassif[s]<=this.levelFormService.getValue()&&(t[s]=e,this.form.controls.sortPassifs.setValue(t))}removeSortPassif(e){let t=this.sortPassifs.getValue(),s=t.indexOf(e);s!==-1&&(t[s]=0,this.form.controls.sortPassifs.setValue(t))}removeSortNeutre(e){let t=this.sortNeutres.getValue(),s=t.indexOf(e);s!==-1&&(t[s]=0,this.form.controls.sortNeutres.setValue(t))}removeSortNeutreAt(e){let t=this.sortNeutres.getValue();t[e]=0,this.form.controls.sortNeutres.setValue(t)}removeSortPassifAt(e){let t=this.sortPassifs.getValue();t[e]=0,this.form.controls.sortPassifs.setValue(t)}swapSortNeutre(e,t){let s=[...this.sortNeutres.getValue()],a=s[e];s[e]=s[t],s[t]=a,this.form.controls.sortNeutres.setValue(s)}swapSortPassif(e,t){let s=[...this.sortPassifs.getValue()],a=s[e];s[e]=s[t],s[t]=a,this.form.controls.sortPassifs.setValue(s)}getSortPassifs(){return this.sortPassifs.getValue()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{y as a,g as b,A as c,F as d};
