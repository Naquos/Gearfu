import{d as Y,e as Z}from"./chunk-U6LI7VST.js";import"./chunk-BVS5AE55.js";import"./chunk-CAX3ITWY.js";import"./chunk-DCEU4OT6.js";import{j as ee}from"./chunk-OQCTDUEP.js";import"./chunk-NN4YSAFM.js";import{F as X}from"./chunk-AQTU5F5T.js";import{$a as p,Ab as _,Bb as C,Cb as x,Db as q,Fb as y,Hb as l,Kc as O,Lc as P,Ma as B,Nd as J,Oa as s,Od as K,Pc as G,Rd as Q,Sd as W,Vb as R,Wa as I,X as m,Xb as T,ba as A,bb as U,ca as j,e as L,gc as h,hc as v,ja as N,pb as d,qb as z,rb as f,sa as F,sb as V,tb as H,ub as g,vb as u,wb as M,xa as $,xb as r,yb as a,zb as c}from"./chunk-QGR4IWNQ.js";import"./chunk-25N2FLV6.js";var k=class n{static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-item-skeleton"]],decls:20,vars:0,consts:[[1,"skeleton-item"],[1,"skeleton-header"],[1,"skeleton-box"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-text","skeleton-title-text"],[1,"skeleton-image"],[1,"skeleton-text","skeleton-weight"],[1,"skeleton-effects"],[1,"skeleton-effect-list"],[1,"skeleton-text"],[1,"skeleton-craft-drop"]],template:function(e,i){e&1&&(_(0,"div",0)(1,"div",1),x(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2),C(),_(6,"div",3)(7,"div",4),x(8,"div",5)(9,"div",6)(10,"div",7),C(),_(11,"div",8)(12,"div",9),x(13,"div",10)(14,"div",10)(15,"div",10)(16,"div",10),C(),_(17,"div",11),x(18,"div",2)(19,"div",2),C()()()())},styles:[".skeleton-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009}.skeleton-header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px;padding:10px;justify-content:space-around}.skeleton-header[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;height:100%}.skeleton-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:30%;gap:10px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-title-text[_ngcontent-%COMP%]{height:24px;width:120px;margin:0 auto}.skeleton-title[_ngcontent-%COMP%]   .skeleton-image[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-weight[_ngcontent-%COMP%]{height:18px;width:100px}.skeleton-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;flex:1}.skeleton-effect-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.skeleton-text[_ngcontent-%COMP%]{height:16px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:4px;width:100%}.skeleton-craft-drop[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-around;margin-top:10px}.skeleton-craft-drop[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}"]})};var E=class n{constructor(t){this.el=t}appIntersect=new N;intersectRoot;observer;ngOnInit(){this.observer=new IntersectionObserver(t=>{t.forEach(e=>{e.isIntersecting&&this.appIntersect.emit()})},{root:this.intersectRoot||null,threshold:.1,rootMargin:"300px"}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(e){return new(e||n)(I(F))};static \u0275dir=U({type:n,selectors:[["","appIntersect",""]],inputs:{intersectRoot:"intersectRoot"},outputs:{appIntersect:"appIntersect"}})};var ie=(n,t)=>t.id;function oe(n,t){n&1&&c(0,"app-item-skeleton")}function re(n,t){if(n&1&&(r(0,"div",1),g(1,oe,1,0,"app-item-skeleton",null,H),a()),n&2){let e=l();s(),u(e.skeletonArray)}}function ae(n,t){if(n&1&&c(0,"app-item",2),n&2){let e=t.$implicit;M("item",e)}}function se(n,t){if(n&1){let e=q();r(0,"div",4,0),y("appIntersect",function(){A(e);let o=l(2);return j(o.onScrollEnd())}),c(2,"app-item-skeleton"),a()}}function pe(n,t){if(n&1&&(r(0,"div",1),g(1,ae,1,1,"app-item",2,ie),d(3,se,3,0,"div",3),a()),n&2){let e=l();s(),u(t),s(2),f(e.currentIndex<e.allItems.length?3:-1)}}var b=class n{itemsService=m(X);skeletonArray=Array(36).fill(0).map((t,e)=>e);displayedItems$=new L([]);allItems=[];itemsPerLoad=36;currentIndex=0;observer;isBrowser;constructor(t){this.isBrowser=G(t)}ngOnInit(){this.itemsService.items$.subscribe(t=>{this.allItems=t,this.currentIndex=0,this.displayedItems$.next([]),this.loadMoreItems(),this.isBrowser&&this.scrollToTop()})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}loadMoreItems(){let t=this.allItems.slice(this.currentIndex,this.currentIndex+this.itemsPerLoad),e=this.displayedItems$.value;this.displayedItems$.next([...e,...t]),this.currentIndex+=this.itemsPerLoad}onScrollEnd(){this.currentIndex<this.allItems.length&&this.loadMoreItems()}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(e){return new(e||n)(I($))};static \u0275cmp=p({type:n,selectors:[["app-item-list"]],decls:3,vars:3,consts:[["loadTrigger",""],[1,"content"],[3,"item"],[1,"load-trigger"],[1,"load-trigger",3,"appIntersect"]],template:function(e,i){if(e&1&&(d(0,re,3,0,"div",1),h(1,"async"),z(2,pe,4,1,"div",1)),e&2){let o;f(i.itemsService.isLoading()?0:(o=v(1,1,i.displayedItems$))?2:-1,o)}},dependencies:[Y,P,k,E,O],styles:["[_nghost-%COMP%]{display:block}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:20px;grid-row-gap:20px}.content[_ngcontent-%COMP%]   app-item[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.load-trigger[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;align-items:center;min-height:250px}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:400px;width:100%}.loader-container[_ngcontent-%COMP%]   .loader-title[_ngcontent-%COMP%]{width:200px;margin-bottom:20px}.loader-container[_ngcontent-%COMP%]   .loader-spinner[_ngcontent-%COMP%]{width:100px;height:100px;padding:10px;background-color:#415a77;border-radius:50%;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (min-width:1700px)and (max-width:2000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (min-width:1450px)and (max-width:1700px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:1450px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media screen and (min-width:701px)and (max-width:1000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})};function ce(n,t){if(n&1&&(r(0,"span"),c(1,"img",2),R(2),a()),n&2){let e=t.$implicit,i=l(2);s(),M("src",i.getEffectPng(e),B),s(),T(" ",i.displayEffect(e)," ")}}function me(n,t){n&1&&(r(0,"div",0),g(1,ce,3,2,"span",null,V),a(),r(3,"div",1),R(4),h(5,"translate"),a()),n&2&&(s(),u(t),s(3),T(" ",v(5,1,"recap-stats.info")," "))}var w=class n{recapStatsService=m(ee);imageService=m(Q);static RESISTANCES_LIST=[82,83,84,85];displayEffect(t){let e=t.value<0?"-":"",i=Math.abs(t.value);if(n.RESISTANCES_LIST.includes(t.id)){let o=Math.floor((1-Math.pow(.8,i/100))*100);return`${e}${o}% (${i})`}return e+i}getEffectPng(t){return this.imageService.getActionIdUrl(t.id,t.id===39&&t.parameterMajorAction===121)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-recap-stats"]],decls:2,vars:3,consts:[[1,"content"],[1,"info"],["alt","aptitudes",3,"src"]],template:function(e,i){if(e&1&&(d(0,me,6,3),h(1,"async")),e&2){let o;f((o=v(1,1,i.recapStatsService.recap$))?0:-1,o)}},dependencies:[P,K,W,O,J],styles:["[_nghost-%COMP%]{background:linear-gradient(to right,#213a57,#618a97);width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(18,1fr);grid-template-rows:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:3px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:#fff}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:3px;margin-right:5px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;color:#fff;width:100%}"]})};var te=class n{displayFilterService=m(Z);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=p({type:n,selectors:[["app-list-item-router"]],decls:2,vars:0,consts:[["appSwipe","",3,"swipeLeft"]],template:function(e,i){e&1&&(c(0,"app-recap-stats"),r(1,"app-item-list",0),y("swipeLeft",function(){return i.displayFilterService.setDisplay(!0)}),a())},dependencies:[b,w],styles:["app-recap-stats[_ngcontent-%COMP%]{display:block;position:relative;width:100%;min-height:64px;margin-bottom:10px}app-item-list[_ngcontent-%COMP%]{width:98%;margin:auto}@media screen and (max-width:700px){app-recap-stats[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:1000px){app-recap-stats[_ngcontent-%COMP%]{display:none!important}}"]})};export{te as ListItemRouterComponent};
