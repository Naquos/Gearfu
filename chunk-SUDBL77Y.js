import{a as En,b as mn}from"./chunk-2MHB4JED.js";import{a as dn,c as hn,d as fn}from"./chunk-GJNPQHOQ.js";import{$ as pe,$a as F,A as vt,Aa as qr,Ab as Pe,B as Wi,Ba as Xi,Bb as de,Bd as J,C as ee,Ca as ce,Cb as Yr,Db as Zr,Dd as u,E as Wt,Ea as Yt,Eb as Xr,F as Q,Fa as zr,G as Gi,Ga as Zt,H as Dr,Hb as Jr,Ib as x,J as wr,Ja as qe,Jb as V,K as Me,Kb as en,L as Gt,Ld as un,M as L,Ma as Qr,Mb as tn,Md as ii,N as H,Nd as U,O as h,Ob as xe,P as G,Pa as Hr,Ra as Wr,S as g,Sa as Gr,Tb as rn,U as xr,Ua as B,Uc as on,V as ae,Vc as an,W as Ki,Wa as $,X as c,Xa as Te,Xb as ze,Y as Fr,Yc as sn,Za as me,_ as Rt,_a as he,a as Mr,aa as se,ab as N,b as Or,ba as le,bb as O,c as Qt,cb as k,cd as ln,d as zi,db as Ji,e as Qi,ea as Vr,eb as er,ec as Xt,f as W,g as d,ga as kr,gb as Oe,h as Ae,ha as Yi,hc as Jt,i as ne,ib as X,ic as Ne,j as S,ja as _t,k as It,ka as Br,kb as T,kd as cn,l as Pr,la as $r,ld as pn,m as Nr,ma as Zi,n as E,na as jr,nd as fe,o as P,od as ei,p as oe,pd as ti,q as Ur,qd as ue,r as Ht,rc as Ue,sa as j,t as Hi,ta as R,td as Qe,u as Lr,vb as At,vc as nn,x as w,xb as Tt,y as je,yb as q,za as Kt,zb as Kr}from"./chunk-DYNV3AZ5.js";import{a as v,b as K}from"./chunk-6MDQTQU3.js";var gn=class r{isDisplayed=new d(!1);isDisplayed$=this.isDisplayed.asObservable();toggleDisplay(){this.isDisplayed.next(!this.isDisplayed.value)}setDisplay(e){this.isDisplayed.next(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var A="primary",kt=Symbol("RouteTitle"),or=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function ke(r){return new or(r)}function Cn(r,e,t){let i=t.path.split("/");if(i.length>r.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<r.length))return null;let n={};for(let o=0;o<i.length;o++){let a=i[o],s=r[o];if(a[0]===":")n[a.substring(1)]=s;else if(a!==s.path)return null}return{consumed:r.slice(0,i.length),posParams:n}}function So(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;++t)if(!ge(r[t],e[t]))return!1;return!0}function ge(r,e){let t=r?ar(r):void 0,i=e?ar(e):void 0;if(!t||!i||t.length!=i.length)return!1;let n;for(let o=0;o<t.length;o++)if(n=t[o],!yn(r[n],e[n]))return!1;return!0}function ar(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function yn(r,e){if(Array.isArray(r)&&Array.isArray(e)){if(r.length!==e.length)return!1;let t=[...r].sort(),i=[...e].sort();return t.every((n,o)=>i[o]===n)}else return r===e}function bn(r){return r.length>0?r[r.length-1]:null}function be(r){return Pr(r)?r:Hr(r)?ne(Promise.resolve(r)):S(r)}var Io={exact:On,subset:Pn},Mn={exact:vo,subset:Ro,ignored:()=>!0};function Sn(r,e,t){return Io[t.paths](r.root,e.root,t.matrixParams)&&Mn[t.queryParams](r.queryParams,e.queryParams)&&!(t.fragment==="exact"&&r.fragment!==e.fragment)}function vo(r,e){return ge(r,e)}function On(r,e,t){if(!Fe(r.segments,e.segments)||!oi(r.segments,e.segments,t)||r.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!r.children[i]||!On(r.children[i],e.children[i],t))return!1;return!0}function Ro(r,e){return Object.keys(e).length<=Object.keys(r).length&&Object.keys(e).every(t=>yn(r[t],e[t]))}function Pn(r,e,t){return Nn(r,e,e.segments,t)}function Nn(r,e,t,i){if(r.segments.length>t.length){let n=r.segments.slice(0,t.length);return!(!Fe(n,t)||e.hasChildren()||!oi(n,t,i))}else if(r.segments.length===t.length){if(!Fe(r.segments,t)||!oi(r.segments,t,i))return!1;for(let n in e.children)if(!r.children[n]||!Pn(r.children[n],e.children[n],i))return!1;return!0}else{let n=t.slice(0,r.segments.length),o=t.slice(r.segments.length);return!Fe(r.segments,n)||!oi(r.segments,n,i)||!r.children[A]?!1:Nn(r.children[A],e,o,i)}}function oi(r,e,t){return e.every((i,n)=>Mn[t](r[n].parameters,i.parameters))}var Ie=class{root;queryParams;fragment;_queryParamMap;constructor(e=new M([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=ke(this.queryParams),this._queryParamMap}toString(){return To.serialize(this)}},M=class{segments;children;parent=null;constructor(e,t){this.segments=e,this.children=t,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ai(this)}},Le=class{path;parameters;_parameterMap;constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=ke(this.parameters),this._parameterMap}toString(){return Ln(this)}};function _o(r,e){return Fe(r,e)&&r.every((t,i)=>ge(t.parameters,e[i].parameters))}function Fe(r,e){return r.length!==e.length?!1:r.every((t,i)=>t.path===e[i].path)}function Ao(r,e){let t=[];return Object.entries(r.children).forEach(([i,n])=>{i===A&&(t=t.concat(e(n,i)))}),Object.entries(r.children).forEach(([i,n])=>{i!==A&&(t=t.concat(e(n,i)))}),t}var Bt=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:()=>new Be,providedIn:"root"})}return r})(),Be=class{parse(e){let t=new lr(e);return new Ie(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Ct(e.root,!0)}`,i=bo(e.queryParams),n=typeof e.fragment=="string"?`#${Co(e.fragment)}`:"";return`${t}${i}${n}`}},To=new Be;function ai(r){return r.segments.map(e=>Ln(e)).join("/")}function Ct(r,e){if(!r.hasChildren())return ai(r);if(e){let t=r.children[A]?Ct(r.children[A],!1):"",i=[];return Object.entries(r.children).forEach(([n,o])=>{n!==A&&i.push(`${n}:${Ct(o,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=Ao(r,(i,n)=>n===A?[Ct(r.children[A],!1)]:[`${n}:${Ct(i,!1)}`]);return Object.keys(r.children).length===1&&r.children[A]!=null?`${ai(r)}/${t[0]}`:`${ai(r)}/(${t.join("//")})`}}function Un(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function ri(r){return Un(r).replace(/%3B/gi,";")}function Co(r){return encodeURI(r)}function sr(r){return Un(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function si(r){return decodeURIComponent(r)}function In(r){return si(r.replace(/\+/g,"%20"))}function Ln(r){return`${sr(r.path)}${yo(r.parameters)}`}function yo(r){return Object.entries(r).map(([e,t])=>`;${sr(e)}=${sr(t)}`).join("")}function bo(r){let e=Object.entries(r).map(([t,i])=>Array.isArray(i)?i.map(n=>`${ri(t)}=${ri(n)}`).join("&"):`${ri(t)}=${ri(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var Mo=/^[^\/()?;#]+/;function tr(r){let e=r.match(Mo);return e?e[0]:""}var Oo=/^[^\/()?;=#]+/;function Po(r){let e=r.match(Oo);return e?e[0]:""}var No=/^[^=?&#]+/;function Uo(r){let e=r.match(No);return e?e[0]:""}var Lo=/^[^&#]+/;function Do(r){let e=r.match(Lo);return e?e[0]:""}var lr=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new M([],{}):new M([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[A]=new M(e,t)),i}parseSegment(){let e=tr(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new G(4009,!1);return this.capture(e),new Le(si(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=Po(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let n=tr(this.remaining);n&&(i=n,this.capture(i))}e[si(t)]=si(i)}parseQueryParam(e){let t=Uo(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let a=Do(this.remaining);a&&(i=a,this.capture(i))}let n=In(t),o=In(i);if(e.hasOwnProperty(n)){let a=e[n];Array.isArray(a)||(a=[a],e[n]=a),a.push(o)}else e[n]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=tr(this.remaining),n=this.remaining[i.length];if(n!=="/"&&n!==")"&&n!==";")throw new G(4010,!1);let o;i.indexOf(":")>-1?(o=i.slice(0,i.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=A);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[A]:new M([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new G(4011,!1)}};function Dn(r){return r.segments.length>0?new M([],{[A]:r}):r}function wn(r){let e={};for(let[i,n]of Object.entries(r.children)){let o=wn(n);if(i===A&&o.segments.length===0&&o.hasChildren())for(let[a,s]of Object.entries(o.children))e[a]=s;else(o.segments.length>0||o.hasChildren())&&(e[i]=o)}let t=new M(r.segments,e);return wo(t)}function wo(r){if(r.numberOfChildren===1&&r.children[A]){let e=r.children[A];return new M(r.segments.concat(e.segments),e.children)}return r}function Ye(r){return r instanceof Ie}function xn(r,e,t=null,i=null){let n=Fn(r);return Vn(n,e,t,i)}function Fn(r){let e;function t(o){let a={};for(let l of o.children){let p=t(l);a[l.outlet]=p}let s=new M(o.url,a);return o===r&&(e=s),s}let i=t(r.root),n=Dn(i);return e??n}function Vn(r,e,t,i){let n=r;for(;n.parent;)n=n.parent;if(e.length===0)return ir(n,n,n,t,i);let o=xo(e);if(o.toRoot())return ir(n,n,new M([],{}),t,i);let a=Fo(o,n,r),s=a.processChildren?bt(a.segmentGroup,a.index,o.commands):Bn(a.segmentGroup,a.index,o.commands);return ir(n,a.segmentGroup,s,t,i)}function li(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Pt(r){return typeof r=="object"&&r!=null&&r.outlets}function ir(r,e,t,i,n){let o={};i&&Object.entries(i).forEach(([l,p])=>{o[l]=Array.isArray(p)?p.map(f=>`${f}`):`${p}`});let a;r===e?a=t:a=kn(r,e,t);let s=Dn(wn(a));return new Ie(s,o,n)}function kn(r,e,t){let i={};return Object.entries(r.children).forEach(([n,o])=>{o===e?i[n]=t:i[n]=kn(o,e,t)}),new M(r.segments,i)}var ci=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&li(i[0]))throw new G(4003,!1);let n=i.find(Pt);if(n&&n!==bn(i))throw new G(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xo(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new ci(!0,0,r);let e=0,t=!1,i=r.reduce((n,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let s={};return Object.entries(o.outlets).forEach(([l,p])=>{s[l]=typeof p=="string"?p.split("/"):p}),[...n,{outlets:s}]}if(o.segmentPath)return[...n,o.segmentPath]}return typeof o!="string"?[...n,o]:a===0?(o.split("/").forEach((s,l)=>{l==0&&s==="."||(l==0&&s===""?t=!0:s===".."?e++:s!=""&&n.push(s))}),n):[...n,o]},[]);return new ci(t,e,i)}var Ge=class{segmentGroup;processChildren;index;constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function Fo(r,e,t){if(r.isAbsolute)return new Ge(e,!0,0);if(!t)return new Ge(e,!1,NaN);if(t.parent===null)return new Ge(t,!0,0);let i=li(r.commands[0])?0:1,n=t.segments.length-1+i;return Vo(t,n,r.numberOfDoubleDots)}function Vo(r,e,t){let i=r,n=e,o=t;for(;o>n;){if(o-=n,i=i.parent,!i)throw new G(4005,!1);n=i.segments.length}return new Ge(i,!1,n-o)}function ko(r){return Pt(r[0])?r[0].outlets:{[A]:r}}function Bn(r,e,t){if(r??=new M([],{}),r.segments.length===0&&r.hasChildren())return bt(r,e,t);let i=Bo(r,e,t),n=t.slice(i.commandIndex);if(i.match&&i.pathIndex<r.segments.length){let o=new M(r.segments.slice(0,i.pathIndex),{});return o.children[A]=new M(r.segments.slice(i.pathIndex),r.children),bt(o,0,n)}else return i.match&&n.length===0?new M(r.segments,{}):i.match&&!r.hasChildren()?cr(r,e,t):i.match?bt(r,0,n):cr(r,e,t)}function bt(r,e,t){if(t.length===0)return new M(r.segments,{});{let i=ko(t),n={};if(Object.keys(i).some(o=>o!==A)&&r.children[A]&&r.numberOfChildren===1&&r.children[A].segments.length===0){let o=bt(r.children[A],e,t);return new M(r.segments,o.children)}return Object.entries(i).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(n[o]=Bn(r.children[o],e,a))}),Object.entries(r.children).forEach(([o,a])=>{i[o]===void 0&&(n[o]=a)}),new M(r.segments,n)}}function Bo(r,e,t){let i=0,n=e,o={match:!1,pathIndex:0,commandIndex:0};for(;n<r.segments.length;){if(i>=t.length)return o;let a=r.segments[n],s=t[i];if(Pt(s))break;let l=`${s}`,p=i<t.length-1?t[i+1]:null;if(n>0&&l===void 0)break;if(l&&p&&typeof p=="object"&&p.outlets===void 0){if(!Rn(l,p,a))return o;i+=2}else{if(!Rn(l,{},a))return o;i++}n++}return{match:!0,pathIndex:n,commandIndex:i}}function cr(r,e,t){let i=r.segments.slice(0,e),n=0;for(;n<t.length;){let o=t[n];if(Pt(o)){let l=$o(o.outlets);return new M(i,l)}if(n===0&&li(t[0])){let l=r.segments[e];i.push(new Le(l.path,vn(t[0]))),n++;continue}let a=Pt(o)?o.outlets[A]:`${o}`,s=n<t.length-1?t[n+1]:null;a&&s&&li(s)?(i.push(new Le(a,vn(s))),n+=2):(i.push(new Le(a,{})),n++)}return new M(i,{})}function $o(r){let e={};return Object.entries(r).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=cr(new M([],{}),0,i))}),e}function vn(r){let e={};return Object.entries(r).forEach(([t,i])=>e[t]=`${i}`),e}function Rn(r,e,t){return r==t.path&&ge(e,t.parameters)}var Mt="imperative",z=(function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r})(z||{}),ie=class{id;url;constructor(e,t){this.id=e,this.url=t}},$e=class extends ie{type=z.NavigationStart;navigationTrigger;restoredState;constructor(e,t,i="imperative",n=null){super(e,t),this.navigationTrigger=i,this.restoredState=n}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ce=class extends ie{urlAfterRedirects;type=z.NavigationEnd;constructor(e,t,i){super(e,t),this.urlAfterRedirects=i}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Y=(function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r[r.Aborted=4]="Aborted",r})(Y||{}),Nt=(function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r})(Nt||{}),Se=class extends ie{reason;code;type=z.NavigationCancel;constructor(e,t,i,n){super(e,t),this.reason=i,this.code=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ye=class extends ie{reason;code;type=z.NavigationSkipped;constructor(e,t,i,n){super(e,t),this.reason=i,this.code=n}},Ze=class extends ie{error;target;type=z.NavigationError;constructor(e,t,i,n){super(e,t),this.error=i,this.target=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ut=class extends ie{urlAfterRedirects;state;type=z.RoutesRecognized;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pi=class extends ie{urlAfterRedirects;state;type=z.GuardsCheckStart;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},di=class extends ie{urlAfterRedirects;state;shouldActivate;type=z.GuardsCheckEnd;constructor(e,t,i,n,o){super(e,t),this.urlAfterRedirects=i,this.state=n,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ui=class extends ie{urlAfterRedirects;state;type=z.ResolveStart;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ei=class extends ie{urlAfterRedirects;state;type=z.ResolveEnd;constructor(e,t,i,n){super(e,t),this.urlAfterRedirects=i,this.state=n}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},mi=class{route;type=z.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},hi=class{route;type=z.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},fi=class{snapshot;type=z.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},gi=class{snapshot;type=z.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Si=class{snapshot;type=z.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ii=class{snapshot;type=z.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Lt=class{},Xe=class{url;navigationBehaviorOptions;constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function jo(r){return!(r instanceof Lt)&&!(r instanceof Xe)}function qo(r,e){return r.providers&&!r._injector&&(r._injector=Xi(r.providers,e,`Route: ${r.path}`)),r._injector??e}function Ee(r){return r.outlet||A}function zo(r,e){let t=r.filter(i=>Ee(i)===e);return t.push(...r.filter(i=>Ee(i)!==e)),t}function tt(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let e=r.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var vi=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return tt(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new it(this.rootInjector)}},it=(()=>{class r{rootInjector;contexts=new Map;constructor(t){this.rootInjector=t}onChildOutletCreated(t,i){let n=this.getOrCreateContext(t);n.outlet=i,this.contexts.set(t,n)}onChildOutletDestroyed(t){let i=this.getContext(t);i&&(i.outlet=null,i.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let i=this.getContext(t);return i||(i=new vi(this.rootInjector),this.contexts.set(t,i)),i}getContext(t){return this.contexts.get(t)||null}static \u0275fac=function(i){return new(i||r)(Ki(Rt))};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),Ri=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=pr(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=pr(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=dr(e,this._root);return t.length<2?[]:t[t.length-2].children.map(n=>n.value).filter(n=>n!==e)}pathFromRoot(e){return dr(e,this._root).map(t=>t.value)}};function pr(r,e){if(r===e.value)return e;for(let t of e.children){let i=pr(r,t);if(i)return i}return null}function dr(r,e){if(r===e.value)return[e];for(let t of e.children){let i=dr(r,t);if(i.length)return i.unshift(e),i}return[]}var te=class{value;children;constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function We(r){let e={};return r&&r.children.forEach(t=>e[t.value.outlet]=t),e}var Dt=class extends Ri{snapshot;constructor(e,t){super(e),this.snapshot=t,Ir(this,e)}toString(){return this.snapshot.toString()}};function $n(r){let e=Qo(r),t=new d([new Le("",{})]),i=new d({}),n=new d({}),o=new d({}),a=new d(""),s=new ve(t,i,o,a,n,A,r,e.root);return s.snapshot=e.root,new Dt(new te(s,[]),e)}function Qo(r){let e={},t={},i={},o=new Ve([],e,i,"",t,A,r,null,{});return new wt("",new te(o,[]))}var ve=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,t,i,n,o,a,s,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=n,this.dataSubject=o,this.outlet=a,this.component=s,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(E(p=>p[kt]))??S(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(E(e=>ke(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(E(e=>ke(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function _i(r,e,t="emptyOnly"){let i,{routeConfig:n}=r;return e!==null&&(t==="always"||n?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:v(v({},e.params),r.params),data:v(v({},e.data),r.data),resolve:v(v(v(v({},r.data),e.data),n?.data),r._resolvedData)}:i={params:v({},r.params),data:v({},r.data),resolve:v(v({},r.data),r._resolvedData??{})},n&&qn(n)&&(i.resolve[kt]=n.title),i}var Ve=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[kt]}constructor(e,t,i,n,o,a,s,l,p){this.url=e,this.params=t,this.queryParams=i,this.fragment=n,this.data=o,this.outlet=a,this.component=s,this.routeConfig=l,this._resolve=p}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ke(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ke(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},wt=class extends Ri{url;constructor(e,t){super(t),this.url=e,Ir(this,t)}toString(){return jn(this._root)}};function Ir(r,e){e.value._routerState=r,e.children.forEach(t=>Ir(r,t))}function jn(r){let e=r.children.length>0?` { ${r.children.map(jn).join(", ")} } `:"";return`${r.value}${e}`}function rr(r){if(r.snapshot){let e=r.snapshot,t=r._futureSnapshot;r.snapshot=t,ge(e.queryParams,t.queryParams)||r.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&r.fragmentSubject.next(t.fragment),ge(e.params,t.params)||r.paramsSubject.next(t.params),So(e.url,t.url)||r.urlSubject.next(t.url),ge(e.data,t.data)||r.dataSubject.next(t.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function ur(r,e){let t=ge(r.params,e.params)&&_o(r.url,e.url),i=!r.parent!=!e.parent;return t&&!i&&(!r.parent||ur(r.parent,e.parent))}function qn(r){return typeof r.title=="string"||r.title===null}var zn=new ae(""),vr=(()=>{class r{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=A;activateEvents=new qe;deactivateEvents=new qe;attachEvents=new qe;detachEvents=new qe;routerOutletData=rn(void 0);parentContexts=c(it);location=c(Kt);changeDetector=c(ze);inputBinder=c(yi,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(t){if(t.name){let{firstChange:i,previousValue:n}=t.name;if(i)return;this.isTrackedInParentContexts(n)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(n)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new G(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new G(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new G(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,i){this.activated=t,this._activatedRoute=i,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,i){if(this.isActivated)throw new G(4013,!1);this._activatedRoute=t;let n=this.location,a=t.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,l=new Er(t,s,n.injector,this.routerOutletData);this.activated=n.createComponent(a,{index:n.length,injector:l,environmentInjector:i}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(i){return new(i||r)};static \u0275dir=Yt({type:r,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[$r]})}return r})(),Er=class{route;childContexts;parent;outletData;constructor(e,t,i,n){this.route=e,this.childContexts=t,this.parent=i,this.outletData=n}get(e,t){return e===ve?this.route:e===it?this.childContexts:e===zn?this.outletData:this.parent.get(e,t)}},yi=new ae("");var Rr=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275cmp=ce({type:r,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(i,n){i&1&&k(0,"router-outlet")},dependencies:[vr],encapsulation:2})}return r})();function _r(r){let e=r.children&&r.children.map(_r),t=e?K(v({},r),{children:e}):v({},r);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==A&&(t.component=Rr),t}function Ho(r,e,t){let i=xt(r,e._root,t?t._root:void 0);return new Dt(i,e)}function xt(r,e,t){if(t&&r.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let n=Wo(r,e,t);return new te(i,n)}else{if(r.shouldAttach(e.value)){let o=r.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(s=>xt(r,s)),a}}let i=Go(e.value),n=e.children.map(o=>xt(r,o));return new te(i,n)}}function Wo(r,e,t){return e.children.map(i=>{for(let n of t.children)if(r.shouldReuseRoute(i.value,n.value.snapshot))return xt(r,i,n);return xt(r,i)})}function Go(r){return new ve(new d(r.url),new d(r.params),new d(r.queryParams),new d(r.fragment),new d(r.data),r.outlet,r.component,r)}var Je=class{redirectTo;navigationBehaviorOptions;constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Qn="ngNavigationCancelingError";function Ai(r,e){let{redirectTo:t,navigationBehaviorOptions:i}=Ye(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,n=Hn(!1,Y.Redirect);return n.url=t,n.navigationBehaviorOptions=i,n}function Hn(r,e){let t=new Error(`NavigationCancelingError: ${r||""}`);return t[Qn]=!0,t.cancellationCode=e,t}function Ko(r){return Wn(r)&&Ye(r.url)}function Wn(r){return!!r&&r[Qn]}var Yo=(r,e,t,i)=>E(n=>(new mr(e,n.targetRouterState,n.currentRouterState,t,i).activate(r),n)),mr=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,t,i,n,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=n,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),rr(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let n=We(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,n[a],i),delete n[a]}),Object.values(n).forEach(o=>{this.deactivateRouteAndItsChildren(o,i)})}deactivateRoutes(e,t,i){let n=e.value,o=t?t.value:null;if(n===o)if(n.component){let a=i.getContext(n.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,i);else o&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),n=i&&e.value.component?i.children:t,o=We(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,n);if(i&&i.outlet){let a=i.outlet.detach(),s=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:s})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),n=i&&e.value.component?i.children:t,o=We(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,n);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let n=We(t);e.children.forEach(o=>{this.activateRoutes(o,n[o.value.outlet],i),this.forwardEvent(new Ii(o.value.snapshot))}),e.children.length&&this.forwardEvent(new gi(e.value.snapshot))}activateRoutes(e,t,i){let n=e.value,o=t?t.value:null;if(rr(n),n===o)if(n.component){let a=i.getOrCreateContext(n.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,i);else if(n.component){let a=i.getOrCreateContext(n.outlet);if(this.routeReuseStrategy.shouldAttach(n.snapshot)){let s=this.routeReuseStrategy.retrieve(n.snapshot);this.routeReuseStrategy.store(n.snapshot,null),a.children.onOutletReAttached(s.contexts),a.attachRef=s.componentRef,a.route=s.route.value,a.outlet&&a.outlet.attach(s.componentRef,s.route.value),rr(s.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=n,a.outlet&&a.outlet.activateWith(n,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,i)}},Ti=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Ke=class{component;route;constructor(e,t){this.component=e,this.route=t}};function Zo(r,e,t){let i=r._root,n=e?e._root:null;return yt(i,n,t,[i.value])}function Xo(r){let e=r.routeConfig?r.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:r,guards:e}}function rt(r,e){let t=Symbol(),i=e.get(r,t);return i===t?typeof r=="function"&&!xr(r)?r:e.get(r):i}function yt(r,e,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=We(e);return r.children.forEach(a=>{Jo(a,o[a.value.outlet],t,i.concat([a.value]),n),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,s])=>Ot(s,t.getContext(a),n)),n}function Jo(r,e,t,i,n={canDeactivateChecks:[],canActivateChecks:[]}){let o=r.value,a=e?e.value:null,s=t?t.getContext(r.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=ea(a,o,o.routeConfig.runGuardsAndResolvers);l?n.canActivateChecks.push(new Ti(i)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?yt(r,e,s?s.children:null,i,n):yt(r,e,t,i,n),l&&s&&s.outlet&&s.outlet.isActivated&&n.canDeactivateChecks.push(new Ke(s.outlet.component,a))}else a&&Ot(e,s,n),n.canActivateChecks.push(new Ti(i)),o.component?yt(r,null,s?s.children:null,i,n):yt(r,null,t,i,n);return n}function ea(r,e,t){if(typeof t=="function")return t(r,e);switch(t){case"pathParamsChange":return!Fe(r.url,e.url);case"pathParamsOrQueryParamsChange":return!Fe(r.url,e.url)||!ge(r.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ur(r,e)||!ge(r.queryParams,e.queryParams);case"paramsChange":default:return!ur(r,e)}}function Ot(r,e,t){let i=We(r),n=r.value;Object.entries(i).forEach(([o,a])=>{n.component?e?Ot(a,e.children.getContext(o),t):Ot(a,null,t):Ot(a,e,t)}),n.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Ke(e.outlet.component,n)):t.canDeactivateChecks.push(new Ke(null,n)):t.canDeactivateChecks.push(new Ke(null,n))}function $t(r){return typeof r=="function"}function ta(r){return typeof r=="boolean"}function ia(r){return r&&$t(r.canLoad)}function ra(r){return r&&$t(r.canActivate)}function na(r){return r&&$t(r.canActivateChild)}function oa(r){return r&&$t(r.canDeactivate)}function aa(r){return r&&$t(r.canMatch)}function Gn(r){return r instanceof Nr||r?.name==="EmptyError"}var ni=Symbol("INITIAL_VALUE");function et(){return L(r=>P(r.map(e=>e.pipe(ee(1),Gt(ni)))).pipe(E(e=>{for(let t of e)if(t!==!0){if(t===ni)return ni;if(t===!1||sa(t))return t}return!0}),w(e=>e!==ni),ee(1)))}function sa(r){return Ye(r)||r instanceof Je}function la(r,e){return oe(t=>{let{targetSnapshot:i,currentSnapshot:n,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?S(K(v({},t),{guardsResult:!0})):ca(a,i,n,r).pipe(oe(s=>s&&ta(s)?pa(i,o,r,e):S(s)),E(s=>K(v({},t),{guardsResult:s})))})}function ca(r,e,t,i){return ne(r).pipe(oe(n=>ha(n.component,n.route,t,e,i)),Q(n=>n!==!0,!0))}function pa(r,e,t,i){return ne(e).pipe(vt(n=>Ur(ua(n.route.parent,i),da(n.route,i),ma(r,n.path,t),Ea(r,n.route,t))),Q(n=>n!==!0,!0))}function da(r,e){return r!==null&&e&&e(new Si(r)),S(!0)}function ua(r,e){return r!==null&&e&&e(new fi(r)),S(!0)}function Ea(r,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return S(!0);let n=i.map(o=>Ht(()=>{let a=tt(e)??t,s=rt(o,a),l=ra(s)?s.canActivate(e,r):pe(a,()=>s(e,r));return be(l).pipe(Q())}));return S(n).pipe(et())}function ma(r,e,t){let i=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Xo(a)).filter(a=>a!==null).map(a=>Ht(()=>{let s=a.guards.map(l=>{let p=tt(a.node)??t,f=rt(l,p),I=na(f)?f.canActivateChild(i,r):pe(p,()=>f(i,r));return be(I).pipe(Q())});return S(s).pipe(et())}));return S(o).pipe(et())}function ha(r,e,t,i,n){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return S(!0);let a=o.map(s=>{let l=tt(e)??n,p=rt(s,l),f=oa(p)?p.canDeactivate(r,e,t,i):pe(l,()=>p(r,e,t,i));return be(f).pipe(Q())});return S(a).pipe(et())}function fa(r,e,t,i){let n=e.canLoad;if(n===void 0||n.length===0)return S(!0);let o=n.map(a=>{let s=rt(a,r),l=ia(s)?s.canLoad(e,t):pe(r,()=>s(e,t));return be(l)});return S(o).pipe(et(),Kn(i))}function Kn(r){return Or(h(e=>{if(typeof e!="boolean")throw Ai(r,e)}),E(e=>e===!0))}function ga(r,e,t,i){let n=e.canMatch;if(!n||n.length===0)return S(!0);let o=n.map(a=>{let s=rt(a,r),l=aa(s)?s.canMatch(e,t):pe(r,()=>s(e,t));return be(l)});return S(o).pipe(et(),Kn(i))}var Ft=class{segmentGroup;constructor(e){this.segmentGroup=e||null}},Vt=class extends Error{urlTree;constructor(e){super(),this.urlTree=e}};function He(r){return It(new Ft(r))}function Sa(r){return It(new G(4e3,!1))}function Ia(r){return It(Hn(!1,Y.GuardRejected))}var hr=class{urlSerializer;urlTree;constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],n=t.root;for(;;){if(i=i.concat(n.segments),n.numberOfChildren===0)return S(i);if(n.numberOfChildren>1||!n.children[A])return Sa(`${e.redirectTo}`);n=n.children[A]}}applyRedirectCommands(e,t,i,n,o){return va(t,n,o).pipe(E(a=>{if(a instanceof Ie)throw new Vt(a);let s=this.applyRedirectCreateUrlTree(a,this.urlSerializer.parse(a),e,i);if(a[0]==="/")throw new Vt(s);return s}))}applyRedirectCreateUrlTree(e,t,i,n){let o=this.createSegmentGroup(e,t.root,i,n);return new Ie(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([n,o])=>{if(typeof o=="string"&&o[0]===":"){let s=o.substring(1);i[n]=t[s]}else i[n]=o}),i}createSegmentGroup(e,t,i,n){let o=this.createSegments(e,t.segments,i,n),a={};return Object.entries(t.children).forEach(([s,l])=>{a[s]=this.createSegmentGroup(e,l,i,n)}),new M(o,a)}createSegments(e,t,i,n){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,n):this.findOrReturn(o,i))}findPosParam(e,t,i){let n=i[t.path.substring(1)];if(!n)throw new G(4001,!1);return n}findOrReturn(e,t){let i=0;for(let n of t){if(n.path===e.path)return t.splice(i),n;i++}return e}};function va(r,e,t){if(typeof r=="string")return S(r);let i=r,{queryParams:n,fragment:o,routeConfig:a,url:s,outlet:l,params:p,data:f,title:I}=e;return be(pe(t,()=>i({params:p,data:f,queryParams:n,fragment:o,routeConfig:a,url:s,outlet:l,title:I})))}var fr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Ra(r,e,t,i,n){let o=Yn(r,e,t);return o.matched?(i=qo(e,i),ga(i,e,t,n).pipe(E(a=>a===!0?o:v({},fr)))):S(o)}function Yn(r,e,t){if(e.path==="**")return _a(t);if(e.path==="")return e.pathMatch==="full"&&(r.hasChildren()||t.length>0)?v({},fr):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let n=(e.matcher||Cn)(t,r,e);if(!n)return v({},fr);let o={};Object.entries(n.posParams??{}).forEach(([s,l])=>{o[s]=l.path});let a=n.consumed.length>0?v(v({},o),n.consumed[n.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:n.consumed,remainingSegments:t.slice(n.consumed.length),parameters:a,positionalParamSegments:n.posParams??{}}}function _a(r){return{matched:!0,parameters:r.length>0?bn(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function _n(r,e,t,i){return t.length>0&&Ca(r,t,i)?{segmentGroup:new M(e,Ta(i,new M(t,r.children))),slicedSegments:[]}:t.length===0&&ya(r,t,i)?{segmentGroup:new M(r.segments,Aa(r,t,i,r.children)),slicedSegments:t}:{segmentGroup:new M(r.segments,r.children),slicedSegments:t}}function Aa(r,e,t,i){let n={};for(let o of t)if(bi(r,e,o)&&!i[Ee(o)]){let a=new M([],{});n[Ee(o)]=a}return v(v({},i),n)}function Ta(r,e){let t={};t[A]=e;for(let i of r)if(i.path===""&&Ee(i)!==A){let n=new M([],{});t[Ee(i)]=n}return t}function Ca(r,e,t){return t.some(i=>bi(r,e,i)&&Ee(i)!==A)}function ya(r,e,t){return t.some(i=>bi(r,e,i))}function bi(r,e,t){return(r.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function ba(r,e,t){return e.length===0&&!r.children[t]}var gr=class{};function Ma(r,e,t,i,n,o,a="emptyOnly"){return new Sr(r,e,t,i,n,a,o).recognize()}var Oa=31,Sr=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,t,i,n,o,a,s){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=n,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=s,this.applyRedirects=new hr(this.urlSerializer,this.urlTree)}noMatchError(e){return new G(4002,`'${e.segmentGroup}'`)}recognize(){let e=_n(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(E(({children:t,rootSnapshot:i})=>{let n=new te(i,t),o=new wt("",n),a=xn(i,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new Ve([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),A,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,A,t).pipe(E(i=>({children:i,rootSnapshot:t})),je(i=>{if(i instanceof Vt)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Ft?this.noMatchError(i):i}))}processSegmentGroup(e,t,i,n,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i,o):this.processSegment(e,t,i,i.segments,n,!0,o).pipe(E(a=>a instanceof te?[a]:[]))}processChildren(e,t,i,n){let o=[];for(let a of Object.keys(i.children))a==="primary"?o.unshift(a):o.push(a);return ne(o).pipe(vt(a=>{let s=i.children[a],l=zo(t,a);return this.processSegmentGroup(e,l,s,a,n)}),wr((a,s)=>(a.push(...s),a)),Wi(null),Dr(),oe(a=>{if(a===null)return He(i);let s=Zn(a);return Pa(s),S(s)}))}processSegment(e,t,i,n,o,a,s){return ne(t).pipe(vt(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,i,n,o,a,s).pipe(je(p=>{if(p instanceof Ft)return S(null);throw p}))),Q(l=>!!l),je(l=>{if(Gn(l))return ba(i,n,o)?S(new gr):He(i);throw l}))}processSegmentAgainstRoute(e,t,i,n,o,a,s,l){return Ee(i)!==a&&(a===A||!bi(n,o,i))?He(n):i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,n,i,o,a,l):this.allowRedirects&&s?this.expandSegmentAgainstRouteUsingRedirect(e,n,t,i,o,a,l):He(n)}expandSegmentAgainstRouteUsingRedirect(e,t,i,n,o,a,s){let{matched:l,parameters:p,consumedSegments:f,positionalParamSegments:I,remainingSegments:m}=Yn(t,n,o);if(!l)return He(t);typeof n.redirectTo=="string"&&n.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Oa&&(this.allowRedirects=!1));let C=new Ve(o,p,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,An(n),Ee(n),n.component??n._loadedComponent??null,n,Tn(n)),b=_i(C,s,this.paramsInheritanceStrategy);return C.params=Object.freeze(b.params),C.data=Object.freeze(b.data),this.applyRedirects.applyRedirectCommands(f,n.redirectTo,I,C,e).pipe(L(D=>this.applyRedirects.lineralizeSegments(n,D)),oe(D=>this.processSegment(e,i,t,D.concat(m),a,!1,s)))}matchSegmentAgainstRoute(e,t,i,n,o,a){let s=Ra(t,i,n,e,this.urlSerializer);return i.path==="**"&&(t.children={}),s.pipe(L(l=>l.matched?(e=i._injector??e,this.getChildConfig(e,i,n).pipe(L(({routes:p})=>{let f=i._loadedInjector??e,{parameters:I,consumedSegments:m,remainingSegments:C}=l,b=new Ve(m,I,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,An(i),Ee(i),i.component??i._loadedComponent??null,i,Tn(i)),Z=_i(b,a,this.paramsInheritanceStrategy);b.params=Object.freeze(Z.params),b.data=Object.freeze(Z.data);let{segmentGroup:D,slicedSegments:qi}=_n(t,m,C,p);if(qi.length===0&&D.hasChildren())return this.processChildren(f,p,D,b).pipe(E(_=>new te(b,_)));if(p.length===0&&qi.length===0)return S(new te(b,[]));let go=Ee(i)===o;return this.processSegment(f,p,D,qi,go?A:o,!0,b).pipe(E(_=>new te(b,_ instanceof te?[_]:[])))}))):He(t)))}getChildConfig(e,t,i){return t.children?S({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?S({routes:t._loadedRoutes,injector:t._loadedInjector}):fa(e,t,i,this.urlSerializer).pipe(oe(n=>n?this.configLoader.loadChildren(e,t).pipe(h(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Ia(t))):S({routes:[],injector:e})}};function Pa(r){r.sort((e,t)=>e.value.outlet===A?-1:t.value.outlet===A?1:e.value.outlet.localeCompare(t.value.outlet))}function Na(r){let e=r.value.routeConfig;return e&&e.path===""}function Zn(r){let e=[],t=new Set;for(let i of r){if(!Na(i)){e.push(i);continue}let n=e.find(o=>i.value.routeConfig===o.value.routeConfig);n!==void 0?(n.children.push(...i.children),t.add(n)):e.push(i)}for(let i of t){let n=Zn(i.children);e.push(new te(i.value,n))}return e.filter(i=>!t.has(i))}function An(r){return r.data||{}}function Tn(r){return r.resolve||{}}function Ua(r,e,t,i,n,o){return oe(a=>Ma(r,e,t,i,a.extractedUrl,n,o).pipe(E(({state:s,tree:l})=>K(v({},a),{targetSnapshot:s,urlAfterRedirects:l}))))}function La(r,e){return oe(t=>{let{targetSnapshot:i,guards:{canActivateChecks:n}}=t;if(!n.length)return S(t);let o=new Set(n.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let p of Xn(l))a.add(p);let s=0;return ne(a).pipe(vt(l=>o.has(l)?Da(l,i,r,e):(l.data=_i(l,l.parent,r).resolve,S(void 0))),h(()=>s++),Gi(1),oe(l=>s===a.size?S(t):Ae))})}function Xn(r){let e=r.children.map(t=>Xn(t)).flat();return[r,...e]}function Da(r,e,t,i){let n=r.routeConfig,o=r._resolve;return n?.title!==void 0&&!qn(n)&&(o[kt]=n.title),Ht(()=>(r.data=_i(r,r.parent,t).resolve,wa(o,r,e,i).pipe(E(a=>(r._resolvedData=a,r.data=v(v({},r.data),a),null)))))}function wa(r,e,t,i){let n=ar(r);if(n.length===0)return S({});let o={};return ne(n).pipe(oe(a=>xa(r[a],e,t,i).pipe(Q(),h(s=>{if(s instanceof Je)throw Ai(new Be,s);o[a]=s}))),Gi(1),E(()=>o),je(a=>Gn(a)?Ae:It(a)))}function xa(r,e,t,i){let n=tt(e)??i,o=rt(r,n),a=o.resolve?o.resolve(e,t):pe(n,()=>o(e,t));return be(a)}function nr(r){return L(e=>{let t=r(e);return t?ne(t).pipe(E(()=>e)):S(e)})}var Ar=(()=>{class r{buildTitle(t){let i,n=t.root;for(;n!==void 0;)i=this.getResolvedTitleForRoute(n)??i,n=n.children.find(o=>o.outlet===A);return i}getResolvedTitleForRoute(t){return t.data[kt]}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:()=>c(Jn),providedIn:"root"})}return r})(),Jn=(()=>{class r extends Ar{title;constructor(t){super(),this.title=t}updateTitle(t){let i=this.buildTitle(t);i!==void 0&&this.title.setTitle(i)}static \u0275fac=function(i){return new(i||r)(Ki(nn))};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),jt=new ae("",{providedIn:"root",factory:()=>({})}),qt=new ae(""),eo=(()=>{class r{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=c(tn);loadComponent(t,i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return S(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let n=be(pe(t,()=>i.loadComponent())).pipe(E(io),L(ro),h(a=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=a}),Wt(()=>{this.componentLoaders.delete(i)})),o=new Qi(n,()=>new W).pipe(zi());return this.componentLoaders.set(i,o),o}loadChildren(t,i){if(this.childrenLoaders.get(i))return this.childrenLoaders.get(i);if(i._loadedRoutes)return S({routes:i._loadedRoutes,injector:i._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(i);let o=to(i,this.compiler,t,this.onLoadEndListener).pipe(Wt(()=>{this.childrenLoaders.delete(i)})),a=new Qi(o,()=>new W).pipe(zi());return this.childrenLoaders.set(i,a),a}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function to(r,e,t,i){return be(pe(t,()=>r.loadChildren())).pipe(E(io),L(ro),oe(n=>n instanceof qr||Array.isArray(n)?S(n):ne(e.compileModuleAsync(n))),E(n=>{i&&i(r);let o,a,s=!1;return Array.isArray(n)?(a=n,s=!0):(o=n.create(t).injector,a=o.get(qt,[],{optional:!0,self:!0}).flat()),{routes:a.map(_r),injector:o}}))}function Fa(r){return r&&typeof r=="object"&&"default"in r}function io(r){return Fa(r)?r.default:r}function ro(r){return S(r)}var Mi=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:()=>c(Va),providedIn:"root"})}return r})(),Va=(()=>{class r{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,i){return t}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),no=new ae("");var oo=new ae(""),ao=(()=>{class r{currentNavigation=_t(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=null;events=new W;transitionAbortWithErrorSubject=new W;configLoader=c(eo);environmentInjector=c(Rt);destroyRef=c(kr);urlSerializer=c(Bt);rootContexts=c(it);location=c(Xt);inputBindingEnabled=c(yi,{optional:!0})!==null;titleStrategy=c(Ar);options=c(jt,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=c(Mi);createViewTransition=c(no,{optional:!0});navigationErrorHandler=c(oo,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>S(void 0);rootComponentType=null;destroyed=!1;constructor(){let t=n=>this.events.next(new mi(n)),i=n=>this.events.next(new hi(n));this.configLoader.onLoadEndListener=i,this.configLoader.onLoadStartListener=t,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(t){let i=++this.navigationId;xe(()=>{this.transitions?.next(K(v({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,abortController:new AbortController,id:i}))})}setupNavigations(t){return this.transitions=new d(null),this.transitions.pipe(w(i=>i!==null),L(i=>{let n=!1;return S(i).pipe(L(o=>{if(this.navigationId>i.id)return this.cancelNavigationTransition(i,"",Y.SupersededByNewNavigation),Ae;this.currentTransition=i,this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:this.lastSuccessfulNavigation?K(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null,abort:()=>o.abortController.abort()});let a=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),s=o.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!a&&s!=="reload")return this.events.next(new ye(o.id,this.urlSerializer.serialize(o.rawUrl),"",Nt.IgnoredSameUrlNavigation)),o.resolve(!1),Ae;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return S(o).pipe(L(l=>(this.events.next(new $e(l.id,this.urlSerializer.serialize(l.extractedUrl),l.source,l.restoredState)),l.id!==this.navigationId?Ae:Promise.resolve(l))),Ua(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),h(l=>{i.targetSnapshot=l.targetSnapshot,i.urlAfterRedirects=l.urlAfterRedirects,this.currentNavigation.update(f=>(f.finalUrl=l.urlAfterRedirects,f));let p=new Ut(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(p)}));if(a&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:l,extractedUrl:p,source:f,restoredState:I,extras:m}=o,C=new $e(l,this.urlSerializer.serialize(p),f,I);this.events.next(C);let b=$n(this.rootComponentType).snapshot;return this.currentTransition=i=K(v({},o),{targetSnapshot:b,urlAfterRedirects:p,extras:K(v({},m),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(Z=>(Z.finalUrl=p,Z)),S(i)}else return this.events.next(new ye(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Nt.IgnoredByUrlHandlingStrategy)),o.resolve(!1),Ae}),h(o=>{let a=new pi(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(a)}),E(o=>(this.currentTransition=i=K(v({},o),{guards:Zo(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),i)),la(this.environmentInjector,o=>this.events.next(o)),h(o=>{if(i.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw Ai(this.urlSerializer,o.guardsResult);let a=new di(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(a)}),w(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",Y.GuardRejected),!1)),nr(o=>{if(o.guards.canActivateChecks.length!==0)return S(o).pipe(h(a=>{let s=new ui(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}),L(a=>{let s=!1;return S(a).pipe(La(this.paramsInheritanceStrategy,this.environmentInjector),h({next:()=>s=!0,complete:()=>{s||this.cancelNavigationTransition(a,"",Y.NoDataFromResolver)}}))}),h(a=>{let s=new Ei(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(s)}))}),nr(o=>{let a=s=>{let l=[];if(s.routeConfig?.loadComponent){let p=tt(s)??this.environmentInjector;l.push(this.configLoader.loadComponent(p,s.routeConfig).pipe(h(f=>{s.component=f}),E(()=>{})))}for(let p of s.children)l.push(...a(p));return l};return P(a(o.targetSnapshot.root)).pipe(Wi(null),ee(1))}),nr(()=>this.afterPreactivation()),L(()=>{let{currentSnapshot:o,targetSnapshot:a}=i,s=this.createViewTransition?.(this.environmentInjector,o.root,a.root);return s?ne(s).pipe(E(()=>i)):S(i)}),E(o=>{let a=Ho(t.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=i=K(v({},o),{targetRouterState:a}),this.currentNavigation.update(s=>(s.targetRouterState=a,s)),i}),h(()=>{this.events.next(new Lt)}),Yo(this.rootContexts,t.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ee(1),H(new Qt(o=>{let a=i.abortController.signal,s=()=>o.next();return a.addEventListener("abort",s),()=>a.removeEventListener("abort",s)}).pipe(w(()=>!n&&!i.targetRouterState),h(()=>{this.cancelNavigationTransition(i,i.abortController.signal.reason+"",Y.Aborted)}))),h({next:o=>{n=!0,this.lastSuccessfulNavigation=xe(this.currentNavigation),this.events.next(new Ce(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{n=!0}}),H(this.transitionAbortWithErrorSubject.pipe(h(o=>{throw o}))),Wt(()=>{n||this.cancelNavigationTransition(i,"",Y.SupersededByNewNavigation),this.currentTransition?.id===i.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),je(o=>{if(this.destroyed)return i.resolve(!1),Ae;if(n=!0,Wn(o))this.events.next(new Se(i.id,this.urlSerializer.serialize(i.extractedUrl),o.message,o.cancellationCode)),Ko(o)?this.events.next(new Xe(o.url,o.navigationBehaviorOptions)):i.resolve(!1);else{let a=new Ze(i.id,this.urlSerializer.serialize(i.extractedUrl),o,i.targetSnapshot??void 0);try{let s=pe(this.environmentInjector,()=>this.navigationErrorHandler?.(a));if(s instanceof Je){let{message:l,cancellationCode:p}=Ai(this.urlSerializer,s);this.events.next(new Se(i.id,this.urlSerializer.serialize(i.extractedUrl),l,p)),this.events.next(new Xe(s.redirectTo,s.navigationBehaviorOptions))}else throw this.events.next(a),o}catch(s){this.options.resolveNavigationPromiseOnError?i.resolve(!1):i.reject(s)}}return Ae}))}))}cancelNavigationTransition(t,i,n){let o=new Se(t.id,this.urlSerializer.serialize(t.extractedUrl),i,n);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),i=xe(this.currentNavigation),n=i?.targetBrowserUrl??i?.extractedUrl;return t.toString()!==n?.toString()&&!i?.extras.skipLocationChange}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function ka(r){return r!==Mt}var so=(()=>{class r{static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:()=>c(Ba),providedIn:"root"})}return r})(),Ci=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},Ba=(()=>{class r extends Ci{static \u0275fac=(()=>{let t;return function(n){return(t||(t=Zi(r)))(n||r)}})();static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})(),lo=(()=>{class r{urlSerializer=c(Bt);options=c(jt,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=c(Xt);urlHandlingStrategy=c(Mi);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Ie;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:t,initialUrl:i,targetBrowserUrl:n}){let o=t!==void 0?this.urlHandlingStrategy.merge(t,i):i,a=n??o;return a instanceof Ie?this.urlSerializer.serialize(a):a}commitTransition({targetRouterState:t,finalUrl:i,initialUrl:n}){i&&t?(this.currentUrlTree=i,this.rawUrlTree=this.urlHandlingStrategy.merge(i,n),this.routerState=t):this.rawUrlTree=n}routerState=$n(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:t}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t??this.rawUrlTree)}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:()=>c($a),providedIn:"root"})}return r})(),$a=(()=>{class r extends lo{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(i=>{i.type==="popstate"&&setTimeout(()=>{t(i.url,i.state,"popstate")})})}handleRouterEvent(t,i){t instanceof $e?this.updateStateMemento():t instanceof ye?this.commitTransition(i):t instanceof Ut?this.urlUpdateStrategy==="eager"&&(i.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Lt?(this.commitTransition(i),this.urlUpdateStrategy==="deferred"&&!i.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(i),i)):t instanceof Se&&t.code!==Y.SupersededByNewNavigation&&t.code!==Y.Redirect?this.restoreHistory(i):t instanceof Ze?this.restoreHistory(i,!0):t instanceof Ce&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,{extras:i,id:n}){let{replaceUrl:o,state:a}=i;if(this.location.isCurrentPathEqualTo(t)||o){let s=this.browserPageId,l=v(v({},a),this.generateNgRouterState(n,s));this.location.replaceState(t,"",l)}else{let s=v(v({},a),this.generateNgRouterState(n,this.browserPageId+1));this.location.go(t,"",s)}}restoreHistory(t,i=!1){if(this.canceledNavigationResolution==="computed"){let n=this.browserPageId,o=this.currentPageId-n;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===t.finalUrl&&o===0&&(this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(i&&this.resetInternalState(t),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,i){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:i}:{navigationId:t}}static \u0275fac=(()=>{let t;return function(n){return(t||(t=Zi(r)))(n||r)}})();static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function Tr(r,e){r.events.pipe(w(t=>t instanceof Ce||t instanceof Se||t instanceof Ze||t instanceof ye),E(t=>t instanceof Ce||t instanceof ye?0:(t instanceof Se?t.code===Y.Redirect||t.code===Y.SupersededByNewNavigation:!1)?2:1),w(t=>t!==2),ee(1)).subscribe(()=>{e()})}var ja={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},qa={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},nt=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=c(Qr);stateManager=c(lo);options=c(jt,{optional:!0})||{};pendingTasks=c(Br);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=c(ao);urlSerializer=c(Bt);location=c(Xt);urlHandlingStrategy=c(Mi);injector=c(Rt);_events=new W;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=c(so);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=c(qt,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!c(yi,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}eventsSubscription=new Mr;subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(i=>{try{let n=this.navigationTransitions.currentTransition,o=xe(this.navigationTransitions.currentNavigation);if(n!==null&&o!==null){if(this.stateManager.handleRouterEvent(i,o),i instanceof Se&&i.code!==Y.Redirect&&i.code!==Y.SupersededByNewNavigation)this.navigated=!0;else if(i instanceof Ce)this.navigated=!0;else if(i instanceof Xe){let a=i.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(i.url,n.currentRawUrl),l=v({browserUrl:n.extras.browserUrl,info:n.extras.info,skipLocationChange:n.extras.skipLocationChange,replaceUrl:n.extras.replaceUrl||this.urlUpdateStrategy==="eager"||ka(n.source)},a);this.scheduleNavigation(s,Mt,null,l,{resolve:n.resolve,reject:n.reject,promise:n.promise})}}jo(i)&&this._events.next(i)}catch(n){this.navigationTransitions.transitionAbortWithErrorSubject.next(n)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Mt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,i,n)=>{this.navigateToSyncWithBrowser(t,n,i)})}navigateToSyncWithBrowser(t,i,n){let o={replaceUrl:!0},a=n?.navigationId?n:null;if(n){let l=v({},n);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let s=this.parseUrl(t);this.scheduleNavigation(s,i,a,o).catch(l=>{this.disposed||this.injector.get(Yi)(l)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return xe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(_r),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,i={}){let{relativeTo:n,queryParams:o,fragment:a,queryParamsHandling:s,preserveFragment:l}=i,p=l?this.currentUrlTree.fragment:a,f=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":f=v(v({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let I;try{let m=n?n.snapshot:this.routerState.snapshot.root;I=Fn(m)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),I=this.currentUrlTree.root}return Vn(I,t,f,p??null)}navigateByUrl(t,i={skipLocationChange:!1}){let n=Ye(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(o,Mt,null,i)}navigate(t,i={skipLocationChange:!1}){return za(t),this.navigateByUrl(this.createUrlTree(t,i),i)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,i){let n;if(i===!0?n=v({},ja):i===!1?n=v({},qa):n=i,Ye(t))return Sn(this.currentUrlTree,t,n);let o=this.parseUrl(t);return Sn(this.currentUrlTree,o,n)}removeEmptyProps(t){return Object.entries(t).reduce((i,[n,o])=>(o!=null&&(i[n]=o),i),{})}scheduleNavigation(t,i,n,o,a){if(this.disposed)return Promise.resolve(!1);let s,l,p;a?(s=a.resolve,l=a.reject,p=a.promise):p=new Promise((I,m)=>{s=I,l=m});let f=this.pendingTasks.add();return Tr(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:i,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:s,reject:l,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(I=>Promise.reject(I))}static \u0275fac=function(i){return new(i||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();function za(r){for(let e=0;e<r.length;e++)if(r[e]==null)throw new G(4008,!1)}var Ha=new ae("");function Wa(r,...e){return Fr([{provide:qt,multi:!0,useValue:r},[],{provide:ve,useFactory:Ga,deps:[nt]},{provide:Wr,multi:!0,useFactory:Ka},e.map(t=>t.\u0275providers)])}function Ga(r){return r.routerState.root}function Ka(){let r=c(Vr);return e=>{let t=r.get(Gr);if(e!==t.components[0])return;let i=r.get(nt),n=r.get(Ya);r.get(Za)===1&&i.initialNavigation(),r.get(Xa,null,{optional:!0})?.setUpPreloading(),r.get(Ha,null,{optional:!0})?.init(),i.resetRootComponentType(t.componentTypes[0]),n.closed||(n.next(),n.complete(),n.unsubscribe())}}var Ya=new ae("",{factory:()=>new W}),Za=new ae("",{providedIn:"root",factory:()=>1});var Xa=new ae("");var Oi=class r{http=c(Ue);baseUrl="https://wakfu.cdn.ankama.com/gamedata/";getConfig(){return this.http.get(this.baseUrl+"config.json")}getItems(e){return this.http.get(this.baseUrl+e+"/items.json")}getActions(e){return this.http.get(this.baseUrl+e+"/actions.json")}getStates(e){return this.http.get(this.baseUrl+e+"/states.json")}getRecipesResult(e){return this.http.get(this.baseUrl+e+"/recipeResults.json")}getJobsItems(e){return this.http.get(this.baseUrl+e+"/jobsItems.json")}getRecipeIngredients(e){return this.http.get(this.baseUrl+e+"/recipeIngredients.json")}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var co=(_=>(_[_.LE_DIANINE=24700]="LE_DIANINE",_[_.LE_DORRRRE=24610]="LE_DORRRRE",_[_.LE_JALM=24593]="LE_JALM",_[_.LA_FLOUFF=24607]="LA_FLOUFF",_[_.L_ATTENTIONNEE=24551]="L_ATTENTIONNEE",_[_.LA_GAINE=24566]="LA_GAINE",_[_.LA_ZEOR=24668]="LA_ZEOR",_[_.LE_CONDOTTIER=24513]="LE_CONDOTTIER",_[_.LES_OPRESSANTES=24524]="LES_OPRESSANTES",_[_.LE_FOUIP=24601]="LE_FOUIP",_[_.LE_FELDSPATH=24615]="LE_FELDSPATH",_[_.LES_MELLES=24538]="LES_MELLES",_[_.LE_FAINNE=24585]="LE_FAINNE",_[_.LA_PROMESSE=24537]="LA_PROMESSE",_[_.LE_LIEUTE=24505]="LE_LIEUTE",_[_.LE_PELO=24521]="LE_PELO",_[_.LE_TIG=24488]="LE_TIG",_[_.LE_CABOT=24426]="LE_CABOT",_[_.LA_BASTOS=24408]="LA_BASTOS",_))(co||{}),po=r=>Object.values(co).includes(r);var Re=class r{ankamaCdnService=c(Oi);static MEDAILLE_BRAVOURE_ITEM_ID=24705;config=new d("");config$=this.config.asObservable().pipe(w(e=>e.length>0));action=new d([]);action$=this.action.asObservable().pipe(w(e=>e.length>0));item=new d([]);item$=this.item.asObservable().pipe(w(e=>e.length>0));states=new d([]);states$=this.states.asObservable().pipe(w(e=>e.length>0));recipes=new d([]);recipes$=this.recipes.asObservable().pipe(w(e=>e.length>0));idSiouperes=new d([]);idSiouperes$=this.idSiouperes.asObservable().pipe(w(e=>e.length>0));recipeIngredients=new d([]);recipeIngredients$=this.recipeIngredients.asObservable().pipe(w(e=>e.length>0));mapProductItemIdToRecipeResult=new Map;mapRecipeIdToRecipeIngredients=new Map;loadItems(e){this.ankamaCdnService.getItems(e).pipe(h(t=>this.item.next(t))).subscribe()}loadActions(e){this.ankamaCdnService.getActions(e).pipe(h(t=>this.action.next(t))).subscribe()}loadStates(e){this.ankamaCdnService.getStates(e).pipe(h(t=>this.states.next(t))).subscribe()}loadRecipeIngredients(e){this.ankamaCdnService.getRecipeIngredients(e).pipe(h(t=>this.recipeIngredients.next(t)),h(t=>{t.forEach(i=>{let n=this.mapRecipeIdToRecipeIngredients.get(i.recipeId)||[];n.push(i),this.mapRecipeIdToRecipeIngredients.set(i.recipeId,n)})})).subscribe()}loadRecipesResult(e){this.ankamaCdnService.getRecipesResult(e).pipe(h(t=>this.recipes.next(t)),h(t=>{t.forEach(i=>{this.mapProductItemIdToRecipeResult.set(i.productedItemId,i)})})).subscribe()}loadIdSioupere(e){this.ankamaCdnService.getJobsItems(e).pipe(E(t=>t.filter(i=>i.title.fr.toLowerCase().includes("sioup\xE8re"))),h(t=>this.idSiouperes.next(t))).subscribe()}load(){this.ankamaCdnService.getConfig().pipe(h(e=>this.config.next(e.version)),h(e=>this.loadItems(e.version)),h(e=>this.loadActions(e.version)),h(e=>this.loadStates(e.version)),h(e=>this.loadRecipesResult(e.version)),h(e=>this.loadIdSioupere(e.version)),h(e=>this.loadRecipeIngredients(e.version))).subscribe()}getActionList(){return this.action.getValue()}getStatesList(){return this.states.getValue()}isItemPvP(e){if(po(e))return!0;let t=this.mapProductItemIdToRecipeResult.get(e);return t?(this.mapRecipeIdToRecipeIngredients.get(t.recipeId)||[]).some(n=>n.itemId===r.MEDAILLE_BRAVOURE_ITEM_ID):!1}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Pi=class r{condition=new Map;http=c(Ue);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/itemConditions.json").pipe(h(t=>t.forEach(i=>this.condition.set(i.id,i))),Me(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),e()}})}),this.loadPromise)}findCondition(e){return this.condition.get(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ni=class r{http=c(Ue);monsterDrops=new d([]);monsterDrops$=this.monsterDrops.asObservable();loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/monstres_drops_gfx.json").pipe(h(t=>this.monsterDrops.next(t)),Me(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),this.monsterDrops.next([]),e()}})}),this.loadPromise)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Cr=(D=>(D.POIDS="POIDS",D.MAITRISES="MAITRISES",D.RESISTANCES="RESISTANCES",D.EQUILIBRE="EQUILIBRE",D.PARADE_ARMURE_DONNEE="PARADE_ARMURE_DONNEE",D.POINT_DE_VIE="POINT_DE_VIE",D.TACLE="TACLE",D.ESQUIVE="ESQUIVE",D.TACLE_ESQUIVE="TACLE_ESQUIVE",D.CRITIQUE="CRITIQUE",D.PARADE="PARADE",D.CRITIQUE_PARADE="CRITIQUE_PARADE",D.PA="PA",D.PM="PM",D.PO="PO",D.PW="PW",D))(Cr||{});var _e=class r{imageService=c(Qe);itemTypes=new Map([[1,{ids:[101,111,114,117,223,253]}],[2,{ids:[108,110,113,115,254]}],[3,{ids:[103]}],[4,{ids:[119]}],[5,{ids:[120]}],[6,{ids:[132]}],[7,{ids:[133]}],[8,{ids:[134]}],[9,{ids:[136]}],[10,{ids:[138]}],[11,{ids:[646]}],[12,{ids:[189]}],[13,{ids:[112]}],[14,{ids:[582]}]]);getItemTypes(){return this.itemTypes}getItemType(e){let t;return this.itemTypes.forEach((i,n)=>{i.ids.includes(e)&&(t=n)}),t}getLogo(e){return e?this.imageService.mapUrlItemType.get(e)??"":""}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var ot=class r extends U{itemTypeServices=c(_e);selected=new d([]);selected$=this.selected.asObservable();keyEnum="KEY_ITEM_TYPE";form=new J({deuxMains:new u,uneMain:new u,anneau:new u,bottes:new u,amulette:new u,cape:new u,ceinture:new u,casque:new u,plastron:new u,epaulettes:new u,bouclier:new u,dague:new u,accessoires:new u,familier:new u});constructor(){super(),this.init()}handleChanges(e){let t=[];e.uneMain&&t.push(this.itemTypeServices.getItemTypes().get(2)?.ids),e.deuxMains&&t.push(this.itemTypeServices.getItemTypes().get(1)?.ids),e.anneau&&t.push(this.itemTypeServices.getItemTypes().get(3)?.ids),e.bottes&&t.push(this.itemTypeServices.getItemTypes().get(4)?.ids),e.amulette&&t.push(this.itemTypeServices.getItemTypes().get(5)?.ids),e.cape&&t.push(this.itemTypeServices.getItemTypes().get(6)?.ids),e.ceinture&&t.push(this.itemTypeServices.getItemTypes().get(7)?.ids),e.casque&&t.push(this.itemTypeServices.getItemTypes().get(8)?.ids),e.plastron&&t.push(this.itemTypeServices.getItemTypes().get(9)?.ids),e.epaulettes&&t.push(this.itemTypeServices.getItemTypes().get(10)?.ids),e.bouclier&&t.push(this.itemTypeServices.getItemTypes().get(12)?.ids),e.dague&&t.push(this.itemTypeServices.getItemTypes().get(13)?.ids),e.accessoires&&t.push(this.itemTypeServices.getItemTypes().get(11)?.ids),e.familier&&t.push(this.itemTypeServices.getItemTypes().get(14)?.ids),this.selected.next(t.flat())}setValue(e){this.form.setValue({deuxMains:e?.deuxMains??!1,uneMain:e?.uneMain??!1,anneau:e?.anneau??!1,bottes:e?.bottes??!1,amulette:e?.amulette??!1,cape:e?.cape??!1,ceinture:e?.ceinture??!1,casque:e?.casque??!1,plastron:e?.plastron??!1,epaulettes:e?.epaulettes??!1,bouclier:e?.bouclier??!1,dague:e?.dague??!1,accessoires:e?.accessoires??!1,familier:e?.familier??!1})}setDefaultValue(){this.setItemType()}setItemType(...e){this.form.setValue({deuxMains:e.includes(1),uneMain:e.includes(2),anneau:e.includes(3),bottes:e.includes(4),amulette:e.includes(5),cape:e.includes(6),ceinture:e.includes(7),casque:e.includes(8),plastron:e.includes(9),epaulettes:e.includes(10),bouclier:e.includes(12),dague:e.includes(13),accessoires:e.includes(11),familier:e.includes(14)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ui=class r extends U{static DEFAULT_VALUE="MAITRISES";sort=new d(r.DEFAULT_VALUE);sort$=this.sort.asObservable();keyEnum="KEY_SORT_CHOICE";form=new u(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.sort.next(e)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var at=class r extends U{static DEFAULT_VALUE=!1;onlyNoSecondary=new d(!1);onlyNoSecondary$=this.onlyNoSecondary.asObservable();keyEnum="KEY_ONLY_NO_SECONDARY";form=new u(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.onlyNoSecondary.next(e??!1)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var st=class r extends U{idMajor=new d([]);idMajor$=this.idMajor.asObservable();keyEnum="KEY_MAJOR_PRESENT";form=new J({PA:new u,PM:new u,PW:new u,PO:new u,CONTROLE:new u,ARMURE_DONNEE:new u,ARMURE_RECUE:new u,CRITIQUE:new u,PARADE:new u,RESISTANCE_DOS:new u,RESISTANCE_CRITIQUE:new u,PERTE_PA:new u,PERTE_PM:new u,PERTE_PW:new u,PERTE_PO:new u,PERTE_CONTROLE:new u,PERTE_ARMURE_DONNEE:new u,PERTE_ARMURE_RECUE:new u,PERTE_CRITIQUE:new u,PERTE_PARADE:new u,PERTE_RESISTANCE_DOS:new u,PERTE_RESISTANCE_CRITIQUE:new u,PERTE_MAITRISES_MELEE:new u,PERTE_MAITRISES_DISTANCE:new u,PERTE_MAITRISES_CRITIQUE:new u,PERTE_MAITRISES_DOS:new u,PERTE_MAITRISES_SOIN:new u,PERTE_MAITRISES_BERZERK:new u});constructor(){super(),this.init()}handleChanges(e){let t=[];e.PA&&t.push({id:31}),e.PM&&t.push({id:41}),e.PW&&t.push({id:191}),e.PO&&t.push({id:160}),e.CONTROLE&&t.push({id:184}),e.ARMURE_DONNEE&&t.push({id:39,parameter:120}),e.ARMURE_RECUE&&t.push({id:39,parameter:121}),e.CRITIQUE&&t.push({id:150}),e.PARADE&&t.push({id:875}),e.RESISTANCE_DOS&&t.push({id:71}),e.RESISTANCE_CRITIQUE&&t.push({id:988}),e.PERTE_PA&&t.push({id:56}),e.PERTE_PM&&t.push({id:57}),e.PERTE_PW&&t.push({id:192}),e.PERTE_PO&&t.push({id:161}),e.PERTE_CONTROLE&&t.push({id:-1}),e.PERTE_ARMURE_DONNEE&&t.push({id:40,parameter:120}),e.PERTE_ARMURE_RECUE&&t.push({id:40,parameter:121}),e.PERTE_CRITIQUE&&t.push({id:168}),e.PERTE_PARADE&&t.push({id:876}),e.PERTE_RESISTANCE_DOS&&t.push({id:1063}),e.PERTE_RESISTANCE_CRITIQUE&&t.push({id:1062}),e.PERTE_MAITRISES_MELEE&&t.push({id:1059}),e.PERTE_MAITRISES_DISTANCE&&t.push({id:1060}),e.PERTE_MAITRISES_CRITIQUE&&t.push({id:1056}),e.PERTE_MAITRISES_DOS&&t.push({id:181}),e.PERTE_MAITRISES_SOIN&&t.push({id:-1}),e.PERTE_MAITRISES_BERZERK&&t.push({id:1061}),this.idMajor.next(t)}setValue(e){this.form.setValue({PA:e?.PA??!1,PM:e?.PM??!1,PW:e?.PW??!1,PO:e?.PO??!1,CONTROLE:e?.CONTROLE??!1,ARMURE_DONNEE:e?.ARMURE_DONNEE??!1,ARMURE_RECUE:e?.ARMURE_RECUE??!1,CRITIQUE:e?.CRITIQUE??!1,PARADE:e?.PARADE??!1,RESISTANCE_DOS:e?.RESISTANCE_DOS??!1,RESISTANCE_CRITIQUE:e?.RESISTANCE_CRITIQUE??!1,PERTE_PA:e?.PERTE_PA??!1,PERTE_PM:e?.PERTE_PM??!1,PERTE_PW:e?.PERTE_PW??!1,PERTE_PO:e?.PERTE_PO??!1,PERTE_CONTROLE:e?.PERTE_CONTROLE??!1,PERTE_ARMURE_DONNEE:e?.PERTE_ARMURE_DONNEE??!1,PERTE_ARMURE_RECUE:e?.PERTE_ARMURE_RECUE??!1,PERTE_CRITIQUE:e?.PERTE_CRITIQUE??!1,PERTE_PARADE:e?.PERTE_PARADE??!1,PERTE_RESISTANCE_DOS:e?.PERTE_RESISTANCE_DOS??!1,PERTE_RESISTANCE_CRITIQUE:e?.PERTE_RESISTANCE_CRITIQUE??!1,PERTE_MAITRISES_MELEE:e?.PERTE_MAITRISES_MELEE??!1,PERTE_MAITRISES_DISTANCE:e?.PERTE_MAITRISES_DISTANCE??!1,PERTE_MAITRISES_CRITIQUE:e?.PERTE_MAITRISES_CRITIQUE??!1,PERTE_MAITRISES_DOS:e?.PERTE_MAITRISES_DOS??!1,PERTE_MAITRISES_SOIN:e?.PERTE_MAITRISES_SOIN??!1,PERTE_MAITRISES_BERZERK:e?.PERTE_MAITRISES_BERZERK??!1})}setDefaultValue(){this.setMajor()}setMajor(...e){this.form.setValue({PA:e.some(t=>t.id===31),PM:e.some(t=>t.id===41),PW:e.some(t=>t.id===191),PO:e.some(t=>t.id===160),CONTROLE:e.some(t=>t.id===184),ARMURE_DONNEE:e.some(t=>t.id===39&&t.parameter===120),ARMURE_RECUE:e.some(t=>t.id===39&&t.parameter===121),CRITIQUE:e.some(t=>t.id===150),PARADE:e.some(t=>t.id===875),RESISTANCE_DOS:e.some(t=>t.id===71),RESISTANCE_CRITIQUE:e.some(t=>t.id===988),PERTE_PA:e.some(t=>t.id===56),PERTE_PM:e.some(t=>t.id===57),PERTE_PW:e.some(t=>t.id===192),PERTE_PO:e.some(t=>t.id===161),PERTE_CONTROLE:e.some(t=>t.id===-1),PERTE_ARMURE_DONNEE:e.some(t=>t.id===40&&t.parameter===120),PERTE_ARMURE_RECUE:e.some(t=>t.id===40&&t.parameter===121),PERTE_CRITIQUE:e.some(t=>t.id===168),PERTE_PARADE:e.some(t=>t.id===876),PERTE_RESISTANCE_DOS:e.some(t=>t.id===1063),PERTE_RESISTANCE_CRITIQUE:e.some(t=>t.id===1062),PERTE_MAITRISES_MELEE:e.some(t=>t.id===1059),PERTE_MAITRISES_DISTANCE:e.some(t=>t.id===1060),PERTE_MAITRISES_CRITIQUE:e.some(t=>t.id===1056),PERTE_MAITRISES_DOS:e.some(t=>t.id===181),PERTE_MAITRISES_SOIN:e.some(t=>t.id===-1),PERTE_MAITRISES_BERZERK:e.some(t=>t.id===1061)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var uo=(n=>(n.COEUR_HUPPERMAGE="COEUR_HUPPERMAGE",n.DENOUEMENT="DENOUEMENT",n.DEMESURE="DEMESURE",n.CHAOS="CHAOS",n))(uo||{});var lt=class r extends U{static DEFAULT_VALUE=[];multiplicateurElem=new d(1);multiplicateurElem$=this.multiplicateurElem.asObservable();denouement=new d(!1);denouement$=this.denouement.asObservable();demesure=new d(!1);demesure$=this.demesure.asObservable();chaos=new d(!1);chaos$=this.chaos.asObservable();keyEnum="KEY_MODIFIER_MECANISM";form=new u(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){let t=1;e?.includes("COEUR_HUPPERMAGE".valueOf())&&(t*=1.2),this.multiplicateurElem.next(t),this.denouement.next(e?.includes("DENOUEMENT".valueOf())??!1),this.demesure.next(e?.includes("DEMESURE".valueOf())??!1),this.chaos.next(e?.includes("CHAOS".valueOf())??!1)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var ct=class r extends U{static DEFAULT_LEVEL_MIN=200;static DEFAULT_LEVEL_MAX=245;selected=new d([]);selected$=this.selected.asObservable();levelMin=new d(r.DEFAULT_LEVEL_MIN);levelMin$=this.levelMin.asObservable();levelMax=new d(r.DEFAULT_LEVEL_MAX);levelMax$=this.levelMax.asObservable();keyEnum="KEY_ITEM_LEVEL";form=new J({levelMin:new u(r.DEFAULT_LEVEL_MIN,{nonNullable:!0}),levelMax:new u(r.DEFAULT_LEVEL_MAX,{nonNullable:!0})});constructor(){super(),this.init()}handleChanges(e){this.levelMin.next(e.levelMin??r.DEFAULT_LEVEL_MIN),this.levelMax.next(e.levelMax??r.DEFAULT_LEVEL_MAX)}setValue(e){this.form.setValue({levelMin:e?.levelMin??r.DEFAULT_LEVEL_MIN,levelMax:e?.levelMax??r.DEFAULT_LEVEL_MAX})}setDefaultValue(){this.form.setValue({levelMin:r.DEFAULT_LEVEL_MIN,levelMax:r.DEFAULT_LEVEL_MAX})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var pt=class r extends U{selected=new d([]);selected$=this.selected.asObservable();rarity=new d([]);rarity$=this.rarity.asObservable();keyEnum="KEY_RARETE_ITEM";form=new J({normal:new u,rare:new u,mythique:new u,legendaire:new u,souvenir:new u,relique:new u,epique:new u});constructor(){super(),this.init()}handleChanges(e){let t=[];e.normal&&t.push(1),e.rare&&t.push(2),e.mythique&&t.push(3),e.legendaire&&t.push(4),e.relique&&t.push(5),e.souvenir&&t.push(6),e.epique&&t.push(7),this.rarity.next(t)}setValue(e){this.form.setValue({normal:e?.normal??!1,rare:e?.rare??!1,mythique:e?.mythique??!1,legendaire:e?.legendaire??!1,souvenir:e?.souvenir??!1,relique:e?.relique??!1,epique:e?.epique??!1})}setRarity(...e){this.form.setValue({normal:e.includes(1),rare:e.includes(2),mythique:e.includes(3),legendaire:e.includes(4),relique:e.includes(5),souvenir:e.includes(6),epique:e.includes(7)})}setDefaultValue(){this.setRarity()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Di=class r extends U{rareteItemFormServices=c(pt);itemTypeFormServices=c(ot);itemTypeService=c(_e);itemLevelFormService=c(ct);majorPresentFormService=c(st);static DEFAULT_VALUE="";itemName=new d("");itemName$=this.itemName.asObservable();keyEnum="KEY_SEARCH_ITEM_NAME";form=new u(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.itemName.next(e??r.DEFAULT_VALUE)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}setFilter(e){this.rareteItemFormServices.setDefaultValue(),this.majorPresentFormService.setDefaultValue();let t=this.itemTypeService.getItemType(e.itemTypeId);if(t)if(this.itemTypeFormServices.setItemType(t),e.level<=20)this.itemLevelFormService.setValue({levelMin:0,levelMax:20});else{let i=Math.ceil((e.level-20)/15);this.itemLevelFormService.setValue({levelMin:(i-1)*15+20+1,levelMax:i*15+20})}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var dt=class r extends U{idResistances=new d([]);idResistances$=this.idResistances.asObservable();keyEnum="KEY_RESISTANCES";form=new J({feu:new u,eau:new u,terre:new u,air:new u});constructor(){super(),this.init()}handleChanges(e){let t=[];e.feu&&t.push(82),e.eau&&t.push(83),e.terre&&t.push(84),e.air&&t.push(85),this.idResistances.next(t)}setValue(e){this.form.setValue({feu:e?.feu??!1,eau:e?.eau??!1,terre:e?.terre??!1,air:e?.air??!1})}setResistances(...e){this.form.setValue({feu:e.includes(82),eau:e.includes(83),terre:e.includes(84),air:e.includes(85)})}setDefaultValue(){this.setResistances()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var ut=class r extends U{nbElements=new d(0);nbElements$=this.nbElements.asObservable();idMaitrises=new d([]);idMaitrises$=this.idMaitrises.asObservable();keyEnum="KEY_MAITRISES";form=new J({feu:new u,eau:new u,terre:new u,air:new u,critique:new u,dos:new u,melee:new u,distance:new u,soin:new u,berzerk:new u});constructor(){super(),this.init()}handleChanges(e){let t=0,i=[];e.feu&&(t++,i.push(122)),e.eau&&(t++,i.push(124)),e.terre&&(t++,i.push(123)),e.air&&(t++,i.push(125)),this.nbElements.next(t),e.critique&&i.push(149),e.dos&&i.push(180),e.melee&&i.push(1052),e.distance&&i.push(1053),e.soin&&i.push(26),e.berzerk&&i.push(1055),this.idMaitrises.next(i)}setValue(e){this.form.setValue({feu:e?.feu??!1,eau:e?.eau??!1,terre:e?.terre??!1,air:e?.air??!1,critique:e?.critique??!1,dos:e?.dos??!1,melee:e?.melee??!1,distance:e?.distance??!1,soin:e?.soin??!1,berzerk:e?.berzerk??!1})}setDefaultValue(){this.setMaitrises()}setMaitrises(...e){this.form.setValue({feu:e.includes(122),eau:e.includes(124),terre:e.includes(123),air:e.includes(125),critique:e.includes(149),dos:e.includes(180),melee:e.includes(1052),distance:e.includes(1053),soin:e.includes(26),berzerk:e.includes(1055)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Et=class r extends U{static DEFAULT_VALUE=!1;onlyNoElem=new d(!1);onlyNoElem$=this.onlyNoElem.asObservable();keyEnum="KEY_ONLY_NO_ELEM";form=new u(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.onlyNoElem.next(e??!1)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var wi=class r extends U{static DEFAULT_VALUE=!1;reverse=new d(r.DEFAULT_VALUE);reverse$=this.reverse.asObservable();keyEnum="KEY_REVERSE";form=new u(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.reverse.next(e??r.DEFAULT_VALUE)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var xi=class r extends U{static DEFAULT_VALUE_DROP=!0;static DEFAULT_VALUE_CRAFTABLE=!0;static DEFAULT_VALUE_BOSS=!0;static DEFAULT_VALUE_ARCHI=!0;static DEFAULT_VALUE_PVP=!0;drop=new d(r.DEFAULT_VALUE_DROP);drop$=this.drop.asObservable();craftable=new d(r.DEFAULT_VALUE_CRAFTABLE);craftable$=this.craftable.asObservable();boss=new d(r.DEFAULT_VALUE_BOSS);boss$=this.boss.asObservable();archi=new d(r.DEFAULT_VALUE_ARCHI);archi$=this.archi.asObservable();pvp=new d(r.DEFAULT_VALUE_PVP);pvp$=this.pvp.asObservable();keyEnum="KEY_OBTENTION";form=new J({DROP:new u,CRAFTABLE:new u,BOSS:new u,ARCHI:new u,PVP:new u});constructor(){super(),this.init()}handleChanges(e){this.drop.next(!e.DROP),this.craftable.next(!e.CRAFTABLE),this.boss.next(!e.BOSS),this.archi.next(!e.ARCHI),this.pvp.next(!e.PVP)}setValue(e){this.form.setValue({DROP:e?.DROP??r.DEFAULT_VALUE_DROP,CRAFTABLE:e?.CRAFTABLE??r.DEFAULT_VALUE_CRAFTABLE,BOSS:e?.BOSS??r.DEFAULT_VALUE_BOSS,ARCHI:e?.ARCHI??r.DEFAULT_VALUE_ARCHI,PVP:e?.PVP??r.DEFAULT_VALUE_PVP})}setDefaultValue(){this.setValue({DROP:r.DEFAULT_VALUE_DROP,CRAFTABLE:r.DEFAULT_VALUE_CRAFTABLE,BOSS:r.DEFAULT_VALUE_BOSS,ARCHI:r.DEFAULT_VALUE_ARCHI,PVP:r.DEFAULT_VALUE_PVP})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Eo=(m=>(m[m.EMBLEME_SHUSHU_1=18670]="EMBLEME_SHUSHU_1",m[m.EMBLEME_SHUSHU_2=18671]="EMBLEME_SHUSHU_2",m[m.EMBLEME_SHUSHU_3=18672]="EMBLEME_SHUSHU_3",m[m.EMBLEME_SHUSHU_4=18673]="EMBLEME_SHUSHU_4",m[m.EMBLEME_SHUSHU_5=18674]="EMBLEME_SHUSHU_5",m[m.EMBLEME_SHUSHU_6=18675]="EMBLEME_SHUSHU_6",m[m.EMBLEME_SHUSHU_7=18676]="EMBLEME_SHUSHU_7",m[m.EMBLEME_SHUSHU_8=18677]="EMBLEME_SHUSHU_8",m[m.EMBLEME_SHUSHU_9=18678]="EMBLEME_SHUSHU_9",m[m.EMBLEME_SHUSHU_10=18679]="EMBLEME_SHUSHU_10",m[m.EMBLEME_SHUSHU_11=18680]="EMBLEME_SHUSHU_11",m[m.EMBLEME_SHUSHU_12=18681]="EMBLEME_SHUSHU_12",m))(Eo||{}),mo=r=>Object.values(Eo).includes(r);var De=class r{itemTypeFormServices=c(ot);translateService=c(fe);onlyNoSecondaryFormService=c(at);sortChoiceFormService=c(Ui);majorPresentFormService=c(st);modifierElemMaitrisesFormService=c(lt);searchItemNameFormService=c(Di);rareteItemFormService=c(pt);itemLevelFormService=c(ct);resistanceFormService=c(dt);maitrisesFormService=c(ut);ankamaCdnFacade=c(Re);onlyNoElemFormService=c(Et);reverseFormService=c(wi);obtentionFormService=c(xi);monsterDropService=c(Ni);static ARMURE_DONNEE_RECUE_LIST=[39,40];static RESISTANCE_ELEM_IDS=[85,83,84,82];static MALUS_RESIS_ELEM_IDS=[97,96,98];static MAITRISES_ELEM_IDS=[122,123,124,125];static PERTE_MAITRISES_IDS=[130,132];static EQUILIBRE_RESISTANCE_MULTIPLIER=1.2;static DEFAULT_NB_ELEMENTS=4;idPierresList=[29847,29848,29849,29850,29851];LEVEL_RATIOS=[{maxLevel:36,ratio:this.truncate2(1/2)},{maxLevel:51,ratio:this.truncate2(3/5)},{maxLevel:66,ratio:this.truncate2(4/7)},{maxLevel:81,ratio:this.truncate2(6/10)},{maxLevel:96,ratio:this.truncate2(7/12)},{maxLevel:126,ratio:this.truncate2(10/15)},{maxLevel:141,ratio:this.truncate2(15/17)},{maxLevel:171,ratio:this.truncate2(19/20)},{maxLevel:186,ratio:this.truncate2(24/22)},{maxLevel:216,ratio:this.truncate2(30/25)}];items=[];fullItems$=new d([]);items$;itemsFilterByItemName$;itemsFilters$;recipesByProductId=new Map;itemsByName=new Map;monsterDropsByItemId=new Map;archiIds=new Set;isLoading=_t(!0);init(){this.initItemsList(),this.initFilter();let e=P([this.itemsFilters$,this.maitrisesFormService.nbElements$,this.maitrisesFormService.idMaitrises$,this.sortChoiceFormService.sort$,this.modifierElemMaitrisesFormService.multiplicateurElem$,this.modifierElemMaitrisesFormService.denouement$,this.resistanceFormService.idResistances$,this.onlyNoElemFormService.onlyNoElem$,this.onlyNoSecondaryFormService.onlyNoSecondary$,this.modifierElemMaitrisesFormService.chaos$]).pipe(h(([t,i,n,o,a,s,l,p,f,I])=>this.fillItemWeightMap(t,i,n,o,a,l,s,p,f,I)),E(([t])=>t));this.items$=P([e,this.reverseFormService.reverse$]).pipe(E(([t,i])=>{let n=t.sort(this.sortItems());return i?n.reverse():n}),h(()=>this.isLoading.set(!1)),Me(1)),this.items$.pipe(ee(1)).subscribe()}sortItems(){return(e,t)=>t.weightForSort>e.weightForSort?1:t.weightForSort===e.weightForSort?t.weight-e.weight:-1}isNotWIP(e){return!!e.title}filterObtention(e,t,i,n,o,a){let s=e.isCraftable&&!i;return s=s||e.mobDropable.length>0&&!t,s=s||e.bossDropable.length>0&&!n,s=s||e.archiDropable.length>0&&!o,s=s||e.isPvP&&!a,s=s||e.mobDropable.length===0&&e.bossDropable.length===0&&e.archiDropable.length===0&&!e.isCraftable&&!e.isPvP,s}initFilter(){this.items=this.items.filter(p=>![480,811,812].includes(p.itemTypeId)).filter(p=>this.isNotWIP(p)),this.fullItems$.next(this.items),this.itemsFilterByItemName$=P([this.fullItems$,this.searchItemNameFormService.itemName$]).pipe(E(([p,f])=>p.filter(I=>this.normalizeString(I.title[this.translateService.currentLang].toString()).includes(this.normalizeString(f)))));let e=P([this.itemsFilterByItemName$,this.obtentionFormService.drop$,this.obtentionFormService.craftable$,this.obtentionFormService.boss$,this.obtentionFormService.archi$,this.obtentionFormService.pvp$]).pipe(E(([p,f,I,m,C,b])=>p.filter(Z=>this.filterObtention(Z,f,I,m,C,b)))),t=P([e,this.itemLevelFormService.levelMin$]).pipe(E(([p,f])=>p.filter(I=>I.level>=f||I.itemTypeId===582))),i=P([t,this.itemLevelFormService.levelMax$]).pipe(E(([p,f])=>p.filter(I=>I.level<=f||I.itemTypeId===582))),n=P([i,this.rareteItemFormService.rarity$]).pipe(E(([p,f])=>p.filter(I=>f.length===0||f.includes(I.rarity)))),o=P([n,this.onlyNoElemFormService.onlyNoElem$]).pipe(E(([p,f])=>p.filter(I=>!f||!I.equipEffects.find(m=>[122,124,123,125,120,1068].includes(m.actionId))))),a=P([o,this.onlyNoSecondaryFormService.onlyNoSecondary$,this.modifierElemMaitrisesFormService.denouement$,this.onlyNoElemFormService.onlyNoElem$]).pipe(E(([p,f,I,m])=>p.filter(C=>!f||!C.equipEffects.find(b=>[180,1052,1053,26,1055].includes(b.actionId))&&(I&&!m||!C.equipEffects.find(b=>b.actionId===149))))),s=P([a,this.majorPresentFormService.idMajor$]).pipe(E(([p,f])=>p.filter(I=>this.majorIsPresent(f,I)))),l=P([s,this.modifierElemMaitrisesFormService.demesure$]).pipe(E(([p,f])=>p.filter(I=>!f||I.equipEffects.find(m=>[875,150].includes(m.actionId)))));this.itemsFilters$=P([l,this.itemTypeFormServices.selected$]).pipe(E(([p,f])=>p.filter(I=>f.length===0||f.includes(I.itemTypeId))))}normalizeString(e){return e.normalize("NFKD").replace(/['''`]/g,"'").replace(/\s+/g," ").trim().toLowerCase()}fillItemWeightMap(e,t,i,n,o,a,s,l,p,f){let I=0,m=0;e.forEach(C=>{C.resistance=Math.trunc(this.calculResistancesForAnItem(C,a)),C.maitrise=Math.trunc(this.calculMaitrisesForAnItem(C,t,i,o,s,l,p,f)),C.weight=this.calculWeight(C.resistance,C.maitrise,C.level),C.weightForSort=0}),n==="EQUILIBRE"&&e.length&&(I=e.sort((C,b)=>b.maitrise-C.maitrise)[0].maitrise,m=e.sort((C,b)=>b.resistance-C.resistance)[0].resistance),e.forEach(C=>{let b=this.createEffectsMap(C);C.weightForSort=this.calculateWeightForSort(C,n,b,I,m)})}createEffectsMap(e){let t=new Map;return e.equipEffects.forEach(i=>{t.set(i.actionId,i.params[0])}),t}calculateWeightForSort(e,t,i,n,o){switch(t){case"POIDS":return e.weight;case"MAITRISES":return e.maitrise;case"EQUILIBRE":return e.maitrise/n+r.EQUILIBRE_RESISTANCE_MULTIPLIER*(e.resistance/o);case"POINT_DE_VIE":return this.calculateNetEffect(i,20,21);case"PARADE_ARMURE_DONNEE":return this.calculateParadeArmureDonnee(e,i);case"TACLE":return this.calculateNetEffect(i,173,174);case"ESQUIVE":return this.calculateNetEffect(i,175,176);case"TACLE_ESQUIVE":return this.calculateNetEffect(i,173,174)+this.calculateNetEffect(i,175,176);case"CRITIQUE":return this.calculateNetEffect(i,150,168);case"PARADE":return this.calculateNetEffect(i,875,876);case"CRITIQUE_PARADE":return this.calculateNetEffect(i,150,168)+this.calculateNetEffect(i,875,876);case"PA":return this.calculateNetEffect(i,31,56);case"PM":return this.calculateNetEffect(i,41,57);case"PO":return this.calculateNetEffect(i,160,161);case"PW":return this.calculateNetEffect(i,193,194)+this.calculateNetEffect(i,191,192);default:return e.resistance}}calculateParadeArmureDonnee(e,t){let i=t.get(875)??0;return e.equipEffects.forEach(n=>{n.actionId===39&&n.params[4]===120&&(i+=n.params[0])}),i}getEffectValue(e,t){return e.get(t)??0}calculateNetEffect(e,t,i){return this.getEffectValue(e,t)-this.getEffectValue(e,i)}calculWeight(e,t,i){return Math.trunc(this.ratioWeightByLevel(i)*e+t)}ratioWeightByLevel(e){return this.LEVEL_RATIOS.find(i=>e<i.maxLevel)?.ratio??this.truncate2(33/27)}truncate2(e){return Math.trunc(e*100)/100}initItemsList(){P([this.ankamaCdnFacade.item$,this.ankamaCdnFacade.recipes$,this.ankamaCdnFacade.idSiouperes$,this.monsterDropService.monsterDrops$]).pipe(ee(1),h(([e,t,i,n])=>{e.filter(o=>!mo(o.definition.item.id)).forEach(o=>this.items.push({id:o.definition.item.id,level:o.definition.item.level,rarity:o.definition.item.baseParameters.rarity,itemTypeId:o.definition.item.baseParameters.itemTypeId,equipEffects:o.definition.equipEffects.map(a=>({id:a.effect.definition.id,actionId:a.effect.definition.actionId,params:a.effect.definition.params})),title:{fr:o.title.fr.trim(),en:o.title.en.trim(),es:o.title.es.trim(),pt:o.title.pt.trim()},description:o.description,idImage:o.definition.item.graphicParameters.gfxId,weightForSort:0,weight:0,maitrise:0,resistance:0,isCraftable:!1,mobDropable:[],bossDropable:[],archiDropable:[],isPvP:!1})),this.buildIndexes(t,n,i),this.items.forEach(o=>this.calculItemIsCraftable(o)),this.items.forEach(o=>this.calculItemIsDropable(o)),this.items.forEach(o=>this.calculIsItemPvP(o))})).subscribe()}buildIndexes(e,t,i){for(let n of e)this.recipesByProductId.set(n.productedItemId,n);for(let n of this.items)this.itemsByName.has(n.title.fr)||this.itemsByName.set(n.title.fr,[]),this.itemsByName.get(n.title.fr).push(n);for(let n of t)for(let o of n.idsDrop)this.monsterDropsByItemId.has(o)||this.monsterDropsByItemId.set(o,[]),this.monsterDropsByItemId.get(o).push(n);for(let n of i)this.archiIds.add(n.definition.id)}calculIsItemPvP(e){if(!this.ankamaCdnFacade.isItemPvP(e.id))return;let i=this.itemsByName.get(e.title.fr);i&&i.forEach(n=>n.isPvP=!0)}calculItemIsCraftable(e){if(e.isCraftable||!this.recipesByProductId.get(e.id))return;if(e.rarity===6){e.isCraftable=!0;return}let i=this.itemsByName.get(e.title.fr);if(!(!i||i.some(o=>e.level<=35?o.rarity<e.rarity:o.rarity<e.rarity&&o.level>=35)))for(let o of i)o.isCraftable=!0}calculItemIsDropable(e){if(e.mobDropable.length)return;let t=this.monsterDropsByItemId.get(e.id);if(!t||t.length===0)return;let i=t.filter(a=>a.idsDrop.some(s=>this.idPierresList.includes(s))),n=t.filter(a=>a.idsDrop.some(s=>this.archiIds.has(s))).filter(a=>!i.includes(a));if(t=t.filter(a=>!i.includes(a)&&!n.includes(a)),e.rarity===6){t.length&&(e.mobDropable=t),i.length&&(e.bossDropable=i),n.length&&(e.archiDropable=n);return}let o=this.itemsByName.get(e.title.fr);if(o)for(let a of o)a.rarity!==6&&((a.rarity!==1||a.level<=35)&&a.level>=e.level&&t.length&&(a.mobDropable=t),i.length&&(a.bossDropable=i),n.length&&(a.archiDropable=n))}searchItem(e){return this.fullItems$.pipe(E(t=>t.find(i=>i.id===e)))}getItem(e){return this.fullItems$.value.find(t=>t.id===e)}majorIsPresent(e,t){return!e.find(i=>!r.ARMURE_DONNEE_RECUE_LIST.includes(i.id)&&!t.equipEffects.map(n=>n.actionId).includes(i.id)||i.id===39&&!t.equipEffects.find(n=>n.actionId===39&&n.params[4]===i.parameter)||i.id===40&&!t.equipEffects.find(n=>n.actionId===40&&n.params[4]===i.parameter))}calculResistancesForAnItem(e,t){let i=0,n=t.length===0?r.DEFAULT_NB_ELEMENTS:t.length;return e.equipEffects.forEach(o=>{o.actionId===1069&&o.params[2]>=t.length?i+=o.params[0]*Math.min(o.params[2],n):o.actionId===80?i+=o.params[0]*n:o.actionId===90||o.actionId===100?i-=o.params[0]*n:r.RESISTANCE_ELEM_IDS.includes(o.actionId)&&(n===r.DEFAULT_NB_ELEMENTS||t.includes(o.actionId))?i+=o.params[0]:(n===r.DEFAULT_NB_ELEMENTS&&r.MALUS_RESIS_ELEM_IDS.includes(o.actionId)||o.actionId===97&&t.includes(82)||o.actionId===96&&t.includes(84)||o.actionId===98&&t.includes(83))&&(i-=o.params[0])}),i}calculMaitrisesForAnItem(e,t,i,n,o,a,s,l){let p=0,f=[...i].filter(m=>!r.MAITRISES_ELEM_IDS.includes(m));e.equipEffects.forEach(m=>{!a&&!l&&(m.actionId===120||m.actionId===1068&&m.params[2]>=t||m.actionId===149&&o)?p+=m.params[0]*n:!s&&f.includes(m.actionId)?p+=m.params[0]:(!a&&!l&&r.PERTE_MAITRISES_IDS.includes(m.actionId)||!s&&(m.actionId===1056&&i.includes(149)||m.actionId===181&&i.includes(180)||m.actionId===1059&&i.includes(1052)||m.actionId===1060&&i.includes(1053)||m.actionId===1061&&i.includes(1055)))&&(p-=m.params[0])});let I=e.equipEffects.find(m=>r.MAITRISES_ELEM_IDS.includes(m.actionId)&&(t===0||t===1&&i.includes(m.actionId)));return!a&&!l&&I&&(p+=I.params[0]*n),p}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Fi=class r{stateDefinitionService=new Map;http=c(Ue);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/statesDefinition.json").pipe(h(t=>t.forEach(i=>this.stateDefinitionService.set(i.id,{id:i.id,description:{fr:i.description.fr,en:i.description.en,es:i.description.es,pt:i.description.pt}}))),Me(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),e()}})}),this.loadPromise)}findStatesDefinition(e){return this.stateDefinitionService.get(e)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var mt=class r{neoImageMap=new Map([[1115705791,"n\xE9o/neo-bouftou-royal.png"],[1115705800,"n\xE9o/neo-chene-mou.png"],[1115705797,"n\xE9o/neo-corbeau-noir.png"],[1115705795,"n\xE9o/neo-gligli-royal.png"],[1115705794,"n\xE9o/neo-goel-le-golem.png"],[1115705799,"n\xE9o/neo-kya-missiz-frizz.png"],[1115705793,"n\xE9o/neo-moogr-royale.png"],[1115705806,"n\xE9o/neo-ogrest.png"],[1115705805,"n\xE9o/neo-pandore.png"],[1115705792,"n\xE9o/neo-piou-royal.png"],[1115705804,"n\xE9o/neo-remington-smisse.png"],[1115705796,"n\xE9o/neo-vampyro.png"],[1115705803,"n\xE9o/neo-wa-wabbit.png"]]);imageMap=new Map([[1111105448,"mob/ydalipe.png"],[-1,"mob/bilbygirl.png"],[11,"mob/bilbyboy.png"],[126002474,"mob/gelee-reglisse.png"],[40,"mob/assassin-encapuchonne.png"],[-2,"mob/protecteur-encapuchonne.png"],[107700210,"mob/ratchitik.png"],[1111105445,"mob/lela.png"],[1111105447,"mob/erpel.png"],[1111105446,"mob/eenca.png"],[107702129,"mob/ratagasd-le-marron.png"],[121801632,"mob/moumoute-la-postiche.png"],[128401429,"mob/scaraboss.png"],[128401430,"mob/scarafon.png"],[128401431,"mob/scaramel.png"],[128401432,"mob/scarabruni.png"]]);onError(e){if(e instanceof HTMLImageElement){let t=e.src.split("/").pop()?.split(".").shift(),i=t?this.neoImageMap.get(+t):null,n=t?this.imageMap.get(+t):null;e.src=i??n??Qe.IMAGE_ERROR}}static \u0275fac=function(t){return new(t||r)};static \u0275dir=Yt({type:r,selectors:[["img","appFallback",""]],hostBindings:function(t,i){t&1&&X("error",function(o){return i.onError(o.target)})}})};var we=class r{translateService=c(fe);ankamaCdnFacade=c(Re);static malusActions=new Set([21,40,56,57,90,96,97,98,100,130,132,161,168,172,174,176,181,192,194,876,1056,1059,1060,1061,1062,1063]);static opposedEffects=new Map;static opposedPairs=[[20,21],[39,40,!0],[80,90],[84,96],[82,97],[83,98],[80,100],[120,130],[122,132],[150,168],[171,172],[173,174],[175,176],[180,181],[191,192],[193,194],[875,876],[149,1056],[1052,1059],[1053,1060],[1055,1061],[988,1062],[71,1063],[31,56],[41,57],[160,161]];constructor(){for(let[e,t]of r.opposedPairs)r.opposedEffects.set(e,t),r.opposedEffects.set(t,e)}getEffectById(e){let t=this.ankamaCdnFacade.getActionList().find(i=>i.definition.id===e);return t?`${t.description[this.translateService.currentLang]}`:""}isAMalus(e){return r.malusActions.has(e)}isOpposed(e,t){let i=e.actionId,n=t.actionId;for(let[o,a,s]of r.opposedPairs)if((i===o||n===o)&&(i===a||n===a))return s?e.params[4]===t.params[4]:!0;return!1}getOpposedEffect(e){return r.opposedEffects.get(e)??e}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var ht=class r{ankamaCdnFacade=c(Re);translateService=c(fe);actionService=c(we);transform(e){return P([this.translateService.onLangChange.pipe(Gt({lang:this.translateService.currentLang,translations:{}})),this.ankamaCdnFacade.action$]).pipe(E(([,t])=>t),E(t=>this.findAction(t,e)),E(t=>this.getDefinitions(t)),E(t=>this.getDefinitionsComplete(t,e)))}getDefinitionsComplete(e,t){let i=`${e}`;return i=this.replaceValues(i,t),i=this.cleanHeaderDefinition(i),i=this.cleanRecoltEffect(i),i=this.singularOrPlurial(i,t),i=this.atLeastSixParameters(i,t),i=this.armorGivenOrReceived(i,t),i=this.deleteDoubleMinus(i),i}deleteDoubleMinus(e){return e.replace(/--/g,"")}armorGivenOrReceived(e,t){if(t.actionId!==39&&t.actionId!==40)return e;let i=t.params[4]===120?this.translateService.instant("abstract.donnee"):this.translateService.instant("abstract.recue"),n=Math.abs(t.params[0]),o=this.actionService.isAMalus(t.actionId);return(o&&t.params[0]>0||!o&&t.params[0]<0?"-":"")+n+this.translateService.instant("abstract.armure")+i}atLeastSixParameters(e,t){let i=/{\[~3\]\?(.*):(.*)}/,n=e.match(i);return n&&(e=n[t.params.length>=6?1:2]),e}singularOrPlurial(e,t){return e=this.singularOrPlurialWithRegex(e,t,/\{\[>2\]\?([^}]){0,5}:([^}]){0,5}\}/g,2),e=this.singularOrPlurialWithRegex(e,t,/\{\[>1\]\?([^}]){0,5}:([^}]){0,5}\}/g),e}singularOrPlurialWithRegex(e,t,i,n=0){let o=[...e.matchAll(i)];if(o&&t.params.length>n){let a=o.map(s=>s[t.params[n]>=2?1:2]);for(let s=0;s<o.length;s++)e=e.replace(o[s][0],a[s]??"")}return e}cleanDefinition(e,t){let i=e.match(t);return i&&(e=e.replace(i[0],"")),e}cleanRecoltEffect(e){return this.cleanDefinition(e,/{\[~2]?.+}/g)}cleanHeaderDefinition(e){return this.cleanDefinition(e,/(\[#.*\]) /g)}replaceValues(e,t){let i=/(\[#\d\])/g,n=[...e.matchAll(i)].map(o=>o[1]);if(n)for(let o of n){let a=0;switch(o){case"[#1]":a=0;break;case"[#2]":a=2;break;case"[#3]":a=4;break}t.params.length>a&&(e=e.replace(o,t.params[a].toString()))}return e}getDefinitions(e){return e.description[this.translateService.currentLang]}findAction(e,t){return e.filter(i=>i.definition.id===t.actionId)[0]}static \u0275fac=function(t){return new(t||r)};static \u0275pipe=zr({name:"actions",type:r,pure:!0})};var ft=class r{mapColors=new Map([[2,"#4c9646"],[3,"#dd7f13"],[4,"#ffef64"],[5,"#c570ef"],[6,"#80d6d4"],[7,"#eebcd7"]]);static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var zt=class r{overlay=c(ln);overlayRefs=[];mouseEnter$=new W;mouseLeave$=new W;destroy$=new W;keepOpenOnHover=!1;constructor(){this.mouseLeave$.pipe(L(()=>{let e=this.keepOpenOnHover?100:0;return Lr(e).pipe(H(this.mouseEnter$),H(this.destroy$))})).subscribe(()=>{this.forceClose()})}closeTooltip(){this.mouseLeave$.next()}cancelClose(){this.mouseEnter$.next()}forceClose(){this.overlayRefs.forEach(e=>e.dispose()),this.overlayRefs=[],this.keepOpenOnHover=!1}openTooltip(e,t,i,n,o,a=!0,s=!1){this.cancelClose(),this.keepOpenOnHover=s;let l=o;l||(l=[{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:80}]);let p=this.overlay.position().flexibleConnectedTo(i.target).withPositions(l).withPush(a),f=this.overlay.create({positionStrategy:p,hasBackdrop:!1,panelClass:"no-max-width",scrollStrategy:this.overlay.scrollStrategies.reposition()}),I=new sn(t,e),m=f.attach(I);if(m.instance&&Object.assign(m.instance,n),s){let C=f.overlayElement,b=new W,Z=new W;C.addEventListener("mouseenter",()=>{b.next(),this.cancelClose()}),C.addEventListener("mouseleave",()=>{Z.next(),this.closeTooltip()}),f.detachments().subscribe(()=>{b.complete(),Z.complete()})}return this.overlayRefs.push(f),f}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.mouseEnter$.complete(),this.mouseLeave$.complete(),this.forceClose()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var gt=class r extends ii{itemTypeService=c(_e);itemService=c(De);router=c(nt);activatedRoute=c(ve);localStorageService=c(un);modifierElemMaitrisesFormService=c(lt);resistancesFormService=c(dt);maitrisesFormService=c(ut);onlyNoElemFormService=c(Et);onlyNoSecondaryFormService=c(at);mapItem=new Map([[2,new d([void 0])],[3,new d([void 0,void 0])],[4,new d([void 0])],[5,new d([void 0])],[6,new d([void 0])],[7,new d([void 0])],[8,new d([void 0])],[9,new d([void 0])],[10,new d([void 0])],[11,new d([void 0])],[12,new d([void 0])],[14,new d([void 0])]]);idItems=new d("");idItems$=this.idItems.asObservable();totalWeight=new d(0);totalWeight$=this.totalWeight.asObservable();listItem=new d([]);listItem$=this.listItem.asObservable();totalMaitrises=new d(0);totalMaitrises$=this.totalMaitrises.asObservable();totalResistances=new d(0);totalResistances$=this.totalResistances.asObservable();indexAnneau=0;constructor(){super(),setTimeout(()=>{this.initItemChooses(),this.updateUrl()}),this.handleCalculTotal()}handleCalculTotal(){P([this.listItem$,this.maitrisesFormService.nbElements$,this.maitrisesFormService.idMaitrises$,this.modifierElemMaitrisesFormService.multiplicateurElem$,this.modifierElemMaitrisesFormService.denouement$,this.resistancesFormService.idResistances$,this.onlyNoElemFormService.onlyNoElem$,this.onlyNoSecondaryFormService.onlyNoSecondary$,this.modifierElemMaitrisesFormService.chaos$]).pipe(H(this.destroy$),h(([e,t,i,n,o,a,s,l,p])=>this.calculTotal(e,t,i,n,a,o,s,l,p))).subscribe()}updateUrl(){P([this.getObsItem(2),this.getObsItem(3),this.getObsItem(4),this.getObsItem(5),this.getObsItem(6),this.getObsItem(7),this.getObsItem(8),this.getObsItem(9),this.getObsItem(10),this.getObsItem(11),this.getObsItem(12),this.getObsItem(14)]).pipe(H(this.destroy$),E(e=>e.flat()),E(e=>e.filter(t=>t!=null)),h(e=>this.listItem.next([...new Set(e)])),E(e=>e.map(t=>t?.id)),E(e=>e.filter(t=>t).join(",")),h(e=>this.setIdItems(e))).subscribe(e=>{this.localStorageService.setItem("KEY_BUILD",e),this.router.navigate([],{relativeTo:this.activatedRoute,queryParams:{itemsId:e},queryParamsHandling:"merge"})})}initItemChooses(){this.activatedRoute.queryParams.pipe(H(this.destroy$),w(e=>e!==void 0),E(e=>e.itemsId?e.itemsId:this.localStorageService.getItem("KEY_BUILD")),w(e=>e!=null),ee(1),E(e=>e.split(",")),h(e=>e.forEach(t=>this.setItemWithIdItem(parseInt(t))))).subscribe()}calculTotal(e,t,i,n,o,a,s,l,p){let f=0,I=0,m=0;e.forEach(C=>{let b=this.itemService.calculResistancesForAnItem(C,o),Z=this.itemService.calculMaitrisesForAnItem(C,t,i,n,a,s,l,p);I+=b,m+=Z,f+=this.itemService.calculWeight(b,Z,C.level)}),this.totalWeight.next(Math.trunc(f)),this.totalMaitrises.next(Math.trunc(m)),this.totalResistances.next(Math.trunc(I))}setItemWithIdItem(e){this.itemService.searchItem(e).pipe(Q(),w(t=>t!==void 0)).subscribe(t=>{let i=this.itemTypeService.getItemType(t.itemTypeId);i&&this.setItem(i,t,!1)})}cleanItemChoosen(){this.indexAnneau=0,this.mapItem.forEach((e,t)=>{e.next(t===3?[void 0,void 0]:[void 0])})}setIdItemsFromBuild(e){this.cleanItemChoosen(),this.idItems.next(e);let t=e.split(",");t&&t.forEach(i=>{let n=this.itemService.getItem(parseInt(i));if(!n)return;let o=this.itemTypeService.getItemType(n.itemTypeId);o&&this.setItem(o,n,!1)})}setIdItems(e){this.idItems.next(e)}getObsItem(e){return this.mapItem.get(e)?.asObservable()??S()}deleteItem(e,t){this.getObsItem(e).pipe(Q(),L(i=>Hi(()=>i!==void 0&&!!i[0]?.itemTypeId&&this.itemTypeService.getItemType(i[0]?.itemTypeId)===1,S(i).pipe(h(()=>{this.mapItem.get(12)?.next([void 0]),this.mapItem.get(2)?.next([void 0])})),S(i).pipe(E(n=>(n[t]=void 0,n)),h(n=>this.mapItem.get(e)?.next(n)))))).subscribe()}setItem(e,t,i=!0){S(null).pipe(Q(),L(()=>Hi(()=>i,this.deleteItemInBuild(t).pipe(w(n=>!n)),S(null))),L(()=>this.ensureUniqueRelic(t)),L(()=>this.ensureCompatibleWithSecondHand(e,t)),L(()=>this.ensureCompatibleWithFirstHand(e,t)),L(()=>this.handleRings(e,t)),L(()=>this.handleDeuxMains(e,t)),L(()=>this.finalEquip(e,t))).subscribe()}ensureUniqueRelic(e){return[7,5].includes(e.rarity)?this.deleteFirstItemOnRarity(e.rarity):S(null)}ensureCompatibleWithSecondHand(e,t){return[13,12].includes(e)?this.getObsItem(2).pipe(Q(),h(()=>this.mapItem.get(12)?.next([t])),E(i=>i[0]),w(i=>i!==void 0&&this.itemTypeService.getItemType(i.itemTypeId)===1),h(()=>this.mapItem.get(2)?.next([void 0])),E(()=>null)):S(null)}ensureCompatibleWithFirstHand(e,t){return e!==2?S(null):this.getObsItem(12).pipe(Q(),h(()=>this.mapItem.get(2)?.next([t])),E(i=>i[0]),w(i=>i!==void 0&&this.itemTypeService.getItemType(i.itemTypeId)===1),h(()=>this.mapItem.get(12)?.next([void 0])),E(()=>null))}handleRings(e,t){return e!==3?S(null):this.getObsItem(3).pipe(Q(),L(i=>i.find(n=>n?.title===t.title)?S(null):S(i).pipe(E(n=>{let o=[...n];return o[this.indexAnneau]=t,o}),h(n=>this.mapItem.get(3)?.next(n)),h(()=>this.indexAnneau=this.indexAnneau===0?1:0))),E(()=>null))}handleDeuxMains(e,t){return e!==1?S(null):S(null).pipe(h(()=>{this.mapItem.get(12)?.next([t]),this.mapItem.get(2)?.next([t])}))}finalEquip(e,t){return e===3?S(null):S(null).pipe(h(()=>this.mapItem.get(e)?.next([t])))}deleteFirstItemOnRarity(e){return P([this.getObsItem(2),this.getObsItem(3),this.getObsItem(4),this.getObsItem(5),this.getObsItem(6),this.getObsItem(7),this.getObsItem(8),this.getObsItem(9),this.getObsItem(10),this.getObsItem(11),this.getObsItem(12),this.getObsItem(14)]).pipe(Q(),E(t=>t.filter(i=>i.find(n=>n?.rarity===e))),h(t=>t.forEach(i=>{let n=i.find(a=>a!==void 0)?.itemTypeId;if(!n)return;let o=this.itemTypeService.getItemType(n);if(o===1)this.mapItem.get(2)?.next([void 0]),this.mapItem.get(12)?.next([void 0]);else if(o===13)this.mapItem.get(12)?.next([void 0]);else if(o===3){let a=i.findIndex(s=>s?.rarity===e);this.indexAnneau=a,i[a]=void 0,this.mapItem.get(3)?.next(i)}else o!==void 0&&this.mapItem.get(o)?.next([void 0])})),E(()=>null))}deleteItemInBuild(e){let t=!1;return P([this.getObsItem(2),this.getObsItem(3),this.getObsItem(4),this.getObsItem(5),this.getObsItem(6),this.getObsItem(7),this.getObsItem(8),this.getObsItem(9),this.getObsItem(10),this.getObsItem(11),this.getObsItem(12),this.getObsItem(14)]).pipe(Q(),E(i=>i.filter(n=>n.find(o=>o?.id===e.id))),h(i=>i.forEach(n=>{let o=n.find(s=>s!==void 0)?.itemTypeId;if(!o)return;t=!0;let a=this.itemTypeService.getItemType(o);if(a===1)this.mapItem.get(2)?.next([void 0]),this.mapItem.get(12)?.next([void 0]);else if(a===13)this.mapItem.get(12)?.next([void 0]);else if(a===3){let s=n.findIndex(l=>l?.id===e.id);n[s]=void 0,this.indexAnneau=s,this.mapItem.get(3)?.next(n)}else a!==void 0&&this.mapItem.get(a)?.next([void 0])})),E(()=>t))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var Vi=class r{AnkamaCdnFacade=c(Re);findStates(e){let t=this.AnkamaCdnFacade.getStatesList().find(i=>i.definition.id===e);if(t)return{id:t.definition.id,fr:t.title.fr,en:t.title.en,es:t.title.es,pt:t.title.pt}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};var St=class r{translateService=c(fe);itemTypeService=c(_e);itemChooseService=c(gt);actionsService=c(we);statesService=c(Vi);imageService=c(Qe);destroy$=new W;resistances=0;maitrises=0;IdActionEnum=ue;mapSortAction=new Map([[31,0],[56,1],[41,2],[57,3],[193,4],[191,4],[192,5],[184,6],[160,7],[161,8],[20,9],[21,10],[173,11],[175,12],[172,13],[875,14],[174,15],[176,16],[876,17],[120,18],[1068,19],[149,20],[180,21],[26,22],[1055,23],[1053,24],[1052,25],[1056,26],[181,27],[1061,28],[1060,29],[1059,30],[150,31],[39,32],[168,33],[40,34],[988,35],[71,36],[80,37],[1069,38],[82,39],[83,40],[85,41],[84,42],[1062,43],[1063,44],[90,45],[97,46],[98,47],[96,48]]);Math=Math;itemChoosen$=new d([[]]);IdActionsEnum=ue;getEffectPng(e){return this.imageService.getActionIdUrl(e.actionId,e.actionId===39&&e.params[4]===121)}initItemChoosen(e){let t=this.itemTypeService.getItemType(e.itemTypeId);if(!t)return;let i=new Qt;t===13?i=this.itemChooseService.getObsItem(12).pipe(E(n=>[n])):t===1?i=P([this.itemChooseService.getObsItem(2),this.itemChooseService.getObsItem(12)]).pipe(E(([n,o])=>[n,o])):i=this.itemChooseService.getObsItem(t).pipe(E(n=>[n])),i.pipe(H(this.destroy$)).subscribe(n=>this.itemChoosen$.next(n))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=ce({type:r,selectors:[["app-item"]],decls:0,vars:0,template:function(t,i){},encapsulation:2})};function rs(r,e){if(r&1&&(N(0,"div",0)(1,"span"),k(2,"img",7),q(3),x(4,"translate"),O(),N(5,"span"),k(6,"img",8),q(7),x(8,"translate"),O()()),r&2){let t=T();R(),Tt(t.getBackgroundDifferentsStatsOnValue(t.maitrises)),R(),F("src",t.imageService.getActionIdUrl(t.IdActionEnum.MAITRISES_ELEMENTAIRES),j),R(),de("",V(4,10,"item.maitrises")," ",t.Math.trunc(t.maitrises)),R(2),Tt(t.getBackgroundDifferentsStatsOnValue(t.resistances)),R(),F("src",t.imageService.getActionIdUrl(t.IdActionEnum.RESISTANCES_ELEMENTAIRE),j),R(),de("",V(8,12,"item.resistances")," ",t.resistances)}}function ns(r,e){if(r&1&&(N(0,"div",4)(1,"h3"),q(2),O(),k(3,"img",9),O()),r&2){let t=e.$implicit,i=T(2);R(),At("color",i.colorRarityService.mapColors.get(t.rarity)),R(),de("",i.getTitle(t)," (",t.level,")"),R(),F("src",i.imageService.getItemUrl(t.idImage),j)}}function os(r,e){r&1&&me(0,ns,4,5,"div",4,Te),r&2&&he(e)}function as(r,e){if(r&1&&(k(0,"img",11),q(1),x(2,"actions"),x(3,"async")),r&2){let t=T().$implicit,i=T(2);F("src",i.getEffectPng(t),j),R(),Pe(" ",V(3,4,V(2,2,t))," ")}}function ss(r,e){if(r&1&&(N(0,"p"),B(1,as,4,6),O()),r&2){let t=e.$implicit,i=T(2);Tt(i.getBackgroundDifferentsStats(t)),R(),$(t.actionId!==i.IdActionEnum.APPLIQUE_ETAT&&t.value!==0?1:-1)}}function ls(r,e){r&1&&(N(0,"div"),me(1,ss,2,3,"p",10,Te),O()),r&2&&(R(),he(e))}var Bi=class r extends St{itemService=c(De);colorRarityService=c(ft);cdr=c(ze);item;indexItemChoosen=0;ARMURE_DONNEE_RECUE=[39,40];listDifferentsStatsItem=[];loaded$;weight=0;itemSelected$=this.itemChoosen$.pipe(w(e=>e.length!==0),E(e=>e.map(t=>t[this.indexItemChoosen])),E(e=>e.length>=2&&e[0]?.id===e[1]?.id?[e.find(t=>t!==void 0)]:e),E(e=>e.filter(t=>t!==void 0)));differentStatsItemList$=this.itemSelected$.pipe(H(this.destroy$),h(e=>{this.listDifferentsStatsItem=[],this.fillListCurrentItem(),e.forEach(t=>t?this.fillMapDifferentStatsItem(t):"")}),E(()=>this.listDifferentsStatsItem.sort((e,t)=>(this.mapSortAction.get(e.actionId)??999)-(this.mapSortAction.get(t.actionId)??999))));constructor(){super()}ngAfterViewInit(){this.item&&(this.item.equipEffects=this.item.equipEffects.sort((e,t)=>(this.mapSortAction.get(e.actionId)??999)-(this.mapSortAction.get(t.actionId)??999)),this.loaded$=this.itemSelected$.pipe(H(this.destroy$),E(e=>(this.resistances=this.item.resistance,this.maitrises=this.item.maitrise,this.weight=this.itemService.calculWeight(this.resistances,this.maitrises,this.item.level),e.forEach(t=>{t&&(this.resistances-=t.resistance,this.maitrises-=t.maitrise,this.weight=this.itemService.calculWeight(this.resistances,this.maitrises,t.level))}),!0))),this.initItemChoosen(this.item),this.cdr.detectChanges())}setItem(e){let t=this.itemTypeService.getItemType(e.itemTypeId);t&&this.itemChooseService.setItem(t,e)}getTitle(e){return e?e.title[this.translateService.currentLang]:""}getBackgroundDifferentsStatsOnValue(e){return e>0?"green":e<0?"red":""}getBackgroundDifferentsStats(e){let t=this.actionsService.isAMalus(e.actionId);return e.value>0&&!t||e.value<0&&t||e.presentOnCurrentItem&&!e.presentOnEquippedItem&&!t?"green":e.value<0&&!t||e.value>0&&t||!e.presentOnCurrentItem&&e.presentOnEquippedItem&&t?"red":""}getByActionId(e,t){return this.listDifferentsStatsItem.find(i=>i.actionId===e&&i.isArmureRecue===t)}pushSetDifferentsStatsItem(e){e&&(this.listDifferentsStatsItem=this.listDifferentsStatsItem.filter(t=>t.actionId!==e.actionId||t.isArmureRecue!==e.isArmureRecue),this.listDifferentsStatsItem.push(e))}fillListCurrentItem(){this.item.equipEffects.forEach(e=>{let t=this.ARMURE_DONNEE_RECUE.includes(e.actionId)&&e.params[4]===121,i=this.getByActionId(e.actionId,t);if(i){let n=i.params;n[0]+=e.params[0],i=K(v({},i),{value:i.value+e.params[0],params:n,presentOnCurrentItem:!0})}else i={value:e.params[0],params:[...e.params],actionId:e.actionId,presentOnCurrentItem:!0,presentOnEquippedItem:!1,isArmureRecue:t};this.pushSetDifferentsStatsItem(i)})}fillMapDifferentStatsItem(e){e.equipEffects.forEach(t=>{let i=this.ARMURE_DONNEE_RECUE.includes(t.actionId)&&t.params[4]===121,n=this.getByActionId(t.actionId,i),o=this.item.equipEffects.find(a=>this.actionsService.isOpposed(a,t));if(o){let a=[...t.params];a[0]=o.params[0]+a[0],n={value:o.params[0]+t.params[0],params:a,actionId:o.actionId,presentOnCurrentItem:!0,presentOnEquippedItem:!0,isArmureRecue:i}}else if(n&&n.isArmureRecue===i){let a=n.params;a[0]-=t.params[0],n=K(v({},n),{value:n.value-t.params[0],params:a,presentOnEquippedItem:!0})}else{let a=[...t.params];a[0]=-a[0],n={value:-t.params[0],params:a,actionId:t.actionId,presentOnCurrentItem:!1,presentOnEquippedItem:!0,isArmureRecue:i}}this.pushSetDifferentsStatsItem(n)}),this.calculDifferenceResistance()}calculDifferenceResistance(){let e=this.getByActionId(80,!1),t=[82,83,85,84];e&&t.find(i=>this.getByActionId(i,!1))&&(t.forEach(i=>{let n=this.getByActionId(i,!1);n?(n.params[0]+=e.params[0],n.value+=e.params[0],n.presentOnCurrentItem=!0,n.presentOnEquippedItem=!0):n=K(v({},e),{actionId:i,presentOnCurrentItem:!0,presentOnEquippedItem:!0}),this.pushSetDifferentsStatsItem(n)}),this.listDifferentsStatsItem=this.listDifferentsStatsItem.filter(i=>i.actionId!==80))}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=ce({type:r,selectors:[["app-item-tooltip"]],inputs:{item:"item",indexItemChoosen:"indexItemChoosen"},features:[Zt],decls:17,vars:21,consts:[[1,"header"],[1,"content",3,"click"],[1,"column"],[1,"row"],[1,"title"],["alt","item",3,"src"],["alt","poids",3,"src"],["alt","Maitrises",3,"src"],["alt","Resistances",3,"src"],["appFallback","","alt","items",3,"src"],[3,"class"],["alt","aptitudes",3,"src"]],template:function(t,i){if(t&1&&(B(0,rs,9,14,"div",0),x(1,"async"),N(2,"div",1),X("click",function(){return i.setItem(i.item)}),N(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),q(7),O(),k(8,"img",5),O(),B(9,os,2,0),x(10,"async"),O(),N(11,"span"),k(12,"img",6),q(13),x(14,"translate"),O()(),B(15,ls,3,0,"div"),x(16,"async"),O()),t&2){let n,o;$(V(1,13,i.loaded$)?0:-1),R(6),At("color",i.colorRarityService.mapColors.get(i.item.rarity)),R(),de("",i.getTitle(i.item)," (",i.item.level,")"),R(),F("src",i.imageService.getItemUrl(i.item.idImage),j),R(),$((n=V(10,15,i.itemSelected$))?9:-1,n),R(2),Tt(i.getBackgroundDifferentsStatsOnValue(i.weight)+" poids"),R(),F("src","aptitudes/poids.png",j),R(),de("",V(14,17,"item.poids")," ",i.weight," "),R(2),$((o=V(16,19,i.differentStatsItemList$))?15:-1,o)}},dependencies:[Ne,ti,mt,Jt,ei,ht],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:fit-content;width:600px;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px;width:200px;display:flex;justify-content:space-around;align-items:center;margin:2px auto}[_nghost-%COMP%]   .green[_ngcontent-%COMP%]{background:linear-gradient(145deg,#4caf50,#00c896)}[_nghost-%COMP%]   .red[_ngcontent-%COMP%]{background:linear-gradient(145deg,#e63946,#ff6b35)}[_nghost-%COMP%]   .green[_ngcontent-%COMP%], [_nghost-%COMP%]   .red[_ngcontent-%COMP%]{color:#0d1b2a}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;cursor:pointer}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:50px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:space-around;cursor:pointer}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:30%;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2px 0;border-radius:20px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{align-items:center;display:flex;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px;margin:0 10px}[_nghost-%COMP%]   .iconComparator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;color:#415a77;background-color:#e5e9ea;border-radius:50%;cursor:pointer;border:5px solid #0D1B2A}@media screen and (max-width: 700px){[_nghost-%COMP%]{width:300px;font-size:12px}}@media screen and (max-width: 700px){  .cdk-overlay-pane{transform:none!important}}"]})};function cs(r,e){if(r&1&&k(0,"app-item-tooltip",0),r&2){let t=T().$index,i=T();F("item",i.item)("indexItemChoosen",t)}}function ps(r,e){if(r&1&&B(0,cs,1,2,"app-item-tooltip",0),r&2){let t=e.$index,i=T();$(i.itemsChoosen[t]!==void 0?0:-1)}}var $i=class r{item;itemsChoosen=[];static \u0275fac=function(t){return new(t||r)};static \u0275cmp=ce({type:r,selectors:[["app-items-tooltip"]],inputs:{item:"item",itemsChoosen:"itemsChoosen"},decls:2,vars:0,consts:[[3,"item","indexItemChoosen"]],template:function(t,i){t&1&&me(0,ps,1,1,null,null,Te),t&2&&he(i.itemsChoosen)},dependencies:[Ne,Bi],encapsulation:2})};function ds(r,e){if(r&1&&(Ji(0,"div"),q(1),er()),r&2){let t=T();R(),Pe(" ",t.definition()," ")}}var ji=class r{statesDefinitionService=c(Fi);translateService=c(fe);statesDefinitionId=0;nameStates="";definition(){let e=this.statesDefinitionService.findStatesDefinition(this.statesDefinitionId);if(e)return e.description[this.translateService.currentLang]}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=ce({type:r,selectors:[["app-states"]],inputs:{statesDefinitionId:"statesDefinitionId",nameStates:"nameStates"},decls:4,vars:2,consts:[[1,"header"]],template:function(t,i){t&1&&(Ji(0,"div",0)(1,"span"),q(2),er()(),B(3,ds,2,1,"div")),t&2&&(R(2),Kr(i.nameStates),R(),$(i.definition()?3:-1))},dependencies:[Ne],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:10px;color:#fff;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:auto}"]})};var us=r=>({ratio:r}),Es=(r,e)=>e.id;function ms(r,e){r&1&&(N(0,"div",7),q(1),O()),r&2&&(R(),Pe(" [ ",e," ] "))}function hs(r,e){if(r&1&&(k(0,"img",19),q(1),x(2,"actions"),x(3,"async")),r&2){let t=T().$implicit,i=T(2);F("src",i.getEffectPng(t),j),R(),Pe(" ",V(3,4,V(2,2,t))," ")}}function fs(r,e){if(r&1){let t=Oe();Yr(0),N(1,"span",20),X("mouseenter",function(n){se(t);let o=Xr(0),a=T(3);return le(a.openStatesTooltip(n,(o==null?null:o.id)??0,a.getStatesTranslate(o)))})("mouseleave",function(){se(t);let n=T(3);return le(n.stateTooltipService.closeTooltip())}),q(2),O()}if(r&2){let t=T().$implicit,i=T(2),n=Zr(i.statesService.findStates(t.params[0]));R(2),Pe(" ",i.getStatesTranslate(n)," ")}}function gs(r,e){if(r&1&&(N(0,"p"),B(1,hs,4,6)(2,fs,3,2,"span",18),O()),r&2){let t=e.$implicit,i=T(2);R(),$(t.actionId!==i.IdActionEnum.APPLIQUE_ETAT?1:2)}}function Ss(r,e){if(r&1){let t=Oe();N(0,"img",21),x(1,"translate"),X("click",function(){se(t);let n=T(2);return le(n.navigateToCraftku())}),O()}if(r&2){let t=T(2);F("src",t.imageService.getItemUrl(71919810),j)("matTooltip",V(1,2,"item.craftable"))}}function Is(r,e){if(r&1){let t=Oe();N(0,"img",23),x(1,"translate"),X("click",function(){let n=se(t).$implicit,o=T(3);return le(o.openEncyclopedieForMonster(n.idMob))}),O()}if(r&2){let t=e.$implicit,i=T(3);F("src",i.imageService.getMonsterUrl(t.gfxId),j)("matTooltip",`${V(1,2,"item.droppable")} (${i.nameMonster(t)})`)}}function vs(r,e){if(r&1&&me(0,Is,2,4,"img",22,Te),r&2){let t=T(2);he(t.item.mobDropable)}}function Rs(r,e){if(r&1){let t=Oe();N(0,"img",25),x(1,"translate"),X("click",function(){let n=se(t).$implicit,o=T(3);return le(o.openEncyclopedieForMonster(n.idMob))}),O()}if(r&2){let t=e.$implicit,i=T(3);F("src",i.imageService.getMonsterUrl(t.gfxId),j)("matTooltip",`${V(1,2,"item.boss-drop")} (${i.nameMonster(t)})`)}}function _s(r,e){if(r&1&&me(0,Rs,2,4,"img",24,Te),r&2){let t=T(2);he(t.item.bossDropable)}}function As(r,e){if(r&1){let t=Oe();N(0,"img",27),x(1,"translate"),X("click",function(){let n=se(t).$implicit,o=T(3);return le(o.openEncyclopedieForMonster(n.idMob))}),O()}if(r&2){let t=e.$implicit,i=T(3);F("src",i.imageService.getMonsterUrl(t.gfxId),j)("matTooltip",`${V(1,2,"item.archi-drop")} (${i.nameMonster(t)})`)}}function Ts(r,e){if(r&1&&me(0,As,2,4,"img",26,Te),r&2){let t=T(2);he(t.item.archiDropable)}}function Cs(r,e){if(r&1&&(k(0,"img",17),x(1,"translate")),r&2){let t=T(2);F("src",t.imageService.getItemUrl(53124705),j)("matTooltip",V(1,2,"item.pvp"))}}function ys(r,e){if(r&1){let t=Oe();N(0,"div",0)(1,"span",1),x(2,"translate"),X("click",function(){se(t);let n=T();return le(n.copyToClipboard())}),k(3,"mat-icon",2),O(),N(4,"span"),k(5,"img",3),q(6),x(7,"translate"),O(),N(8,"span"),k(9,"img",4),q(10),x(11,"translate"),O(),N(12,"span",5),X("click",function(){se(t);let n=T();return le(n.openEncyclopedie(n.item.id))}),k(13,"img",6),O()(),B(14,ms,2,1,"div",7),x(15,"async"),N(16,"div",8),X("click",function(){se(t);let n=T();return le(n.setItemChoosen())}),N(17,"div",9)(18,"h3"),q(19),k(20,"img",10),O(),k(21,"img",11),N(22,"div",12),x(23,"translate"),k(24,"img",13),q(25),x(26,"translate"),O()(),N(27,"div",14)(28,"div"),me(29,gs,3,1,"p",null,Es),O(),N(31,"div",15),B(32,Ss,2,4,"img",16),B(33,vs,2,0),B(34,_s,2,0),B(35,Ts,2,0),B(36,Cs,2,4,"img",17),O()()()}if(r&2){let t,i=T();R(),F("matTooltip",V(2,24,"item.copier")),R(4),F("src",i.imageService.getActionIdUrl(i.IdActionEnum.MAITRISES_ELEMENTAIRES),j),R(),de("",V(7,26,"item.maitrises")," ",i.Math.trunc(i.item.maitrise)),R(3),F("src",i.imageService.getActionIdUrl(i.IdActionEnum.RESISTANCES_ELEMENTAIRE),j),R(),de("",V(11,28,"item.resistances")," ",i.item.resistance),R(4),$((t=V(15,30,i.textCondition()))?14:-1,t),R(4),At("color",i.colorRarityService.mapColors.get(i.item.rarity)),R(),de("",i.getTitle()," (",i.item.level,") "),R(),F("src",i.itemTypeService.getLogo(i.itemTypeService.getItemType(i.item.itemTypeId)),j),R(),F("src",i.imageService.getItemUrl(i.item.idImage),j),R(),F("matTooltip",en(23,32,"item.poids-infobulle",Jr(37,us,i.itemService.ratioWeightByLevel(i.item.level))))("matTooltipShowDelay",300),R(2),F("src","aptitudes/poids.png",j),R(),de("",V(26,35,"item.poids")," ",i.item.weight),R(4),he(i.item.equipEffects),R(3),$(i.item.isCraftable?32:-1),R(),$(i.item.mobDropable?33:-1),R(),$(i.item.bossDropable?34:-1),R(),$(i.item.archiDropable?35:-1),R(),$(i.item.isPvP?36:-1)}}function bs(r,e){if(r&1){let t=Oe();N(0,"mat-icon",29),X("mouseenter",function(n){se(t);let o=T(2);return le(o.openTooltip(n,o.item))})("mouseleave",function(){se(t);let n=T(2);return le(n.tooltipService.closeTooltip())}),O()}}function Ms(r,e){if(r&1&&B(0,bs,1,0,"mat-icon",28),r&2){let t=T();$(t.itemIsPresentAndNotChoosen(e)?0:-1)}}var ho=class r extends St{viewContainerRef=c(Kt);el=c(jr);itemService=c(De);colorRarityService=c(ft);tooltipService=c(zt);stateTooltipService=c(zt);cdr=c(ze);itemConditionService=c(Pi);item;condition=new d(void 0);condition$=this.condition.asObservable();constructor(){super()}navigateToCraftku(){window.open("https://craftkfu.waklab.fr/?"+this.item.id,"_blank")}setItemChoosen(){let e=this.itemTypeService.getItemType(this.item.itemTypeId);e&&this.itemChooseService.setItem(e,this.item)}itemIsPresentAndNotChoosen(e){return!!e.find(t=>t.find(i=>i!==void 0)&&!t.find(i=>i?.id===this.item.id))}ngAfterViewInit(){if(this.item){this.item.equipEffects=this.item.equipEffects.sort((t,i)=>(this.mapSortAction.get(t.actionId)??999)-(this.mapSortAction.get(i.actionId)??999)),this.initItemChoosen(this.item);let e=this.itemConditionService.findCondition(this.item.id);e&&this.condition.next(e),this.cdr.detectChanges()}}textCondition(){return this.condition$.pipe(E(e=>e?.description[this.translateService.currentLang]??void 0))}nameMonster(e){return e.name[this.translateService.currentLang]??""}openTooltip(e,t){let i=e.pageX>window.screen.width/2;this.tooltipService.closeTooltip(),this.itemChoosen$.pipe(ee(1),E(n=>n.find(o=>o.find(a=>a)))).subscribe(n=>{this.tooltipService.openTooltip(this.viewContainerRef,$i,e,{item:t,itemsChoosen:n},[{originX:i?"end":"center",originY:"bottom",overlayX:i?"end":"center",overlayY:"bottom",offsetY:0,offsetX:i?-this.el.nativeElement.offsetWidth:340}],!1)})}openEncyclopedie(e){window.open("https://www.wakfu.com/fr/mmorpg/encyclopedie/armures/"+e)}openEncyclopedieForMonster(e){window.open("https://www.wakfu.com/fr/mmorpg/encyclopedie/monstres/"+e)}copyToClipboard(){navigator.clipboard.writeText(this.item.title[this.translateService.currentLang])}getStatesTranslate(e){if(!e)return"";let t=this.translateService.currentLang;return e[t].toString()??""}getTitle(){return this.item.title[this.translateService.currentLang]}openStatesTooltip(e,t,i){this.stateTooltipService.closeTooltip(),this.stateTooltipService.openTooltip(this.viewContainerRef,ji,e,{statesDefinitionId:t,nameStates:i},[{originX:"center",originY:"top",overlayX:"center",overlayY:"top",offsetY:20,offsetX:0}])}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=ce({type:r,selectors:[["app-item"]],inputs:{item:"item"},features:[Zt],decls:3,vars:4,consts:[[1,"header"],[1,"imgContainer","fileCopy",3,"click","matTooltip"],["fontIcon","file_copy"],["alt","Maitrises",3,"src"],["alt","R\xE9sistances",3,"src"],[1,"imgContainer",3,"click"],["src","aptitudes/Encyclop\xE9die.png","alt","Encyclop\xE9die"],[1,"condition"],[1,"content",3,"click"],[1,"title"],["alt","item type logo",3,"src"],["alt","items","appFallback","",3,"src"],[1,"poids",3,"matTooltip","matTooltipShowDelay"],["alt","poids",3,"src"],[1,"effects"],[1,"craftAndDrop"],["alt","craftable",1,"craftable",3,"src","matTooltip"],["alt","pvp",3,"src","matTooltip"],[1,"appliqueEtat"],["alt","aptitudes",3,"src"],[1,"appliqueEtat",3,"mouseenter","mouseleave"],["alt","craftable",1,"craftable",3,"click","src","matTooltip"],["alt","droppable","appFallback","",1,"monster",3,"src","matTooltip"],["alt","droppable","appFallback","",1,"monster",3,"click","src","matTooltip"],["alt","boss drop","appFallback","",1,"monster",3,"src","matTooltip"],["alt","boss drop","appFallback","",1,"monster",3,"click","src","matTooltip"],["alt","archi drop","appFallback","",1,"monster",3,"src","matTooltip"],["alt","archi drop","appFallback","",1,"monster",3,"click","src","matTooltip"],["fontIcon","swap_horiz",1,"iconComparator"],["fontIcon","swap_horiz",1,"iconComparator",3,"mouseenter","mouseleave"]],template:function(t,i){if(t&1&&(B(0,ys,37,39),B(1,Ms,1,1),x(2,"async")),t&2){let n;$(i.item?0:-1),R(),$((n=V(2,2,i.itemChoosen$))?1:-1,n)}},dependencies:[Ne,an,on,ti,pn,cn,mt,dn,Jt,ei,ht],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 5px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:40px;height:40px;cursor:pointer;align-content:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .condition[_ngcontent-%COMP%]{text-align:center;color:red;font-weight:bolder;margin-bottom:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:space-around;cursor:pointer}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:30%;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;min-width:30px;min-height:30px;vertical-align:middle}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:80px;height:80px;min-width:80px;min-height:80px;margin:auto;object-fit:contain;border-radius:8px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{align-items:center;display:flex;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px;min-width:22px;min-height:22px;margin:0 10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0;border-radius:20px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;width:24px;height:24px;min-width:24px;min-height:24px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .appliqueEtat[_ngcontent-%COMP%]{font-weight:500;text-decoration:underline}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-around}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;min-width:80px;min-height:80px;object-fit:contain;flex:0 0 calc(33% - 10px);max-width:calc(33% - 10px)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .monster[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .craftable[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .iconComparator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;color:#415a77;background-color:#e5e9ea;border-radius:50%;cursor:pointer;border:5px solid #0D1B2A}@media screen and (max-width: 900px){[_nghost-%COMP%]{max-width:90%;margin:auto}[_nghost-%COMP%]   .fileCopy[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px!important;height:40px!important;min-width:40px!important;min-height:40px!important}[_nghost-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-of-type(n+4){display:none!important}}"]})};var fo=class r extends ii{actionService=c(we);itemChooseService=c(gt);aptitudesFormService=c(En);levelFormService=c(mn);classeFormService=c(hn);sortFormService=c(fn);naturalEffects=[{id:31,value:6,params:[]},{id:41,value:3,params:[]},{id:191,value:6,params:[]},{id:150,value:3,params:[]},{id:184,value:1,params:[]}];initialEffectList=[{id:122,value:0,params:[]},{id:124,value:0,params:[]},{id:123,value:0,params:[]},{id:125,value:0,params:[]},{id:1052,value:0,params:[]},{id:1053,value:0,params:[]},{id:149,value:0,params:[]},{id:180,value:0,params:[]},{id:26,value:0,params:[]},{id:1055,value:0,params:[]},{id:150,value:0,params:[]},{id:875,value:0,params:[]},{id:71,value:0,params:[]},{id:988,value:0,params:[]},{id:184,value:0,params:[]},{id:-6,value:0,params:[]},{id:-8,value:0,params:[]},{id:82,value:0,params:[]},{id:83,value:0,params:[]},{id:84,value:0,params:[]},{id:85,value:0,params:[]},{id:31,value:0,params:[]},{id:41,value:0,params:[]},{id:191,value:0,params:[]},{id:160,value:0,params:[]},{id:20,value:0,params:[]},{id:39,parameterMajorAction:120,value:0,params:[]},{id:39,parameterMajorAction:121,value:0,params:[]},{id:175,value:0,params:[]},{id:173,value:0,params:[]},{id:177,value:0,params:[]},{id:171,value:0,params:[]},{id:-9,value:0,params:[]},{id:-7,value:0,params:[]}];recap=new d([...this.initialEffectList]);recap$=this.recap.asObservable();maitrisesTotal=new d(0);maitrisesTotal$=this.maitrisesTotal.asObservable();resistancesTotal=new d(0);resistancesTotal$=this.resistancesTotal.asObservable();constructor(){super(),this.initializeListeners()}initializeListeners(){P([this.itemChooseService.listItem$,this.aptitudesFormService.recapStat$,this.levelFormService.level$,this.classeFormService.classe$,this.sortFormService.sortPassifs$]).pipe(H(this.destroy$),h(()=>this.resetEffects()),E(([e,t,i])=>{let n=this.extractEquipEffects(e),o=this.mapToRecapStats(n);return o.push(...t),{recapStat:o,level:i}}),h(()=>this.applyNatifEffects()),h(()=>this.applyEffectByClass()),h((e=>e.recapStat.forEach(t=>this.applyEffect(t)))),h(()=>this.applyEffectPassif()),h(()=>this.applyPdv()),h(()=>this.emitEffects())).subscribe()}applyPdv(){let e=this.recap.value.find(i=>i.id===20),t=this.recap.value.find(i=>i.id===-7);if(e&&t){let n=50+this.levelFormService.getValue()*10;e.value=Math.floor((n+e.value)*(1+t.value/100))}}applyEffectPassif(){this.applyEffectPassifGenerique(),this.applyEffectPassifClasse()}applyEffectPassifClasse(){switch(this.classeFormService.getValue()){case 1:this.applyEffectPassifFeca();break;case 2:this.applyEffectPassifOsamodas();break;case 4:this.applyEffectPassifSram();break;case 5:this.applyEffectPassifXelor();break;case 7:this.applyEffectPassifEniripsa();break;case 8:this.applyEffectPassifIop();break;case 9:this.applyEffectPassifCra();break;case 10:this.applyEffectPassifSadida();break;case 11:this.applyEffectPassifSacrieur();break;case 12:this.applyEffectPassifPandawa();break;case 14:this.applyEffectPassifZobal();break;case 15:this.applyEffectPassifOuginak();break;case 16:this.applyEffectPassifSteamer();break;case 18:this.applyEffectPassifEliotrope();break;case 19:this.applyEffectPassifHuppermage();break}}applyEffectPassifHuppermage(){this.sortFormService.getSortPassifs().find(t=>t===7193)&&this.applyEffect({id:177,value:20,params:[]})}applyEffectPassifEliotrope(){this.sortFormService.getSortPassifs().find(t=>t===7208)&&this.applyEffect({id:160,value:-1,params:[]})}applyEffectPassifSteamer(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();e.find(i=>i===7181)&&this.applyEffect({id:-8,value:-30,params:[]}),e.find(i=>i===7344)&&this.applyEffect({id:20,value:6*t,params:[]}),e.find(i=>i===2819)&&this.applyEffect({id:41,value:-1,params:[]}),e.find(i=>i===2816)&&this.applyEffect({id:39,value:-30,parameterMajorAction:121,params:[]}),e.find(i=>i===5462)&&this.applyEffect({id:-8,value:-20,params:[]})}applyEffectPassifOuginak(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();e.find(i=>i===6276)&&(this.applyEffect({id:-8,value:50,params:[]}),this.applyEffect({id:160,value:-2,params:[]})),e.find(i=>i===6278)&&this.applyEffect({id:875,value:30,params:[]}),e.find(i=>i===5103)&&this.applyEffect({id:41,value:1,params:[]}),e.find(i=>i===6275)&&this.applyEffect({id:-8,value:-15,params:[]}),e.find(i=>i===7343)&&this.applyEffect({id:191,value:3,params:[]}),e.find(i=>i===7557)&&this.applyEffect({id:191,value:-1,params:[]}),e.find(i=>i===6277)&&(this.applyEffect({id:-6,value:-10,params:[]}),this.applyEffect({id:39,value:30,parameterMajorAction:121,params:[]}),this.applyEffect({id:20,value:4*t,params:[]})),e.find(i=>i===7328)&&this.applyEffect({id:41,value:-1,params:[]}),e.find(i=>i===6272)&&this.applyEffect({id:-8,value:-15,params:[]}),e.find(i=>i===7193)&&(this.applyEffect({id:177,value:20,params:[]}),this.applyEffect({id:-6,value:-10,params:[]})),e.find(i=>i===7596)&&this.applyEffect({id:173,value:3*t,params:[]})}applyEffectPassifZobal(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();if(e.find(i=>i===5359)&&this.applyEffect({id:41,value:1,params:[]}),e.find(i=>i===7093)&&this.applyEffect({id:175,value:2*t,params:[]}),e.find(i=>i===7111)){let i=this.recap.value.find(n=>n.id===175)?.value??0;if(i>=0){let n=Math.min(Math.floor(i/2),2*t);this.applyEffect({id:1053,value:n,params:[]})}}if(e.find(i=>i===7104)&&this.applyEffect({id:-6,value:-25,params:[]}),e.find(i=>i===3356)&&(this.applyEffect({id:-6,value:25,params:[]}),this.applyEffect({id:39,value:-40,parameterMajorAction:121,params:[]}),this.applyEffect({id:39,value:-40,parameterMajorAction:120,params:[]})),e.find(i=>i===3363)){let i=this.recap.value.find(n=>n.id===173)?.value??0;i>=0&&this.applyEffect({id:173,value:i,params:[]}),this.applyEffect({id:41,value:-1,params:[]})}if(e.find(i=>i===7094)){let i=this.recap.value.find(n=>n.id===173)?.value??0;if(i>=0){let n=Math.min(Math.floor(i/2),2*t);this.applyEffect({id:1052,value:n,params:[]})}}e.find(i=>i===7113)&&this.applyEffect({id:177,value:10,params:[]})}applyEffectPassifPandawa(){let e=this.sortFormService.getSortPassifs();e.find(t=>t===7987)&&(this.applyEffect({id:-9,value:20,params:[]}),this.applyEffect({id:-6,value:-10,params:[]})),e.find(t=>t===5149)&&(this.applyEffect({id:-6,value:15,params:[]}),this.applyEffect({id:80,value:-50,params:[]})),e.find(t=>t===5151)&&this.applyEffect({id:-6,value:10,params:[]})}applyEffectPassifSacrieur(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();if(e.find(i=>i===7218)&&this.applyEffect({id:160,value:-2,params:[]}),e.find(i=>i===7213)&&this.applyEffect({id:39,value:-50,parameterMajorAction:121,params:[]}),e.find(i=>i===5192)){let i=this.recap.value.find(n=>n.id===173)?.value??0;i>=0&&this.applyEffect({id:173,value:-i,params:[]})}e.find(i=>i===5051)&&this.applyEffect({id:20,value:8*t,params:[]})}applyEffectPassifSadida(){this.sortFormService.getSortPassifs().find(t=>t===7193)&&this.applyEffect({id:177,value:20,params:[]})}applyEffectPassifCra(){if(this.sortFormService.getSortPassifs().find(t=>t===588)){let t=this.recap.value.find(i=>i.id===175)?.value??0;this.applyEffect({id:175,value:-t,params:[]}),this.applyEffect({id:177,value:20,params:[]})}}applyEffectPassifIop(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();e.find(i=>i===525)&&this.applyEffect({id:20,value:3*t,params:[]}),e.find(i=>i===7111)&&this.applyEffect({id:39,value:-20,parameterMajorAction:121,params:[]})}applyEffectPassifEniripsa(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();e.find(i=>i===5453)&&this.applyEffect({id:20,value:8*t,params:[]})}applyEffectPassifXelor(){let e=this.sortFormService.getSortPassifs();e.find(t=>t===756)&&(this.applyEffect({id:191,value:6,params:[]}),this.applyEffect({id:41,value:-2,params:[]})),e.find(t=>t===7196)&&this.applyEffect({id:191,value:-6,params:[]})}applyEffectPassifSram(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();if(e.find(i=>i===4609)&&this.applyEffect({id:184,value:4,params:[]}),e.find(i=>i===5122)&&this.applyEffect({id:1053,value:Math.floor(t*1.5),params:[]}),e.find(i=>i===5126)&&this.applyEffect({id:177,value:20,params:[]}),e.find(i=>i===2437)){let i=this.recap.value.find(o=>o.id===175)?.value??0;i>=0&&this.applyEffect({id:150,value:Math.min(Math.floor(i/20),15),params:[]});let n=this.recap.value.find(o=>o.id===173)?.value??0;n>=0&&this.applyEffect({id:150,value:Math.min(Math.floor(n/20),15),params:[]})}}applyEffectPassifOsamodas(){let e=this.sortFormService.getSortPassifs();e.find(t=>t===7340)&&this.applyEffect({id:191,value:3,params:[]}),e.find(t=>t===7333)&&this.applyEffect({id:-6,value:25,params:[]}),e.find(t=>t===7331)&&this.applyEffect({id:-6,value:20,params:[]}),e.find(t=>t===7330)&&this.applyEffect({id:160,value:2,params:[]}),e.find(t=>t===7344)&&this.applyEffect({id:80,value:-100,params:[]})}applyEffectPassifFeca(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();if(e.find(i=>i===6997)&&this.applyEffect({id:875,value:30,params:[]}),e.find(i=>i===7004)&&this.applyEffect({id:39,value:100,parameterMajorAction:120,params:[]}),e.find(i=>i===2374)&&this.applyEffect({id:39,value:-100,parameterMajorAction:121,params:[]}),e.find(i=>i===5245)&&this.applyEffect({id:-6,value:10,params:[]}),e.find(i=>i===866)){let i=this.recap.value.find(n=>n.id===875);i&&i.value<=100&&(this.applyEffect({id:39,value:i.value,parameterMajorAction:120,params:[]}),this.applyEffect({id:875,value:-i.value,params:[]}))}e.find(i=>i===2295)&&(this.applyEffect({id:39,value:-100,parameterMajorAction:121,params:[]}),this.applyEffect({id:-6,value:25,params:[]})),e.find(i=>i===6989)&&this.applyEffect({id:160,value:1,params:[]}),e.find(i=>i===7005)&&(this.applyEffect({id:20,value:3*t,params:[]}),this.applyEffect({id:-6,value:-20,params:[]}))}applyEffectPassifGenerique(){let e=this.sortFormService.getSortPassifs(),t=this.levelFormService.getValue();e.find(i=>i===5144)&&(this.applyEffect({id:-6,value:15,params:[]}),this.applyEffect({id:-9,value:-30,params:[]})),e.find(i=>i===4957)&&this.applyEffect({id:175,value:t,params:[]}),e.find(i=>i===4956)&&this.applyEffect({id:171,value:Math.floor(t/2),params:[]}),e.find(i=>i===4958)&&this.applyEffect({id:173,value:t,params:[]}),e.find(i=>i===5146)&&(this.applyEffect({id:-9,value:30,params:[]}),this.applyEffect({id:39,value:25,parameterMajorAction:120,params:[]}),this.applyEffect({id:-6,value:-15,params:[]})),e.find(i=>i===5237)&&(this.applyEffect({id:31,value:1,params:[]}),this.applyEffect({id:-6,value:-20,params:[]}),this.applyEffect({id:177,value:10,params:[]})),e.find(i=>i===5145)&&(this.applyEffect({id:-7,value:60,params:[]}),this.applyEffect({id:-4,value:25,params:[]}),this.applyEffect({id:-6,value:-25,params:[]}),this.applyEffect({id:-9,value:-50,params:[]}))}applyEffectByClass(){let e=this.classeFormService.getValue(),t=this.levelFormService.getValue();switch(e){case 9:this.applyEffect({id:160,value:1,params:[]});break;case 6:this.applyEffect({id:150,value:20,params:[]});break;case 11:this.applyEffect({id:20,value:4*t,params:[]});break;case 4:this.applyEffect({id:180,value:t,params:[]}),this.applyEffect({id:184,value:1,params:[]});break;case 8:this.applyEffect({id:41,value:1,params:[]});break;case 7:this.applyEffect({id:20,value:2*t,params:[]});break;case 18:(this.recap.value.find(i=>i.id===160)?.value??0)>=2&&(this.applyEffect({id:160,value:-2,params:[]}),this.applyEffect({id:41,value:1,params:[]}));break;case 5:this.applyEffect({id:191,value:6,params:[]});break}}applyNatifEffects(){this.naturalEffects.forEach(e=>this.applyEffect(e))}resetEffects(){this.recap.value.forEach(e=>e.value=0)}extractEquipEffects(e){return e.flatMap(t=>t.equipEffects)}mapToRecapStats(e){return e.map(t=>({id:t.actionId,parameterMajorAction:t.actionId!==39?void 0:t.params[4]===120?120:121,value:t.params[0],params:t.params}))}applyEffectResistance(e){if(e.id===80)this.applyEffect({id:82,value:e.value,params:e.params}),this.applyEffect({id:83,value:e.value,params:e.params}),this.applyEffect({id:84,value:e.value,params:e.params}),this.applyEffect({id:85,value:e.value,params:e.params});else if(e.id===90||e.id===100)this.applyEffect({id:82,value:-e.value,params:e.params}),this.applyEffect({id:83,value:-e.value,params:e.params}),this.applyEffect({id:84,value:-e.value,params:e.params}),this.applyEffect({id:85,value:-e.value,params:e.params});else if(e.id===1069){let t=e.params[2];t>=1&&this.applyEffect({id:82,value:e.value,params:e.params}),t>=2&&this.applyEffect({id:83,value:e.value,params:e.params}),t>=3&&this.applyEffect({id:84,value:e.value,params:e.params}),t>=4&&this.applyEffect({id:85,value:e.value,params:e.params})}else e.id===35&&this.applyEffect({id:80,value:50,params:e.params})}applyEffectMaitrisesElementaires(e){if(e.id===120)this.applyEffect({id:122,value:e.value,params:e.params}),this.applyEffect({id:124,value:e.value,params:e.params}),this.applyEffect({id:123,value:e.value,params:e.params}),this.applyEffect({id:125,value:e.value,params:e.params});else if(e.id===130)this.applyEffect({id:122,value:-e.value,params:e.params}),this.applyEffect({id:124,value:-e.value,params:e.params}),this.applyEffect({id:123,value:-e.value,params:e.params}),this.applyEffect({id:125,value:-e.value,params:e.params});else if(e.id===1068){let t=e.params[2];t>=1&&this.applyEffect({id:122,value:e.value,params:e.params}),t>=2&&this.applyEffect({id:124,value:e.value,params:e.params}),t>=3&&this.applyEffect({id:123,value:e.value,params:e.params}),t>=4&&this.applyEffect({id:125,value:e.value,params:e.params})}}applyEffect(e){this.applyEffectResistance(e),this.applyEffectMaitrisesElementaires(e);let t=this.actionService.isAMalus(e.id),i=t?this.actionService.getOpposedEffect(e.id):e.id,n=t?-1:1,o=this.recap.value.find(a=>a.id!==39&&a.id===i||a.id===39&&a.parameterMajorAction===e.parameterMajorAction);o&&(o.value+=n*e.value)}emitEffects(){this.recap.next([...this.recap.value]);let e=this.recap.value.filter(o=>[1052,1053,149,180,26,1055].includes(o.id)).reduce((o,a)=>o+a.value,0),t=Math.max(this.recap.value.find(o=>o.id===122)?.value||0,this.recap.value.find(o=>o.id===124)?.value||0,this.recap.value.find(o=>o.id===123)?.value||0,this.recap.value.find(o=>o.id===125)?.value||0),i=e+t;this.maitrisesTotal.next(i);let n=this.recap.value.filter(o=>[82,83,84,85].includes(o.id)).reduce((o,a)=>o+a.value,0);this.resistancesTotal.next(n)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=g({token:r,factory:r.\u0275fac,providedIn:"root"})};export{Ce as a,vr as b,nt as c,Wa as d,mt as e,Re as f,we as g,ft as h,Pi as i,Cr as j,_e as k,ot as l,Ui as m,at as n,st as o,uo as p,lt as q,ct as r,pt as s,Di as t,dt as u,ut as v,Et as w,wi as x,xi as y,Ni as z,De as A,zt as B,gt as C,Fi as D,ho as E,gn as F,fo as G};
