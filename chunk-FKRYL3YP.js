import{d as nt,e as it,k as ot,l as rt}from"./chunk-CFYR32L2.js";import"./chunk-PDYDQ73C.js";import"./chunk-2AY757IR.js";import"./chunk-MR3L3X4B.js";import{b as et}from"./chunk-GYGY4DQ6.js";import{j as st}from"./chunk-KJXYGXN4.js";import"./chunk-F6IVVKNP.js";import{G as tt,l as Q}from"./chunk-D3BAJYZ5.js";import{$a as f,Ab as x,Bb as u,Cb as h,Db as w,Fb as v,Hb as m,Kc as k,Lc as E,Ma as V,Nd as W,Oa as o,Od as X,Pc as K,Rd as Y,Sd as Z,Tb as S,Vb as g,Wa as b,X as d,Xb as N,ba as P,bb as H,ca as I,e as F,gc as M,hc as O,ja as $,na as B,oe as at,pb as p,qb as q,rb as c,sa as z,sb as G,tb as J,ub as _,vb as C,wb as y,xa as U,xb as a,yb as s,zb as l}from"./chunk-4IGTDH6R.js";import"./chunk-25N2FLV6.js";var R=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-item-skeleton"]],decls:20,vars:0,consts:[[1,"skeleton-item"],[1,"skeleton-header"],[1,"skeleton-box"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-text","skeleton-title-text"],[1,"skeleton-image"],[1,"skeleton-text","skeleton-weight"],[1,"skeleton-effects"],[1,"skeleton-effect-list"],[1,"skeleton-text"],[1,"skeleton-craft-drop"]],template:function(t,i){t&1&&(x(0,"div",0)(1,"div",1),h(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2),u(),x(6,"div",3)(7,"div",4),h(8,"div",5)(9,"div",6)(10,"div",7),u(),x(11,"div",8)(12,"div",9),h(13,"div",10)(14,"div",10)(15,"div",10)(16,"div",10),u(),x(17,"div",11),h(18,"div",2)(19,"div",2),u()()()())},styles:[".skeleton-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009}.skeleton-header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px;padding:10px;justify-content:space-around}.skeleton-header[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;height:100%}.skeleton-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:30%;gap:10px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-title-text[_ngcontent-%COMP%]{height:24px;width:120px;margin:0 auto}.skeleton-title[_ngcontent-%COMP%]   .skeleton-image[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-weight[_ngcontent-%COMP%]{height:18px;width:100px}.skeleton-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;flex:1}.skeleton-effect-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.skeleton-text[_ngcontent-%COMP%]{height:16px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:4px;width:100%}.skeleton-craft-drop[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-around;margin-top:10px}.skeleton-craft-drop[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}"]})};var L=class e{constructor(n){this.el=n}appIntersect=new $;intersectRoot;observer;ngOnInit(){this.observer=new IntersectionObserver(n=>{n.forEach(t=>{t.isIntersecting&&this.appIntersect.emit()})},{root:this.intersectRoot||null,threshold:.1,rootMargin:"300px"}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||e)(b(z))};static \u0275dir=H({type:e,selectors:[["","appIntersect",""]],inputs:{intersectRoot:"intersectRoot"},outputs:{appIntersect:"appIntersect"}})};var lt=(e,n)=>n.id;function mt(e,n){e&1&&l(0,"app-item-skeleton")}function dt(e,n){if(e&1&&(a(0,"div",1),_(1,mt,1,0,"app-item-skeleton",null,J),s()),e&2){let t=m();o(),C(t.skeletonArray)}}function ft(e,n){if(e&1&&l(0,"app-item",2),e&2){let t=n.$implicit;y("item",t)}}function gt(e,n){if(e&1){let t=w();a(0,"div",4,0),v("appIntersect",function(){P(t);let r=m(2);return I(r.onScrollEnd())}),l(2,"app-item-skeleton"),s()}}function _t(e,n){if(e&1&&(a(0,"div",1),_(1,ft,1,1,"app-item",2,lt),p(3,gt,3,0,"div",3),s()),e&2){let t=m();o(),C(n),o(2),c(t.currentIndex<t.allItems.length?3:-1)}}var D=class e{itemsService=d(tt);skeletonArray=Array(36).fill(0).map((n,t)=>t);displayedItems$=new F([]);allItems=[];itemsPerLoad=36;currentIndex=0;observer;isBrowser;constructor(n){this.isBrowser=K(n)}ngOnInit(){this.itemsService.items$.subscribe(n=>{this.allItems=n,this.currentIndex=0,this.displayedItems$.next([]),this.loadMoreItems(),this.isBrowser&&this.scrollToTop()})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}loadMoreItems(){let n=this.allItems.slice(this.currentIndex,this.currentIndex+this.itemsPerLoad),t=this.displayedItems$.value;this.displayedItems$.next([...t,...n]),this.currentIndex+=this.itemsPerLoad}onScrollEnd(){this.currentIndex<this.allItems.length&&this.loadMoreItems()}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||e)(b(U))};static \u0275cmp=f({type:e,selectors:[["app-item-list"]],decls:3,vars:3,consts:[["loadTrigger",""],[1,"content"],[3,"item"],[1,"load-trigger"],[1,"load-trigger",3,"appIntersect"]],template:function(t,i){if(t&1&&(p(0,dt,3,0,"div",1),M(1,"async"),q(2,_t,4,1,"div",1)),t&2){let r;c(i.itemsService.isLoading()?0:(r=O(1,1,i.displayedItems$))?2:-1,r)}},dependencies:[nt,E,R,L,k],styles:["[_nghost-%COMP%]{display:block}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:20px;grid-row-gap:20px}.content[_ngcontent-%COMP%]   app-item[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.load-trigger[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;align-items:center;min-height:250px}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:400px;width:100%}.loader-container[_ngcontent-%COMP%]   .loader-title[_ngcontent-%COMP%]{width:200px;margin-bottom:20px}.loader-container[_ngcontent-%COMP%]   .loader-spinner[_ngcontent-%COMP%]{width:100px;height:100px;padding:10px;background-color:#415a77;border-radius:50%;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (min-width:1700px)and (max-width:2000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (min-width:1450px)and (max-width:1700px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:1450px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media screen and (min-width:701px)and (max-width:1000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})};function Ct(e,n){if(e&1&&(a(0,"span"),l(1,"img",2),g(2),s()),e&2){let t=n.$implicit,i=m(2);o(),y("src",i.getEffectPng(t),V),o(),N(" ",i.displayEffect(t)," ")}}function xt(e,n){e&1&&(a(0,"div",0),_(1,Ct,3,2,"span",null,G),s(),a(3,"div",1),g(4),M(5,"translate"),s()),e&2&&(o(),C(n),o(3),N(" ",O(5,1,"recap-stats.info")," "))}var A=class e{recapStatsService=d(st);imageService=d(Y);static RESISTANCES_LIST=[82,83,84,85];displayEffect(n){let t=n.value<0?"-":"",i=Math.abs(n.value);if(e.RESISTANCES_LIST.includes(n.id)){let r=Math.floor((1-Math.pow(.8,i/100))*100);return`${t}${r}% (${i})`}return t+i}getEffectPng(n){return this.imageService.getActionIdUrl(n.id,n.id===39&&n.parameterMajorAction===121)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-recap-stats"]],decls:2,vars:3,consts:[[1,"content"],[1,"info"],["alt","aptitudes",3,"src"]],template:function(t,i){if(t&1&&(p(0,xt,6,3),M(1,"async")),t&2){let r;c((r=O(1,1,i.recapStatsService.recap$))?0:-1,r)}},dependencies:[E,X,Z,k,W],styles:["[_nghost-%COMP%]{background:linear-gradient(to right,#213a57,#618a97);width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(18,1fr);grid-template-rows:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:3px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:#fff}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:3px;margin-right:5px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;color:#fff;width:100%}"]})};function ut(e,n){e&1&&l(0,"app-recap-stats")}function ht(e,n){e&1&&g(0," < ")}function vt(e,n){e&1&&g(0," > ")}function Mt(e,n){if(e&1){let t=w();p(0,ut,1,0,"app-recap-stats"),l(1,"app-filters"),a(2,"button",1),v("appActivate",function(){P(t);let r=m();return I(r.filterSidebarService.setValue(!r.open()))}),p(3,ht,1,0)(4,vt,1,0),s()}if(e&2){let t=m();c(t.open()?-1:0),o(),S("close",!t.open()),o(),S("close",!t.open()),o(),c(t.open()?3:4)}}var pt=class e{displayFilterService=d(it);filterSidebarService=d(rt);open=at(this.filterSidebarService.open$);isMobile=B(Q());static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-list-item-router"]],decls:2,vars:3,consts:[["appSwipe","",3,"swipeLeft"],[1,"close-button",3,"appActivate"]],template:function(t,i){t&1&&(p(0,Mt,5,6),a(1,"app-item-list",0),v("swipeLeft",function(){return i.displayFilterService.setDisplay(!0)}),s()),t&2&&(c(i.isMobile()?-1:0),o(),S("close",!i.open()||i.isMobile()))},dependencies:[D,ot,et,A],styles:["[_nghost-%COMP%]{display:flex;flex-wrap:wrap}[_nghost-%COMP%]   .close-button[_ngcontent-%COMP%]{position:fixed;left:calc(15% + 430px);z-index:100;transition:left .3s ease-in-out;margin-top:98px;margin-left:0;border-top-left-radius:0;border-bottom-left-radius:0}[_nghost-%COMP%]   .close-button.close[_ngcontent-%COMP%]{left:430px}[_nghost-%COMP%]   app-filters[_ngcontent-%COMP%]{display:block;position:fixed;width:15%;min-height:64px;margin-bottom:10px;margin-right:1%;overflow-y:scroll;height:calc(100% - 85px);padding-bottom:50px;transition:left .3s ease-in-out,opacity .3s ease-in-out;left:430px;z-index:-1;opacity:1}[_nghost-%COMP%]   app-filters.close[_ngcontent-%COMP%]{left:calc(430px - 15%);opacity:0}[_nghost-%COMP%]   app-item-list[_ngcontent-%COMP%]{width:76%;margin-left:19%;margin-top:10px;transition:width .3s ease-in-out,margin-left .3s ease-in-out}[_nghost-%COMP%]   app-item-list.close[_ngcontent-%COMP%]{width:97%;margin-left:1%}[_nghost-%COMP%]{scrollbar-width:none}[_nghost-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}@media screen and (max-width:700px){app-recap-stats[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:1000px){app-recap-stats[_ngcontent-%COMP%]{display:none!important}}@media screen and (min-width:1700px)and (max-width:2000px){.close-button.close[_ngcontent-%COMP%]{left:calc(15% + 430px)}app-filters.close[_ngcontent-%COMP%]{width:15%}app-item-list[_ngcontent-%COMP%]{width:97%;margin-left:22%!important}app-item-list.close[_ngcontent-%COMP%]{margin-left:10px!important}}@media screen and (min-width:1450px)and (max-width:1700px){.close-button[_ngcontent-%COMP%]{left:730px!important}.close-button.close[_ngcontent-%COMP%]{left:430px!important}app-filters[_ngcontent-%COMP%]{width:300px!important}app-filters.close[_ngcontent-%COMP%]{width:15%}app-item-list[_ngcontent-%COMP%]{width:68%!important;margin-left:calc(300px + 2%)!important}app-item-list.close[_ngcontent-%COMP%]{margin-left:10px!important;width:97%!important}}@media screen and (max-width:1450px){.close-button[_ngcontent-%COMP%]{left:780px!important}.close-button.close[_ngcontent-%COMP%]{left:430px!important}app-filters[_ngcontent-%COMP%]{width:350px!important}app-filters.close[_ngcontent-%COMP%]{width:15%}app-item-list[_ngcontent-%COMP%]{width:48%!important;margin-left:calc(350px + 4%)!important}app-item-list.close[_ngcontent-%COMP%]{margin-left:10px!important;width:97%!important}}@media screen and (min-width:701px)and (max-width:1000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})};export{pt as ListItemRouterComponent};
