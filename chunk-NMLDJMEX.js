import{a as kt,b as it}from"./chunk-6XA23ISW.js";import{a as bt,b as Rt}from"./chunk-RIFXUCDA.js";import{a as tt,b as nt,c as ft}from"./chunk-3JMPLG4V.js";import{a as et,c as Ut,w as ot,x as Nt}from"./chunk-IM2ETHCJ.js";import{$ as Et,$c as Z,A as It,C as V,D as U,Da as g,Fa as C,Ga as y,Gb as Y,H as R,Ia as O,Ja as T,Ka as _,L as c,La as m,Ma as p,Na as h,Oa as dt,P as S,Pa as _t,Q as x,Ra as A,Rb as H,Sb as G,Ta as v,Va as a,Xc as At,Yc as Dt,_c as N,ac as K,ad as J,b as gt,bd as j,c as Ct,d as k,eb as $,ed as wt,ga as u,gb as L,h as I,hb as E,i as W,ia as r,ib as vt,jb as D,kb as M,ob as Mt,p as ut,pa as St,pb as Pt,qa as P,qb as Ot,s as ht,ta as xt,tb as Tt,ua as X,ub as d,vb as f,wb as yt,z as Q}from"./chunk-LALB2U32.js";import{a as z,b as q}from"./chunk-EQDQRRRY.js";var Bt=class n{isDisplayed=new k(!1);isDisplayed$=this.isDisplayed.asObservable();toggleDisplay(){this.isDisplayed.next(!this.isDisplayed.value)}setDisplay(e){this.isDisplayed.next(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var rt=class n{condition=new Map;http=c(K);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/itemConditions.json").pipe(U(t=>t.forEach(i=>this.condition.set(i.id,i))),Q(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),e()}})}),this.loadPromise)}findCondition(e){return this.condition.get(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var at=class n{stateDefinitionService=new Map;http=c(K);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/statesDefinition.json").pipe(U(t=>t.forEach(i=>this.stateDefinitionService.set(i.id,{id:i.id,description:{fr:i.description.fr,en:i.description.en,es:i.description.es,pt:i.description.pt}}))),Q(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),e()}})}),this.loadPromise)}findStatesDefinition(e){return this.stateDefinitionService.get(e)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var B=class n{ankamaCdnFacade=c(et);translateService=c(N);actionService=c(it);transform(e){return W([this.translateService.onLangChange.pipe(It({lang:this.translateService.currentLang,translations:{}})),this.ankamaCdnFacade.action$]).pipe(I(([,t])=>t),I(t=>this.findAction(t,e)),I(t=>this.getDefinitions(t)),I(t=>this.getDefinitionsComplete(t,e)))}getDefinitionsComplete(e,t){let i=`${e}`;return i=this.replaceValues(i,t),i=this.cleanHeaderDefinition(i),i=this.cleanRecoltEffect(i),i=this.singularOrPlurial(i,t),i=this.atLeastSixParameters(i,t),i=this.armorGivenOrReceived(i,t),i=this.deleteDoubleMinus(i),i}deleteDoubleMinus(e){return e.replace(/--/g,"")}armorGivenOrReceived(e,t){if(t.actionId!==39&&t.actionId!==40)return e;let i=t.params[4]===120?this.translateService.instant("abstract.donnee"):this.translateService.instant("abstract.recue"),o=Math.abs(t.params[0]),s=this.actionService.isAMalus(t.actionId);return(s&&t.params[0]>0||!s&&t.params[0]<0?"-":"")+o+this.translateService.instant("abstract.armure")+i}atLeastSixParameters(e,t){let i=/{\[~3\]\?(.*):(.*)}/,o=e.match(i);return o&&(e=o[t.params.length>=6?1:2]),e}singularOrPlurial(e,t){return e=this.singularOrPlurialWithRegex(e,t,/\{\[>2\]\?([^}]){0,5}:([^}]){0,5}\}/g,2),e=this.singularOrPlurialWithRegex(e,t,/\{\[>1\]\?([^}]){0,5}:([^}]){0,5}\}/g),e}singularOrPlurialWithRegex(e,t,i,o=0){let s=[...e.matchAll(i)];if(s&&t.params.length>o){let l=s.map(w=>w[t.params[o]>=2?1:2]);for(let w=0;w<s.length;w++)e=e.replace(s[w][0],l[w]??"")}return e}cleanDefinition(e,t){let i=e.match(t);return i&&(e=e.replace(i[0],"")),e}cleanRecoltEffect(e){return this.cleanDefinition(e,/{\[~2]?.+}/g)}cleanHeaderDefinition(e){return this.cleanDefinition(e,/(\[#.*\]) /g)}replaceValues(e,t){let i=/(\[#\d\])/g,o=[...e.matchAll(i)].map(s=>s[1]);if(o)for(let s of o){let l=0;switch(s){case"[#1]":l=0;break;case"[#2]":l=2;break;case"[#3]":l=4;break}t.params.length>l&&(e=e.replace(s,t.params[l].toString()))}return e}getDefinitions(e){return e.description[this.translateService.currentLang]}findAction(e,t){return e.filter(i=>i.definition.id===t.actionId)[0]}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=xt({name:"actions",type:n,pure:!0})};var st=class n{AnkamaCdnFacade=c(et);findStates(e){let t=this.AnkamaCdnFacade.getStatesList().find(i=>i.definition.id===e);if(t)return{id:t.definition.id,fr:t.title.fr,en:t.title.en,es:t.title.es,pt:t.title.pt}}static \u0275fac=function(t){return new(t||n)};static \u0275prov=R({token:n,factory:n.\u0275fac,providedIn:"root"})};var F=class n{translateService=c(N);itemTypeService=c(Ut);itemChooseService=c(Nt);actionsService=c(it);statesService=c(st);imageService=c(wt);destroy$=new Ct;resistances=0;maitrises=0;IdActionEnum=j;mapSortAction=new Map([[31,0],[56,1],[41,2],[57,3],[193,4],[191,4],[192,5],[184,6],[160,7],[161,8],[20,9],[21,10],[173,11],[175,12],[172,13],[875,14],[174,15],[176,16],[876,17],[120,18],[1068,19],[149,20],[180,21],[26,22],[1055,23],[1053,24],[1052,25],[1056,26],[181,27],[1061,28],[1060,29],[1059,30],[150,31],[39,32],[168,33],[40,34],[988,35],[71,36],[80,37],[1069,38],[82,39],[83,40],[85,41],[84,42],[1062,43],[1063,44],[90,45],[97,46],[98,47],[96,48]]);Math=Math;itemChoosen$=new k([[]]);IdActionsEnum=j;getEffectPng(e){return this.imageService.getActionIdUrl(e.actionId,e.actionId===39&&e.params[4]===121)}initItemChoosen(e){let t=this.itemTypeService.getItemType(e.itemTypeId);if(!t)return;let i=new gt;t===13?i=this.itemChooseService.getObsItem(12).pipe(I(o=>[o])):t===1?i=W([this.itemChooseService.getObsItem(2),this.itemChooseService.getObsItem(12)]).pipe(I(([o,s])=>[o,s])):i=this.itemChooseService.getObsItem(t).pipe(I(o=>[o])),i.pipe(V(this.destroy$)).subscribe(o=>this.itemChoosen$.next(o))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-item"]],decls:0,vars:0,template:function(t,i){},encapsulation:2})};function jt(n,e){if(n&1&&(m(0,"div",0)(1,"span"),h(2,"img",7),E(3),d(4,"translate"),p(),m(5,"span"),h(6,"img",8),E(7),d(8,"translate"),p()()),n&2){let t=a();r(),L(t.getBackgroundDifferentsStatsOnValue(t.maitrises)),r(),_("src",t.imageService.getActionIdUrl(t.IdActionEnum.MAITRISES_ELEMENTAIRES),u),r(),M("",f(4,10,"item.maitrises")," ",t.Math.trunc(t.maitrises)),r(2),L(t.getBackgroundDifferentsStatsOnValue(t.resistances)),r(),_("src",t.imageService.getActionIdUrl(t.IdActionEnum.RESISTANCES_ELEMENTAIRE),u),r(),M("",f(8,12,"item.resistances")," ",t.resistances)}}function zt(n,e){if(n&1&&(m(0,"div",4)(1,"h3"),E(2),p(),h(3,"img",9),p()),n&2){let t=e.$implicit,i=a(2);r(),$("color",i.colorRarityService.mapColors.get(t.rarity)),r(),M("",i.getTitle(t)," (",t.level,")"),r(),_("src",i.imageService.getItemUrl(t.idImage),u)}}function qt(n,e){n&1&&O(0,zt,4,5,"div",4,y),n&2&&T(e)}function Wt(n,e){if(n&1&&(h(0,"img",11),E(1),d(2,"actions"),d(3,"async")),n&2){let t=a().$implicit,i=a(2);_("src",i.getEffectPng(t),u),r(),D(" ",f(3,4,f(2,2,t))," ")}}function Qt(n,e){if(n&1&&(m(0,"p"),g(1,Wt,4,6),p()),n&2){let t=e.$implicit,i=a(2);L(i.getBackgroundDifferentsStats(t)),r(),C(t.actionId!==i.IdActionEnum.APPLIQUE_ETAT&&t.value!==0?1:-1)}}function Xt(n,e){n&1&&(m(0,"div"),O(1,Qt,2,3,"p",10,y),p()),n&2&&(r(),T(e))}var pt=class n extends F{itemService=c(ot);colorRarityService=c(nt);cdr=c(Y);item;indexItemChoosen=0;ARMURE_DONNEE_RECUE=[39,40];listDifferentsStatsItem=[];loaded$;weight=0;itemSelected$=this.itemChoosen$.pipe(ut(e=>e.length!==0),I(e=>e.map(t=>t[this.indexItemChoosen])),I(e=>e.length>=2&&e[0]?.id===e[1]?.id?[e.find(t=>t!==void 0)]:e),I(e=>e.filter(t=>t!==void 0)));differentStatsItemList$=this.itemSelected$.pipe(V(this.destroy$),U(e=>{this.listDifferentsStatsItem=[],this.fillListCurrentItem(),e.forEach(t=>t?this.fillMapDifferentStatsItem(t):"")}),I(()=>this.listDifferentsStatsItem.sort((e,t)=>(this.mapSortAction.get(e.actionId)??999)-(this.mapSortAction.get(t.actionId)??999))));constructor(){super()}ngAfterViewInit(){this.item&&(this.item.equipEffects=this.item.equipEffects.sort((e,t)=>(this.mapSortAction.get(e.actionId)??999)-(this.mapSortAction.get(t.actionId)??999)),this.loaded$=this.itemSelected$.pipe(V(this.destroy$),I(e=>(this.resistances=this.item.resistance,this.maitrises=this.item.maitrise,this.weight=this.itemService.calculWeight(this.resistances,this.maitrises,this.item.level),e.forEach(t=>{t&&(this.resistances-=t.resistance,this.maitrises-=t.maitrise,this.weight=this.itemService.calculWeight(this.resistances,this.maitrises,t.level))}),!0))),this.initItemChoosen(this.item),this.cdr.detectChanges())}setItem(e){let t=this.itemTypeService.getItemType(e.itemTypeId);t&&this.itemChooseService.setItem(t,e)}getTitle(e){return e?e.title[this.translateService.currentLang]:""}getBackgroundDifferentsStatsOnValue(e){return e>0?"green":e<0?"red":""}getBackgroundDifferentsStats(e){let t=this.actionsService.isAMalus(e.actionId);return e.value>0&&!t||e.value<0&&t||e.presentOnCurrentItem&&!e.presentOnEquippedItem&&!t?"green":e.value<0&&!t||e.value>0&&t||!e.presentOnCurrentItem&&e.presentOnEquippedItem&&t?"red":""}getByActionId(e,t){return this.listDifferentsStatsItem.find(i=>i.actionId===e&&i.isArmureRecue===t)}pushSetDifferentsStatsItem(e){e&&(this.listDifferentsStatsItem=this.listDifferentsStatsItem.filter(t=>t.actionId!==e.actionId||t.isArmureRecue!==e.isArmureRecue),this.listDifferentsStatsItem.push(e))}fillListCurrentItem(){this.item.equipEffects.forEach(e=>{let t=this.ARMURE_DONNEE_RECUE.includes(e.actionId)&&e.params[4]===121,i=this.getByActionId(e.actionId,t);if(i){let o=i.params;o[0]+=e.params[0],i=q(z({},i),{value:i.value+e.params[0],params:o,presentOnCurrentItem:!0})}else i={value:e.params[0],params:[...e.params],actionId:e.actionId,presentOnCurrentItem:!0,presentOnEquippedItem:!1,isArmureRecue:t};this.pushSetDifferentsStatsItem(i)})}fillMapDifferentStatsItem(e){e.equipEffects.forEach(t=>{let i=this.ARMURE_DONNEE_RECUE.includes(t.actionId)&&t.params[4]===121,o=this.getByActionId(t.actionId,i),s=this.item.equipEffects.find(l=>this.actionsService.isOpposed(l,t));if(s){let l=[...t.params];l[0]=s.params[0]+l[0],o={value:s.params[0]+t.params[0],params:l,actionId:s.actionId,presentOnCurrentItem:!0,presentOnEquippedItem:!0,isArmureRecue:i}}else if(o&&o.isArmureRecue===i){let l=o.params;l[0]-=t.params[0],o=q(z({},o),{value:o.value-t.params[0],params:l,presentOnEquippedItem:!0})}else{let l=[...t.params];l[0]=-l[0],o={value:-t.params[0],params:l,actionId:t.actionId,presentOnCurrentItem:!1,presentOnEquippedItem:!0,isArmureRecue:i}}this.pushSetDifferentsStatsItem(o)}),this.calculDifferenceResistance()}calculDifferenceResistance(){let e=this.getByActionId(80,!1),t=[82,83,85,84];e&&t.find(i=>this.getByActionId(i,!1))&&(t.forEach(i=>{let o=this.getByActionId(i,!1);o?(o.params[0]+=e.params[0],o.value+=e.params[0],o.presentOnCurrentItem=!0,o.presentOnEquippedItem=!0):o=q(z({},e),{actionId:i,presentOnCurrentItem:!0,presentOnEquippedItem:!0}),this.pushSetDifferentsStatsItem(o)}),this.listDifferentsStatsItem=this.listDifferentsStatsItem.filter(i=>i.actionId!==80))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-item-tooltip"]],inputs:{item:"item",indexItemChoosen:"indexItemChoosen"},features:[X],decls:17,vars:21,consts:[[1,"header"],[1,"content",3,"click"],[1,"column"],[1,"row"],[1,"title"],["alt","item",3,"src"],["alt","poids",3,"src"],["alt","Maitrises",3,"src"],["alt","Resistances",3,"src"],["appFallback","","alt","items",3,"src"],[3,"class"],["alt","aptitudes",3,"src"]],template:function(t,i){if(t&1&&(g(0,jt,9,14,"div",0),d(1,"async"),m(2,"div",1),v("click",function(){return i.setItem(i.item)}),m(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),E(7),p(),h(8,"img",5),p(),g(9,qt,2,0),d(10,"async"),p(),m(11,"span"),h(12,"img",6),E(13),d(14,"translate"),p()(),g(15,Xt,3,0,"div"),d(16,"async"),p()),t&2){let o,s;C(f(1,13,i.loaded$)?0:-1),r(6),$("color",i.colorRarityService.mapColors.get(i.item.rarity)),r(),M("",i.getTitle(i.item)," (",i.item.level,")"),r(),_("src",i.imageService.getItemUrl(i.item.idImage),u),r(),C((o=f(10,15,i.itemSelected$))?9:-1,o),r(2),L(i.getBackgroundDifferentsStatsOnValue(i.weight)+" poids"),r(),_("src","aptitudes/poids.png",u),r(),M("",f(14,17,"item.poids")," ",i.weight," "),r(2),C((s=f(16,19,i.differentStatsItemList$))?15:-1,s)}},dependencies:[G,J,tt,H,Z,B],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:fit-content;width:600px;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px;width:200px;display:flex;justify-content:space-around;align-items:center;margin:2px auto}[_nghost-%COMP%]   .green[_ngcontent-%COMP%]{background:linear-gradient(145deg,#4caf50,#00c896)}[_nghost-%COMP%]   .red[_ngcontent-%COMP%]{background:linear-gradient(145deg,#e63946,#ff6b35)}[_nghost-%COMP%]   .green[_ngcontent-%COMP%], [_nghost-%COMP%]   .red[_ngcontent-%COMP%]{color:#0d1b2a}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;cursor:pointer}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:50px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:space-around;cursor:pointer}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:30%;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2px 0;border-radius:20px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{align-items:center;display:flex}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px;margin:0 10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .iconComparator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;color:#415a77;background-color:#e5e9ea;border-radius:50%;cursor:pointer;border:5px solid #0D1B2A}@media screen and (max-width:700px){[_nghost-%COMP%]{width:300px;font-size:12px}}@media screen and (max-width:700px){  .cdk-overlay-pane{transform:none!important}}"]})};function Yt(n,e){if(n&1&&h(0,"app-item-tooltip",0),n&2){let t=a().$index,i=a();_("item",i.item)("indexItemChoosen",t)}}function Ht(n,e){if(n&1&&g(0,Yt,1,2,"app-item-tooltip",0),n&2){let t=e.$index,i=a();C(i.itemsChoosen[t]!==void 0?0:-1)}}var mt=class n{item;itemsChoosen=[];static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-items-tooltip"]],inputs:{item:"item",itemsChoosen:"itemsChoosen"},decls:2,vars:0,consts:[[3,"item","indexItemChoosen"]],template:function(t,i){t&1&&O(0,Ht,1,1,null,null,y),t&2&&T(i.itemsChoosen)},dependencies:[pt],encapsulation:2})};function Gt(n,e){if(n&1&&(dt(0,"div"),E(1),_t()),n&2){let t=a();r(),D(" ",t.definition()," ")}}var lt=class n{statesDefinitionService=c(at);translateService=c(N);statesDefinitionId=0;nameStates="";definition(){let e=this.statesDefinitionService.findStatesDefinition(this.statesDefinitionId);if(e)return e.description[this.translateService.currentLang]}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-states"]],inputs:{statesDefinitionId:"statesDefinitionId",nameStates:"nameStates"},decls:4,vars:2,consts:[[1,"header"]],template:function(t,i){t&1&&(dt(0,"div",0)(1,"span"),E(2),_t()(),g(3,Gt,2,1,"div")),t&2&&(r(2),vt(i.nameStates),r(),C(i.definition()?3:-1))},styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:10px;color:#fff;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:auto}"]})};var Kt=n=>({ratio:n}),Zt=(n,e)=>e.id;function Jt(n,e){n&1&&(m(0,"div",7),E(1),p()),n&2&&(r(),D(" [ ",e," ] "))}function te(n,e){if(n&1&&(h(0,"img",19),E(1),d(2,"actions"),d(3,"async")),n&2){let t=a().$implicit,i=a(2);_("src",i.getEffectPng(t),u),r(),D(" ",f(3,4,f(2,2,t))," ")}}function ee(n,e){if(n&1){let t=A();Mt(0),m(1,"span",20),v("mouseenter",function(o){S(t);let s=Ot(0),l=a(3);return x(l.openStatesTooltip(o,(s==null?null:s.id)??0,l.getStatesTranslate(s)))})("mouseleave",function(){S(t);let o=a(3);return x(o.stateTooltipService.closeTooltip())}),E(2),p()}if(n&2){let t=a().$implicit,i=a(2),o=Pt(i.statesService.findStates(t.params[0]));r(2),D(" ",i.getStatesTranslate(o)," ")}}function ie(n,e){if(n&1&&(m(0,"p"),g(1,te,4,6)(2,ee,3,2,"span",18),p()),n&2){let t=e.$implicit,i=a(2);r(),C(t.actionId!==i.IdActionEnum.APPLIQUE_ETAT?1:2)}}function ne(n,e){if(n&1){let t=A();m(0,"img",21),d(1,"translate"),v("click",function(){S(t);let o=a(2);return x(o.navigateToCraftku())}),p()}if(n&2){let t=a(2);_("src",t.imageService.getItemUrl(71919810),u)("matTooltip",f(1,2,"item.craftable"))}}function oe(n,e){if(n&1){let t=A();m(0,"img",23),d(1,"translate"),v("click",function(){let o=S(t).$implicit,s=a(3);return x(s.openEncyclopedieForMonster(o.idMob))}),p()}if(n&2){let t=e.$implicit,i=a(3);_("src",i.imageService.getMonsterUrl(t.gfxId),u)("matTooltip",`${f(1,2,"item.droppable")} (${i.nameMonster(t)})`)}}function re(n,e){if(n&1&&O(0,oe,2,4,"img",22,y),n&2){let t=a(2);T(t.item.mobDropable)}}function ae(n,e){if(n&1){let t=A();m(0,"img",25),d(1,"translate"),v("click",function(){let o=S(t).$implicit,s=a(3);return x(s.openEncyclopedieForMonster(o.idMob))}),p()}if(n&2){let t=e.$implicit,i=a(3);_("src",i.imageService.getMonsterUrl(t.gfxId),u)("matTooltip",`${f(1,2,"item.boss-drop")} (${i.nameMonster(t)})`)}}function se(n,e){if(n&1&&O(0,ae,2,4,"img",24,y),n&2){let t=a(2);T(t.item.bossDropable)}}function ce(n,e){if(n&1){let t=A();m(0,"img",27),d(1,"translate"),v("click",function(){let o=S(t).$implicit,s=a(3);return x(s.openEncyclopedieForMonster(o.idMob))}),p()}if(n&2){let t=e.$implicit,i=a(3);_("src",i.imageService.getMonsterUrl(t.gfxId),u)("matTooltip",`${f(1,2,"item.archi-drop")} (${i.nameMonster(t)})`)}}function pe(n,e){if(n&1&&O(0,ce,2,4,"img",26,y),n&2){let t=a(2);T(t.item.archiDropable)}}function me(n,e){if(n&1&&(h(0,"img",17),d(1,"translate")),n&2){let t=a(2);_("src",t.imageService.getItemUrl(53124705),u)("matTooltip",f(1,2,"item.pvp"))}}function le(n,e){if(n&1){let t=A();m(0,"div",0)(1,"span",1),d(2,"translate"),v("click",function(){S(t);let o=a();return x(o.copyToClipboard())}),h(3,"mat-icon",2),p(),m(4,"span"),h(5,"img",3),E(6),d(7,"translate"),p(),m(8,"span"),h(9,"img",4),E(10),d(11,"translate"),p(),m(12,"span",5),v("click",function(){S(t);let o=a();return x(o.openEncyclopedie(o.item.id))}),h(13,"img",6),p()(),g(14,Jt,2,1,"div",7),d(15,"async"),m(16,"div",8),v("click",function(){S(t);let o=a();return x(o.setItemChoosen())}),m(17,"div",9)(18,"h3"),E(19),h(20,"img",10),p(),h(21,"img",11),m(22,"div",12),d(23,"translate"),h(24,"img",13),E(25),d(26,"translate"),p()(),m(27,"div",14)(28,"div"),O(29,ie,3,1,"p",null,Zt),p(),m(31,"div",15),g(32,ne,2,4,"img",16),g(33,re,2,0),g(34,se,2,0),g(35,pe,2,0),g(36,me,2,4,"img",17),p()()()}if(n&2){let t,i=a();r(),_("matTooltip",f(2,24,"item.copier")),r(4),_("src",i.imageService.getActionIdUrl(i.IdActionEnum.MAITRISES_ELEMENTAIRES),u),r(),M("",f(7,26,"item.maitrises")," ",i.Math.trunc(i.item.maitrise)),r(3),_("src",i.imageService.getActionIdUrl(i.IdActionEnum.RESISTANCES_ELEMENTAIRE),u),r(),M("",f(11,28,"item.resistances")," ",i.item.resistance),r(4),C((t=f(15,30,i.textCondition()))?14:-1,t),r(4),$("color",i.colorRarityService.mapColors.get(i.item.rarity)),r(),M("",i.getTitle()," (",i.item.level,") "),r(),_("src",i.itemTypeService.getLogo(i.itemTypeService.getItemType(i.item.itemTypeId)),u),r(),_("src",i.imageService.getItemUrl(i.item.idImage),u),r(),_("matTooltip",yt(23,32,"item.poids-infobulle",Tt(37,Kt,i.itemService.ratioWeightByLevel(i.item.level))))("matTooltipShowDelay",300),r(2),_("src","aptitudes/poids.png",u),r(),M("",f(26,35,"item.poids")," ",i.item.weight),r(4),T(i.item.equipEffects),r(3),C(i.item.isCraftable?32:-1),r(),C(i.item.mobDropable?33:-1),r(),C(i.item.bossDropable?34:-1),r(),C(i.item.archiDropable?35:-1),r(),C(i.item.isPvP?36:-1)}}function de(n,e){if(n&1){let t=A();m(0,"mat-icon",29),v("mouseenter",function(o){S(t);let s=a(2);return x(s.openTooltip(o,s.item))})("mouseleave",function(){S(t);let o=a(2);return x(o.tooltipService.closeTooltip())}),p()}}function _e(n,e){if(n&1&&g(0,de,1,0,"mat-icon",28),n&2){let t=a();C(t.itemIsPresentAndNotChoosen(e)?0:-1)}}var Ft=class n extends F{viewContainerRef=c(St);el=c(Et);itemService=c(ot);colorRarityService=c(nt);tooltipService=c(ft);stateTooltipService=c(ft);cdr=c(Y);itemConditionService=c(rt);item;condition=new k(void 0);condition$=this.condition.asObservable();constructor(){super()}navigateToCraftku(){window.open("https://craftkfu.waklab.fr/?"+this.item.id,"_blank")}setItemChoosen(){let e=this.itemTypeService.getItemType(this.item.itemTypeId);e&&this.itemChooseService.setItem(e,this.item)}itemIsPresentAndNotChoosen(e){return!!e.find(t=>t.find(i=>i!==void 0)&&!t.find(i=>i?.id===this.item.id))}ngAfterViewInit(){if(this.item){this.item.equipEffects=this.item.equipEffects.sort((t,i)=>(this.mapSortAction.get(t.actionId)??999)-(this.mapSortAction.get(i.actionId)??999)),this.initItemChoosen(this.item);let e=this.itemConditionService.findCondition(this.item.id);e&&this.condition.next(e),this.cdr.detectChanges()}}textCondition(){return this.condition$.pipe(I(e=>e?.description[this.translateService.currentLang]??void 0))}nameMonster(e){return e.name[this.translateService.currentLang]??""}openTooltip(e,t){let i=e.pageX>window.screen.width/2;this.tooltipService.closeTooltip(),this.itemChoosen$.pipe(ht(1),I(o=>o.find(s=>s.find(l=>l)))).subscribe(o=>{this.tooltipService.openTooltip(this.viewContainerRef,mt,e,{item:t,itemsChoosen:o},[{originX:i?"end":"center",originY:"bottom",overlayX:i?"end":"center",overlayY:"bottom",offsetY:0,offsetX:i?-this.el.nativeElement.offsetWidth:340}],!1)})}openEncyclopedie(e){window.open("https://www.wakfu.com/fr/mmorpg/encyclopedie/armures/"+e)}openEncyclopedieForMonster(e){window.open("https://www.wakfu.com/fr/mmorpg/encyclopedie/monstres/"+e)}copyToClipboard(){navigator.clipboard.writeText(this.item.title[this.translateService.currentLang])}getStatesTranslate(e){if(!e)return"";let t=this.translateService.currentLang;return e[t].toString()??""}getTitle(){return this.item.title[this.translateService.currentLang]}openStatesTooltip(e,t,i){this.stateTooltipService.closeTooltip(),this.stateTooltipService.openTooltip(this.viewContainerRef,lt,e,{statesDefinitionId:t,nameStates:i},[{originX:"center",originY:"top",overlayX:"center",overlayY:"top",offsetY:20,offsetX:0}])}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=P({type:n,selectors:[["app-item"]],inputs:{item:"item"},features:[X],decls:3,vars:4,consts:[[1,"header"],[1,"imgContainer","fileCopy",3,"click","matTooltip"],["fontIcon","file_copy"],["alt","Maitrises",3,"src"],["alt","R\xE9sistances",3,"src"],[1,"imgContainer",3,"click"],["src","aptitudes/Encyclop\xE9die.png","alt","Encyclop\xE9die"],[1,"condition"],[1,"content",3,"click"],[1,"title"],["alt","item type logo",3,"src"],["alt","items","appFallback","",3,"src"],[1,"poids",3,"matTooltip","matTooltipShowDelay"],["alt","poids",3,"src"],[1,"effects"],[1,"craftAndDrop"],["alt","craftable",1,"craftable",3,"src","matTooltip"],["alt","pvp",3,"src","matTooltip"],[1,"appliqueEtat"],["alt","aptitudes",3,"src"],[1,"appliqueEtat",3,"mouseenter","mouseleave"],["alt","craftable",1,"craftable",3,"click","src","matTooltip"],["alt","droppable","appFallback","",1,"monster",3,"src","matTooltip"],["alt","droppable","appFallback","",1,"monster",3,"click","src","matTooltip"],["alt","boss drop","appFallback","",1,"monster",3,"src","matTooltip"],["alt","boss drop","appFallback","",1,"monster",3,"click","src","matTooltip"],["alt","archi drop","appFallback","",1,"monster",3,"src","matTooltip"],["alt","archi drop","appFallback","",1,"monster",3,"click","src","matTooltip"],["fontIcon","swap_horiz",1,"iconComparator"],["fontIcon","swap_horiz",1,"iconComparator",3,"mouseenter","mouseleave"]],template:function(t,i){if(t&1&&(g(0,le,37,39),g(1,_e,1,1),d(2,"async")),t&2){let o;C(i.item?0:-1),r(),C((o=f(2,2,i.itemChoosen$))?1:-1,o)}},dependencies:[G,Rt,bt,J,Dt,At,tt,kt,H,Z,B],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 5px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:40px;height:40px;cursor:pointer;align-content:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .condition[_ngcontent-%COMP%]{text-align:center;color:red;font-weight:bolder;margin-bottom:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:space-around;cursor:pointer}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:30%;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;min-width:30px;min-height:30px;vertical-align:middle}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:80px;height:80px;min-width:80px;min-height:80px;margin:auto;object-fit:contain;border-radius:8px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{align-items:center;display:flex}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px;min-width:22px;min-height:22px;margin:0 10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0;border-radius:20px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;width:24px;height:24px;min-width:24px;min-height:24px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .appliqueEtat[_ngcontent-%COMP%]{font-weight:500;text-decoration:underline}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   app-maitrise-selector[_ngcontent-%COMP%]{margin:10px 0}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-around}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;min-width:80px;min-height:80px;object-fit:contain;flex:0 0 calc(33% - 10px);max-width:calc(33% - 10px)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .craftable[_ngcontent-%COMP%]{filter:drop-shadow(0px 0px 5px gold)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .monster[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .craftable[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .iconComparator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;color:#415a77;background-color:#e5e9ea;border-radius:50%;cursor:pointer;border:5px solid #0D1B2A}@media screen and (max-width:900px){[_nghost-%COMP%]{max-width:90%;margin:auto}[_nghost-%COMP%]   .fileCopy[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px!important;height:40px!important;min-width:40px!important;min-height:40px!important}[_nghost-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-of-type(n+4){display:none!important}}"]})};export{rt as a,at as b,Ft as c,Bt as d};
