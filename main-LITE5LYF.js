import{a as pu,b as wu,c as Ue,d as Su,e as Tu}from"./chunk-7YMM5IMZ.js";import{a as En,b as du,c as Ya,d as Er,f as Cu,g as ku,h as Iu,i as Ru,j as Ou,k as In}from"./chunk-P4US7PVJ.js";import{a as Hl,b as Vl,c as $l,d as Ql,f as Yl,g as Xl,h as vr,i as xr,k as Du}from"./chunk-VZ4X3MK3.js";import{a as Ft,b as Lu,c as Xa,d as pt,e as Fu,f as Bu,g as Ye,h as Tr,i as Cr}from"./chunk-QKMTUYPG.js";import{a as Oa,b as Da,c as Ka}from"./chunk-XJDAVHRD.js";import{b as Ks,c as Nu,d as Pu,e as wr,f as Lt,g as Sr}from"./chunk-2VMRVAPJ.js";import{A as yu,B as Eu,C as yr,E as Qa,F as Nt,G as Au,H as Mu,a as Jl,d as wa,j as uu,k as mu,l as Cn,m as kn,n as La,o as Fa,p as Ba,q as _u,r as Ua,s as ja,t as qa,u as Ha,v as Va,w as $a,x as za,y as Ga,z as Wa}from"./chunk-MLWSRCBW.js";import{$ as lt,$a as Ie,$b as Al,$c as br,$d as Be,A as Ps,Ab as jr,B as ee,Bb as va,Bc as Nl,Bd as Ca,C as sl,Cb as fe,Cc as Pl,Cd as xn,Db as dr,Dd as ka,E as cl,Eb as A,Ed as Ia,F as ar,Fb as Il,Fc as Ll,Fd as Aa,G as Ls,Gb as q,Gc as Fl,Hb as Ae,Hc as pi,Hd as Gs,Ib as ge,Ic as Bl,Id as Ws,Jb as pr,Jc as Ul,Jd as _n,K as Je,Kb as ut,Kd as su,L as Y,La as J,Lb as ue,Lc as fn,Ld as Re,M as ct,Ma as gl,Mb as de,Mc as hr,Md as Ma,N as le,Na as p,Nd as Ra,O as he,Ob as xa,Oc as jl,Od as cu,P as ma,Pb as _a,Pd as yn,Q as pn,Qb as Mt,Qc as fr,Qd as W,R as Q,Ra as li,Rb as Rt,Rc as zs,Rd as $,S as ke,Sa as fa,Sb as re,Sc as ql,Sd as lu,T as ll,Ta as bl,Tb as et,Tc as zl,Td as zr,U as G,Ua as Gt,Ub as C,Uc as Gl,Ud as me,V as We,Va as vl,Vb as M,Vc as gn,Vd as wn,W as d,Wa as xl,Wb as mr,Wc as Wl,X as zt,Xa as At,Xb as hn,Xc as Kl,Xd as dt,Y as ul,Ya as _l,Yd as hu,Za as ga,Zc as gr,Zd as fu,_ as or,_a as I,_c as rt,_d as gu,a as It,aa as B,ab as Ve,ac as Ml,ad as Fe,ae as Sn,b as rl,ba as U,bc as Rl,bd as Ot,c as Vt,ca as mn,cb as ui,cc as Ol,cd as Zl,ce as bu,d as ce,da as dl,db as yl,dc as tt,de as Na,e as Ge,ea as Ne,eb as ba,f as $t,fa as sr,fb as js,fc as y,fd as eu,fe as Tn,g as Lr,ga as pl,gb as El,gc as E,ge as vu,h as nl,ha as ml,hb as wl,hd as Ke,he as Qe,i as He,ia as te,ib as Sl,id as Sa,ie as xu,j as P,ja as Ze,jb as Tl,jc as Hs,je as _r,k as ua,kb as qs,kd as tu,ke as Dt,l as Ns,la as Fs,lb as Cl,lc as qr,ld as bn,le as ne,m as il,ma as Le,mb as lr,mc as di,n as V,na as ha,nb as ie,nc as $e,nd as ru,ne as Pa,o as da,oa as Ur,ob as oe,oc as ya,od as nu,oe as Pt,p as rr,pa as cr,pb as kl,pd as Vr,pe as fi,q as al,qa as Bs,qb as se,qc as Ea,qd as iu,r as nr,ra as Ee,rc as Dl,re as Kt,s as Fr,sa as hl,sb as Wt,sc as Me,sd as au,t as pa,tb as xt,td as nt,ua as Us,ub as _t,ud as Ta,v as st,vb as h,vd as ou,w as ir,wa as ci,wb as b,wc as H,wd as mi,x as xe,xb as v,xc as Hr,xd as $r,y as Br,ya as fl,yb as x,yc as Vs,yd as hi,z as ol,zb as ur,zc as $s,zd as vn}from"./chunk-Z22PM5XB.js";import{a as N,b as Ce,e as qe,f as u}from"./chunk-25N2FLV6.js";var Uu=new G("Server.RENDER_MODULE_HOOK");var _m=(()=>{class n{xhrImpl;\u0275loadImpl(){return u(this,null,function*(){if(!this.xhrImpl){let{default:e}=yield import("./chunk-A3OPLJKS.js");this.xhrImpl=e}})}build(){let e=this.xhrImpl;if(!e)throw new Error("Unexpected state in ServerXhr: XHR implementation is not loaded.");return new e.XMLHttpRequest}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();function ym(n,r){let e=d(Ll),{href:t,protocol:i,hostname:a,port:o}=e;if(!i.startsWith("http"))return r(n);let s=`${i}//${a}`;o&&(s+=`:${o}`);let c=e.getBaseHrefFromDOM()||t,l=new URL(c,s),m=new URL(n.url,l).toString();return r(n.clone({url:m}))}var Em=[{provide:jl,useClass:_m},{provide:Gl,useValue:ym,multi:!0}];var wm=(()=>{class n extends Hl{doc;constructor(e){super(e),this.doc=e}supports(e){return!0}addEventListener(e,t,i,a){return Pl().onAndCancel(e,t,i,a)}static \u0275fac=function(t){return new(t||n)(We(sr))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var Sm=[{provide:Uu,useFactory:Tm,multi:!0}];function ju(n,r,e){let t=n.createElement("script");return t.textContent=r,e&&t.setAttribute("nonce",e),t}function Tm(){let n=d(sr),r=d(Us),e=d(fl),t=d(Ne);return()=>{let i="serializeTransferStateFactory";Vs(i);let a=e.toJson();if(e.isEmpty)return;let o=ju(n,a,null);o.id=r+"-state",o.setAttribute("type","application/json"),n.body.appendChild(o),$s(i)}}var Cm=[{provide:Vl,multi:!0,useClass:wm}],qu=[Sm,Cm,Em,{provide:Sl,useValue:null},{provide:wl,useValue:null},{provide:zs,useClass:ql}];function Hu(){return zt([...qu])}var z="primary",Ii=Symbol("RouteTitle"),Zs=class{params;constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){let e=this.params[r];return Array.isArray(e)?e[0]:e}return null}getAll(r){if(this.has(r)){let e=this.params[r];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Qr(n){return new Zs(n)}function Xu(n,r,e){let t=e.path.split("/");if(t.length>n.length||e.pathMatch==="full"&&(r.hasChildren()||t.length<n.length))return null;let i={};for(let a=0;a<t.length;a++){let o=t[a],s=n[a];if(o[0]===":")i[o.substring(1)]=s;else if(o!==s.path)return null}return{consumed:n.slice(0,t.length),posParams:i}}function no(n){return new Promise((r,e)=>{n.pipe(ar()).subscribe({next:t=>r(t),error:t=>e(t)})})}function Am(n,r){if(n.length!==r.length)return!1;for(let e=0;e<n.length;++e)if(!Bt(n[e],r[e]))return!1;return!0}function Bt(n,r){let e=n?ec(n):void 0,t=r?ec(r):void 0;if(!e||!t||e.length!=t.length)return!1;let i;for(let a=0;a<e.length;a++)if(i=e[a],!Ju(n[i],r[i]))return!1;return!0}function ec(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Ju(n,r){if(Array.isArray(n)&&Array.isArray(r)){if(n.length!==r.length)return!1;let e=[...n].sort(),t=[...r].sort();return e.every((i,a)=>t[a]===i)}else return n===r}function Zu(n){return n.length>0?n[n.length-1]:null}function Xr(n){return Ns(n)?n:Tl(n)?He(Promise.resolve(n)):P(n)}function ed(n){return Ns(n)?no(n):Promise.resolve(n)}var Mm={exact:rd,subset:nd},td={exact:Rm,subset:Om,ignored:()=>!0};function Vu(n,r,e){return Mm[e.paths](n.root,r.root,e.matrixParams)&&td[e.queryParams](n.queryParams,r.queryParams)&&!(e.fragment==="exact"&&n.fragment!==r.fragment)}function Rm(n,r){return Bt(n,r)}function rd(n,r,e){if(!Wr(n.segments,r.segments)||!eo(n.segments,r.segments,e)||n.numberOfChildren!==r.numberOfChildren)return!1;for(let t in r.children)if(!n.children[t]||!rd(n.children[t],r.children[t],e))return!1;return!0}function Om(n,r){return Object.keys(r).length<=Object.keys(n).length&&Object.keys(r).every(e=>Ju(n[e],r[e]))}function nd(n,r,e){return id(n,r,r.segments,e)}function id(n,r,e,t){if(n.segments.length>e.length){let i=n.segments.slice(0,e.length);return!(!Wr(i,e)||r.hasChildren()||!eo(i,e,t))}else if(n.segments.length===e.length){if(!Wr(n.segments,e)||!eo(n.segments,e,t))return!1;for(let i in r.children)if(!n.children[i]||!nd(n.children[i],r.children[i],t))return!1;return!0}else{let i=e.slice(0,n.segments.length),a=e.slice(n.segments.length);return!Wr(n.segments,i)||!eo(n.segments,i,t)||!n.children[z]?!1:id(n.children[z],r,a,t)}}function eo(n,r,e){return r.every((t,i)=>td[e](n[i].parameters,t.parameters))}var Et=class{root;queryParams;fragment;_queryParamMap;constructor(r=new Z([],{}),e={},t=null){this.root=r,this.queryParams=e,this.fragment=t}get queryParamMap(){return this._queryParamMap??=Qr(this.queryParams),this._queryParamMap}toString(){return Pm.serialize(this)}},Z=class{segments;children;parent=null;constructor(r,e){this.segments=r,this.children=e,Object.values(e).forEach(t=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return to(this)}},kr=class{path;parameters;_parameterMap;constructor(r,e){this.path=r,this.parameters=e}get parameterMap(){return this._parameterMap??=Qr(this.parameters),this._parameterMap}toString(){return od(this)}};function Dm(n,r){return Wr(n,r)&&n.every((e,t)=>Bt(e.parameters,r[t].parameters))}function Wr(n,r){return n.length!==r.length?!1:n.every((e,t)=>e.path===r[t].path)}function Nm(n,r){let e=[];return Object.entries(n.children).forEach(([t,i])=>{t===z&&(e=e.concat(r(i,t)))}),Object.entries(n.children).forEach(([t,i])=>{t!==z&&(e=e.concat(r(i,t)))}),e}var Ai=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:()=>new Ir,providedIn:"root"})}return n})(),Ir=class{parse(r){let e=new rc(r);return new Et(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(r){let e=`/${gi(r.root,!0)}`,t=Bm(r.queryParams),i=typeof r.fragment=="string"?`#${Lm(r.fragment)}`:"";return`${e}${t}${i}`}},Pm=new Ir;function to(n){return n.segments.map(r=>od(r)).join("/")}function gi(n,r){if(!n.hasChildren())return to(n);if(r){let e=n.children[z]?gi(n.children[z],!1):"",t=[];return Object.entries(n.children).forEach(([i,a])=>{i!==z&&t.push(`${i}:${gi(a,!1)}`)}),t.length>0?`${e}(${t.join("//")})`:e}else{let e=Nm(n,(t,i)=>i===z?[gi(n.children[z],!1)]:[`${i}:${gi(t,!1)}`]);return Object.keys(n.children).length===1&&n.children[z]!=null?`${to(n)}/${e[0]}`:`${to(n)}/(${e.join("//")})`}}function ad(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ja(n){return ad(n).replace(/%3B/gi,";")}function Lm(n){return encodeURI(n)}function tc(n){return ad(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ro(n){return decodeURIComponent(n)}function $u(n){return ro(n.replace(/\+/g,"%20"))}function od(n){return`${tc(n.path)}${Fm(n.parameters)}`}function Fm(n){return Object.entries(n).map(([r,e])=>`;${tc(r)}=${tc(e)}`).join("")}function Bm(n){let r=Object.entries(n).map(([e,t])=>Array.isArray(t)?t.map(i=>`${Ja(e)}=${Ja(i)}`).join("&"):`${Ja(e)}=${Ja(t)}`).filter(e=>e);return r.length?`?${r.join("&")}`:""}var Um=/^[^\/()?;#]+/;function Qs(n){let r=n.match(Um);return r?r[0]:""}var jm=/^[^\/()?;=#]+/;function qm(n){let r=n.match(jm);return r?r[0]:""}var Hm=/^[^=?&#]+/;function Vm(n){let r=n.match(Hm);return r?r[0]:""}var $m=/^[^&#]+/;function zm(n){let r=n.match($m);return r?r[0]:""}var rc=class{url;remaining;constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new Z([],{}):new Z([],this.parseChildren())}parseQueryParams(){let r={};if(this.consumeOptional("?"))do this.parseQueryParam(r);while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let t={};return this.peekStartsWith("(")&&(t=this.parseParens(!1)),(r.length>0||Object.keys(e).length>0)&&(t[z]=new Z(r,e)),t}parseSegment(){let r=Qs(this.remaining);if(r===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(r),new kr(ro(r),this.parseMatrixParams())}parseMatrixParams(){let r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){let e=qm(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let i=Qs(this.remaining);i&&(t=i,this.capture(t))}r[ro(e)]=ro(t)}parseQueryParam(r){let e=Vm(this.remaining);if(!e)return;this.capture(e);let t="";if(this.consumeOptional("=")){let o=zm(this.remaining);o&&(t=o,this.capture(t))}let i=$u(e),a=$u(t);if(r.hasOwnProperty(i)){let o=r[i];Array.isArray(o)||(o=[o],r[i]=o),o.push(a)}else r[i]=a}parseParens(r){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let t=Qs(this.remaining),i=this.remaining[t.length];if(i!=="/"&&i!==")"&&i!==";")throw new he(4010,!1);let a;t.indexOf(":")>-1?(a=t.slice(0,t.indexOf(":")),this.capture(a),this.capture(":")):r&&(a=z);let o=this.parseChildren();e[a??z]=Object.keys(o).length===1&&o[z]?o[z]:new Z([],o),this.consumeOptional("//")}return e}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return this.peekStartsWith(r)?(this.remaining=this.remaining.substring(r.length),!0):!1}capture(r){if(!this.consumeOptional(r))throw new he(4011,!1)}};function sd(n){return n.segments.length>0?new Z([],{[z]:n}):n}function cd(n){let r={};for(let[t,i]of Object.entries(n.children)){let a=cd(i);if(t===z&&a.segments.length===0&&a.hasChildren())for(let[o,s]of Object.entries(a.children))r[o]=s;else(a.segments.length>0||a.hasChildren())&&(r[t]=a)}let e=new Z(n.segments,r);return Gm(e)}function Gm(n){if(n.numberOfChildren===1&&n.children[z]){let r=n.children[z];return new Z(n.segments.concat(r.segments),r.children)}return n}function On(n){return n instanceof Et}function ld(n,r,e=null,t=null,i=new Ir){let a=ud(n);return dd(a,r,e,t,i)}function ud(n){let r;function e(a){let o={};for(let c of a.children){let l=e(c);o[c.outlet]=l}let s=new Z(a.url,o);return a===n&&(r=s),s}let t=e(n.root),i=sd(t);return r??i}function dd(n,r,e,t,i){let a=n;for(;a.parent;)a=a.parent;if(r.length===0)return Ys(a,a,a,e,t,i);let o=Wm(r);if(o.toRoot())return Ys(a,a,new Z([],{}),e,t,i);let s=Km(o,a,n),c=s.processChildren?vi(s.segmentGroup,s.index,o.commands):md(s.segmentGroup,s.index,o.commands);return Ys(a,s.segmentGroup,c,e,t,i)}function io(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function yi(n){return typeof n=="object"&&n!=null&&n.outlets}function zu(n,r,e){n||="\u0275";let t=new Et;return t.queryParams={[n]:r},e.parse(e.serialize(t)).queryParams[n]}function Ys(n,r,e,t,i,a){let o={};for(let[l,m]of Object.entries(t??{}))o[l]=Array.isArray(m)?m.map(g=>zu(l,g,a)):zu(l,m,a);let s;n===r?s=e:s=pd(n,r,e);let c=sd(cd(s));return new Et(c,o,i)}function pd(n,r,e){let t={};return Object.entries(n.children).forEach(([i,a])=>{a===r?t[i]=e:t[i]=pd(a,r,e)}),new Z(n.segments,t)}var ao=class{isAbsolute;numberOfDoubleDots;commands;constructor(r,e,t){if(this.isAbsolute=r,this.numberOfDoubleDots=e,this.commands=t,r&&t.length>0&&io(t[0]))throw new he(4003,!1);let i=t.find(yi);if(i&&i!==Zu(t))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Wm(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new ao(!0,0,n);let r=0,e=!1,t=n.reduce((i,a,o)=>{if(typeof a=="object"&&a!=null){if(a.outlets){let s={};return Object.entries(a.outlets).forEach(([c,l])=>{s[c]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:s}]}if(a.segmentPath)return[...i,a.segmentPath]}return typeof a!="string"?[...i,a]:o===0?(a.split("/").forEach((s,c)=>{c==0&&s==="."||(c==0&&s===""?e=!0:s===".."?r++:s!=""&&i.push(s))}),i):[...i,a]},[]);return new ao(e,r,t)}var Mn=class{segmentGroup;processChildren;index;constructor(r,e,t){this.segmentGroup=r,this.processChildren=e,this.index=t}};function Km(n,r,e){if(n.isAbsolute)return new Mn(r,!0,0);if(!e)return new Mn(r,!1,NaN);if(e.parent===null)return new Mn(e,!0,0);let t=io(n.commands[0])?0:1,i=e.segments.length-1+t;return Qm(e,i,n.numberOfDoubleDots)}function Qm(n,r,e){let t=n,i=r,a=e;for(;a>i;){if(a-=i,t=t.parent,!t)throw new he(4005,!1);i=t.segments.length}return new Mn(t,!1,i-a)}function Ym(n){return yi(n[0])?n[0].outlets:{[z]:n}}function md(n,r,e){if(n??=new Z([],{}),n.segments.length===0&&n.hasChildren())return vi(n,r,e);let t=Xm(n,r,e),i=e.slice(t.commandIndex);if(t.match&&t.pathIndex<n.segments.length){let a=new Z(n.segments.slice(0,t.pathIndex),{});return a.children[z]=new Z(n.segments.slice(t.pathIndex),n.children),vi(a,0,i)}else return t.match&&i.length===0?new Z(n.segments,{}):t.match&&!n.hasChildren()?nc(n,r,e):t.match?vi(n,0,i):nc(n,r,e)}function vi(n,r,e){if(e.length===0)return new Z(n.segments,{});{let t=Ym(e),i={};if(Object.keys(t).some(a=>a!==z)&&n.children[z]&&n.numberOfChildren===1&&n.children[z].segments.length===0){let a=vi(n.children[z],r,e);return new Z(n.segments,a.children)}return Object.entries(t).forEach(([a,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[a]=md(n.children[a],r,o))}),Object.entries(n.children).forEach(([a,o])=>{t[a]===void 0&&(i[a]=o)}),new Z(n.segments,i)}}function Xm(n,r,e){let t=0,i=r,a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(t>=e.length)return a;let o=n.segments[i],s=e[t];if(yi(s))break;let c=`${s}`,l=t<e.length-1?e[t+1]:null;if(i>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Wu(c,l,o))return a;t+=2}else{if(!Wu(c,{},o))return a;t++}i++}return{match:!0,pathIndex:i,commandIndex:t}}function nc(n,r,e){let t=n.segments.slice(0,r),i=0;for(;i<e.length;){let a=e[i];if(yi(a)){let c=Jm(a.outlets);return new Z(t,c)}if(i===0&&io(e[0])){let c=n.segments[r];t.push(new kr(c.path,Gu(e[0]))),i++;continue}let o=yi(a)?a.outlets[z]:`${a}`,s=i<e.length-1?e[i+1]:null;o&&s&&io(s)?(t.push(new kr(o,Gu(s))),i+=2):(t.push(new kr(o,{})),i++)}return new Z(t,{})}function Jm(n){let r={};return Object.entries(n).forEach(([e,t])=>{typeof t=="string"&&(t=[t]),t!==null&&(r[e]=nc(new Z([],{}),0,t))}),r}function Gu(n){let r={};return Object.entries(n).forEach(([e,t])=>r[e]=`${t}`),r}function Wu(n,r,e){return n==e.path&&Bt(r,e.parameters)}var xi="imperative",Oe=(function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n})(Oe||{}),at=class{id;url;constructor(r,e){this.id=r,this.url=e}},Yr=class extends at{type=Oe.NavigationStart;navigationTrigger;restoredState;constructor(r,e,t="imperative",i=null){super(r,e),this.navigationTrigger=t,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},wt=class extends at{urlAfterRedirects;type=Oe.NavigationEnd;constructor(r,e,t){super(r,e),this.urlAfterRedirects=t}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ze=(function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n[n.Aborted=4]="Aborted",n})(ze||{}),Ei=(function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n})(Ei||{}),Ut=class extends at{reason;code;type=Oe.NavigationCancel;constructor(r,e,t,i){super(r,e),this.reason=t,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Qt=class extends at{reason;code;type=Oe.NavigationSkipped;constructor(r,e,t,i){super(r,e),this.reason=t,this.code=i}},Dn=class extends at{error;target;type=Oe.NavigationError;constructor(r,e,t,i){super(r,e),this.error=t,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},wi=class extends at{urlAfterRedirects;state;type=Oe.RoutesRecognized;constructor(r,e,t,i){super(r,e),this.urlAfterRedirects=t,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oo=class extends at{urlAfterRedirects;state;type=Oe.GuardsCheckStart;constructor(r,e,t,i){super(r,e),this.urlAfterRedirects=t,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},so=class extends at{urlAfterRedirects;state;shouldActivate;type=Oe.GuardsCheckEnd;constructor(r,e,t,i,a){super(r,e),this.urlAfterRedirects=t,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},co=class extends at{urlAfterRedirects;state;type=Oe.ResolveStart;constructor(r,e,t,i){super(r,e),this.urlAfterRedirects=t,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},lo=class extends at{urlAfterRedirects;state;type=Oe.ResolveEnd;constructor(r,e,t,i){super(r,e),this.urlAfterRedirects=t,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},uo=class{route;type=Oe.RouteConfigLoadStart;constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},po=class{route;type=Oe.RouteConfigLoadEnd;constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},mo=class{snapshot;type=Oe.ChildActivationStart;constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ho=class{snapshot;type=Oe.ChildActivationEnd;constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fo=class{snapshot;type=Oe.ActivationStart;constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},go=class{snapshot;type=Oe.ActivationEnd;constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Si=class{},Nn=class{url;navigationBehaviorOptions;constructor(r,e){this.url=r,this.navigationBehaviorOptions=e}};function Zm(n){return!(n instanceof Si)&&!(n instanceof Nn)}function eh(n,r){return n.providers&&!n._injector&&(n._injector=ga(n.providers,r,`Route: ${n.path}`)),n._injector??r}function yt(n){return n.outlet||z}function th(n,r){let e=n.filter(t=>yt(t)===r);return e.push(...n.filter(t=>yt(t)!==r)),e}function Fn(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let r=n.parent;r;r=r.parent){let e=r.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var bo=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Fn(this.route?.snapshot)??this.rootInjector}constructor(r){this.rootInjector=r,this.children=new Bn(this.rootInjector)}},Bn=(()=>{class n{rootInjector;contexts=new Map;constructor(e){this.rootInjector=e}onChildOutletCreated(e,t){let i=this.getOrCreateContext(e);i.outlet=t,this.contexts.set(e,i)}onChildOutletDestroyed(e){let t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new bo(this.rootInjector),this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}static \u0275fac=function(t){return new(t||n)(We(or))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),vo=class{_root;constructor(r){this._root=r}get root(){return this._root.value}parent(r){let e=this.pathFromRoot(r);return e.length>1?e[e.length-2]:null}children(r){let e=ic(r,this._root);return e?e.children.map(t=>t.value):[]}firstChild(r){let e=ic(r,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(r){let e=ac(r,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==r)}pathFromRoot(r){return ac(r,this._root).map(e=>e.value)}};function ic(n,r){if(n===r.value)return r;for(let e of r.children){let t=ic(n,e);if(t)return t}return null}function ac(n,r){if(n===r.value)return[r];for(let e of r.children){let t=ac(n,e);if(t.length)return t.unshift(r),t}return[]}var it=class{value;children;constructor(r,e){this.value=r,this.children=e}toString(){return`TreeNode(${this.value})`}};function An(n){let r={};return n&&n.children.forEach(e=>r[e.value.outlet]=e),r}var Ti=class extends vo{snapshot;constructor(r,e){super(r),this.snapshot=e,dc(this,r)}toString(){return this.snapshot.toString()}};function hd(n){let r=rh(n),e=new Ge([new kr("",{})]),t=new Ge({}),i=new Ge({}),a=new Ge({}),o=new Ge(""),s=new Ar(e,t,a,o,i,z,n,r.root);return s.snapshot=r.root,new Ti(new it(s,[]),r)}function rh(n){let r={},e={},t={},a=new Kr([],r,t,"",e,z,n,null,{});return new Ci("",new it(a,[]))}var Ar=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(r,e,t,i,a,o,s,c){this.urlSubject=r,this.paramsSubject=e,this.queryParamsSubject=t,this.fragmentSubject=i,this.dataSubject=a,this.outlet=o,this.component=s,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(V(l=>l[Ii]))??P(void 0),this.url=r,this.params=e,this.queryParams=t,this.fragment=i,this.data=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(V(r=>Qr(r))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(V(r=>Qr(r))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function xo(n,r,e="emptyOnly"){let t,{routeConfig:i}=n;return r!==null&&(e==="always"||i?.path===""||!r.component&&!r.routeConfig?.loadComponent)?t={params:N(N({},r.params),n.params),data:N(N({},r.data),n.data),resolve:N(N(N(N({},n.data),r.data),i?.data),n._resolvedData)}:t={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},i&&gd(i)&&(t.resolve[Ii]=i.title),t}var Kr=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[Ii]}constructor(r,e,t,i,a,o,s,c,l){this.url=r,this.params=e,this.queryParams=t,this.fragment=i,this.data=a,this.outlet=o,this.component=s,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Qr(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Qr(this.queryParams),this._queryParamMap}toString(){let r=this.url.map(t=>t.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${r}', path:'${e}')`}},Ci=class extends vo{url;constructor(r,e){super(e),this.url=r,dc(this,e)}toString(){return fd(this._root)}};function dc(n,r){r.value._routerState=n,r.children.forEach(e=>dc(n,e))}function fd(n){let r=n.children.length>0?` { ${n.children.map(fd).join(", ")} } `:"";return`${n.value}${r}`}function Xs(n){if(n.snapshot){let r=n.snapshot,e=n._futureSnapshot;n.snapshot=e,Bt(r.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),r.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),Bt(r.params,e.params)||n.paramsSubject.next(e.params),Am(r.url,e.url)||n.urlSubject.next(e.url),Bt(r.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function oc(n,r){let e=Bt(n.params,r.params)&&Dm(n.url,r.url),t=!n.parent!=!r.parent;return e&&!t&&(!n.parent||oc(n.parent,r.parent))}function gd(n){return typeof n.title=="string"||n.title===null}var bd=new G(""),Mi=(()=>{class n{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=z;activateEvents=new te;deactivateEvents=new te;attachEvents=new te;detachEvents=new te;routerOutletData=$e();parentContexts=d(Bn);location=d(At);changeDetector=d(Me);inputBinder=d(wo,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(e){if(e.name){let{firstChange:t,previousValue:i}=e.name;if(t)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,s=this.parentContexts.getOrCreateContext(this.name).children,c=new sc(e,s,i.injector,this.routerOutletData);this.activated=i.createComponent(o,{index:i.length,injector:c,environmentInjector:t}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ve({type:n,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[cr]})}return n})(),sc=class{route;childContexts;parent;outletData;constructor(r,e,t,i){this.route=r,this.childContexts=e,this.parent=t,this.outletData=i}get(r,e){return r===Ar?this.route:r===Bn?this.childContexts:r===bd?this.outletData:this.parent.get(r,e)}},wo=new G("");var pc=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(t,i){t&1&&x(0,"router-outlet")},dependencies:[Mi],encapsulation:2})}return n})();function mc(n){let r=n.children&&n.children.map(mc),e=r?Ce(N({},n),{children:r}):N({},n);return!e.component&&!e.loadComponent&&(r||e.loadChildren)&&e.outlet&&e.outlet!==z&&(e.component=pc),e}function nh(n,r,e){let t=ki(n,r._root,e?e._root:void 0);return new Ti(t,r)}function ki(n,r,e){if(e&&n.shouldReuseRoute(r.value,e.value.snapshot)){let t=e.value;t._futureSnapshot=r.value;let i=ih(n,r,e);return new it(t,i)}else{if(n.shouldAttach(r.value)){let a=n.retrieve(r.value);if(a!==null){let o=a.route;return o.value._futureSnapshot=r.value,o.children=r.children.map(s=>ki(n,s)),o}}let t=ah(r.value),i=r.children.map(a=>ki(n,a));return new it(t,i)}}function ih(n,r,e){return r.children.map(t=>{for(let i of e.children)if(n.shouldReuseRoute(t.value,i.value.snapshot))return ki(n,t,i);return ki(n,t)})}function ah(n){return new Ar(new Ge(n.url),new Ge(n.params),new Ge(n.queryParams),new Ge(n.fragment),new Ge(n.data),n.outlet,n.component,n)}var Pn=class{redirectTo;navigationBehaviorOptions;constructor(r,e){this.redirectTo=r,this.navigationBehaviorOptions=e}},vd="ngNavigationCancelingError";function _o(n,r){let{redirectTo:e,navigationBehaviorOptions:t}=On(r)?{redirectTo:r,navigationBehaviorOptions:void 0}:r,i=xd(!1,ze.Redirect);return i.url=e,i.navigationBehaviorOptions=t,i}function xd(n,r){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[vd]=!0,e.cancellationCode=r,e}function oh(n){return _d(n)&&On(n.url)}function _d(n){return!!n&&n[vd]}var sh=(n,r,e,t)=>V(i=>(new cc(r,i.targetRouterState,i.currentRouterState,e,t).activate(n),i)),cc=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(r,e,t,i,a){this.routeReuseStrategy=r,this.futureState=e,this.currState=t,this.forwardEvent=i,this.inputBindingEnabled=a}activate(r){let e=this.futureState._root,t=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,t,r),Xs(this.futureState.root),this.activateChildRoutes(e,t,r)}deactivateChildRoutes(r,e,t){let i=An(e);r.children.forEach(a=>{let o=a.value.outlet;this.deactivateRoutes(a,i[o],t),delete i[o]}),Object.values(i).forEach(a=>{this.deactivateRouteAndItsChildren(a,t)})}deactivateRoutes(r,e,t){let i=r.value,a=e?e.value:null;if(i===a)if(i.component){let o=t.getContext(i.outlet);o&&this.deactivateChildRoutes(r,e,o.children)}else this.deactivateChildRoutes(r,e,t);else a&&this.deactivateRouteAndItsChildren(e,t)}deactivateRouteAndItsChildren(r,e){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,e):this.deactivateRouteAndOutlet(r,e)}detachAndStoreRouteSubtree(r,e){let t=e.getContext(r.value.outlet),i=t&&r.value.component?t.children:e,a=An(r);for(let o of Object.values(a))this.deactivateRouteAndItsChildren(o,i);if(t&&t.outlet){let o=t.outlet.detach(),s=t.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:o,route:r,contexts:s})}}deactivateRouteAndOutlet(r,e){let t=e.getContext(r.value.outlet),i=t&&r.value.component?t.children:e,a=An(r);for(let o of Object.values(a))this.deactivateRouteAndItsChildren(o,i);t&&(t.outlet&&(t.outlet.deactivate(),t.children.onOutletDeactivated()),t.attachRef=null,t.route=null)}activateChildRoutes(r,e,t){let i=An(e);r.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],t),this.forwardEvent(new go(a.value.snapshot))}),r.children.length&&this.forwardEvent(new ho(r.value.snapshot))}activateRoutes(r,e,t){let i=r.value,a=e?e.value:null;if(Xs(i),i===a)if(i.component){let o=t.getOrCreateContext(i.outlet);this.activateChildRoutes(r,e,o.children)}else this.activateChildRoutes(r,e,t);else if(i.component){let o=t.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let s=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(s.contexts),o.attachRef=s.componentRef,o.route=s.route.value,o.outlet&&o.outlet.attach(s.componentRef,s.route.value),Xs(s.route.value),this.activateChildRoutes(r,null,o.children)}else o.attachRef=null,o.route=i,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(r,null,o.children)}else this.activateChildRoutes(r,null,t)}},yo=class{path;route;constructor(r){this.path=r,this.route=this.path[this.path.length-1]}},Rn=class{component;route;constructor(r,e){this.component=r,this.route=e}};function ch(n,r,e){let t=n._root,i=r?r._root:null;return bi(t,i,e,[t.value])}function lh(n){let r=n.routeConfig?n.routeConfig.canActivateChild:null;return!r||r.length===0?null:{node:n,guards:r}}function Un(n,r){let e=Symbol(),t=r.get(n,e);return t===e?typeof n=="function"&&!ll(n)?n:r.get(n):t}function bi(n,r,e,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=An(r);return n.children.forEach(o=>{uh(o,a[o.value.outlet],e,t.concat([o.value]),i),delete a[o.value.outlet]}),Object.entries(a).forEach(([o,s])=>_i(s,e.getContext(o),i)),i}function uh(n,r,e,t,i={canDeactivateChecks:[],canActivateChecks:[]}){let a=n.value,o=r?r.value:null,s=e?e.getContext(n.value.outlet):null;if(o&&a.routeConfig===o.routeConfig){let c=dh(o,a,a.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new yo(t)):(a.data=o.data,a._resolvedData=o._resolvedData),a.component?bi(n,r,s?s.children:null,t,i):bi(n,r,e,t,i),c&&s&&s.outlet&&s.outlet.isActivated&&i.canDeactivateChecks.push(new Rn(s.outlet.component,o))}else o&&_i(r,s,i),i.canActivateChecks.push(new yo(t)),a.component?bi(n,null,s?s.children:null,t,i):bi(n,null,e,t,i);return i}function dh(n,r,e){if(typeof e=="function")return e(n,r);switch(e){case"pathParamsChange":return!Wr(n.url,r.url);case"pathParamsOrQueryParamsChange":return!Wr(n.url,r.url)||!Bt(n.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oc(n,r)||!Bt(n.queryParams,r.queryParams);case"paramsChange":default:return!oc(n,r)}}function _i(n,r,e){let t=An(n),i=n.value;Object.entries(t).forEach(([a,o])=>{i.component?r?_i(o,r.children.getContext(a),e):_i(o,null,e):_i(o,r,e)}),i.component?r&&r.outlet&&r.outlet.isActivated?e.canDeactivateChecks.push(new Rn(r.outlet.component,i)):e.canDeactivateChecks.push(new Rn(null,i)):e.canDeactivateChecks.push(new Rn(null,i))}function Ri(n){return typeof n=="function"}function ph(n){return typeof n=="boolean"}function mh(n){return n&&Ri(n.canLoad)}function hh(n){return n&&Ri(n.canActivate)}function fh(n){return n&&Ri(n.canActivateChild)}function gh(n){return n&&Ri(n.canDeactivate)}function bh(n){return n&&Ri(n.canMatch)}function yd(n){return n instanceof il||n?.name==="EmptyError"}var Za=Symbol("INITIAL_VALUE");function Ln(){return Y(n=>da(n.map(r=>r.pipe(ee(1),Je(Za)))).pipe(V(r=>{for(let e of r)if(e!==!0){if(e===Za)return Za;if(e===!1||vh(e))return e}return!0}),xe(r=>r!==Za),ee(1)))}function vh(n){return On(n)||n instanceof Pn}function Ed(n){return n.aborted?P(void 0).pipe(ee(1)):new Vt(r=>{let e=()=>{r.next(),r.complete()};return n.addEventListener("abort",e),()=>n.removeEventListener("abort",e)})}function wd(n){return ct(Ed(n))}function xh(n,r){return rr(e=>{let{targetSnapshot:t,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:o}}=e;return o.length===0&&a.length===0?P(Ce(N({},e),{guardsResult:!0})):_h(o,t,i,n).pipe(rr(s=>s&&ph(s)?yh(t,a,n,r):P(s)),V(s=>Ce(N({},e),{guardsResult:s})))})}function _h(n,r,e,t){return He(n).pipe(rr(i=>Ch(i.component,i.route,e,r,t)),ar(i=>i!==!0,!0))}function yh(n,r,e,t){return He(r).pipe(Ps(i=>al(wh(i.route.parent,t),Eh(i.route,t),Th(n,i.path,e),Sh(n,i.route,e))),ar(i=>i!==!0,!0))}function Eh(n,r){return n!==null&&r&&r(new fo(n)),P(!0)}function wh(n,r){return n!==null&&r&&r(new mo(n)),P(!0)}function Sh(n,r,e){let t=r.routeConfig?r.routeConfig.canActivate:null;if(!t||t.length===0)return P(!0);let i=t.map(a=>nr(()=>{let o=Fn(r)??e,s=Un(a,o),c=hh(s)?s.canActivate(r,n):lt(o,()=>s(r,n));return Xr(c).pipe(ar())}));return P(i).pipe(Ln())}function Th(n,r,e){let t=r[r.length-1],a=r.slice(0,r.length-1).reverse().map(o=>lh(o)).filter(o=>o!==null).map(o=>nr(()=>{let s=o.guards.map(c=>{let l=Fn(o.node)??e,m=Un(c,l),g=fh(m)?m.canActivateChild(t,n):lt(l,()=>m(t,n));return Xr(g).pipe(ar())});return P(s).pipe(Ln())}));return P(a).pipe(Ln())}function Ch(n,r,e,t,i){let a=r&&r.routeConfig?r.routeConfig.canDeactivate:null;if(!a||a.length===0)return P(!0);let o=a.map(s=>{let c=Fn(r)??i,l=Un(s,c),m=gh(l)?l.canDeactivate(n,r,e,t):lt(c,()=>l(n,r,e,t));return Xr(m).pipe(ar())});return P(o).pipe(Ln())}function kh(n,r,e,t,i){let a=r.canLoad;if(a===void 0||a.length===0)return P(!0);let o=a.map(s=>{let c=Un(s,n),l=mh(c)?c.canLoad(r,e):lt(n,()=>c(r,e)),m=Xr(l);return i?m.pipe(wd(i)):m});return P(o).pipe(Ln(),Sd(t))}function Sd(n){return rl(le(r=>{if(typeof r!="boolean")throw _o(n,r)}),V(r=>r===!0))}function Ih(n,r,e,t,i){let a=r.canMatch;if(!a||a.length===0)return P(!0);let o=a.map(s=>{let c=Un(s,n),l=bh(c)?c.canMatch(r,e):lt(n,()=>c(r,e)),m=Xr(l);return i?m.pipe(wd(i)):m});return P(o).pipe(Ln(),Sd(t))}var Gr=class Td extends Error{segmentGroup;constructor(r){super(),this.segmentGroup=r||null,Object.setPrototypeOf(this,Td.prototype)}},lc=class Cd extends Error{urlTree;constructor(r){super(),this.urlTree=r,Object.setPrototypeOf(this,Cd.prototype)}};function Ah(n){throw new he(4e3,!1)}function Mh(n){throw xd(!1,ze.GuardRejected)}var Rh=class{urlSerializer;urlTree;constructor(r,e){this.urlSerializer=r,this.urlTree=e}lineralizeSegments(r,e){return u(this,null,function*(){let t=[],i=e.root;for(;;){if(t=t.concat(i.segments),i.numberOfChildren===0)return t;if(i.numberOfChildren>1||!i.children[z])throw Ah(`${r.redirectTo}`);i=i.children[z]}})}applyRedirectCommands(r,e,t,i,a){return u(this,null,function*(){let o=yield Oh(e,i,a);if(o instanceof Et)throw new lc(o);let s=this.applyRedirectCreateUrlTree(o,this.urlSerializer.parse(o),r,t);if(o[0]==="/")throw new lc(s);return s})}applyRedirectCreateUrlTree(r,e,t,i){let a=this.createSegmentGroup(r,e.root,t,i);return new Et(a,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(r,e){let t={};return Object.entries(r).forEach(([i,a])=>{if(typeof a=="string"&&a[0]===":"){let s=a.substring(1);t[i]=e[s]}else t[i]=a}),t}createSegmentGroup(r,e,t,i){let a=this.createSegments(r,e.segments,t,i),o={};return Object.entries(e.children).forEach(([s,c])=>{o[s]=this.createSegmentGroup(r,c,t,i)}),new Z(a,o)}createSegments(r,e,t,i){return e.map(a=>a.path[0]===":"?this.findPosParam(r,a,i):this.findOrReturn(a,t))}findPosParam(r,e,t){let i=t[e.path.substring(1)];if(!i)throw new he(4001,!1);return i}findOrReturn(r,e){let t=0;for(let i of e){if(i.path===r.path)return e.splice(t),i;t++}return r}};function Oh(n,r,e){if(typeof n=="string")return Promise.resolve(n);let t=n,{queryParams:i,fragment:a,routeConfig:o,url:s,outlet:c,params:l,data:m,title:g}=r;return no(Xr(lt(e,()=>t({params:l,data:m,queryParams:i,fragment:a,routeConfig:o,url:s,outlet:c,title:g}))))}var uc={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Dh(n,r,e,t,i,a){let o=kd(n,r,e);return o.matched?(t=eh(r,t),Ih(t,r,e,i,a).pipe(V(s=>s===!0?o:N({},uc)))):P(o)}function kd(n,r,e){if(r.path==="**")return Nh(e);if(r.path==="")return r.pathMatch==="full"&&(n.hasChildren()||e.length>0)?N({},uc):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(r.matcher||Xu)(e,n,r);if(!i)return N({},uc);let a={};Object.entries(i.posParams??{}).forEach(([s,c])=>{a[s]=c.path});let o=i.consumed.length>0?N(N({},a),i.consumed[i.consumed.length-1].parameters):a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function Nh(n){return{matched:!0,parameters:n.length>0?Zu(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Ku(n,r,e,t){return e.length>0&&Fh(n,e,t)?{segmentGroup:new Z(r,Lh(t,new Z(e,n.children))),slicedSegments:[]}:e.length===0&&Bh(n,e,t)?{segmentGroup:new Z(n.segments,Ph(n,e,t,n.children)),slicedSegments:e}:{segmentGroup:new Z(n.segments,n.children),slicedSegments:e}}function Ph(n,r,e,t){let i={};for(let a of e)if(So(n,r,a)&&!t[yt(a)]){let o=new Z([],{});i[yt(a)]=o}return N(N({},t),i)}function Lh(n,r){let e={};e[z]=r;for(let t of n)if(t.path===""&&yt(t)!==z){let i=new Z([],{});e[yt(t)]=i}return e}function Fh(n,r,e){return e.some(t=>So(n,r,t)&&yt(t)!==z)}function Bh(n,r,e){return e.some(t=>So(n,r,t))}function So(n,r,e){return(n.hasChildren()||r.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Uh(n,r,e){return r.length===0&&!n.children[e]}var jh=class{};function qh(n,r,e,t,i,a,o="emptyOnly",s){return u(this,null,function*(){return new Vh(n,r,e,t,i,o,a,s).recognize()})}var Hh=31,Vh=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(r,e,t,i,a,o,s,c){this.injector=r,this.configLoader=e,this.rootComponentType=t,this.config=i,this.urlTree=a,this.paramsInheritanceStrategy=o,this.urlSerializer=s,this.abortSignal=c,this.applyRedirects=new Rh(this.urlSerializer,this.urlTree)}noMatchError(r){return new he(4002,`'${r.segmentGroup}'`)}recognize(){return u(this,null,function*(){let r=Ku(this.urlTree.root,[],[],this.config).segmentGroup,{children:e,rootSnapshot:t}=yield this.match(r),i=new it(t,e),a=new Ci("",i),o=ld(t,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,a.url=this.urlSerializer.serialize(o),{state:a,tree:o}})}match(r){return u(this,null,function*(){let e=new Kr([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),z,this.rootComponentType,null,{});try{return{children:yield this.processSegmentGroup(this.injector,this.config,r,z,e),rootSnapshot:e}}catch(t){if(t instanceof lc)return this.urlTree=t.urlTree,this.match(t.urlTree.root);throw t instanceof Gr?this.noMatchError(t):t}})}processSegmentGroup(r,e,t,i,a){return u(this,null,function*(){if(t.segments.length===0&&t.hasChildren())return this.processChildren(r,e,t,a);let o=yield this.processSegment(r,e,t,t.segments,i,!0,a);return o instanceof it?[o]:[]})}processChildren(r,e,t,i){return u(this,null,function*(){let a=[];for(let c of Object.keys(t.children))c==="primary"?a.unshift(c):a.push(c);let o=[];for(let c of a){let l=t.children[c],m=th(e,c),g=yield this.processSegmentGroup(r,m,l,c,i);o.push(...g)}let s=Id(o);return $h(s),s})}processSegment(r,e,t,i,a,o,s){return u(this,null,function*(){for(let c of e)try{return yield this.processSegmentAgainstRoute(c._injector??r,e,c,t,i,a,o,s)}catch(l){if(l instanceof Gr||yd(l))continue;throw l}if(Uh(t,i,a))return new jh;throw new Gr(t)})}processSegmentAgainstRoute(r,e,t,i,a,o,s,c){return u(this,null,function*(){if(yt(t)!==o&&(o===z||!So(i,a,t)))throw new Gr(i);if(t.redirectTo===void 0)return this.matchSegmentAgainstRoute(r,i,t,a,o,c);if(this.allowRedirects&&s)return this.expandSegmentAgainstRouteUsingRedirect(r,i,e,t,a,o,c);throw new Gr(i)})}expandSegmentAgainstRouteUsingRedirect(r,e,t,i,a,o,s){return u(this,null,function*(){let{matched:c,parameters:l,consumedSegments:m,positionalParamSegments:g,remainingSegments:_}=kd(e,i,a);if(!c)throw new Gr(e);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Hh&&(this.allowRedirects=!1));let f=new Kr(a,l,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Qu(i),yt(i),i.component??i._loadedComponent??null,i,Yu(i)),w=xo(f,s,this.paramsInheritanceStrategy);if(f.params=Object.freeze(w.params),f.data=Object.freeze(w.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let S=yield this.applyRedirects.applyRedirectCommands(m,i.redirectTo,g,f,r),T=yield this.applyRedirects.lineralizeSegments(i,S);return this.processSegment(r,t,e,T.concat(_),o,!1,s)})}matchSegmentAgainstRoute(r,e,t,i,a,o){return u(this,null,function*(){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let s=yield no(Dh(e,t,i,r,this.urlSerializer,this.abortSignal));if(t.path==="**"&&(e.children={}),!s?.matched)throw new Gr(e);r=t._injector??r;let{routes:c}=yield this.getChildConfig(r,t,i),l=t._loadedInjector??r,{parameters:m,consumedSegments:g,remainingSegments:_}=s,f=new Kr(g,m,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,Qu(t),yt(t),t.component??t._loadedComponent??null,t,Yu(t)),w=xo(f,o,this.paramsInheritanceStrategy);f.params=Object.freeze(w.params),f.data=Object.freeze(w.data);let{segmentGroup:S,slicedSegments:T}=Ku(e,g,_,c);if(T.length===0&&S.hasChildren()){let D=yield this.processChildren(l,c,S,f);return new it(f,D)}if(c.length===0&&T.length===0)return new it(f,[]);let k=yt(t)===a,K=yield this.processSegment(l,c,S,T,k?z:a,!0,f);return new it(f,K instanceof it?[K]:[])})}getChildConfig(r,e,t){return u(this,null,function*(){if(e.children)return{routes:e.children,injector:r};if(e.loadChildren){if(e._loadedRoutes!==void 0)return{routes:e._loadedRoutes,injector:e._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(yield no(kh(r,e,t,this.urlSerializer,this.abortSignal))){let a=yield this.configLoader.loadChildren(r,e);return e._loadedRoutes=a.routes,e._loadedInjector=a.injector,a}throw Mh(e)}return{routes:[],injector:r}})}};function $h(n){n.sort((r,e)=>r.value.outlet===z?-1:e.value.outlet===z?1:r.value.outlet.localeCompare(e.value.outlet))}function zh(n){let r=n.value.routeConfig;return r&&r.path===""}function Id(n){let r=[],e=new Set;for(let t of n){if(!zh(t)){r.push(t);continue}let i=r.find(a=>t.value.routeConfig===a.value.routeConfig);i!==void 0?(i.children.push(...t.children),e.add(i)):r.push(t)}for(let t of e){let i=Id(t.children);r.push(new it(t.value,i))}return r.filter(t=>!e.has(t))}function Qu(n){return n.data||{}}function Yu(n){return n.resolve||{}}var Gh=new G("",{factory:()=>qh});function Wh(n,r,e,t,i,a,o){let s=n.get(Gh);return rr(c=>P(c).pipe(Y(l=>s(n,r,e,t,l.extractedUrl,i,a,o)),V(({state:l,tree:m})=>Ce(N({},c),{targetSnapshot:l,urlAfterRedirects:m}))))}function Kh(n,r){return rr(e=>{let{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return P(e);let a=new Set(i.map(c=>c.route)),o=new Set;for(let c of a)if(!o.has(c))for(let l of Ad(c))o.add(l);let s=0;return He(o).pipe(Ps(c=>a.has(c)?Qh(c,t,n,r):(c.data=xo(c,c.parent,n).resolve,P(void 0))),le(()=>s++),Ls(1),rr(c=>s===o.size?P(e):$t))})}function Ad(n){let r=n.children.map(e=>Ad(e)).flat();return[n,...r]}function Qh(n,r,e,t){let i=n.routeConfig,a=n._resolve;return i?.title!==void 0&&!gd(i)&&(a[Ii]=i.title),nr(()=>(n.data=xo(n,n.parent,e).resolve,Yh(a,n,r,t).pipe(V(o=>(n._resolvedData=o,n.data=N(N({},n.data),o),null)))))}function Yh(n,r,e,t){let i=ec(n);if(i.length===0)return P({});let a={};return He(i).pipe(rr(o=>Xh(n[o],r,e,t).pipe(ar(),le(s=>{if(s instanceof Pn)throw _o(new Ir,s);a[o]=s}))),Ls(1),V(()=>a),Br(o=>yd(o)?$t:ua(o)))}function Xh(n,r,e,t){let i=Fn(r)??t,a=Un(n,i),o=a.resolve?a.resolve(r,e):lt(i,()=>a(r,e));return Xr(o)}function Js(n){return Y(r=>{let e=n(r);return e?He(e).pipe(V(()=>r)):P(r)})}var hc=(()=>{class n{buildTitle(e){let t,i=e.root;for(;i!==void 0;)t=this.getResolvedTitleForRoute(i)??t,i=i.children.find(a=>a.outlet===z);return t}getResolvedTitleForRoute(e){return e.data[Ii]}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:()=>d(Md),providedIn:"root"})}return n})(),Md=(()=>{class n extends hc{title;constructor(e){super(),this.title=e}updateTitle(e){let t=this.buildTitle(e);t!==void 0&&this.title.setTitle(t)}static \u0275fac=function(t){return new(t||n)(We(Ql))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Oi=new G("",{factory:()=>({})}),Di=new G(""),Rd=(()=>{class n{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=d(Hs);loadComponent(e,t){return u(this,null,function*(){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return Promise.resolve(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let i=u(this,null,function*(){try{let a=yield ed(lt(e,()=>t.loadComponent())),o=yield Nd(Dd(a));return this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o,o}finally{this.componentLoaders.delete(t)}});return this.componentLoaders.set(t,i),i})}loadChildren(e,t){if(this.childrenLoaders.get(t))return this.childrenLoaders.get(t);if(t._loadedRoutes)return Promise.resolve({routes:t._loadedRoutes,injector:t._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(t);let i=u(this,null,function*(){try{let a=yield Od(t,this.compiler,e,this.onLoadEndListener);return t._loadedRoutes=a.routes,t._loadedInjector=a.injector,a}finally{this.childrenLoaders.delete(t)}});return this.childrenLoaders.set(t,i),i}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function Od(n,r,e,t){return u(this,null,function*(){let i=yield ed(lt(e,()=>n.loadChildren())),a=yield Nd(Dd(i)),o;a instanceof _l||Array.isArray(a)?o=a:o=yield r.compileModuleAsync(a),t&&t(n);let s,c,l=!1;return Array.isArray(o)?(c=o,l=!0):(s=o.create(e).injector,c=s.get(Di,[],{optional:!0,self:!0}).flat()),{routes:c.map(mc),injector:s}})}function Jh(n){return n&&typeof n=="object"&&"default"in n}function Dd(n){return Jh(n)?n.default:n}function Nd(n){return u(this,null,function*(){return n})}var To=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:()=>d(Zh),providedIn:"root"})}return n})(),Zh=(()=>{class n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),Pd=new G("");var ef=()=>{},Ld=new G(""),Fd=(()=>{class n{currentNavigation=Le(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Le(null);events=new ce;transitionAbortWithErrorSubject=new ce;configLoader=d(Rd);environmentInjector=d(or);destroyRef=d(pl);urlSerializer=d(Ai);rootContexts=d(Bn);location=d(pi);inputBindingEnabled=d(wo,{optional:!0})!==null;titleStrategy=d(hc);options=d(Oi,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=d(To);createViewTransition=d(Pd,{optional:!0});navigationErrorHandler=d(Ld,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>P(void 0);rootComponentType=null;destroyed=!1;constructor(){let e=i=>this.events.next(new uo(i)),t=i=>this.events.next(new po(i));this.configLoader.onLoadEndListener=t,this.configLoader.onLoadStartListener=e,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(e){let t=++this.navigationId;Ur(()=>{this.transitions?.next(Ce(N({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:t}))})}setupNavigations(e){return this.transitions=new Ge(null),this.transitions.pipe(xe(t=>t!==null),Y(t=>{let i=!1,a=new AbortController;return P(t).pipe(Y(o=>{if(this.navigationId>t.id)return this.cancelNavigationTransition(t,"",ze.SupersededByNewNavigation),$t;this.currentTransition=t;let s=this.lastSuccessfulNavigation();this.currentNavigation.set({id:o.id,initialUrl:o.rawUrl,extractedUrl:o.extractedUrl,targetBrowserUrl:typeof o.extras.browserUrl=="string"?this.urlSerializer.parse(o.extras.browserUrl):o.extras.browserUrl,trigger:o.source,extras:o.extras,previousNavigation:s?Ce(N({},s),{previousNavigation:null}):null,abort:()=>a.abort()});let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=o.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&l!=="reload")return this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.rawUrl),"",Ei.IgnoredSameUrlNavigation)),o.resolve(!1),$t;if(this.urlHandlingStrategy.shouldProcessUrl(o.rawUrl))return P(o).pipe(Y(m=>(this.events.next(new Yr(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),m.id!==this.navigationId?$t:Promise.resolve(m))),Wh(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy,a.signal),le(m=>{t.targetSnapshot=m.targetSnapshot,t.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation.update(_=>(_.finalUrl=m.urlAfterRedirects,_));let g=new wi(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(o.currentRawUrl)){let{id:m,extractedUrl:g,source:_,restoredState:f,extras:w}=o,S=new Yr(m,this.urlSerializer.serialize(g),_,f);this.events.next(S);let T=hd(this.rootComponentType).snapshot;return this.currentTransition=t=Ce(N({},o),{targetSnapshot:T,urlAfterRedirects:g,extras:Ce(N({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=g,k)),P(t)}else return this.events.next(new Qt(o.id,this.urlSerializer.serialize(o.extractedUrl),"",Ei.IgnoredByUrlHandlingStrategy)),o.resolve(!1),$t}),le(o=>{let s=new oo(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot);this.events.next(s)}),V(o=>(this.currentTransition=t=Ce(N({},o),{guards:ch(o.targetSnapshot,o.currentSnapshot,this.rootContexts)}),t)),xh(this.environmentInjector,o=>this.events.next(o)),le(o=>{if(t.guardsResult=o.guardsResult,o.guardsResult&&typeof o.guardsResult!="boolean")throw _o(this.urlSerializer,o.guardsResult);let s=new so(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects),o.targetSnapshot,!!o.guardsResult);this.events.next(s)}),xe(o=>o.guardsResult?!0:(this.cancelNavigationTransition(o,"",ze.GuardRejected),!1)),Js(o=>{if(o.guards.canActivateChecks.length!==0)return P(o).pipe(le(s=>{let c=new co(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),Y(s=>{let c=!1;return P(s).pipe(Kh(this.paramsInheritanceStrategy,this.environmentInjector),le({next:()=>c=!0,complete:()=>{c||this.cancelNavigationTransition(s,"",ze.NoDataFromResolver)}}))}),le(s=>{let c=new lo(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}))}),Js(o=>{let s=l=>{let m=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let g=Fn(l)??this.environmentInjector;m.push(this.configLoader.loadComponent(g,l.routeConfig).then(_=>{l.component=_}))}for(let g of l.children)m.push(...s(g));return m},c=s(o.targetSnapshot.root);return c.length===0?P(o):He(Promise.all(c).then(()=>o))}),Js(()=>this.afterPreactivation()),Y(()=>{let{currentSnapshot:o,targetSnapshot:s}=t,c=this.createViewTransition?.(this.environmentInjector,o.root,s.root);return c?He(c).pipe(V(()=>t)):P(t)}),V(o=>{let s=nh(e.routeReuseStrategy,o.targetSnapshot,o.currentRouterState);return this.currentTransition=t=Ce(N({},o),{targetRouterState:s}),this.currentNavigation.update(c=>(c.targetRouterState=s,c)),t}),le(()=>{this.events.next(new Si)}),sh(this.rootContexts,e.routeReuseStrategy,o=>this.events.next(o),this.inputBindingEnabled),ee(1),ct(Ed(a.signal).pipe(xe(()=>!i&&!t.targetRouterState),le(()=>{this.cancelNavigationTransition(t,a.signal.reason+"",ze.Aborted)}))),le({next:o=>{i=!0,this.currentNavigation.update(s=>(s.abort=ef,s)),this.lastSuccessfulNavigation.set(Ur(this.currentNavigation)),this.events.next(new wt(o.id,this.urlSerializer.serialize(o.extractedUrl),this.urlSerializer.serialize(o.urlAfterRedirects))),this.titleStrategy?.updateTitle(o.targetRouterState.snapshot),o.resolve(!0)},complete:()=>{i=!0}}),ct(this.transitionAbortWithErrorSubject.pipe(le(o=>{throw o}))),cl(()=>{a.abort(),i||this.cancelNavigationTransition(t,"",ze.SupersededByNewNavigation),this.currentTransition?.id===t.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Br(o=>{if(this.destroyed)return t.resolve(!1),$t;if(i=!0,_d(o))this.events.next(new Ut(t.id,this.urlSerializer.serialize(t.extractedUrl),o.message,o.cancellationCode)),oh(o)?this.events.next(new Nn(o.url,o.navigationBehaviorOptions)):t.resolve(!1);else{let s=new Dn(t.id,this.urlSerializer.serialize(t.extractedUrl),o,t.targetSnapshot??void 0);try{let c=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(s));if(c instanceof Pn){let{message:l,cancellationCode:m}=_o(this.urlSerializer,c);this.events.next(new Ut(t.id,this.urlSerializer.serialize(t.extractedUrl),l,m)),this.events.next(new Nn(c.redirectTo,c.navigationBehaviorOptions))}else throw this.events.next(s),o}catch(c){this.options.resolveNavigationPromiseOnError?t.resolve(!1):t.reject(c)}}return $t}))}))}cancelNavigationTransition(e,t,i){let a=new Ut(e.id,this.urlSerializer.serialize(e.extractedUrl),t,i);this.events.next(a),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let e=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),t=Ur(this.currentNavigation),i=t?.targetBrowserUrl??t?.extractedUrl;return e.toString()!==i?.toString()&&!t?.extras.skipLocationChange}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function tf(n){return n!==xi}var Bd=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:()=>d(rf),providedIn:"root"})}return n})(),Eo=class{shouldDetach(r){return!1}store(r,e){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,e){return r.routeConfig===e.routeConfig}},rf=(()=>{class n extends Eo{static \u0275fac=(()=>{let e;return function(i){return(e||(e=Bs(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})(),fc=(()=>{class n{urlSerializer=d(Ai);options=d(Oi,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=d(pi);urlHandlingStrategy=d(To);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Et;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:e,initialUrl:t,targetBrowserUrl:i}){let a=e!==void 0?this.urlHandlingStrategy.merge(e,t):t,o=i??a;return o instanceof Et?this.urlSerializer.serialize(o):o}commitTransition({targetRouterState:e,finalUrl:t,initialUrl:i}){t&&e?(this.currentUrlTree=t,this.rawUrlTree=this.urlHandlingStrategy.merge(t,i),this.routerState=e):this.rawUrlTree=i}routerState=hd(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:e}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e??this.rawUrlTree)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:()=>d(Ud),providedIn:"root"})}return n})(),Ud=(()=>{class n extends fc{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(t=>{t.type==="popstate"&&setTimeout(()=>{e(t.url,t.state,"popstate")})})}handleRouterEvent(e,t){e instanceof Yr?this.updateStateMemento():e instanceof Qt?this.commitTransition(t):e instanceof wi?this.urlUpdateStrategy==="eager"&&(t.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(t),t)):e instanceof Si?(this.commitTransition(t),this.urlUpdateStrategy==="deferred"&&!t.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(t),t)):e instanceof Ut&&e.code!==ze.SupersededByNewNavigation&&e.code!==ze.Redirect?this.restoreHistory(t):e instanceof Dn?this.restoreHistory(t,!0):e instanceof wt&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,{extras:t,id:i}){let{replaceUrl:a,state:o}=t;if(this.location.isCurrentPathEqualTo(e)||a){let s=this.browserPageId,c=N(N({},o),this.generateNgRouterState(i,s));this.location.replaceState(e,"",c)}else{let s=N(N({},o),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(e,"",s)}}restoreHistory(e,t=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,a=this.currentPageId-i;a!==0?this.location.historyGo(a):this.getCurrentUrlTree()===e.finalUrl&&a===0&&(this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(t&&this.resetInternalState(e),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,t){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:t}:{navigationId:e}}static \u0275fac=(()=>{let e;return function(i){return(e||(e=Bs(n)))(i||n)}})();static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function gc(n,r){n.events.pipe(xe(e=>e instanceof wt||e instanceof Ut||e instanceof Dn||e instanceof Qt),V(e=>e instanceof wt||e instanceof Qt?0:(e instanceof Ut?e.code===ze.Redirect||e.code===ze.SupersededByNewNavigation:!1)?2:1),xe(e=>e!==2),ee(1)).subscribe(()=>{r()})}var nf={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},af={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},mt=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=d(js);stateManager=d(fc);options=d(Oi,{optional:!0})||{};pendingTasks=d(ml);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=d(Fd);urlSerializer=d(Ai);location=d(pi);urlHandlingStrategy=d(To);injector=d(or);_events=new ce;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=d(Bd);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=d(Di,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!d(wo,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}eventsSubscription=new It;subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(t=>{try{let i=this.navigationTransitions.currentTransition,a=Ur(this.navigationTransitions.currentNavigation);if(i!==null&&a!==null){if(this.stateManager.handleRouterEvent(t,a),t instanceof Ut&&t.code!==ze.Redirect&&t.code!==ze.SupersededByNewNavigation)this.navigated=!0;else if(t instanceof wt)this.navigated=!0;else if(t instanceof Nn){let o=t.navigationBehaviorOptions,s=this.urlHandlingStrategy.merge(t.url,i.currentRawUrl),c=N({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||tf(i.source)},o);this.scheduleNavigation(s,xi,null,c,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Zm(t)&&this._events.next(t)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),xi,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,t,i)=>{this.navigateToSyncWithBrowser(e,i,t)})}navigateToSyncWithBrowser(e,t,i){let a={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let c=N({},i);delete c.navigationId,delete c.\u0275routerPageId,Object.keys(c).length!==0&&(a.state=c)}let s=this.parseUrl(e);this.scheduleNavigation(s,t,o,a).catch(c=>{this.disposed||this.injector.get(Fs)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ur(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(mc),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,t={}){let{relativeTo:i,queryParams:a,fragment:o,queryParamsHandling:s,preserveFragment:c}=t,l=c?this.currentUrlTree.fragment:o,m=null;switch(s??this.options.defaultQueryParamsHandling){case"merge":m=N(N({},this.currentUrlTree.queryParams),a);break;case"preserve":m=this.currentUrlTree.queryParams;break;default:m=a||null}m!==null&&(m=this.removeEmptyProps(m));let g;try{let _=i?i.snapshot:this.routerState.snapshot.root;g=ud(_)}catch{(typeof e[0]!="string"||e[0][0]!=="/")&&(e=[]),g=this.currentUrlTree.root}return dd(g,e,m,l??null,this.urlSerializer)}navigateByUrl(e,t={skipLocationChange:!1}){let i=On(e)?e:this.parseUrl(e),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,xi,null,t)}navigate(e,t={skipLocationChange:!1}){return of(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.console.warn(ma(4018,!1)),this.urlSerializer.parse("/")}}isActive(e,t){let i;if(t===!0?i=N({},nf):t===!1?i=N({},af):i=t,On(e))return Vu(this.currentUrlTree,e,i);let a=this.parseUrl(e);return Vu(this.currentUrlTree,a,i)}removeEmptyProps(e){return Object.entries(e).reduce((t,[i,a])=>(a!=null&&(t[i]=a),t),{})}scheduleNavigation(e,t,i,a,o){if(this.disposed)return Promise.resolve(!1);let s,c,l;o?(s=o.resolve,c=o.reject,l=o.promise):l=new Promise((g,_)=>{s=g,c=_});let m=this.pendingTasks.add();return gc(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(m))}),this.navigationTransitions.handleNavigationRequest({source:t,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:a,resolve:s,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(g=>Promise.reject(g))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function of(n){for(let r=0;r<n.length;r++)if(n[r]==null)throw new he(4008,!1)}var cf=new G("");function bc(n,...r){return zt([{provide:Di,multi:!0,useValue:n},[],{provide:Ar,useFactory:lf},{provide:Cl,multi:!0,useFactory:df},r.map(e=>e.\u0275providers)])}function lf(){return d(mt).routerState.root}function uf(n,r){return{\u0275kind:n,\u0275providers:r}}function df(){let n=d(Ne);return r=>{let e=n.get(lr);if(r!==e.components[0])return;let t=n.get(mt),i=n.get(pf);n.get(mf)===1&&t.initialNavigation(),n.get(hf,null,{optional:!0})?.setUpPreloading(),n.get(cf,null,{optional:!0})?.init(),t.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var pf=new G("",{factory:()=>new ce}),mf=new G("",{factory:()=>1});var hf=new G("");function vc(){return uf(6,[{provide:Fl,useClass:Bl}])}var Co=(function(n){return n[n.AppShell=0]="AppShell",n[n.ServerRoutes=1]="ServerRoutes",n})(Co||{}),St=(function(n){return n[n.Server=0]="Server",n[n.Client=1]="Client",n[n.Prerender=2]="Prerender",n})(St||{});var gf=new G("SERVER_ROUTES_CONFIG");function jd(n){let r={routes:n};return{\u0275kind:Co.ServerRoutes,\u0275providers:[{provide:gf,useValue:r}]}}function qd(...n){let r=!1,e=!1,t=[Hu()];for(let{\u0275kind:i,\u0275providers:a}of n)r||=i===Co.AppShell,e||=i===Co.ServerRoutes,t.push(...a);if(!e&&r)throw new Error("Configuration error: found 'withAppShell()' without 'withRoutes()' in the same call to 'provideServerRendering()'.The 'withAppShell()' function requires 'withRoutes()' to be used.");return zt(t)}var Px={[St.Prerender]:"ssg",[St.Server]:"ssr",[St.Client]:""};var Hd=()=>{let n=d(mt),r=d(gr),e=r.getItem("KEY_BUILD_ID"),t=e&&e.trim()?e:wa;return(!e||!e.trim())&&r.setItem("KEY_BUILD_ID",t),n.createUrlTree(["/",t])};var Vd=[{path:"",pathMatch:"full",canActivate:[Hd],loadComponent:()=>import("./chunk-6WYHKWQW.js").then(n=>n.ListItemRouterComponent)},{path:":id",children:[{path:"",loadComponent:()=>import("./chunk-6WYHKWQW.js").then(n=>n.ListItemRouterComponent)},{path:"aptitudes",loadComponent:()=>import("./chunk-NPS22UMM.js").then(n=>n.AptitudesRouterComponent)},{path:"sorts",loadComponent:()=>import("./chunk-2UPO7VYD.js").then(n=>n.SortsRouterComponent)},{path:"enchantements",loadComponent:()=>import("./chunk-XLD3OFSV.js").then(n=>n.EnchantementRouterComponent)}]}];var $d=(()=>{class n{http;prefix;suffix;constructor(e,t="/assets/i18n/",i=".json"){this.http=e,this.prefix=t,this.suffix=i}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}static \u0275fac=function(t){return new(t||n)(We(gn),We(String),We(String))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})();var xc="Service workers are disabled or not supported by this browser",jn=class{serviceWorker;worker;registration;events;constructor(r,e){if(this.serviceWorker=r,!r)this.worker=this.events=this.registration=new Vt(t=>t.error(new he(5601,!1)));else{let t=null,i=new ce;this.worker=new Vt(l=>(t!==null&&l.next(t),i.subscribe(m=>l.next(m))));let a=()=>{let{controller:l}=r;l!==null&&(t=l,i.next(t))};r.addEventListener("controllerchange",a),a(),this.registration=this.worker.pipe(Y(()=>r.getRegistration().then(l=>{if(!l)throw new he(5601,!1);return l})));let o=new ce;this.events=o.asObservable();let s=l=>{let{data:m}=l;m?.type&&o.next(m)};r.addEventListener("message",s),e?.get(lr,null,{optional:!0})?.onDestroy(()=>{r.removeEventListener("controllerchange",a),r.removeEventListener("message",s)})}}postMessage(r,e){return new Promise(t=>{this.worker.pipe(ee(1)).subscribe(i=>{i.postMessage(N({action:r},e)),t()})})}postMessageWithOperation(r,e,t){let i=this.waitForOperationCompleted(t),a=this.postMessage(r,e);return Promise.all([a,i]).then(([,o])=>o)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(r){let e;return typeof r=="string"?e=t=>t.type===r:e=t=>r.includes(t.type),this.events.pipe(xe(e))}nextEventOfType(r){return this.eventsOfType(r).pipe(ee(1))}waitForOperationCompleted(r){return new Promise((e,t)=>{this.eventsOfType("OPERATION_COMPLETED").pipe(xe(i=>i.nonce===r),ee(1),V(i=>{if(i.result!==void 0)return i.result;throw new Error(i.error)})).subscribe({next:e,error:t})})}get isEnabled(){return!!this.serviceWorker}},bf=(()=>{class n{sw;messages;notificationClicks;notificationCloses;pushSubscriptionChanges;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new ce;constructor(e){if(this.sw=e,!e.isEnabled){this.messages=ir,this.notificationClicks=ir,this.notificationCloses=ir,this.pushSubscriptionChanges=ir,this.subscription=ir;return}this.messages=this.sw.eventsOfType("PUSH").pipe(V(i=>i.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(V(i=>i.data)),this.notificationCloses=this.sw.eventsOfType("NOTIFICATION_CLOSE").pipe(V(i=>i.data)),this.pushSubscriptionChanges=this.sw.eventsOfType("PUSH_SUBSCRIPTION_CHANGE").pipe(V(i=>i.data)),this.pushManager=this.sw.registration.pipe(V(i=>i.pushManager));let t=this.pushManager.pipe(Y(i=>i.getSubscription()));this.subscription=new Vt(i=>{let a=t.subscribe(i),o=this.subscriptionChanges.subscribe(i);return()=>{a.unsubscribe(),o.unsubscribe()}})}requestSubscription(e){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(xc));let t={userVisibleOnly:!0},i=this.decodeBase64(e.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(i.length));for(let o=0;o<i.length;o++)a[o]=i.charCodeAt(o);return t.applicationServerKey=a,new Promise((o,s)=>{this.pushManager.pipe(Y(c=>c.subscribe(t)),ee(1)).subscribe({next:c=>{this.subscriptionChanges.next(c),o(c)},error:s})})}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(xc));let e=t=>{if(t===null)throw new he(5602,!1);return t.unsubscribe().then(i=>{if(!i)throw new he(5603,!1);this.subscriptionChanges.next(null)})};return new Promise((t,i)=>{this.subscription.pipe(ee(1),Y(e)).subscribe({next:t,error:i})})}decodeBase64(e){return atob(e)}static \u0275fac=function(t){return new(t||n)(We(jn))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),vf=(()=>{class n{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}ongoingCheckForUpdate=null;constructor(e){if(this.sw=e,!e.isEnabled){this.versionUpdates=ir,this.unrecoverable=ir;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(xc));if(this.ongoingCheckForUpdate)return this.ongoingCheckForUpdate;let e=this.sw.generateNonce();return this.ongoingCheckForUpdate=this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:e},e).finally(()=>{this.ongoingCheckForUpdate=null}),this.ongoingCheckForUpdate}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new he(5601,!1));let e=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:e},e)}static \u0275fac=function(t){return new(t||n)(We(jn))};static \u0275prov=Q({token:n,factory:n.\u0275fac})}return n})(),Gd=new G("");function xf(){let n=d(Pi);if(!("serviceWorker"in navigator&&n.enabled!==!1))return;let r=d(Gd),e=d(Ze),t=d(lr);e.runOutsideAngular(()=>{let i=navigator.serviceWorker,a=()=>i.controller?.postMessage({action:"INITIALIZE"});i.addEventListener("controllerchange",a),t.onDestroy(()=>{i.removeEventListener("controllerchange",a)})}),e.runOutsideAngular(()=>{let i,{registrationStrategy:a}=n;if(typeof a=="function")i=new Promise(o=>a().subscribe(()=>o()));else{let[o,...s]=(a||"registerWhenStable:30000").split(":");switch(o){case"registerImmediately":i=Promise.resolve();break;case"registerWithDelay":i=zd(+s[0]||0);break;case"registerWhenStable":i=Promise.race([t.whenStable(),zd(+s[0])]);break;default:throw new he(5600,!1)}}i.then(()=>{t.destroyed||navigator.serviceWorker.register(r,{scope:n.scope,updateViaCache:n.updateViaCache,type:n.type}).catch(o=>console.error(ma(5604,!1)))})})}function zd(n){return new Promise(r=>setTimeout(r,n))}function _f(){let n=d(Pi),r=d(Ne),e=!0;return new jn(e&&n.enabled!==!1?navigator.serviceWorker:void 0,r)}var Pi=class{enabled;updateViaCache;type;scope;registrationStrategy};function Wd(n,r={}){return zt([bf,vf,{provide:Gd,useValue:n},{provide:Pi,useValue:r},{provide:jn,useFactory:_f},qs(xf)])}function yf(n){return new $d(n,"./i18n/",".json")}var Kd={providers:[Ea({eventCoalescing:!0}),bc(Vd,vc()),Xl(Yl()),Wl(Kl()),ul([$.forRoot({loader:{provide:cu,useFactory:yf,deps:[gn]}})]),Wd("ngsw-worker.js",{enabled:!Dl(),registrationStrategy:"registerWhenStable:30000"}),En]};var Qd=[{path:"",renderMode:St.Prerender},{path:":id",renderMode:St.Server},{path:":id/aptitudes",renderMode:St.Server},{path:":id/sorts",renderMode:St.Server},{path:":id/enchantements",renderMode:St.Server},{path:"**",renderMode:St.Prerender}];var Ef={providers:[qd(jd(Qd))]},_c=Nl(Kd,Ef);var wf=["mat-internal-form-field",""],Sf=["*"],Yd=(()=>{class n{labelPosition;static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(t,i){t&2&&re("mdc-form-field--align-end",i.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},attrs:wf,ngContentSelectors:Sf,decls:1,vars:0,template:function(t,i){t&1&&(Ae(),ge(0))},styles:[`.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:inline-flex;align-items:center;vertical-align:middle}.mat-internal-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mat-internal-form-field>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end .mdc-form-field--align-end label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0}
`],encapsulation:2,changeDetection:0})}return n})();var Tf=["input"],Cf=["label"],kf=["*"],yc={color:"accent",clickAction:"check-indeterminate",disabledInteractive:!1},If=new G("mat-checkbox-default-options",{providedIn:"root",factory:()=>yc}),je=(function(n){return n[n.Init=0]="Init",n[n.Checked=1]="Checked",n[n.Unchecked=2]="Unchecked",n[n.Indeterminate=3]="Indeterminate",n})(je||{}),Ec=class{source;checked},Af=(()=>{class n{_elementRef=d(Ee);_changeDetectorRef=d(Me);_ngZone=d(Ze);_animationsDisabled=Re();_options=d(If,{optional:!0});focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let t=new Ec;return t.source=this,t.checked=e,t}_getAnimationTargetElement(){return this._inputElement?.nativeElement}_animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"};ariaLabel="";ariaLabelledby=null;ariaDescribedby;ariaExpanded;ariaControls;ariaOwns;_uniqueId;id;get inputId(){return`${this.id||this._uniqueId}-input`}required;labelPosition="after";name=null;change=new te;indeterminateChange=new te;value;disableRipple;_inputElement;_labelElement;tabIndex;color;disabledInteractive;_onTouched=()=>{};_currentAnimationClass="";_currentCheckState=je.Init;_controlValueAccessorChangeFn=()=>{};_validatorChangeFn=()=>{};constructor(){d(Ot).load(Lt);let e=d(new qr("tabindex"),{optional:!0});this._options=this._options||yc,this.color=this._options.color||yc.color,this.tabIndex=e==null?0:parseInt(e)||0,this.id=this._uniqueId=d(nt).getId("mat-mdc-checkbox-"),this.disabledInteractive=this._options?.disabledInteractive??!1}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this.indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}_checked=!1;get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}_disabled=!1;get indeterminate(){return this._indeterminate()}set indeterminate(e){let t=e!=this._indeterminate();this._indeterminate.set(e),t&&(e?this._transitionCheckState(je.Indeterminate):this._transitionCheckState(this.checked?je.Checked:je.Unchecked),this.indeterminateChange.emit(e)),this._syncIndeterminate(e)}_indeterminate=Le(!1);_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let t=this._currentCheckState,i=this._getAnimationTargetElement();if(!(t===e||!i)&&(this._currentAnimationClass&&i.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(t,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){i.classList.add(this._currentAnimationClass);let a=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{i.classList.remove(a)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate.set(!1),this.indeterminateChange.emit(!1)}),this._checked=!this._checked,this._transitionCheckState(this._checked?je.Checked:je.Unchecked),this._emitChangeEvent()):(this.disabled&&this.disabledInteractive||!this.disabled&&e==="noop")&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,t){if(this._animationsDisabled)return"";switch(e){case je.Init:if(t===je.Checked)return this._animationClasses.uncheckedToChecked;if(t==je.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case je.Unchecked:return t===je.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case je.Checked:return t===je.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case je.Indeterminate:return t===je.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let t=this._inputElement;t&&(t.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-checkbox"]],viewQuery:function(t,i){if(t&1&&ut(Tf,5)(Cf,5),t&2){let a;ue(a=de())&&(i._inputElement=a.first),ue(a=de())&&(i._labelElement=a.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:16,hostBindings:function(t,i){t&2&&(dr("id",i.id),ie("tabindex",null)("aria-label",null)("aria-labelledby",null),et(i.color?"mat-"+i.color:"mat-accent"),re("_mat-animation-noopable",i._animationsDisabled)("mdc-checkbox--disabled",i.disabled)("mat-mdc-checkbox-disabled",i.disabled)("mat-mdc-checkbox-checked",i.checked)("mat-mdc-checkbox-disabled-interactive",i.disabledInteractive))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],ariaExpanded:[2,"aria-expanded","ariaExpanded",H],ariaControls:[0,"aria-controls","ariaControls"],ariaOwns:[0,"aria-owns","ariaOwns"],id:"id",required:[2,"required","required",H],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[2,"disableRipple","disableRipple",H],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?void 0:Hr(e)],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",H],checked:[2,"checked","checked",H],disabled:[2,"disabled","disabled",H],indeterminate:[2,"indeterminate","indeterminate",H]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[tt([{provide:wn,useExisting:pn(()=>n),multi:!0},{provide:hu,useExisting:n,multi:!0}]),cr],ngContentSelectors:kf,decls:15,vars:23,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(t,i){if(t&1){let a=fe();Ae(),b(0,"div",3),A("click",function(s){return B(a),U(i._preventBubblingFromLabel(s))}),b(1,"div",4,0)(3,"div",5),A("click",function(){return B(a),U(i._onTouchTargetClick())}),v(),b(4,"input",6,1),A("blur",function(){return B(a),U(i._onBlur())})("click",function(){return B(a),U(i._onInputClick())})("change",function(s){return B(a),U(i._onInteractionEvent(s))}),v(),x(6,"div",7),b(7,"div",8),mn(),b(8,"svg",9),x(9,"path",10),v(),dl(),x(10,"div",11),v(),x(11,"div",12),v(),b(12,"label",13,2),ge(14),v()()}if(t&2){let a=Mt(2);h("labelPosition",i.labelPosition),p(4),re("mdc-checkbox--selected",i.checked),h("checked",i.checked)("indeterminate",i.indeterminate)("disabled",i.disabled&&!i.disabledInteractive)("id",i.inputId)("required",i.required)("tabIndex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex),ie("aria-label",i.ariaLabel||null)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-checked",i.indeterminate?"mixed":null)("aria-controls",i.ariaControls)("aria-disabled",i.disabled&&i.disabledInteractive?!0:null)("aria-expanded",i.ariaExpanded)("aria-owns",i.ariaOwns)("name",i.name)("value",i.value),p(7),h("matRippleTrigger",a)("matRippleDisabled",i.disableRipple||i.disabled)("matRippleCentered",!0),p(),h("for",i.inputId)}},dependencies:[wr,Yd],styles:[`.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom;padding:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);margin:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox:hover>.mdc-checkbox__ripple{opacity:var(--mat-checkbox-unselected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mat-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:hover>.mat-mdc-checkbox-ripple>.mat-ripple-element{background-color:var(--mat-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-unselected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mat-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-unselected-focus-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-unselected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mat-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-unselected-pressed-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-selected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity));background-color:var(--mat-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-selected-hover-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-selected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity));background-color:var(--mat-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-selected-focus-state-layer-color, var(--mat-sys-primary))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked+.mdc-checkbox__ripple{opacity:var(--mat-checkbox-selected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity));background-color:var(--mat-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox:active>.mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mat-checkbox-selected-pressed-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control+.mdc-checkbox__ripple{background-color:var(--mat-checkbox-unselected-hover-state-layer-color, var(--mat-sys-on-surface))}.mdc-checkbox .mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit;z-index:1;width:var(--mat-checkbox-state-layer-size, 40px);height:var(--mat-checkbox-state-layer-size, 40px);top:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);right:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - var(--mat-checkbox-state-layer-size, 40px))/2)}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1);-webkit-print-color-adjust:exact;color-adjust:exact;border-color:var(--mat-checkbox-unselected-icon-color, var(--mat-sys-on-surface-variant));top:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2);left:calc((var(--mat-checkbox-state-layer-size, 40px) - 18px)/2)}.mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__background{border-color:GrayText}}.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}@media(forced-colors: active){.mdc-checkbox__native-control:disabled:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:disabled:indeterminate~.mdc-checkbox__background{border-color:GrayText}}.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:checked)~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-hover-icon-color, var(--mat-sys-on-surface));background-color:rgba(0,0,0,0)}.mdc-checkbox:hover>.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox:hover>.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-hover-icon-color, var(--mat-sys-primary))}.mdc-checkbox__native-control:focus:focus:not(:checked)~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mat-checkbox-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mdc-checkbox__native-control:focus:focus:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:focus:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary));background-color:var(--mat-checkbox-selected-focus-icon-color, var(--mat-sys-primary))}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:var(--mat-checkbox-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox:hover>.mdc-checkbox__native-control~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__background{border-color:GrayText}}.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{background-color:var(--mat-checkbox-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:rgba(0,0,0,0)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms cubic-bezier(0.4, 0, 0.6, 1);color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__checkmark{color:CanvasText}}.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__checkmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__checkmark{color:GrayText}}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);border-color:var(--mat-checkbox-selected-checkmark-color, var(--mat-sys-on-primary))}@media(forced-colors: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:var(--mat-checkbox-disabled-selected-checkmark-color, var(--mat-sys-surface))}@media(forced-colors: active){.mdc-checkbox--disabled .mdc-checkbox__mixedmark,.mdc-checkbox--disabled.mat-mdc-checkbox-disabled-interactive .mdc-checkbox__mixedmark{border-color:GrayText}}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__checkmark{transition:opacity 180ms cubic-bezier(0, 0, 0.2, 1),transform 180ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background>.mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-touch-target,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__native-control,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__ripple,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mat-mdc-checkbox-ripple::before,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__checkmark>.mdc-checkbox__checkmark-path,.mat-mdc-checkbox._mat-animation-noopable>.mat-internal-form-field>.mdc-checkbox>.mdc-checkbox__background>.mdc-checkbox__mixedmark{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox .mat-internal-form-field{color:var(--mat-checkbox-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-checkbox-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-checkbox-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-checkbox-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-checkbox-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-checkbox-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive{pointer-events:auto}.mat-mdc-checkbox.mat-mdc-checkbox-disabled.mat-mdc-checkbox-disabled-interactive input{cursor:default}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}@media(forced-colors: active){.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{color:GrayText}}.mat-mdc-checkbox label:empty{display:none}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox .mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox .mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;left:50%;height:var(--mat-checkbox-touch-target-size, 48px);width:var(--mat-checkbox-touch-target-size, 48px);transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display, block)}.mat-mdc-checkbox .mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})(),ht=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[Af,Fe]})}return n})();var ko=class n{itemTypeFormServices=d(kn);itemTypesServices=d(Cn);itemTypes=new Map([]);ItemTypeEnum=zr;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-item-types"]],decls:32,vars:73,consts:[[3,"tooltip","control","srcImg"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"div"),x(4,"app-button-checkbox",0),y(5,"translate"),x(6,"app-button-checkbox",0),y(7,"translate"),x(8,"app-button-checkbox",0),y(9,"translate"),x(10,"app-button-checkbox",0),y(11,"translate"),x(12,"app-button-checkbox",0),y(13,"translate"),x(14,"app-button-checkbox",0),y(15,"translate"),x(16,"app-button-checkbox",0),y(17,"translate"),x(18,"app-button-checkbox",0),y(19,"translate"),x(20,"app-button-checkbox",0),y(21,"translate"),x(22,"app-button-checkbox",0),y(23,"translate"),x(24,"app-button-checkbox",0),y(25,"translate"),x(26,"app-button-checkbox",0),y(27,"translate"),x(28,"app-button-checkbox",0),y(29,"translate"),x(30,"app-button-checkbox",0),y(31,"translate"),v()),e&2&&(p(),M(E(2,43,"item-types.type-item")),p(3),h("tooltip",E(5,45,"item-types.coiffe"))("control",t.itemTypeFormServices.form.controls.casque)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.CASQUE)),p(2),h("tooltip",E(7,47,"item-types.amulette"))("control",t.itemTypeFormServices.form.controls.amulette)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.AMULETTE)),p(2),h("tooltip",E(9,49,"item-types.plastron"))("control",t.itemTypeFormServices.form.controls.plastron)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.PLASTRON)),p(2),h("tooltip",E(11,51,"item-types.anneau"))("control",t.itemTypeFormServices.form.controls.anneau)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.ANNEAU)),p(2),h("tooltip",E(13,53,"item-types.bottes"))("control",t.itemTypeFormServices.form.controls.bottes)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.BOTTES)),p(2),h("tooltip",E(15,55,"item-types.cape"))("control",t.itemTypeFormServices.form.controls.cape)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.CAPE)),p(2),h("tooltip",E(17,57,"item-types.epaulettes"))("control",t.itemTypeFormServices.form.controls.epaulettes)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.EPAULETTES)),p(2),h("tooltip",E(19,59,"item-types.ceinture"))("control",t.itemTypeFormServices.form.controls.ceinture)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.CEINTURE)),p(2),h("tooltip",E(21,61,"item-types.bouclier"))("control",t.itemTypeFormServices.form.controls.bouclier)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.BOUCLIER)),p(2),h("tooltip",E(23,63,"item-types.seconde-main"))("control",t.itemTypeFormServices.form.controls.dague)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.DAGUE)),p(2),h("tooltip",E(25,65,"item-types.une-main"))("control",t.itemTypeFormServices.form.controls.uneMain)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.UNE_MAIN)),p(2),h("tooltip",E(27,67,"item-types.deux-mains"))("control",t.itemTypeFormServices.form.controls.deuxMains)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.DEUX_MAINS)),p(2),h("tooltip",E(29,69,"item-types.accessoires"))("control",t.itemTypeFormServices.form.controls.accessoires)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.ACCESSOIRES)),p(2),h("tooltip",E(31,71,"item-types.familier"))("control",t.itemTypeFormServices.form.controls.familier)("srcImg",t.itemTypesServices.getLogo(t.ItemTypeEnum.FAMILIER)))},dependencies:[ne,ht,Ue,$,W],styles:["[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]})};var Io=class n{itemLevelFormService=d(ja);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-item-level"]],decls:16,vars:10,consts:[[3,"formGroup"],["type","number","matInput","","formControlName","levelMin"],["type","text","matInput","","formControlName","levelMin"],["type","number","matInput","","formControlName","levelMax"],["type","text","matInput","","formControlName","levelMax"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"form",0)(4,"mat-form-field")(5,"mat-label"),C(6),y(7,"translate"),v(),x(8,"input",1)(9,"input",2),v(),b(10,"mat-form-field")(11,"mat-label"),C(12),y(13,"translate"),v(),x(14,"input",3)(15,"input",4),v()()),e&2&&(p(),M(E(2,4,"item-level.level")),p(2),h("formGroup",t.itemLevelFormService.form),p(3),M(E(7,6,"item-level.level-min")),p(6),M(E(13,8,"item-level.level-max")))},dependencies:[ne,Tn,dt,vu,Be,Sn,_r,xu,Ye,pt,Ft,Cr,Tr,$,W],styles:["form[_ngcontent-%COMP%]{display:flex;justify-content:space-between}form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:45%}@media screen and (min-width:700px){input[type=number][_ngcontent-%COMP%]{display:none}}@media screen and (max-width:700px){input[type=text][_ngcontent-%COMP%]{display:none}}"]})};var Ao=class n{rareteItemFormService=d(qa);imageService=d(me);RarityItemEnum=lu;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-rarete-item"]],decls:18,vars:38,consts:[[3,"tooltip","control","srcImg"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"div"),x(4,"app-button-checkbox",0),y(5,"translate"),x(6,"app-button-checkbox",0),y(7,"translate"),x(8,"app-button-checkbox",0),y(9,"translate"),x(10,"app-button-checkbox",0),y(11,"translate"),x(12,"app-button-checkbox",0),y(13,"translate"),x(14,"app-button-checkbox",0),y(15,"translate"),x(16,"app-button-checkbox",0),y(17,"translate"),v()),e&2&&(p(),M(E(2,22,"rarete-item.label")),p(3),h("tooltip",E(5,24,"rarete-item.normal"))("control",t.rareteItemFormService.form.controls.normal)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.NORMAL)??""),p(2),h("tooltip",E(7,26,"rarete-item.rare"))("control",t.rareteItemFormService.form.controls.rare)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.RARE)??""),p(2),h("tooltip",E(9,28,"rarete-item.mythique"))("control",t.rareteItemFormService.form.controls.mythique)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.MYTHIQUE)??""),p(2),h("tooltip",E(11,30,"rarete-item.legendaire"))("control",t.rareteItemFormService.form.controls.legendaire)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.LEGENDAIRE)??""),p(2),h("tooltip",E(13,32,"rarete-item.souvenir"))("control",t.rareteItemFormService.form.controls.souvenir)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.SOUVENIR)??""),p(2),h("tooltip",E(15,34,"rarete-item.epique"))("control",t.rareteItemFormService.form.controls.epique)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.EPIQUE)??""),p(2),h("tooltip",E(17,36,"rarete-item.relique"))("control",t.rareteItemFormService.form.controls.relique)("srcImg",t.imageService.mapRarityUrl.get(t.RarityItemEnum.RELIQUE)??""))},dependencies:[ne,ht,Ue,$,W],styles:["[_nghost-%COMP%]   form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]})};var Mo=class n{maitrisesFormServices=d($a);imageService=d(me);IdActionsEnum=rt;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-filter-maitrises"]],decls:19,vars:27,consts:[[3,"formGroup"],[1,"group"],["tooltip","filter-maitrises.feu",3,"control","srcImg"],["tooltip","filter-maitrises.eau",3,"control","srcImg"],["tooltip","filter-maitrises.terre",3,"control","srcImg"],["tooltip","filter-maitrises.air",3,"control","srcImg"],["tooltip","filter-maitrises.melee",3,"control","srcImg"],["tooltip","filter-maitrises.distance",3,"control","srcImg"],["tooltip","filter-maitrises.critique",3,"control","srcImg"],["tooltip","filter-maitrises.dos",3,"control","srcImg"],["tooltip","filter-maitrises.soin",3,"control","srcImg"],["tooltip","filter-maitrises.berzerk",3,"control","srcImg"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"form",0)(4,"div",1),x(5,"app-button-checkbox",2)(6,"app-button-checkbox",3)(7,"app-button-checkbox",4)(8,"app-button-checkbox",5),v(),b(9,"h3"),C(10),y(11,"translate"),v(),b(12,"div",1),x(13,"app-button-checkbox",6)(14,"app-button-checkbox",7)(15,"app-button-checkbox",8)(16,"app-button-checkbox",9)(17,"app-button-checkbox",10)(18,"app-button-checkbox",11),v()()),e&2&&(p(),M(E(2,23,"filter-maitrises.maitrises-elementaires")),p(2),h("formGroup",t.maitrisesFormServices.form),p(2),h("control",t.maitrisesFormServices.form.controls.feu)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_FEU)),p(),h("control",t.maitrisesFormServices.form.controls.eau)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_EAU)),p(),h("control",t.maitrisesFormServices.form.controls.terre)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_TERRE)),p(),h("control",t.maitrisesFormServices.form.controls.air)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_AIR)),p(2),M(E(11,25,"filter-maitrises.maitrises-secondaires")),p(3),h("control",t.maitrisesFormServices.form.controls.melee)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_MELEE)),p(),h("control",t.maitrisesFormServices.form.controls.distance)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_DISTANCES)),p(),h("control",t.maitrisesFormServices.form.controls.critique)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_CRITIQUES)),p(),h("control",t.maitrisesFormServices.form.controls.dos)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_DOS)),p(),h("control",t.maitrisesFormServices.form.controls.soin)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_SOIN)),p(),h("control",t.maitrisesFormServices.form.controls.berzerk)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_BERZERK)))},dependencies:[ne,Tn,Sn,_r,ht,Ue,$,W],styles:["[_nghost-%COMP%]   .group[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}"]})};var Ro=(()=>{class n{_animationsDisabled=Re();state="unchecked";disabled=!1;appearance="full";constructor(){}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(t,i){t&2&&re("mat-pseudo-checkbox-indeterminate",i.state==="indeterminate")("mat-pseudo-checkbox-checked",i.state==="checked")("mat-pseudo-checkbox-disabled",i.disabled)("mat-pseudo-checkbox-minimal",i.appearance==="minimal")("mat-pseudo-checkbox-full",i.appearance==="full")("_mat-animation-noopable",i._animationsDisabled)},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},decls:0,vars:0,template:function(t,i){},styles:[`.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-minimal-selected-checkmark-color, var(--mat-sys-primary))}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full{border-color:var(--mat-pseudo-checkbox-full-unselected-icon-color, var(--mat-sys-on-surface-variant));border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-pseudo-checkbox-full-disabled-unselected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-pseudo-checkbox-full-selected-icon-color, var(--mat-sys-primary));border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-pseudo-checkbox-full-selected-checkmark-color, var(--mat-sys-on-primary))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-pseudo-checkbox-full-disabled-selected-icon-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-pseudo-checkbox-full-disabled-selected-checkmark-color, var(--mat-sys-surface))}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}
`],encapsulation:2,changeDetection:0})}return n})();var Mf=["text"],Rf=[[["mat-icon"]],"*"],Of=["mat-icon","*"];function Df(n,r){if(n&1&&x(0,"mat-pseudo-checkbox",1),n&2){let e=q();h("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function Nf(n,r){if(n&1&&x(0,"mat-pseudo-checkbox",3),n&2){let e=q();h("disabled",e.disabled)}}function Pf(n,r){if(n&1&&(b(0,"span",4),C(1),v()),n&2){let e=q();p(),mr("(",e.group.label,")")}}var Bi=new G("MAT_OPTION_PARENT_COMPONENT"),Ui=new G("MatOptgroup");var Fi=class{source;isUserInput;constructor(r,e=!1){this.source=r,this.isUserInput=e}},ft=(()=>{class n{_element=d(Ee);_changeDetectorRef=d(Me);_parent=d(Bi,{optional:!0});group=d(Ui,{optional:!0});_signalDisableRipple=!1;_selected=!1;_active=!1;_mostRecentViewValue="";get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}value;id=d(nt).getId("mat-option-");get disabled(){return this.group&&this.group.disabled||this._disabled()}set disabled(e){this._disabled.set(e)}_disabled=Le(!1);get disableRipple(){return this._signalDisableRipple?this._parent.disableRipple():!!this._parent?.disableRipple}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}onSelectionChange=new te;_text;_stateChanges=new ce;constructor(){let e=d(Ot);e.load(Lt),e.load(Zl),this._signalDisableRipple=!!this._parent&&El(this._parent.disableRipple)}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,t){let i=this._getHostElement();typeof i.focus=="function"&&i.focus(t)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Ke(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new Fi(this,e))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-option"]],viewQuery:function(t,i){if(t&1&&ut(Mf,7),t&2){let a;ue(a=de())&&(i._text=a.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(t,i){t&1&&A("click",function(){return i._selectViaInteraction()})("keydown",function(o){return i._handleKeydown(o)}),t&2&&(dr("id",i.id),ie("aria-selected",i.selected)("aria-disabled",i.disabled.toString()),re("mdc-list-item--selected",i.selected)("mat-mdc-option-multiple",i.multiple)("mat-mdc-option-active",i.active)("mdc-list-item--disabled",i.disabled))},inputs:{value:"value",id:"id",disabled:[2,"disabled","disabled",H]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],ngContentSelectors:Of,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(t,i){t&1&&(Ae(Rf),oe(0,Df,1,2,"mat-pseudo-checkbox",1),ge(1),b(2,"span",2,0),ge(4,1),v(),oe(5,Nf,1,1,"mat-pseudo-checkbox",3),oe(6,Pf,2,1,"span",4),x(7,"div",5)),t&2&&(se(i.multiple?0:-1),p(5),se(!i.multiple&&i.selected&&!i.hideSingleSelectionIndicator?5:-1),p(),se(i.group&&i.group._inert?6:-1),p(),h("matRippleTrigger",i._getHostElement())("matRippleDisabled",i.disabled||i.disableRipple))},dependencies:[Ro,wr],styles:[`.mat-mdc-option{-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;min-height:48px;padding:0 16px;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-option-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-option-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-option-label-text-size, var(--mat-sys-body-large-size));letter-spacing:var(--mat-option-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-option-label-text-weight, var(--mat-sys-body-large-weight))}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent));outline:0}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-active,.mat-mdc-option-multiple,:focus,:hover){background-color:var(--mat-option-selected-state-layer-color, var(--mat-sys-secondary-container))}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-active,.mat-mdc-option-multiple,:focus,:hover) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-option-selected-state-label-text-color, var(--mat-sys-on-secondary-container))}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}@media(forced-colors: active){.mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .mat-mdc-option.mdc-list-item--selected:not(:has(.mat-mdc-option-pseudo-checkbox))::after{right:auto;left:16px}}.mat-mdc-option-multiple{--mat-list-list-item-selected-container-color: var(--mat-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-focus-indicator::before{content:""}
`],encapsulation:2,changeDetection:0})}return n})();function Oo(n,r,e){if(e.length){let t=r.toArray(),i=e.toArray(),a=0;for(let o=0;o<n+1;o++)t[o].group&&t[o].group===i[a]&&a++;return a}return 0}function Do(n,r,e,t){return n<e?n:n+r>e+t?Math.max(0,n-t+r):e}var Jr=class{_multiple;_emitChanges;compareWith;_selection=new Set;_deselectedToEmit=[];_selectedToEmit=[];_selected;get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}changed=new ce;constructor(r=!1,e,t=!0,i){this._multiple=r,this._emitChanges=t,this.compareWith=i,e&&e.length&&(r?e.forEach(a=>this._markSelected(a)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...r){this._verifyValueAssignment(r),r.forEach(t=>this._markSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...r){this._verifyValueAssignment(r),r.forEach(t=>this._unmarkSelected(t));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...r){this._verifyValueAssignment(r);let e=this.selected,t=new Set(r.map(a=>this._getConcreteValue(a)));r.forEach(a=>this._markSelected(a)),e.filter(a=>!t.has(this._getConcreteValue(a,t))).forEach(a=>this._unmarkSelected(a));let i=this._hasQueuedChanges();return this._emitChangeEvent(),i}toggle(r){return this.isSelected(r)?this.deselect(r):this.select(r)}clear(r=!0){this._unmarkAll();let e=this._hasQueuedChanges();return r&&this._emitChangeEvent(),e}isSelected(r){return this._selection.has(this._getConcreteValue(r))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(r){this._multiple&&this.selected&&this._selected.sort(r)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(r){r=this._getConcreteValue(r),this.isSelected(r)||(this._multiple||this._unmarkAll(),this.isSelected(r)||this._selection.add(r),this._emitChanges&&this._selectedToEmit.push(r))}_unmarkSelected(r){r=this._getConcreteValue(r),this.isSelected(r)&&(this._selection.delete(r),this._emitChanges&&this._deselectedToEmit.push(r))}_unmarkAll(){this.isEmpty()||this._selection.forEach(r=>this._unmarkSelected(r))}_verifyValueAssignment(r){r.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(r,e){if(this.compareWith){e=e??this._selection;for(let t of e)if(this.compareWith(r,t))return t;return r}else return r}};var Xd=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[Fe]})}return n})();var qn=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[Sr,Xd,ft,Fe]})}return n})();var Ff=["trigger"],Bf=["panel"],Uf=[[["mat-select-trigger"]],"*"],jf=["mat-select-trigger","*"];function qf(n,r){if(n&1&&(b(0,"span",4),C(1),v()),n&2){let e=q();p(),M(e.placeholder)}}function Hf(n,r){n&1&&ge(0)}function Vf(n,r){if(n&1&&(b(0,"span",11),C(1),v()),n&2){let e=q(2);p(),M(e.triggerValue)}}function $f(n,r){if(n&1&&(b(0,"span",5),oe(1,Hf,1,0)(2,Vf,2,1,"span",11),v()),n&2){let e=q();p(),se(e.customTrigger?1:2)}}function zf(n,r){if(n&1){let e=fe();b(0,"div",12,1),A("keydown",function(i){B(e);let a=q();return U(a._handleKeydown(i))}),ge(2,1),v()}if(n&2){let e=q();et(Ol("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme())),re("mat-select-panel-animations-enabled",!e._animationsDisabled),h("ngClass",e.panelClass),ie("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var Gf=new G("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let n=d(Ne);return()=>xn(n)}}),Wf=new G("MAT_SELECT_CONFIG"),Jd=new G("MatSelectTrigger"),wc=class{source;value;constructor(r,e){this.source=r,this.value=e}},No=(()=>{class n{_viewportRuler=d(hi);_changeDetectorRef=d(Me);_elementRef=d(Ee);_dir=d(br,{optional:!0});_idGenerator=d(nt);_renderer=d(Gt);_parentFormField=d(Xa,{optional:!0});ngControl=d(gu,{self:!0,optional:!0});_liveAnnouncer=d(au);_defaultOptions=d(Wf,{optional:!0});_animationsDisabled=Re();_initialized=new ce;_cleanupDetach;options;optionGroups;customTrigger;_positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}];_scrollOptionIntoView(e){let t=this.options.toArray()[e];if(t){let i=this.panel.nativeElement,a=Oo(e,this.options,this.optionGroups),o=t._getHostElement();e===0&&a===1?i.scrollTop=0:i.scrollTop=Do(o.offsetTop,o.offsetHeight,i.scrollTop,i.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new wc(this,e)}_scrollStrategyFactory=d(Gf);_panelOpen=!1;_compareWith=(e,t)=>e===t;_uid=this._idGenerator.getId("mat-select-");_triggerAriaLabelledBy=null;_previousControl;_destroy=new ce;_errorStateTracker;stateChanges=new ce;disableAutomaticLabeling=!0;userAriaDescribedBy;_selectionModel;_keyManager;_preferredOverlayOrigin;_overlayWidth;_onChange=()=>{};_onTouched=()=>{};_valueId=this._idGenerator.getId("mat-select-value-");_scrollStrategy;_overlayPanelClass=this._defaultOptions?.overlayPanelClass||"";get focused(){return this._focused||this._panelOpen}_focused=!1;controlType="mat-select";trigger;panel;_overlayDir;panelClass;disabled=!1;get disableRipple(){return this._disableRipple()}set disableRipple(e){this._disableRipple.set(e)}_disableRipple=Le(!1);tabIndex=0;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1;get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}_placeholder;get required(){return this._required??this.ngControl?.control?.hasValidator(fu.required)??!1}set required(e){this._required=e,this.stateChanges.next()}_required;get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}_multiple=!1;disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1;get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}_value;ariaLabel="";ariaLabelledby;get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}typeaheadDebounceInterval;sortComparator;get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}_id;get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto";canSelectNullableOptions=this._defaultOptions?.canSelectNullableOptions??!1;optionSelectionChanges=nr(()=>{let e=this.options;return e?e.changes.pipe(Je(e),Y(()=>st(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(Y(()=>this.optionSelectionChanges))});openedChange=new te;_openedStream=this.openedChange.pipe(xe(e=>e),V(()=>{}));_closedStream=this.openedChange.pipe(xe(e=>!e),V(()=>{}));selectionChange=new te;valueChange=new te;constructor(){let e=d(Fu),t=d(bu,{optional:!0}),i=d(_r,{optional:!0}),a=d(new qr("tabindex"),{optional:!0});this.ngControl&&(this.ngControl.valueAccessor=this),this._defaultOptions?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=this._defaultOptions.typeaheadDebounceInterval),this._errorStateTracker=new Bu(e,this.ngControl,i,t,this.stateChanges),this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=a==null?0:parseInt(a)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Jr(this.multiple),this.stateChanges.next(),this._viewportRuler.change().pipe(ct(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(ct(this._destroy)).subscribe(e=>{e.added.forEach(t=>t.select()),e.removed.forEach(t=>t.deselect())}),this.options.changes.pipe(Je(null),ct(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),t=this.ngControl;if(e!==this._triggerAriaLabelledBy){let i=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?i.setAttribute("aria-labelledby",e):i.removeAttribute("aria-labelledby")}t&&(this._previousControl!==t.control&&(this._previousControl!==void 0&&t.disabled!==null&&t.disabled!==this.disabled&&(this.disabled=t.disabled),this._previousControl=t.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._cleanupDetach?.(),this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._cleanupDetach?.(),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._overlayDir.positionChange.pipe(ee(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()}),this._overlayDir.attachOverlay(),this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!0)))}_trackedModal=null;_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=`${this.id}-panel`;this._trackedModal&&$r(this._trackedModal,"aria-owns",t),mi(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;$r(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._exitAndDetach(),this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next(),Promise.resolve().then(()=>this.openedChange.emit(!1)))}_exitAndDetach(){if(this._animationsDisabled||!this.panel){this._detachOverlay();return}this._cleanupDetach?.(),this._cleanupDetach=()=>{t(),clearTimeout(i),this._cleanupDetach=void 0};let e=this.panel.nativeElement,t=this._renderer.listen(e,"animationend",a=>{a.animationName==="_mat-select-exit"&&(this._cleanupDetach?.(),this._detachOverlay())}),i=setTimeout(()=>{this._cleanupDetach?.(),this._detachOverlay()},200);e.classList.add("mat-select-panel-exit")}_detachOverlay(){this._overlayDir.detachOverlay(),this._changeDetectorRef.markForCheck()}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(t=>t.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let t=e.keyCode,i=t===40||t===38||t===37||t===39,a=t===13||t===32,o=this._keyManager;if(!o.isTyping()&&a&&!Ke(e)||(this.multiple||e.altKey)&&i)e.preventDefault(),this.open();else if(!this.multiple){let s=this.selected;o.onKeydown(e);let c=this.selected;c&&s!==c&&this._liveAnnouncer.announce(c.viewValue,1e4)}}_handleOpenKeydown(e){let t=this._keyManager,i=e.keyCode,a=i===40||i===38,o=t.isTyping();if(a&&e.altKey)e.preventDefault(),this.close();else if(!o&&(i===13||i===32)&&t.activeItem&&!Ke(e))e.preventDefault(),t.activeItem._selectViaInteraction();else if(!o&&this._multiple&&i===65&&e.ctrlKey){e.preventDefault();let s=this.options.some(c=>!c.disabled&&!c.selected);this.options.forEach(c=>{c.disabled||(s?c.select():c.deselect())})}else{let s=t.activeItemIndex;t.onKeydown(e),this._multiple&&a&&e.shiftKey&&t.activeItem&&t.activeItemIndex!==s&&t.activeItem._selectViaInteraction()}}_handleOverlayKeydown(e){e.keyCode===27&&!Ke(e)&&(e.preventDefault(),this.close())}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(t=>t.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(t=>this._selectOptionByValue(t)),this._sortValues();else{let t=this._selectOptionByValue(e);t?this._keyManager.updateActiveItem(t):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let t=this.options.find(i=>{if(this._selectionModel.isSelected(i))return!1;try{return(i.value!=null||this.canSelectNullableOptions)&&this._compareWith(i.value,e)}catch{return!1}});return t&&this._selectionModel.select(t),t}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_skipPredicate=e=>this.panelOpen?!1:e.disabled;_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof Gs?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new Ta(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=st(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(ct(e)).subscribe(t=>{this._onSelect(t.source,t.isUserInput),t.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),st(...this.options.map(t=>t._stateChanges)).pipe(ct(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,t){let i=this._selectionModel.isSelected(e);!this.canSelectNullableOptions&&e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(i!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),t&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),t&&this.focus())),i!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((t,i)=>this.sortComparator?this.sortComparator(t,i,e):e.indexOf(t)-e.indexOf(i)),this.stateChanges.next()}}_propagateChanges(e){let t;this.multiple?t=this.selected.map(i=>i.value):t=this.selected?this.selected.value:e,this._value=t,this.valueChange.emit(t),this._onChange(t),this.selectionChange.emit(this._getChangeEvent(t)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let t=0;t<this.options.length;t++)if(!this.options.get(t).disabled){e=t;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0&&!!this._overlayDir}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||null,t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId()||"";return this.ariaLabelledby&&(e+=" "+this.ariaLabelledby),e||(e=this._valueId),e}get describedByIds(){return this._elementRef.nativeElement.getAttribute("aria-describedby")?.split(" ")||[]}setDescribedByIds(e){let t=this._elementRef.nativeElement;e.length?t.setAttribute("aria-describedby",e.join(" ")):t.removeAttribute("aria-describedby")}onContainerClick(e){let t=bn(e);t&&(t.tagName==="MAT-OPTION"||t.classList.contains("cdk-overlay-backdrop")||t.closest(".mat-mdc-select-panel"))||(this.focus(),this.open())}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-select"]],contentQueries:function(t,i,a){if(t&1&&pr(a,Jd,5)(a,ft,5)(a,Ui,5),t&2){let o;ue(o=de())&&(i.customTrigger=o.first),ue(o=de())&&(i.options=o),ue(o=de())&&(i.optionGroups=o)}},viewQuery:function(t,i){if(t&1&&ut(Ff,5)(Bf,5)(Ws,5),t&2){let a;ue(a=de())&&(i.trigger=a.first),ue(a=de())&&(i.panel=a.first),ue(a=de())&&(i._overlayDir=a.first)}},hostAttrs:["role","combobox","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:21,hostBindings:function(t,i){t&1&&A("keydown",function(o){return i._handleKeydown(o)})("focus",function(){return i._onFocus()})("blur",function(){return i._onBlur()}),t&2&&(ie("id",i.id)("tabindex",i.disabled?-1:i.tabIndex)("aria-controls",i.panelOpen?i.id+"-panel":null)("aria-expanded",i.panelOpen)("aria-label",i.ariaLabel||null)("aria-required",i.required.toString())("aria-disabled",i.disabled.toString())("aria-invalid",i.errorState)("aria-activedescendant",i._getAriaActiveDescendant()),re("mat-mdc-select-disabled",i.disabled)("mat-mdc-select-invalid",i.errorState)("mat-mdc-select-required",i.required)("mat-mdc-select-empty",i.empty)("mat-mdc-select-multiple",i.multiple)("mat-select-open",i.panelOpen))},inputs:{userAriaDescribedBy:[0,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[2,"disabled","disabled",H],disableRipple:[2,"disableRipple","disableRipple",H],tabIndex:[2,"tabIndex","tabIndex",e=>e==null?0:Hr(e)],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",H],placeholder:"placeholder",required:[2,"required","required",H],multiple:[2,"multiple","multiple",H],disableOptionCentering:[2,"disableOptionCentering","disableOptionCentering",H],compareWith:"compareWith",value:"value",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[2,"typeaheadDebounceInterval","typeaheadDebounceInterval",Hr],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth",canSelectNullableOptions:[2,"canSelectNullableOptions","canSelectNullableOptions",H]},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],features:[tt([{provide:Lu,useExisting:n},{provide:Bi,useExisting:n}]),cr],ngContentSelectors:jf,decls:11,vars:9,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop","cdkConnectedOverlayUsePopover","inline",3,"detach","backdropClick","overlayKeydown","cdkConnectedOverlayDisableClose","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth","cdkConnectedOverlayFlexibleDimensions"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(t,i){if(t&1){let a=fe();Ae(Uf),b(0,"div",2,0),A("click",function(){return B(a),U(i.open())}),b(3,"div",3),oe(4,qf,2,1,"span",4)(5,$f,3,1,"span",5),v(),b(6,"div",6)(7,"div",7),mn(),b(8,"svg",8),x(9,"path",9),v()()()(),yl(10,zf,3,10,"ng-template",10),A("detach",function(){return B(a),U(i.close())})("backdropClick",function(){return B(a),U(i.close())})("overlayKeydown",function(s){return B(a),U(i._handleOverlayKeydown(s))})}if(t&2){let a=Mt(1);p(3),ie("id",i._valueId),p(),se(i.empty?4:5),p(6),h("cdkConnectedOverlayDisableClose",!0)("cdkConnectedOverlayPanelClass",i._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",i._scrollStrategy)("cdkConnectedOverlayOrigin",i._preferredOverlayOrigin||a)("cdkConnectedOverlayPositions",i._positions)("cdkConnectedOverlayWidth",i._overlayWidth)("cdkConnectedOverlayFlexibleDimensions",!0)}},dependencies:[Gs,Ws,Ul],styles:[`@keyframes _mat-select-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}@keyframes _mat-select-exit{from{opacity:1}to{opacity:0}}.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color, var(--mat-sys-on-surface));font-family:var(--mat-select-trigger-text-font, var(--mat-sys-body-large-font));line-height:var(--mat-select-trigger-text-line-height, var(--mat-sys-body-large-line-height));font-size:var(--mat-select-trigger-text-size, var(--mat-sys-body-large-size));font-weight:var(--mat-select-trigger-text-weight, var(--mat-sys-body-large-weight));letter-spacing:var(--mat-select-trigger-text-tracking, var(--mat-sys-body-large-tracking))}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12))}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-disabled .mat-mdc-select-placeholder{color:var(--mat-select-disabled-trigger-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color, var(--mat-sys-error))}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color, var(--mat-sys-primary))}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-select-open .mat-mdc-select-arrow{transform:rotate(180deg)}.mat-form-field-animations-enabled .mat-mdc-select-arrow{transition:transform 80ms linear}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}@media(forced-colors: active){.mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .mat-mdc-select-arrow svg{fill:GrayText}}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:relative;background-color:var(--mat-select-panel-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-select-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}.mat-select-panel-animations-enabled{animation:_mat-select-enter 120ms cubic-bezier(0, 0, 0.2, 1)}.mat-select-panel-animations-enabled.mat-select-panel-exit{animation:_mat-select-exit 100ms linear}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color, var(--mat-sys-on-surface-variant))}.mat-mdc-form-field:not(.mat-form-field-animations-enabled) .mat-mdc-select-placeholder,._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform, translateY(-8px))}
`],encapsulation:2,changeDetection:0})}return n})(),Po=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ve({type:n,selectors:[["mat-select-trigger"]],features:[tt([{provide:Jd,useExisting:n}])]})}return n})(),Lo=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[_n,qn,Fe,vn,Ye,qn]})}return n})();function Kf(n,r){if(n&1&&(b(0,"mat-option",1),C(1),y(2,"translate"),v()),n&2){let e=r.$implicit;h("value",e),p(),M(E(2,2,"sort-choice-enum."+e.valueOf()))}}var Fo=class n{sortChoiceFormService=d(La);SortChoiceEnumList=Object.values(mu);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-sort-choice"]],decls:7,vars:4,consts:[[3,"formControl"],[3,"value"]],template:function(e,t){e&1&&(b(0,"mat-form-field")(1,"mat-select",0)(2,"mat-select-trigger"),C(3),y(4,"translate"),v(),xt(5,Kf,3,4,"mat-option",1,Wt),v()()),e&2&&(p(),h("formControl",t.sortChoiceFormService.form),p(2),mr(" ",E(4,2,"sort-choice-enum."+t.sortChoiceFormService.form.value)," "),p(2),_t(t.SortChoiceEnumList))},dependencies:[Ye,pt,Lo,No,Po,ft,Dt,Be,ne,Qe,$,W],styles:["mat-button-toggle[_ngcontent-%COMP%]{color:var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}"]})};var Qf=["button"],Yf=["*"];function Xf(n,r){if(n&1&&(b(0,"div",2),x(1,"mat-pseudo-checkbox",6),v()),n&2){let e=q();p(),h("disabled",e.disabled)}}var Zd=new G("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:()=>({hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1,disabledInteractive:!1})}),ep=new G("MatButtonToggleGroup"),Jf={provide:wn,useExisting:pn(()=>ji),multi:!0},Bo=class{source;value;constructor(r,e){this.source=r,this.value=e}},ji=(()=>{class n{_changeDetector=d(Me);_dir=d(br,{optional:!0});_multiple=!1;_disabled=!1;_disabledInteractive=!1;_selectionModel;_rawValue;_controlValueAccessorChangeFn=()=>{};_onTouched=()=>{};_buttonToggles;appearance;get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}_name=d(nt).getId("mat-button-toggle-group-");vertical;get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(t=>t.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}valueChange=new te;get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e,this._markButtonsForCheck()}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}change=new te;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}_hideSingleSelectionIndicator;get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}_hideMultipleSelectionIndicator;constructor(){let e=d(Zd,{optional:!0});this.appearance=e&&e.appearance?e.appearance:"standard",this.hideSingleSelectionIndicator=e?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=e?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new Jr(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked)),this.multiple||this._initializeTabIndex()}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_keydown(e){if(this.multiple||this.disabled||Ke(e))return;let i=e.target.id,a=this._buttonToggles.toArray().findIndex(s=>s.buttonId===i),o=null;switch(e.keyCode){case 32:case 13:o=this._buttonToggles.get(a)||null;break;case 38:o=this._getNextButton(a,-1);break;case 37:o=this._getNextButton(a,this.dir==="ltr"?-1:1);break;case 40:o=this._getNextButton(a,1);break;case 39:o=this._getNextButton(a,this.dir==="ltr"?1:-1);break;default:return}o&&(e.preventDefault(),o._onButtonClick(),o.focus())}_emitChangeEvent(e){let t=new Bo(e,this.value);this._rawValue=t.value,this._controlValueAccessorChangeFn(t.value),this.change.emit(t)}_syncButtonToggle(e,t,i=!1,a=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?t?this._selectionModel.select(e):this._selectionModel.deselect(e):a=!0,a?Promise.resolve().then(()=>this._updateModelValue(e,i)):this._updateModelValue(e,i)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(t=>e.value!=null&&t===e.value):e.value===this._rawValue}_initializeTabIndex(){if(this._buttonToggles.forEach(e=>{e.tabIndex=-1}),this.selected)this.selected.tabIndex=0;else for(let e=0;e<this._buttonToggles.length;e++){let t=this._buttonToggles.get(e);if(!t.disabled){t.tabIndex=0;break}}}_getNextButton(e,t){let i=this._buttonToggles;for(let a=1;a<=i.length;a++){let o=(e+t*a+i.length)%i.length,s=i.get(o);if(s&&!s.disabled)return s}return null}_setSelectionByValue(e){if(this._rawValue=e,!this._buttonToggles)return;let t=this._buttonToggles.toArray();if(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(i=>this._selectValue(i,t))):(this._clearSelection(),this._selectValue(e,t)),!this.multiple&&t.every(i=>i.tabIndex===-1)){for(let i of t)if(!i.disabled){i.tabIndex=0;break}}}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>{e.checked=!1,this.multiple||(e.tabIndex=-1)})}_selectValue(e,t){for(let i of t)if(i.value===e){i.checked=!0,this._selectionModel.select(i),this.multiple||(i.tabIndex=0);break}}_updateModelValue(e,t){t&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ve({type:n,selectors:[["mat-button-toggle-group"]],contentQueries:function(t,i,a){if(t&1&&pr(a,zn,5),t&2){let o;ue(o=de())&&(i._buttonToggles=o)}},hostAttrs:[1,"mat-button-toggle-group"],hostVars:6,hostBindings:function(t,i){t&1&&A("keydown",function(o){return i._keydown(o)}),t&2&&(ie("role",i.multiple?"group":"radiogroup")("aria-disabled",i.disabled),re("mat-button-toggle-vertical",i.vertical)("mat-button-toggle-group-appearance-standard",i.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[2,"vertical","vertical",H],value:"value",multiple:[2,"multiple","multiple",H],disabled:[2,"disabled","disabled",H],disabledInteractive:[2,"disabledInteractive","disabledInteractive",H],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",H],hideMultipleSelectionIndicator:[2,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",H]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],features:[tt([Jf,{provide:ep,useExisting:n}])]})}return n})(),zn=(()=>{class n{_changeDetectorRef=d(Me);_elementRef=d(Ee);_focusMonitor=d(Vr);_idGenerator=d(nt);_animationDisabled=Re();_checked=!1;ariaLabel;ariaLabelledby=null;_buttonElement;buttonToggleGroup;get buttonId(){return`${this.id}-button`}id;name;value;get tabIndex(){return this._tabIndex()}set tabIndex(e){this._tabIndex.set(e)}_tabIndex;disableRipple;get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}_appearance;get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}_disabled=!1;get disabledInteractive(){return this._disabledInteractive||this.buttonToggleGroup!==null&&this.buttonToggleGroup.disabledInteractive}set disabledInteractive(e){this._disabledInteractive=e}_disabledInteractive;change=new te;constructor(){d(Ot).load(Lt);let e=d(ep,{optional:!0}),t=d(new qr("tabindex"),{optional:!0})||"",i=d(Zd,{optional:!0});this._tabIndex=Le(parseInt(t)||0),this.buttonToggleGroup=e,this.appearance=i&&i.appearance?i.appearance:"standard",this.disabledInteractive=i?.disabledInteractive??!1}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||this._idGenerator.getId("mat-button-toggle-"),e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._animationDisabled||this._elementRef.nativeElement.classList.add("mat-button-toggle-animations-enabled"),this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){if(this.disabled)return;let e=this.isSingleSelector()?!0:!this._checked;if(e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.isSingleSelector()){let t=this.buttonToggleGroup._buttonToggles.find(i=>i.tabIndex===0);t&&(t.tabIndex=-1),this.tabIndex=0}this.change.emit(new Bo(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this.isSingleSelector()?this.buttonToggleGroup.name:this.name||null}isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-button-toggle"]],viewQuery:function(t,i){if(t&1&&ut(Qf,5),t&2){let a;ue(a=de())&&(i._buttonElement=a.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:14,hostBindings:function(t,i){t&1&&A("focus",function(){return i.focus()}),t&2&&(ie("aria-label",null)("aria-labelledby",null)("id",i.id)("name",null),re("mat-button-toggle-standalone",!i.buttonToggleGroup)("mat-button-toggle-checked",i.checked)("mat-button-toggle-disabled",i.disabled)("mat-button-toggle-disabled-interactive",i.disabledInteractive)("mat-button-toggle-appearance-standard",i.appearance==="standard"))},inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[2,"disableRipple","disableRipple",H],appearance:"appearance",checked:[2,"checked","checked",H],disabled:[2,"disabled","disabled",H],disabledInteractive:[2,"disabledInteractive","disabledInteractive",H]},outputs:{change:"change"},exportAs:["matButtonToggle"],ngContentSelectors:Yf,decls:7,vars:13,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-checkbox-wrapper"],[1,"mat-button-toggle-label-content"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"],["state","checked","aria-hidden","true","appearance","minimal",3,"disabled"]],template:function(t,i){if(t&1){let a=fe();Ae(),b(0,"button",1,0),A("click",function(){return B(a),U(i._onButtonClick())}),oe(2,Xf,2,1,"div",2),b(3,"span",3),ge(4),v()(),x(5,"span",4)(6,"span",5)}if(t&2){let a=Mt(1);h("id",i.buttonId)("disabled",i.disabled&&!i.disabledInteractive||null),ie("role",i.isSingleSelector()?"radio":"button")("tabindex",i.disabled&&!i.disabledInteractive?-1:i.tabIndex)("aria-pressed",i.isSingleSelector()?null:i.checked)("aria-checked",i.isSingleSelector()?i.checked:null)("name",i._getButtonName())("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-disabled",i.disabled&&i.disabledInteractive?"true":null),p(2),se(i.buttonToggleGroup&&(!i.buttonToggleGroup.multiple&&!i.buttonToggleGroup.hideSingleSelectionIndicator||i.buttonToggleGroup.multiple&&!i.buttonToggleGroup.hideMultipleSelectionIndicator)?2:-1),p(4),h("matRippleTrigger",a)("matRippleDisabled",i.disableRipple||i.disabled)}},dependencies:[wr,Ro],styles:[`.mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);border-radius:var(--mat-button-toggle-legacy-shape);transform:translateZ(0)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}@media(forced-colors: active){.mat-button-toggle-standalone,.mat-button-toggle-group{outline:solid 1px}}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container))}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}@media(forced-colors: active){.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{outline:0}}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-button-toggle-legacy-text-color);font-family:var(--mat-button-toggle-legacy-label-text-font);font-size:var(--mat-button-toggle-legacy-label-text-size);line-height:var(--mat-button-toggle-legacy-label-text-line-height);font-weight:var(--mat-button-toggle-legacy-label-text-weight);letter-spacing:var(--mat-button-toggle-legacy-label-text-tracking);--mat-pseudo-checkbox-minimal-selected-checkmark-color: var(--mat-button-toggle-legacy-selected-state-text-color)}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-button-toggle-legacy-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle-checkbox-wrapper{display:inline-block;justify-content:flex-start;align-items:center;width:0;height:18px;line-height:18px;overflow:hidden;box-sizing:border-box;position:absolute;top:50%;left:16px;transform:translate3d(0, -50%, 0)}[dir=rtl] .mat-button-toggle-checkbox-wrapper{left:auto;right:16px}.mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:12px}[dir=rtl] .mat-button-toggle-appearance-standard .mat-button-toggle-checkbox-wrapper{left:auto;right:12px}.mat-button-toggle-checked .mat-button-toggle-checkbox-wrapper{width:18px}.mat-button-toggle-animations-enabled .mat-button-toggle-checkbox-wrapper{transition:width 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-checkbox-wrapper{transition:none}.mat-button-toggle-checked{color:var(--mat-button-toggle-legacy-selected-state-text-color);background-color:var(--mat-button-toggle-legacy-selected-state-background-color)}.mat-button-toggle-disabled{pointer-events:none;color:var(--mat-button-toggle-legacy-disabled-state-text-color);background-color:var(--mat-button-toggle-legacy-disabled-state-background-color);--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color: var(--mat-button-toggle-legacy-disabled-state-text-color)}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-button-toggle-legacy-disabled-selected-state-background-color)}.mat-button-toggle-disabled-interactive{pointer-events:auto}.mat-button-toggle-appearance-standard{color:var(--mat-button-toggle-text-color, var(--mat-sys-on-surface));background-color:var(--mat-button-toggle-background-color, transparent);font-family:var(--mat-button-toggle-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-toggle-label-text-size, var(--mat-sys-label-large-size));line-height:var(--mat-button-toggle-label-text-line-height, var(--mat-sys-label-large-line-height));font-weight:var(--mat-button-toggle-label-text-weight, var(--mat-sys-label-large-weight));letter-spacing:var(--mat-button-toggle-label-text-tracking, var(--mat-sys-label-large-tracking))}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-button-toggle-divider-color, var(--mat-sys-outline))}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-button-toggle-disabled-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-toggle-disabled-state-background-color, transparent)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-pseudo-checkbox-minimal-disabled-selected-checkmark-color: var(--mat-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-button-toggle-disabled-selected-state-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-toggle-disabled-selected-state-background-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-button-toggle-state-layer-color, var(--mat-sys-on-surface))}.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{opacity:var(--mat-button-toggle-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-button-toggle-appearance-standard.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-button-toggle-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}@media(hover: none){.mat-button-toggle-appearance-standard:hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-button-toggle-legacy-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-button-toggle-height, 40px)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-button-toggle-legacy-state-layer-color)}@media(forced-colors: active){.mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-animations-enabled .mat-button-toggle-button{transition:padding 150ms 45ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-button-toggle-vertical .mat-button-toggle-button{transition:none}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:30px}[dir=rtl] .mat-button-toggle-checked .mat-button-toggle-button:has(.mat-button-toggle-checkbox-wrapper){padding-left:0;padding-right:30px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius: var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard:not(.mat-button-toggle-vertical) .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-bottom-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-bottom-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large));border-top-left-radius:var(--mat-button-toggle-shape, var(--mat-sys-corner-extra-large))}
`],encapsulation:2,changeDetection:0})}return n})(),Uo=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[Sr,zn,Fe]})}return n})();var jo=class n{onlyNoSecondaryFormService=d(Fa);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-only-no-secondary"]],decls:11,vars:11,consts:[[3,"change","checked"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"section")(4,"mat-button-toggle-group")(5,"mat-button-toggle",0),A("change",function(){return t.onlyNoSecondaryFormService.setValue(!0)}),C(6),y(7,"translate"),v(),b(8,"mat-button-toggle",0),A("change",function(){return t.onlyNoSecondaryFormService.setValue(!1)}),C(9),y(10,"translate"),v()()()),e&2&&(p(),M(E(2,5,"only-no-secondary.label")),p(4),h("checked",t.onlyNoSecondaryFormService.form.value),p(),M(E(7,7,"only-no-secondary.oui")),p(2),h("checked",!t.onlyNoSecondaryFormService.form.value),p(),M(E(10,9,"only-no-secondary.non")))},dependencies:[Uo,ji,zn,$,W],styles:["mat-button-toggle[_ngcontent-%COMP%]{color:var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}"]})};function Zf(n,r){n&1&&C(0,", ")}function e0(n,r){if(n&1&&(C(0),y(1,"translate"),oe(2,Zf,1,0)),n&2){let e=r.$implicit,t=r.$index,i=r.$count;mr(" ",E(1,2,"elem-maitrises-mecanism-enum."+e.valueOf())),p(2),se(t!==i-1?2:-1)}}function t0(n,r){if(n&1&&xt(0,e0,3,4,null,null,Wt),n&2){let e=q();_t(e.modifierMecanismFormService.form.value)}}function r0(n,r){if(n&1&&(b(0,"mat-option",1),C(1),y(2,"translate"),v()),n&2){let e=r.$implicit;h("value",e),p(),M(E(2,2,"elem-maitrises-mecanism-enum."+e.valueOf()))}}var qo=class n{modifierMecanismFormService=d(Ua);ElemMaitrisesMecanismEnumList=Object.values(_u);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-modifier-mecanism"]],decls:12,vars:8,consts:[["multiple","",3,"formControl"],[3,"value"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"mat-form-field")(4,"mat-label"),C(5),y(6,"translate"),v(),b(7,"mat-select",0)(8,"mat-select-trigger"),oe(9,t0,2,0),v(),xt(10,r0,3,4,"mat-option",1,Wt),v()()),e&2&&(p(),M(E(2,4,"modifier-elem-maitrises.label")),p(4),M(E(6,6,"modifier-elem-maitrises.mecaniques")),p(2),h("formControl",t.modifierMecanismFormService.form),p(2),se(t.modifierMecanismFormService.form.value.length?9:-1),p(),_t(t.ElemMaitrisesMecanismEnumList))},dependencies:[Ye,pt,Ft,Lo,No,Po,ft,Dt,Be,ne,Qe,$,W],encapsulation:2})};var i0=["panel"],a0=["*"];function o0(n,r){if(n&1&&(ur(0,"div",1,0),ge(2),jr()),n&2){let e=r.id,t=q();et(t._classList),re("mat-mdc-autocomplete-visible",t.showPanel)("mat-mdc-autocomplete-hidden",!t.showPanel)("mat-autocomplete-panel-animations-enabled",!t._animationsDisabled)("mat-primary",t._color==="primary")("mat-accent",t._color==="accent")("mat-warn",t._color==="warn"),dr("id",t.id),ie("aria-label",t.ariaLabel||null)("aria-labelledby",t._getPanelAriaLabelledby(e))}}var Tc=class{source;option;constructor(r,e){this.source=r,this.option=e}},rp=new G("mat-autocomplete-default-options",{providedIn:"root",factory:()=>({autoActiveFirstOption:!1,autoSelectActiveOption:!1,hideSingleSelectionIndicator:!1,requireSelection:!1,hasBackdrop:!1})}),np=(()=>{class n{_changeDetectorRef=d(Me);_elementRef=d(Ee);_defaults=d(rp);_animationsDisabled=Re();_activeOptionChanges=It.EMPTY;_keyManager;showPanel=!1;get isOpen(){return this._isOpen&&this.showPanel}_isOpen=!1;_latestOpeningTrigger;_setColor(e){this._color=e,this._changeDetectorRef.markForCheck()}_color;template;panel;options;optionGroups;ariaLabel;ariaLabelledby;displayWith=null;autoActiveFirstOption;autoSelectActiveOption;requireSelection;panelWidth;disableRipple;optionSelected=new te;opened=new te;closed=new te;optionActivated=new te;set classList(e){this._classList=e,this._elementRef.nativeElement.className=""}_classList;get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}_hideSingleSelectionIndicator;_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}id=d(nt).getId("mat-autocomplete-");inertGroups;constructor(){let e=d(Sa);this.inertGroups=e?.SAFARI||!1,this.autoActiveFirstOption=!!this._defaults.autoActiveFirstOption,this.autoSelectActiveOption=!!this._defaults.autoSelectActiveOption,this.requireSelection=!!this._defaults.requireSelection,this._hideSingleSelectionIndicator=this._defaults.hideSingleSelectionIndicator??!1}ngAfterContentInit(){this._keyManager=new Ta(this.options).withWrap().skipPredicate(this._skipPredicate),this._activeOptionChanges=this._keyManager.change.subscribe(e=>{this.isOpen&&this.optionActivated.emit({source:this,option:this.options.toArray()[e]||null})}),this._setVisibility()}ngOnDestroy(){this._keyManager?.destroy(),this._activeOptionChanges.unsubscribe()}_setScrollTop(e){this.panel&&(this.panel.nativeElement.scrollTop=e)}_getScrollTop(){return this.panel?this.panel.nativeElement.scrollTop:0}_setVisibility(){this.showPanel=!!this.options?.length,this._changeDetectorRef.markForCheck()}_emitSelectEvent(e){let t=new Tc(this,e);this.optionSelected.emit(t)}_getPanelAriaLabelledby(e){if(this.ariaLabel)return null;let t=e?e+" ":"";return this.ariaLabelledby?t+this.ariaLabelledby:e}_skipPredicate(){return!1}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-autocomplete"]],contentQueries:function(t,i,a){if(t&1&&pr(a,ft,5)(a,Ui,5),t&2){let o;ue(o=de())&&(i.options=o),ue(o=de())&&(i.optionGroups=o)}},viewQuery:function(t,i){if(t&1&&ut(fa,7)(i0,5),t&2){let a;ue(a=de())&&(i.template=a.first),ue(a=de())&&(i.panel=a.first)}},hostAttrs:[1,"mat-mdc-autocomplete"],inputs:{ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],displayWith:"displayWith",autoActiveFirstOption:[2,"autoActiveFirstOption","autoActiveFirstOption",H],autoSelectActiveOption:[2,"autoSelectActiveOption","autoSelectActiveOption",H],requireSelection:[2,"requireSelection","requireSelection",H],panelWidth:"panelWidth",disableRipple:[2,"disableRipple","disableRipple",H],classList:[0,"class","classList"],hideSingleSelectionIndicator:[2,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",H]},outputs:{optionSelected:"optionSelected",opened:"opened",closed:"closed",optionActivated:"optionActivated"},exportAs:["matAutocomplete"],features:[tt([{provide:Bi,useExisting:n}])],ngContentSelectors:a0,decls:1,vars:0,consts:[["panel",""],["role","listbox",1,"mat-mdc-autocomplete-panel","mdc-menu-surface","mdc-menu-surface--open",3,"id"]],template:function(t,i){t&1&&(Ae(),ba(0,o0,3,17,"ng-template"))},styles:[`div.mat-mdc-autocomplete-panel{width:100%;max-height:256px;visibility:hidden;transform-origin:center top;overflow:auto;padding:8px 0;box-sizing:border-box;position:relative;border-radius:var(--mat-autocomplete-container-shape, var(--mat-sys-corner-extra-small));box-shadow:var(--mat-autocomplete-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));background-color:var(--mat-autocomplete-background-color, var(--mat-sys-surface-container))}@media(forced-colors: active){div.mat-mdc-autocomplete-panel{outline:solid 1px}}.cdk-overlay-pane:not(.mat-mdc-autocomplete-panel-above) div.mat-mdc-autocomplete-panel{border-top-left-radius:0;border-top-right-radius:0}.mat-mdc-autocomplete-panel-above div.mat-mdc-autocomplete-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:center bottom}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-visible{visibility:visible}div.mat-mdc-autocomplete-panel.mat-mdc-autocomplete-hidden,.cdk-overlay-pane:has(>.mat-mdc-autocomplete-hidden){visibility:hidden;pointer-events:none}@keyframes _mat-autocomplete-enter{from{opacity:0;transform:scaleY(0.8)}to{opacity:1;transform:none}}.mat-autocomplete-panel-animations-enabled{animation:_mat-autocomplete-enter 120ms cubic-bezier(0, 0, 0.2, 1)}mat-autocomplete{display:none}
`],encapsulation:2,changeDetection:0})}return n})();var s0={provide:wn,useExisting:pn(()=>Cc),multi:!0};var c0=new G("mat-autocomplete-scroll-strategy",{providedIn:"root",factory:()=>{let n=d(Ne);return()=>xn(n)}}),Cc=(()=>{class n{_environmentInjector=d(or);_element=d(Ee);_injector=d(Ne);_viewContainerRef=d(At);_zone=d(Ze);_changeDetectorRef=d(Me);_dir=d(br,{optional:!0});_formField=d(Xa,{optional:!0,host:!0});_viewportRuler=d(hi);_scrollStrategy=d(c0);_renderer=d(Gt);_animationsDisabled=Re();_defaults=d(rp,{optional:!0});_overlayRef;_portal;_componentDestroyed=!1;_initialized=new ce;_keydownSubscription;_outsideClickSubscription;_cleanupWindowBlur;_previousValue;_valueOnAttach;_valueOnLastKeydown;_positionStrategy;_manuallyFloatingLabel=!1;_closingActionsSubscription;_viewportSubscription=It.EMPTY;_breakpointObserver=d(iu);_handsetLandscapeSubscription=It.EMPTY;_canOpenOnNextFocus=!0;_valueBeforeAutoSelection;_pendingAutoselectedOption;_closeKeyEventStream=new ce;_overlayPanelClass=eu(this._defaults?.overlayPanelClass||[]);_windowBlurHandler=()=>{this._canOpenOnNextFocus=this.panelOpen||!this._hasFocus()};_onChange=()=>{};_onTouched=()=>{};autocomplete;position="auto";connectedTo;autocompleteAttribute="off";autocompleteDisabled;constructor(){}_aboveClass="mat-mdc-autocomplete-panel-above";ngAfterViewInit(){this._initialized.next(),this._initialized.complete(),this._cleanupWindowBlur=this._renderer.listen("window","blur",this._windowBlurHandler)}ngOnChanges(e){e.position&&this._positionStrategy&&(this._setStrategyPositions(this._positionStrategy),this.panelOpen&&this._overlayRef.updatePosition())}ngOnDestroy(){this._cleanupWindowBlur?.(),this._handsetLandscapeSubscription.unsubscribe(),this._viewportSubscription.unsubscribe(),this._componentDestroyed=!0,this._destroyPanel(),this._closeKeyEventStream.complete(),this._clearFromModal()}get panelOpen(){return this._overlayAttached&&this.autocomplete.showPanel}_overlayAttached=!1;openPanel(){this._openPanelInternal()}closePanel(){this._resetLabel(),this._overlayAttached&&(this.panelOpen&&this._zone.run(()=>{this.autocomplete.closed.emit()}),this.autocomplete._latestOpeningTrigger===this&&(this.autocomplete._isOpen=!1,this.autocomplete._latestOpeningTrigger=null),this._overlayAttached=!1,this._pendingAutoselectedOption=null,this._overlayRef&&this._overlayRef.hasAttached()&&(this._overlayRef.detach(),this._closingActionsSubscription.unsubscribe()),this._updatePanelState(),this._componentDestroyed||this._changeDetectorRef.detectChanges(),this._trackedModal&&$r(this._trackedModal,"aria-owns",this.autocomplete.id))}updatePosition(){this._overlayAttached&&this._overlayRef.updatePosition()}get panelClosingActions(){return st(this.optionSelections,this.autocomplete._keyManager.tabOut.pipe(xe(()=>this._overlayAttached)),this._closeKeyEventStream,this._getOutsideClickStream(),this._overlayRef?this._overlayRef.detachments().pipe(xe(()=>this._overlayAttached)):P()).pipe(V(e=>e instanceof Fi?e:null))}optionSelections=nr(()=>{let e=this.autocomplete?this.autocomplete.options:null;return e?e.changes.pipe(Je(e),Y(()=>st(...e.map(t=>t.onSelectionChange)))):this._initialized.pipe(Y(()=>this.optionSelections))});get activeOption(){return this.autocomplete&&this.autocomplete._keyManager?this.autocomplete._keyManager.activeItem:null}_getOutsideClickStream(){return new Vt(e=>{let t=a=>{let o=bn(a),s=this._formField?this._formField.getConnectedOverlayOrigin().nativeElement:null,c=this.connectedTo?this.connectedTo.elementRef.nativeElement:null;this._overlayAttached&&o!==this._element.nativeElement&&!this._hasFocus()&&(!s||!s.contains(o))&&(!c||!c.contains(o))&&this._overlayRef&&!this._overlayRef.overlayElement.contains(o)&&e.next(a)},i=[this._renderer.listen("document","click",t),this._renderer.listen("document","auxclick",t),this._renderer.listen("document","touchend",t)];return()=>{i.forEach(a=>a())}})}writeValue(e){Promise.resolve(null).then(()=>this._assignOptionValue(e))}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this._element.nativeElement.disabled=e}_handleKeydown(e){let t=e,i=t.keyCode,a=Ke(t);if(i===27&&!a&&t.preventDefault(),this._valueOnLastKeydown=this._element.nativeElement.value,this.activeOption&&i===13&&this.panelOpen&&!a)this.activeOption._selectViaInteraction(),this._resetActiveItem(),t.preventDefault();else if(this.autocomplete){let o=this.autocomplete._keyManager.activeItem,s=i===38||i===40;i===9||s&&!a&&this.panelOpen?this.autocomplete._keyManager.onKeydown(t):s&&this._canOpen()&&this._openPanelInternal(this._valueOnLastKeydown),(s||this.autocomplete._keyManager.activeItem!==o)&&(this._scrollToOption(this.autocomplete._keyManager.activeItemIndex||0),this.autocomplete.autoSelectActiveOption&&this.activeOption&&(this._pendingAutoselectedOption||(this._valueBeforeAutoSelection=this._valueOnLastKeydown),this._pendingAutoselectedOption=this.activeOption,this._assignOptionValue(this.activeOption.value)))}}_handleInput(e){let t=e.target,i=t.value;if(t.type==="number"&&(i=i==""?null:parseFloat(i)),this._previousValue!==i){if(this._previousValue=i,this._pendingAutoselectedOption=null,(!this.autocomplete||!this.autocomplete.requireSelection)&&this._onChange(i),!i)this._clearPreviousSelectedOption(null,!1);else if(this.panelOpen&&!this.autocomplete.requireSelection){let a=this.autocomplete.options?.find(o=>o.selected);if(a){let o=this._getDisplayValue(a.value);i!==o&&a.deselect(!1)}}if(this._canOpen()&&this._hasFocus()){let a=this._valueOnLastKeydown??this._element.nativeElement.value;this._valueOnLastKeydown=null,this._openPanelInternal(a)}}}_handleFocus(){this._canOpenOnNextFocus?this._canOpen()&&(this._previousValue=this._element.nativeElement.value,this._attachOverlay(this._previousValue),this._floatLabel(!0)):this._canOpenOnNextFocus=!0}_handleClick(){this._canOpen()&&!this.panelOpen&&this._openPanelInternal()}_hasFocus(){return tu()===this._element.nativeElement}_floatLabel(e=!1){this._formField&&this._formField.floatLabel==="auto"&&(e?this._formField._animateAndLockLabel():this._formField.floatLabel="always",this._manuallyFloatingLabel=!0)}_resetLabel(){this._manuallyFloatingLabel&&(this._formField&&(this._formField.floatLabel="auto"),this._manuallyFloatingLabel=!1)}_subscribeToClosingActions(){let e=new Vt(i=>{li(()=>{i.next()},{injector:this._environmentInjector})}),t=this.autocomplete.options?.changes.pipe(le(()=>this._positionStrategy.reapplyLastPosition()),sl(0))??P();return st(e,t).pipe(Y(()=>this._zone.run(()=>{let i=this.panelOpen;return this._resetActiveItem(),this._updatePanelState(),this._changeDetectorRef.detectChanges(),this.panelOpen&&this._overlayRef.updatePosition(),i!==this.panelOpen&&(this.panelOpen?this._emitOpened():this.autocomplete.closed.emit()),this.panelClosingActions})),ee(1)).subscribe(i=>this._setValueAndClose(i))}_emitOpened(){this.autocomplete.opened.emit()}_destroyPanel(){this._overlayRef&&(this.closePanel(),this._overlayRef.dispose(),this._overlayRef=null)}_getDisplayValue(e){let t=this.autocomplete;return t&&t.displayWith?t.displayWith(e):e}_assignOptionValue(e){let t=this._getDisplayValue(e);e==null&&this._clearPreviousSelectedOption(null,!1),this._updateNativeInputValue(t??"")}_updateNativeInputValue(e){this._formField?this._formField._control.value=e:this._element.nativeElement.value=e,this._previousValue=e}_setValueAndClose(e){let t=this.autocomplete,i=e?e.source:this._pendingAutoselectedOption;i?(this._clearPreviousSelectedOption(i),this._assignOptionValue(i.value),this._onChange(i.value),t._emitSelectEvent(i),this._element.nativeElement.focus()):t.requireSelection&&this._element.nativeElement.value!==this._valueOnAttach&&(this._clearPreviousSelectedOption(null),this._assignOptionValue(null),this._onChange(null)),this.closePanel()}_clearPreviousSelectedOption(e,t){this.autocomplete?.options?.forEach(i=>{i!==e&&i.selected&&i.deselect(t)})}_openPanelInternal(e=this._element.nativeElement.value){if(this._attachOverlay(e),this._floatLabel(),this._trackedModal){let t=this.autocomplete.id;mi(this._trackedModal,"aria-owns",t)}}_attachOverlay(e){if(!this.autocomplete)return;let t=this._overlayRef;t?(this._positionStrategy.setOrigin(this._getConnectedElement()),t.updateSize({width:this._getPanelWidth()})):(this._portal=new Ca(this.autocomplete.template,this._viewContainerRef,{id:this._formField?.getLabelId()}),t=Aa(this._injector,this._getOverlayConfig()),this._overlayRef=t,this._viewportSubscription=this._viewportRuler.change().subscribe(()=>{this.panelOpen&&t&&t.updateSize({width:this._getPanelWidth()})}),this._handsetLandscapeSubscription=this._breakpointObserver.observe(su.HandsetLandscape).subscribe(a=>{a.matches?this._positionStrategy.withFlexibleDimensions(!0).withGrowAfterOpen(!0).withViewportMargin(8):this._positionStrategy.withFlexibleDimensions(!1).withGrowAfterOpen(!1).withViewportMargin(0)})),t&&!t.hasAttached()&&(t.attach(this._portal),this._valueOnAttach=e,this._valueOnLastKeydown=null,this._closingActionsSubscription=this._subscribeToClosingActions());let i=this.panelOpen;this.autocomplete._isOpen=this._overlayAttached=!0,this.autocomplete._latestOpeningTrigger=this,this.autocomplete._setColor(this._formField?.color),this._updatePanelState(),this._applyModalPanelOwnership(),this.panelOpen&&i!==this.panelOpen&&this._emitOpened()}_handlePanelKeydown=e=>{(e.keyCode===27&&!Ke(e)||e.keyCode===38&&Ke(e,"altKey"))&&(this._pendingAutoselectedOption&&(this._updateNativeInputValue(this._valueBeforeAutoSelection??""),this._pendingAutoselectedOption=null),this._closeKeyEventStream.next(),this._resetActiveItem(),e.stopPropagation(),e.preventDefault())};_updatePanelState(){if(this.autocomplete._setVisibility(),this.panelOpen){let e=this._overlayRef;this._keydownSubscription||(this._keydownSubscription=e.keydownEvents().subscribe(this._handlePanelKeydown)),this._outsideClickSubscription||(this._outsideClickSubscription=e.outsidePointerEvents().subscribe())}else this._keydownSubscription?.unsubscribe(),this._outsideClickSubscription?.unsubscribe(),this._keydownSubscription=this._outsideClickSubscription=null}_getOverlayConfig(){return new ka({positionStrategy:this._getOverlayPosition(),scrollStrategy:this._scrollStrategy(),width:this._getPanelWidth(),direction:this._dir??void 0,hasBackdrop:this._defaults?.hasBackdrop,backdropClass:this._defaults?.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:this._overlayPanelClass,disableAnimations:this._animationsDisabled})}_getOverlayPosition(){let e=Ia(this._injector,this._getConnectedElement()).withFlexibleDimensions(!1).withPush(!1).withPopoverLocation("inline");return this._setStrategyPositions(e),this._positionStrategy=e,e}_setStrategyPositions(e){let t=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],i=this._aboveClass,a=[{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:i},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:i}],o;this.position==="above"?o=a:this.position==="below"?o=t:o=[...t,...a],e.withPositions(o)}_getConnectedElement(){return this.connectedTo?this.connectedTo.elementRef:this._formField?this._formField.getConnectedOverlayOrigin():this._element}_getPanelWidth(){return this.autocomplete.panelWidth||this._getHostWidth()}_getHostWidth(){return this._getConnectedElement().nativeElement.getBoundingClientRect().width}_resetActiveItem(){let e=this.autocomplete;if(e.autoActiveFirstOption){let t=-1;for(let i=0;i<e.options.length;i++)if(!e.options.get(i).disabled){t=i;break}e._keyManager.setActiveItem(t)}else e._keyManager.setActiveItem(-1)}_canOpen(){let e=this._element.nativeElement;return!e.readOnly&&!e.disabled&&!this.autocompleteDisabled}_scrollToOption(e){let t=this.autocomplete,i=Oo(e,t.options,t.optionGroups);if(e===0&&i===1)t._setScrollTop(0);else if(t.panel){let a=t.options.toArray()[e];if(a){let o=a._getHostElement(),s=Do(o.offsetTop,o.offsetHeight,t._getScrollTop(),t.panel.nativeElement.offsetHeight);t._setScrollTop(s)}}}_trackedModal=null;_applyModalPanelOwnership(){let e=this._element.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let t=this.autocomplete.id;this._trackedModal&&$r(this._trackedModal,"aria-owns",t),mi(e,"aria-owns",t),this._trackedModal=e}_clearFromModal(){if(this._trackedModal){let e=this.autocomplete.id;$r(this._trackedModal,"aria-owns",e),this._trackedModal=null}}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ve({type:n,selectors:[["input","matAutocomplete",""],["textarea","matAutocomplete",""]],hostAttrs:[1,"mat-mdc-autocomplete-trigger"],hostVars:7,hostBindings:function(t,i){t&1&&A("focusin",function(){return i._handleFocus()})("blur",function(){return i._onTouched()})("input",function(o){return i._handleInput(o)})("keydown",function(o){return i._handleKeydown(o)})("click",function(){return i._handleClick()}),t&2&&ie("autocomplete",i.autocompleteAttribute)("role",i.autocompleteDisabled?null:"combobox")("aria-autocomplete",i.autocompleteDisabled?null:"list")("aria-activedescendant",i.panelOpen&&i.activeOption?i.activeOption.id:null)("aria-expanded",i.autocompleteDisabled?null:i.panelOpen.toString())("aria-controls",i.autocompleteDisabled||!i.panelOpen||i.autocomplete==null?null:i.autocomplete.id)("aria-haspopup",i.autocompleteDisabled?null:"listbox")},inputs:{autocomplete:[0,"matAutocomplete","autocomplete"],position:[0,"matAutocompletePosition","position"],connectedTo:[0,"matAutocompleteConnectedTo","connectedTo"],autocompleteAttribute:[0,"autocomplete","autocompleteAttribute"],autocompleteDisabled:[2,"matAutocompleteDisabled","autocompleteDisabled",H]},exportAs:["matAutocompleteTrigger"],features:[tt([s0]),cr]})}return n})(),ip=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[_n,qn,vn,qn,Fe]})}return n})();function u0(n,r){if(n&1&&(b(0,"mat-option",4)(1,"div",5),x(2,"img",6),b(3,"span"),C(4),v()()()),n&2){let e=r.$implicit,t=q();Rt("background-color",t.colorRarityService.mapColors.get(e.rarity)),h("value",t.getTitle(e)),p(2),h("src",t.imageService.getItemUrl(e.idImage),J),p(2),hn(" ",t.getTitle(e)," (",e.level,") ")}}var Ho=class n{translateService=d(yn);itemService=d(yr);colorRarityService=d(Da);searchItemNameFormService=d(Ha);imageService=d(me);options$;constructor(){this.options$=this.itemService.itemsFilterByItemName$.pipe(Y(r=>pa(()=>this.searchItemNameFormService.form.value.length>2,P(r),P([]))),V(r=>r.slice(0,10)))}getTitle(r){return r.title[this.translateService.currentLang]}onOptionSelected(r){let e=r.option.value;this.options$?.pipe(ee(1)).subscribe(t=>{let i=t.find(a=>this.getTitle(a)===e);i&&this.searchItemNameFormService.setFilter(i)})}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-search-item-name"]],decls:10,vars:7,consts:[["auto","matAutocomplete"],["matInput","",3,"formControl","matAutocomplete"],["autoActiveFirstOption","",3,"optionSelected"],[3,"value","backgroundColor"],[3,"value"],[2,"display","flex","align-items","center"],["alt","image item","width","50px","height","50px","appFallback","",3,"src"]],template:function(e,t){if(e&1){let i=fe();b(0,"mat-form-field")(1,"mat-label"),C(2),y(3,"translate"),v(),x(4,"input",1),b(5,"mat-autocomplete",2,0),A("optionSelected",function(o){return B(i),U(t.onOptionSelected(o))}),xt(7,u0,5,6,"mat-option",3,Wt),y(9,"async"),v()()}if(e&2){let i=Mt(6);p(2),M(E(3,3,"search-item-name.label")),p(2),h("formControl",t.searchItemNameFormService.form)("matAutocomplete",i),p(3),_t(E(9,5,t.options$))}},dependencies:[Dt,dt,Be,Ye,pt,Ft,Cr,Tr,ne,Qe,$,ip,np,ft,Cc,hr,Oa,W,fn],styles:["mat-form-field[_ngcontent-%COMP%]{width:100%}"]})};var d0=["mat-menu-item",""],p0=[[["mat-icon"],["","matMenuItemIcon",""]],"*"],m0=["mat-icon, [matMenuItemIcon]","*"];function h0(n,r){n&1&&(mn(),b(0,"svg",2),x(1,"polygon",3),v())}var f0=["*"];function g0(n,r){if(n&1){let e=fe();ur(0,"div",0),Il("click",function(){B(e);let i=q();return U(i.closed.emit("click"))})("animationstart",function(i){B(e);let a=q();return U(a._onAnimationStart(i.animationName))})("animationend",function(i){B(e);let a=q();return U(a._onAnimationDone(i.animationName))})("animationcancel",function(i){B(e);let a=q();return U(a._onAnimationDone(i.animationName))}),ur(1,"div",1),ge(2),jr()()}if(n&2){let e=q();et(e._classList),re("mat-menu-panel-animations-disabled",e._animationsDisabled)("mat-menu-panel-exit-animation",e._panelAnimationState==="void")("mat-menu-panel-animating",e._isAnimating()),dr("id",e.panelId),ie("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby||null)("aria-describedby",e.ariaDescribedby||null)}}var Ic=new G("MAT_MENU_PANEL"),qi=(()=>{class n{_elementRef=d(Ee);_document=d(sr);_focusMonitor=d(Vr);_parentMenu=d(Ic,{optional:!0});_changeDetectorRef=d(Me);role="menuitem";disabled=!1;disableRipple=!1;_hovered=new ce;_focused=new ce;_highlighted=!1;_triggersSubmenu=!1;constructor(){d(Ot).load(Lt),this._parentMenu?.addItem?.(this)}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._getHostElement(),e,t):this._getHostElement().focus(t),this._focused.next(this)}ngAfterViewInit(){this._focusMonitor&&this._focusMonitor.monitor(this._elementRef,!1)}ngOnDestroy(){this._focusMonitor&&this._focusMonitor.stopMonitoring(this._elementRef),this._parentMenu&&this._parentMenu.removeItem&&this._parentMenu.removeItem(this),this._hovered.complete(),this._focused.complete()}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._elementRef.nativeElement}_checkDisabled(e){this.disabled&&(e.preventDefault(),e.stopPropagation())}_handleMouseEnter(){this._hovered.next(this)}getLabel(){let e=this._elementRef.nativeElement.cloneNode(!0),t=e.querySelectorAll("mat-icon, .material-icons");for(let i=0;i<t.length;i++)t[i].remove();return e.textContent?.trim()||""}_setHighlighted(e){this._highlighted=e,this._changeDetectorRef.markForCheck()}_setTriggersSubmenu(e){this._triggersSubmenu=e,this._changeDetectorRef.markForCheck()}_hasFocus(){return this._document&&this._document.activeElement===this._getHostElement()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["","mat-menu-item",""]],hostAttrs:[1,"mat-mdc-menu-item","mat-focus-indicator"],hostVars:8,hostBindings:function(t,i){t&1&&A("click",function(o){return i._checkDisabled(o)})("mouseenter",function(){return i._handleMouseEnter()}),t&2&&(ie("role",i.role)("tabindex",i._getTabIndex())("aria-disabled",i.disabled)("disabled",i.disabled||null),re("mat-mdc-menu-item-highlighted",i._highlighted)("mat-mdc-menu-item-submenu-trigger",i._triggersSubmenu))},inputs:{role:"role",disabled:[2,"disabled","disabled",H],disableRipple:[2,"disableRipple","disableRipple",H]},exportAs:["matMenuItem"],attrs:d0,ngContentSelectors:m0,decls:5,vars:3,consts:[[1,"mat-mdc-menu-item-text"],["matRipple","",1,"mat-mdc-menu-ripple",3,"matRippleDisabled","matRippleTrigger"],["viewBox","0 0 5 10","focusable","false","aria-hidden","true",1,"mat-mdc-menu-submenu-icon"],["points","0,0 5,5 0,10"]],template:function(t,i){t&1&&(Ae(p0),ge(0),b(1,"span",0),ge(2,1),v(),x(3,"div",1),oe(4,h0,2,0,":svg:svg",2)),t&2&&(p(3),h("matRippleDisabled",i.disableRipple||i.disabled)("matRippleTrigger",i._getHostElement()),p(),se(i._triggersSubmenu?4:-1))},dependencies:[wr],encapsulation:2,changeDetection:0})}return n})();var b0=new G("MatMenuContent");var v0=new G("mat-menu-default-options",{providedIn:"root",factory:()=>({overlapTrigger:!1,xPosition:"after",yPosition:"below",backdropClass:"cdk-overlay-transparent-backdrop"})}),kc="_mat-menu-enter",Vo="_mat-menu-exit",Wn=(()=>{class n{_elementRef=d(Ee);_changeDetectorRef=d(Me);_injector=d(Ne);_keyManager;_xPosition;_yPosition;_firstItemFocusRef;_exitFallbackTimeout;_animationsDisabled=Re();_allItems;_directDescendantItems=new hl;_classList={};_panelAnimationState="void";_animationDone=new ce;_isAnimating=Le(!1);parentMenu;direction;overlayPanelClass;backdropClass;ariaLabel;ariaLabelledby;ariaDescribedby;get xPosition(){return this._xPosition}set xPosition(e){this._xPosition=e,this.setPositionClasses()}get yPosition(){return this._yPosition}set yPosition(e){this._yPosition=e,this.setPositionClasses()}templateRef;items;lazyContent;overlapTrigger;hasBackdrop;set panelClass(e){let t=this._previousPanelClass,i=N({},this._classList);t&&t.length&&t.split(" ").forEach(a=>{i[a]=!1}),this._previousPanelClass=e,e&&e.length&&(e.split(" ").forEach(a=>{i[a]=!0}),this._elementRef.nativeElement.className=""),this._classList=i}_previousPanelClass;get classList(){return this.panelClass}set classList(e){this.panelClass=e}closed=new te;close=this.closed;panelId=d(nt).getId("mat-menu-panel-");constructor(){let e=d(v0);this.overlayPanelClass=e.overlayPanelClass||"",this._xPosition=e.xPosition,this._yPosition=e.yPosition,this.backdropClass=e.backdropClass,this.overlapTrigger=e.overlapTrigger,this.hasBackdrop=e.hasBackdrop}ngOnInit(){this.setPositionClasses()}ngAfterContentInit(){this._updateDirectDescendants(),this._keyManager=new ou(this._directDescendantItems).withWrap().withTypeAhead().withHomeAndEnd(),this._keyManager.tabOut.subscribe(()=>this.closed.emit("tab")),this._directDescendantItems.changes.pipe(Je(this._directDescendantItems),Y(e=>st(...e.map(t=>t._focused)))).subscribe(e=>this._keyManager.updateActiveItem(e)),this._directDescendantItems.changes.subscribe(e=>{let t=this._keyManager;if(this._panelAnimationState==="enter"&&t.activeItem?._hasFocus()){let i=e.toArray(),a=Math.max(0,Math.min(i.length-1,t.activeItemIndex||0));i[a]&&!i[a].disabled?t.setActiveItem(a):t.setNextItemActive()}})}ngOnDestroy(){this._keyManager?.destroy(),this._directDescendantItems.destroy(),this.closed.complete(),this._firstItemFocusRef?.destroy(),clearTimeout(this._exitFallbackTimeout)}_hovered(){return this._directDescendantItems.changes.pipe(Je(this._directDescendantItems),Y(t=>st(...t.map(i=>i._hovered))))}addItem(e){}removeItem(e){}_handleKeydown(e){let t=e.keyCode,i=this._keyManager;switch(t){case 27:Ke(e)||(e.preventDefault(),this.closed.emit("keydown"));break;case 37:this.parentMenu&&this.direction==="ltr"&&this.closed.emit("keydown");break;case 39:this.parentMenu&&this.direction==="rtl"&&this.closed.emit("keydown");break;default:(t===38||t===40)&&i.setFocusOrigin("keyboard"),i.onKeydown(e);return}}focusFirstItem(e="program"){this._firstItemFocusRef?.destroy(),this._firstItemFocusRef=li(()=>{let t=this._resolvePanel();if(!t||!t.contains(document.activeElement)){let i=this._keyManager;i.setFocusOrigin(e).setFirstItemActive(),!i.activeItem&&t&&t.focus()}},{injector:this._injector})}resetActiveItem(){this._keyManager.setActiveItem(-1)}setElevation(e){}setPositionClasses(e=this.xPosition,t=this.yPosition){this._classList=Ce(N({},this._classList),{"mat-menu-before":e==="before","mat-menu-after":e==="after","mat-menu-above":t==="above","mat-menu-below":t==="below"}),this._changeDetectorRef.markForCheck()}_onAnimationDone(e){let t=e===Vo;(t||e===kc)&&(t&&(clearTimeout(this._exitFallbackTimeout),this._exitFallbackTimeout=void 0),this._animationDone.next(t?"void":"enter"),this._isAnimating.set(!1))}_onAnimationStart(e){(e===kc||e===Vo)&&this._isAnimating.set(!0)}_setIsOpen(e){if(this._panelAnimationState=e?"enter":"void",e){if(this._keyManager.activeItemIndex===0){let t=this._resolvePanel();t&&(t.scrollTop=0)}}else this._animationsDisabled||(this._exitFallbackTimeout=setTimeout(()=>this._onAnimationDone(Vo),200));this._animationsDisabled&&setTimeout(()=>{this._onAnimationDone(e?kc:Vo)}),this._changeDetectorRef.markForCheck()}_updateDirectDescendants(){this._allItems.changes.pipe(Je(this._allItems)).subscribe(e=>{this._directDescendantItems.reset(e.filter(t=>t._parentMenu===this)),this._directDescendantItems.notifyOnChanges()})}_resolvePanel(){let e=null;return this._directDescendantItems.length&&(e=this._directDescendantItems.first._getHostElement().closest('[role="menu"]')),e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["mat-menu"]],contentQueries:function(t,i,a){if(t&1&&pr(a,b0,5)(a,qi,5)(a,qi,4),t&2){let o;ue(o=de())&&(i.lazyContent=o.first),ue(o=de())&&(i._allItems=o),ue(o=de())&&(i.items=o)}},viewQuery:function(t,i){if(t&1&&ut(fa,5),t&2){let a;ue(a=de())&&(i.templateRef=a.first)}},hostVars:3,hostBindings:function(t,i){t&2&&ie("aria-label",null)("aria-labelledby",null)("aria-describedby",null)},inputs:{backdropClass:"backdropClass",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],xPosition:"xPosition",yPosition:"yPosition",overlapTrigger:[2,"overlapTrigger","overlapTrigger",H],hasBackdrop:[2,"hasBackdrop","hasBackdrop",e=>e==null?null:H(e)],panelClass:[0,"class","panelClass"],classList:"classList"},outputs:{closed:"closed",close:"close"},exportAs:["matMenu"],features:[tt([{provide:Ic,useExisting:n}])],ngContentSelectors:f0,decls:1,vars:0,consts:[["tabindex","-1","role","menu",1,"mat-mdc-menu-panel",3,"click","animationstart","animationend","animationcancel","id"],[1,"mat-mdc-menu-content"]],template:function(t,i){t&1&&(Ae(),ba(0,g0,3,12,"ng-template"))},styles:[`mat-menu{display:none}.mat-mdc-menu-content{margin:0;padding:8px 0;outline:0}.mat-mdc-menu-content,.mat-mdc-menu-content .mat-mdc-menu-item .mat-mdc-menu-item-text{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;flex:1;white-space:normal;font-family:var(--mat-menu-item-label-text-font, var(--mat-sys-label-large-font));line-height:var(--mat-menu-item-label-text-line-height, var(--mat-sys-label-large-line-height));font-size:var(--mat-menu-item-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-menu-item-label-text-tracking, var(--mat-sys-label-large-tracking));font-weight:var(--mat-menu-item-label-text-weight, var(--mat-sys-label-large-weight))}@keyframes _mat-menu-enter{from{opacity:0;transform:scale(0.8)}to{opacity:1;transform:none}}@keyframes _mat-menu-exit{from{opacity:1}to{opacity:0}}.mat-mdc-menu-panel{min-width:112px;max-width:280px;overflow:auto;box-sizing:border-box;outline:0;animation:_mat-menu-enter 120ms cubic-bezier(0, 0, 0.2, 1);border-radius:var(--mat-menu-container-shape, var(--mat-sys-corner-extra-small));background-color:var(--mat-menu-container-color, var(--mat-sys-surface-container));box-shadow:var(--mat-menu-container-elevation-shadow, 0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12));will-change:transform,opacity}.mat-mdc-menu-panel.mat-menu-panel-exit-animation{animation:_mat-menu-exit 100ms 25ms linear forwards}.mat-mdc-menu-panel.mat-menu-panel-animations-disabled{animation:none}.mat-mdc-menu-panel.mat-menu-panel-animating{pointer-events:none}.mat-mdc-menu-panel.mat-menu-panel-animating:has(.mat-mdc-menu-content:empty){display:none}@media(forced-colors: active){.mat-mdc-menu-panel{outline:solid 1px}}.mat-mdc-menu-panel .mat-divider{border-top-color:var(--mat-menu-divider-color, var(--mat-sys-surface-variant));margin-bottom:var(--mat-menu-divider-bottom-spacing, 8px);margin-top:var(--mat-menu-divider-top-spacing, 8px)}.mat-mdc-menu-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;cursor:pointer;width:100%;text-align:left;box-sizing:border-box;color:inherit;font-size:inherit;background:none;text-decoration:none;margin:0;min-height:48px;padding-left:var(--mat-menu-item-leading-spacing, 12px);padding-right:var(--mat-menu-item-trailing-spacing, 12px);-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-menu-item::-moz-focus-inner{border:0}[dir=rtl] .mat-mdc-menu-item{padding-left:var(--mat-menu-item-trailing-spacing, 12px);padding-right:var(--mat-menu-item-leading-spacing, 12px)}.mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-leading-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-trailing-spacing, 12px)}[dir=rtl] .mat-mdc-menu-item:has(.material-icons,mat-icon,[matButtonIcon]){padding-left:var(--mat-menu-item-with-icon-trailing-spacing, 12px);padding-right:var(--mat-menu-item-with-icon-leading-spacing, 12px)}.mat-mdc-menu-item,.mat-mdc-menu-item:visited,.mat-mdc-menu-item:link{color:var(--mat-menu-item-label-text-color, var(--mat-sys-on-surface))}.mat-mdc-menu-item .mat-icon-no-color,.mat-mdc-menu-item .mat-mdc-menu-submenu-icon{color:var(--mat-menu-item-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-menu-item[disabled]{cursor:default;opacity:.38}.mat-mdc-menu-item[disabled]::after{display:block;position:absolute;content:"";top:0;left:0;bottom:0;right:0}.mat-mdc-menu-item:focus{outline:0}.mat-mdc-menu-item .mat-icon{flex-shrink:0;margin-right:var(--mat-menu-item-spacing, 12px);height:var(--mat-menu-item-icon-size, 24px);width:var(--mat-menu-item-icon-size, 24px)}[dir=rtl] .mat-mdc-menu-item{text-align:right}[dir=rtl] .mat-mdc-menu-item .mat-icon{margin-right:0;margin-left:var(--mat-menu-item-spacing, 12px)}.mat-mdc-menu-item:not([disabled]):hover{background-color:var(--mat-menu-item-hover-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-hover-state-layer-opacity) * 100%), transparent))}.mat-mdc-menu-item:not([disabled]).cdk-program-focused,.mat-mdc-menu-item:not([disabled]).cdk-keyboard-focused,.mat-mdc-menu-item:not([disabled]).mat-mdc-menu-item-highlighted{background-color:var(--mat-menu-item-focus-state-layer-color, color-mix(in srgb, var(--mat-sys-on-surface) calc(var(--mat-sys-focus-state-layer-opacity) * 100%), transparent))}@media(forced-colors: active){.mat-mdc-menu-item{margin-top:1px}}.mat-mdc-menu-submenu-icon{width:var(--mat-menu-item-icon-size, 24px);height:10px;fill:currentColor;padding-left:var(--mat-menu-item-spacing, 12px)}[dir=rtl] .mat-mdc-menu-submenu-icon{padding-right:var(--mat-menu-item-spacing, 12px);padding-left:0}[dir=rtl] .mat-mdc-menu-submenu-icon polygon{transform:scaleX(-1);transform-origin:center}@media(forced-colors: active){.mat-mdc-menu-submenu-icon{fill:CanvasText}}.mat-mdc-menu-item .mat-mdc-menu-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}
`],encapsulation:2,changeDetection:0})}return n})(),x0=new G("mat-menu-scroll-strategy",{providedIn:"root",factory:()=>{let n=d(Ne);return()=>xn(n)}});var Gn=new WeakMap,_0=(()=>{class n{_canHaveBackdrop;_element=d(Ee);_viewContainerRef=d(At);_menuItemInstance=d(qi,{optional:!0,self:!0});_dir=d(br,{optional:!0});_focusMonitor=d(Vr);_ngZone=d(Ze);_injector=d(Ne);_scrollStrategy=d(x0);_changeDetectorRef=d(Me);_animationsDisabled=Re();_portal;_overlayRef=null;_menuOpen=!1;_closingActionsSubscription=It.EMPTY;_menuCloseSubscription=It.EMPTY;_pendingRemoval;_parentMaterialMenu;_parentInnerPadding;_openedBy=void 0;get _menu(){return this._menuInternal}set _menu(e){e!==this._menuInternal&&(this._menuInternal=e,this._menuCloseSubscription.unsubscribe(),e&&(this._parentMaterialMenu,this._menuCloseSubscription=e.close.subscribe(t=>{this._destroyMenu(t),(t==="click"||t==="tab")&&this._parentMaterialMenu&&this._parentMaterialMenu.closed.emit(t)})),this._menuItemInstance?._setTriggersSubmenu(this._triggersSubmenu()))}_menuInternal;constructor(e){this._canHaveBackdrop=e;let t=d(Ic,{optional:!0});this._parentMaterialMenu=t instanceof Wn?t:void 0}ngOnDestroy(){this._menu&&this._ownsMenu(this._menu)&&Gn.delete(this._menu),this._pendingRemoval?.unsubscribe(),this._menuCloseSubscription.unsubscribe(),this._closingActionsSubscription.unsubscribe(),this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=null)}get menuOpen(){return this._menuOpen}get dir(){return this._dir&&this._dir.value==="rtl"?"rtl":"ltr"}_triggersSubmenu(){return!!(this._menuItemInstance&&this._parentMaterialMenu&&this._menu)}_closeMenu(){this._menu?.close.emit()}_openMenu(e){let t=this._menu;if(this._menuOpen||!t)return;this._pendingRemoval?.unsubscribe();let i=Gn.get(t);Gn.set(t,this),i&&i!==this&&i._closeMenu();let a=this._createOverlay(t),o=a.getConfig(),s=o.positionStrategy;this._setPosition(t,s),this._canHaveBackdrop?o.hasBackdrop=t.hasBackdrop==null?!this._triggersSubmenu():t.hasBackdrop:o.hasBackdrop=!1,a.hasAttached()||(a.attach(this._getPortal(t)),t.lazyContent?.attach(this.menuData)),this._closingActionsSubscription=this._menuClosingActions().subscribe(()=>this._closeMenu()),t.parentMenu=this._triggersSubmenu()?this._parentMaterialMenu:void 0,t.direction=this.dir,e&&t.focusFirstItem(this._openedBy||"program"),this._setIsMenuOpen(!0),t instanceof Wn&&(t._setIsOpen(!0),t._directDescendantItems.changes.pipe(ct(t.close)).subscribe(()=>{s.withLockedPosition(!1).reapplyLastPosition(),s.withLockedPosition(!0)}))}focus(e,t){this._focusMonitor&&e?this._focusMonitor.focusVia(this._element,e,t):this._element.nativeElement.focus(t)}_destroyMenu(e){let t=this._overlayRef,i=this._menu;!t||!this.menuOpen||(this._closingActionsSubscription.unsubscribe(),this._pendingRemoval?.unsubscribe(),i instanceof Wn&&this._ownsMenu(i)?(this._pendingRemoval=i._animationDone.pipe(ee(1)).subscribe(()=>{t.detach(),Gn.has(i)||i.lazyContent?.detach()}),i._setIsOpen(!1)):(t.detach(),i?.lazyContent?.detach()),i&&this._ownsMenu(i)&&Gn.delete(i),this.restoreFocus&&(e==="keydown"||!this._openedBy||!this._triggersSubmenu())&&this.focus(this._openedBy),this._openedBy=void 0,this._setIsMenuOpen(!1))}_setIsMenuOpen(e){e!==this._menuOpen&&(this._menuOpen=e,this._menuOpen?this.menuOpened.emit():this.menuClosed.emit(),this._triggersSubmenu()&&this._menuItemInstance._setHighlighted(e),this._changeDetectorRef.markForCheck())}_createOverlay(e){if(!this._overlayRef){let t=this._getOverlayConfig(e);this._subscribeToPositions(e,t.positionStrategy),this._overlayRef=Aa(this._injector,t),this._overlayRef.keydownEvents().subscribe(i=>{this._menu instanceof Wn&&this._menu._handleKeydown(i)})}return this._overlayRef}_getOverlayConfig(e){return new ka({positionStrategy:Ia(this._injector,this._getOverlayOrigin()).withLockedPosition().withGrowAfterOpen().withTransformOriginOn(".mat-menu-panel, .mat-mdc-menu-panel"),backdropClass:e.backdropClass||"cdk-overlay-transparent-backdrop",panelClass:e.overlayPanelClass,scrollStrategy:this._scrollStrategy(),direction:this._dir||"ltr",disableAnimations:this._animationsDisabled})}_subscribeToPositions(e,t){e.setPositionClasses&&t.positionChanges.subscribe(i=>{this._ngZone.run(()=>{let a=i.connectionPair.overlayX==="start"?"after":"before",o=i.connectionPair.overlayY==="top"?"below":"above";e.setPositionClasses(a,o)})})}_setPosition(e,t){let[i,a]=e.xPosition==="before"?["end","start"]:["start","end"],[o,s]=e.yPosition==="above"?["bottom","top"]:["top","bottom"],[c,l]=[o,s],[m,g]=[i,a],_=0;if(this._triggersSubmenu()){if(g=i=e.xPosition==="before"?"start":"end",a=m=i==="end"?"start":"end",this._parentMaterialMenu){if(this._parentInnerPadding==null){let f=this._parentMaterialMenu.items.first;this._parentInnerPadding=f?f._getHostElement().offsetTop:0}_=o==="bottom"?this._parentInnerPadding:-this._parentInnerPadding}}else e.overlapTrigger||(c=o==="top"?"bottom":"top",l=s==="top"?"bottom":"top");t.withPositions([{originX:i,originY:c,overlayX:m,overlayY:o,offsetY:_},{originX:a,originY:c,overlayX:g,overlayY:o,offsetY:_},{originX:i,originY:l,overlayX:m,overlayY:s,offsetY:-_},{originX:a,originY:l,overlayX:g,overlayY:s,offsetY:-_}])}_menuClosingActions(){let e=this._getOutsideClickStream(this._overlayRef),t=this._overlayRef.detachments(),i=this._parentMaterialMenu?this._parentMaterialMenu.closed:P(),a=this._parentMaterialMenu?this._parentMaterialMenu._hovered().pipe(xe(o=>this._menuOpen&&o!==this._menuItemInstance)):P();return st(e,i,a,t)}_getPortal(e){return(!this._portal||this._portal.templateRef!==e.templateRef)&&(this._portal=new Ca(e.templateRef,this._viewContainerRef)),this._portal}_ownsMenu(e){return Gn.get(e)===this}static \u0275fac=function(t){xl()};static \u0275dir=Ve({type:n})}return n})(),op=(()=>{class n extends _0{_cleanupTouchstart;_hoverSubscription=It.EMPTY;get _deprecatedMatMenuTriggerFor(){return this.menu}set _deprecatedMatMenuTriggerFor(e){this.menu=e}get menu(){return this._menu}set menu(e){this._menu=e}menuData;restoreFocus=!0;menuOpened=new te;onMenuOpen=this.menuOpened;menuClosed=new te;onMenuClose=this.menuClosed;constructor(){super(!0);let e=d(Gt);this._cleanupTouchstart=e.listen(this._element.nativeElement,"touchstart",t=>{nu(t)||(this._openedBy="touch")},{passive:!0})}triggersSubmenu(){return super._triggersSubmenu()}toggleMenu(){return this.menuOpen?this.closeMenu():this.openMenu()}openMenu(){this._openMenu(!0)}closeMenu(){this._closeMenu()}updatePosition(){this._overlayRef?.updatePosition()}ngAfterContentInit(){this._handleHover()}ngOnDestroy(){super.ngOnDestroy(),this._cleanupTouchstart(),this._hoverSubscription.unsubscribe()}_getOverlayOrigin(){return this._element}_getOutsideClickStream(e){return e.backdropClick()}_handleMousedown(e){ru(e)||(this._openedBy=e.button===0?"mouse":void 0,this.triggersSubmenu()&&e.preventDefault())}_handleKeydown(e){let t=e.keyCode;(t===13||t===32)&&(this._openedBy="keyboard"),this.triggersSubmenu()&&(t===39&&this.dir==="ltr"||t===37&&this.dir==="rtl")&&(this._openedBy="keyboard",this.openMenu())}_handleClick(e){this.triggersSubmenu()?(e.stopPropagation(),this.openMenu()):this.toggleMenu()}_handleHover(){this.triggersSubmenu()&&this._parentMaterialMenu&&(this._hoverSubscription=this._parentMaterialMenu._hovered().subscribe(e=>{e===this._menuItemInstance&&!e.disabled&&this._parentMaterialMenu?._panelAnimationState!=="void"&&(this._openedBy="mouse",this._openMenu(!1))}))}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ve({type:n,selectors:[["","mat-menu-trigger-for",""],["","matMenuTriggerFor",""]],hostAttrs:[1,"mat-mdc-menu-trigger"],hostVars:3,hostBindings:function(t,i){t&1&&A("click",function(o){return i._handleClick(o)})("mousedown",function(o){return i._handleMousedown(o)})("keydown",function(o){return i._handleKeydown(o)}),t&2&&ie("aria-haspopup",i.menu?"menu":null)("aria-expanded",i.menuOpen)("aria-controls",i.menuOpen?i.menu==null?null:i.menu.panelId:null)},inputs:{_deprecatedMatMenuTriggerFor:[0,"mat-menu-trigger-for","_deprecatedMatMenuTriggerFor"],menu:[0,"matMenuTriggerFor","menu"],menuData:[0,"matMenuTriggerData","menuData"],restoreFocus:[0,"matMenuTriggerRestoreFocus","restoreFocus"]},outputs:{menuOpened:"menuOpened",onMenuOpen:"onMenuOpen",menuClosed:"menuClosed",onMenuClose:"onMenuClose"},exportAs:["matMenuTrigger"],features:[ui]})}return n})();var sp=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[Sr,_n,Fe,vn]})}return n})();var E0={capture:!0},w0=["focus","mousedown","mouseenter","touchstart"],Ac="mat-ripple-loader-uninitialized",Mc="mat-ripple-loader-class-name",cp="mat-ripple-loader-centered",$o="mat-ripple-loader-disabled",lp=(()=>{class n{_document=d(sr);_animationsDisabled=Re();_globalRippleOptions=d(Pu,{optional:!0});_platform=d(Sa);_ngZone=d(Ze);_injector=d(Ne);_eventCleanups;_hosts=new Map;constructor(){let e=d(bl).createRenderer(null,null);this._eventCleanups=this._ngZone.runOutsideAngular(()=>w0.map(t=>e.listen(this._document,t,this._onInteraction,E0)))}ngOnDestroy(){let e=this._hosts.keys();for(let t of e)this.destroyRipple(t);this._eventCleanups.forEach(t=>t())}configureRipple(e,t){e.setAttribute(Ac,this._globalRippleOptions?.namespace??""),(t.className||!e.hasAttribute(Mc))&&e.setAttribute(Mc,t.className||""),t.centered&&e.setAttribute(cp,""),t.disabled&&e.setAttribute($o,"")}setDisabled(e,t){let i=this._hosts.get(e);i?(i.target.rippleDisabled=t,!t&&!i.hasSetUpEvents&&(i.hasSetUpEvents=!0,i.renderer.setupTriggerEvents(e))):t?e.setAttribute($o,""):e.removeAttribute($o)}_onInteraction=e=>{let t=bn(e);if(t instanceof HTMLElement){let i=t.closest(`[${Ac}="${this._globalRippleOptions?.namespace??""}"]`);i&&this._createRipple(i)}};_createRipple(e){if(!this._document||this._hosts.has(e))return;e.querySelector(".mat-ripple")?.remove();let t=this._document.createElement("span");t.classList.add("mat-ripple",e.getAttribute(Mc)),e.append(t);let i=this._globalRippleOptions,a=this._animationsDisabled?0:i?.animation?.enterDuration??Ks.enterDuration,o=this._animationsDisabled?0:i?.animation?.exitDuration??Ks.exitDuration,s={rippleDisabled:this._animationsDisabled||i?.disabled||e.hasAttribute($o),rippleConfig:{centered:e.hasAttribute(cp),terminateOnPointerUp:i?.terminateOnPointerUp,animation:{enterDuration:a,exitDuration:o}}},c=new Nu(s,this._ngZone,t,this._platform,this._injector),l=!s.rippleDisabled;l&&c.setupTriggerEvents(e),this._hosts.set(e,{target:s,renderer:c,hasSetUpEvents:l}),e.removeAttribute(Ac)}destroyRipple(e){let t=this._hosts.get(e);t&&(t.renderer._removeTriggerEvents(),this._hosts.delete(e))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();var S0=new G("MAT_BUTTON_CONFIG");function up(n){return n==null?void 0:Hr(n)}var dp=(()=>{class n{_elementRef=d(Ee);_ngZone=d(Ze);_animationsDisabled=Re();_config=d(S0,{optional:!0});_focusMonitor=d(Vr);_cleanupClick;_renderer=d(Gt);_rippleLoader=d(lp);_isAnchor;_isFab=!1;color;get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}_disableRipple=!1;get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}_disabled=!1;ariaDisabled;disabledInteractive;tabIndex;set _tabindex(e){this.tabIndex=e}constructor(){d(Ot).load(Lt);let e=this._elementRef.nativeElement;this._isAnchor=e.tagName==="A",this.disabledInteractive=this._config?.disabledInteractive??!1,this.color=this._config?.color??null,this._rippleLoader?.configureRipple(e,{className:"mat-mdc-button-ripple"})}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0),this._isAnchor&&this._setupAsAnchor()}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",t){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,t):this._elementRef.nativeElement.focus(t)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this._isAnchor?this.disabled||null:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}_getTabIndex(){return this._isAnchor?this.disabled&&!this.disabledInteractive?-1:this.tabIndex:this.tabIndex}_setupAsAnchor(){this._cleanupClick=this._ngZone.runOutsideAngular(()=>this._renderer.listen(this._elementRef.nativeElement,"click",e=>{this.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}))}static \u0275fac=function(t){return new(t||n)};static \u0275dir=Ve({type:n,hostAttrs:[1,"mat-mdc-button-base"],hostVars:13,hostBindings:function(t,i){t&2&&(ie("disabled",i._getDisabledAttribute())("aria-disabled",i._getAriaDisabled())("tabindex",i._getTabIndex()),et(i.color?"mat-"+i.color:""),re("mat-mdc-button-disabled",i.disabled)("mat-mdc-button-disabled-interactive",i.disabledInteractive)("mat-unthemed",!i.color)("_mat-animation-noopable",i._animationsDisabled))},inputs:{color:"color",disableRipple:[2,"disableRipple","disableRipple",H],disabled:[2,"disabled","disabled",H],ariaDisabled:[2,"aria-disabled","ariaDisabled",H],disabledInteractive:[2,"disabledInteractive","disabledInteractive",H],tabIndex:[2,"tabIndex","tabIndex",up],_tabindex:[2,"tabindex","_tabindex",up]}})}return n})();var T0=["matButton",""],C0=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],k0=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var pp=new Map([["text",["mat-mdc-button"]],["filled",["mdc-button--unelevated","mat-mdc-unelevated-button"]],["elevated",["mdc-button--raised","mat-mdc-raised-button"]],["outlined",["mdc-button--outlined","mat-mdc-outlined-button"]],["tonal",["mat-tonal-button"]]]),mp=(()=>{class n extends dp{get appearance(){return this._appearance}set appearance(e){this.setAppearance(e||this._config?.defaultAppearance||"text")}_appearance=null;constructor(){super();let e=I0(this._elementRef.nativeElement);e&&this.setAppearance(e)}setAppearance(e){if(e===this._appearance)return;let t=this._elementRef.nativeElement.classList,i=this._appearance?pp.get(this._appearance):null,a=pp.get(e);i&&t.remove(...i),t.add(...a),this._appearance=e}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=I({type:n,selectors:[["button","matButton",""],["a","matButton",""],["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""],["a","mat-button",""],["a","mat-raised-button",""],["a","mat-flat-button",""],["a","mat-stroked-button",""]],hostAttrs:[1,"mdc-button"],inputs:{appearance:[0,"matButton","appearance"]},exportAs:["matButton","matAnchor"],features:[ui],attrs:T0,ngContentSelectors:k0,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(t,i){t&1&&(Ae(C0),va(0,"span",0),ge(1),ur(2,"span",1),ge(3,1),jr(),ge(4,2),va(5,"span",2)(6,"span",3)),t&2&&re("mdc-button__ripple",!i._isFab)("mdc-fab__ripple",i._isFab)},styles:[`.mat-mdc-button-base{text-decoration:none}.mat-mdc-button-base .mat-icon{min-height:fit-content;flex-shrink:0}@media(hover: none){.mat-mdc-button-base:hover>span.mat-mdc-button-persistent-ripple::before{opacity:0}}.mdc-button{-webkit-user-select:none;user-select:none;position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0);padding:0 8px}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__label{position:relative}.mat-mdc-button{padding:0 var(--mat-button-text-horizontal-padding, 12px);height:var(--mat-button-text-container-height, 40px);font-family:var(--mat-button-text-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-text-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-text-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-text-label-text-transform);font-weight:var(--mat-button-text-label-text-weight, var(--mat-sys-label-large-weight))}.mat-mdc-button,.mat-mdc-button .mdc-button__ripple{border-radius:var(--mat-button-text-container-shape, var(--mat-sys-corner-full))}.mat-mdc-button:not(:disabled){color:var(--mat-button-text-label-text-color, var(--mat-sys-primary))}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-text-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-button-text-with-icon-horizontal-padding, 16px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-offset, -4px);margin-left:var(--mat-button-text-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-text-icon-spacing, 8px);margin-left:var(--mat-button-text-icon-offset, -4px)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-button-text-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-state-layer-color, var(--mat-sys-primary))}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-text-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-text-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-text-touch-target-size, 48px);display:var(--mat-button-text-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-filled-container-height, 40px);font-family:var(--mat-button-filled-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-filled-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-filled-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-filled-label-text-transform);font-weight:var(--mat-button-filled-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-filled-horizontal-padding, 24px)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-offset, -8px);margin-left:var(--mat-button-filled-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-filled-icon-spacing, 8px);margin-left:var(--mat-button-filled-icon-offset, -8px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-button-filled-ripple-color, color-mix(in srgb, var(--mat-sys-on-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-state-layer-color, var(--mat-sys-on-primary))}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-filled-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-unelevated-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-unelevated-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-unelevated-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-filled-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-filled-touch-target-size, 48px);display:var(--mat-button-filled-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mat-button-filled-label-text-color, var(--mat-sys-on-primary));background-color:var(--mat-button-filled-container-color, var(--mat-sys-primary))}.mat-mdc-unelevated-button,.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mat-button-filled-container-shape, var(--mat-sys-corner-full))}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-filled-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-filled-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);box-shadow:var(--mat-button-protected-container-elevation-shadow, var(--mat-sys-level1));height:var(--mat-button-protected-container-height, 40px);font-family:var(--mat-button-protected-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-protected-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-protected-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-protected-label-text-transform);font-weight:var(--mat-button-protected-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-protected-horizontal-padding, 24px)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-offset, -8px);margin-left:var(--mat-button-protected-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-protected-icon-spacing, 8px);margin-left:var(--mat-button-protected-icon-offset, -8px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-button-protected-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-state-layer-color, var(--mat-sys-primary))}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-protected-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-raised-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-raised-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-raised-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-protected-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-protected-touch-target-size, 48px);display:var(--mat-button-protected-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-raised-button:not(:disabled){color:var(--mat-button-protected-label-text-color, var(--mat-sys-primary));background-color:var(--mat-button-protected-container-color, var(--mat-sys-surface))}.mat-mdc-raised-button,.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mat-button-protected-container-shape, var(--mat-sys-corner-full))}@media(hover: hover){.mat-mdc-raised-button:hover{box-shadow:var(--mat-button-protected-hover-container-elevation-shadow, var(--mat-sys-level2))}}.mat-mdc-raised-button:focus{box-shadow:var(--mat-button-protected-focus-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mat-button-protected-pressed-container-elevation-shadow, var(--mat-sys-level1))}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-protected-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-protected-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mat-button-protected-disabled-container-elevation-shadow, var(--mat-sys-level0))}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-outlined-container-height, 40px);font-family:var(--mat-button-outlined-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-outlined-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-outlined-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-outlined-label-text-transform);font-weight:var(--mat-button-outlined-label-text-weight, var(--mat-sys-label-large-weight));border-radius:var(--mat-button-outlined-container-shape, var(--mat-sys-corner-full));border-width:var(--mat-button-outlined-outline-width, 1px);padding:0 var(--mat-button-outlined-horizontal-padding, 24px)}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-offset, -8px);margin-left:var(--mat-button-outlined-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-outlined-icon-spacing, 8px);margin-left:var(--mat-button-outlined-icon-offset, -8px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-button-outlined-ripple-color, color-mix(in srgb, var(--mat-sys-primary) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-state-layer-color, var(--mat-sys-primary))}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-outlined-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-mdc-outlined-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-mdc-outlined-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-mdc-outlined-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-outlined-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-outlined-touch-target-size, 48px);display:var(--mat-button-outlined-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-outlined-button:not(:disabled){color:var(--mat-button-outlined-label-text-color, var(--mat-sys-primary));border-color:var(--mat-button-outlined-outline-color, var(--mat-sys-outline))}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-outlined-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));border-color:var(--mat-button-outlined-disabled-outline-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-button-tonal-container-height, 40px);font-family:var(--mat-button-tonal-label-text-font, var(--mat-sys-label-large-font));font-size:var(--mat-button-tonal-label-text-size, var(--mat-sys-label-large-size));letter-spacing:var(--mat-button-tonal-label-text-tracking, var(--mat-sys-label-large-tracking));text-transform:var(--mat-button-tonal-label-text-transform);font-weight:var(--mat-button-tonal-label-text-weight, var(--mat-sys-label-large-weight));padding:0 var(--mat-button-tonal-horizontal-padding, 24px)}.mat-tonal-button:not(:disabled){color:var(--mat-button-tonal-label-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-tonal-container-color, var(--mat-sys-secondary-container))}.mat-tonal-button,.mat-tonal-button .mdc-button__ripple{border-radius:var(--mat-button-tonal-container-shape, var(--mat-sys-corner-full))}.mat-tonal-button[disabled],.mat-tonal-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-button-tonal-disabled-label-text-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent));background-color:var(--mat-button-tonal-disabled-container-color, color-mix(in srgb, var(--mat-sys-on-surface) 12%, transparent))}.mat-tonal-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}[dir=rtl] .mat-tonal-button>.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}.mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-offset, -8px);margin-left:var(--mat-button-tonal-icon-spacing, 8px)}[dir=rtl] .mat-tonal-button .mdc-button__label+.mat-icon{margin-right:var(--mat-button-tonal-icon-spacing, 8px);margin-left:var(--mat-button-tonal-icon-offset, -8px)}.mat-tonal-button .mat-ripple-element{background-color:var(--mat-button-tonal-ripple-color, color-mix(in srgb, var(--mat-sys-on-secondary-container) calc(var(--mat-sys-pressed-state-layer-opacity) * 100%), transparent))}.mat-tonal-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-state-layer-color, var(--mat-sys-on-secondary-container))}.mat-tonal-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-button-tonal-disabled-state-layer-color, var(--mat-sys-on-surface-variant))}.mat-tonal-button:hover>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-hover-state-layer-opacity, var(--mat-sys-hover-state-layer-opacity))}.mat-tonal-button.cdk-program-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.cdk-keyboard-focused>.mat-mdc-button-persistent-ripple::before,.mat-tonal-button.mat-mdc-button-disabled-interactive:focus>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-focus-state-layer-opacity, var(--mat-sys-focus-state-layer-opacity))}.mat-tonal-button:active>.mat-mdc-button-persistent-ripple::before{opacity:var(--mat-button-tonal-pressed-state-layer-opacity, var(--mat-sys-pressed-state-layer-opacity))}.mat-tonal-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:var(--mat-button-tonal-touch-target-size, 48px);display:var(--mat-button-tonal-touch-target-display, block);left:0;right:0;transform:translateY(-50%)}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button,.mat-tonal-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-tonal-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before,.mat-tonal-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-button .mat-icon,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-unelevated-button .mat-icon,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-raised-button .mat-icon,.mat-mdc-outlined-button .mdc-button__label,.mat-mdc-outlined-button .mat-icon,.mat-tonal-button .mdc-button__label,.mat-tonal-button .mat-icon{z-index:1;position:relative}.mat-mdc-button .mat-focus-indicator,.mat-mdc-unelevated-button .mat-focus-indicator,.mat-mdc-raised-button .mat-focus-indicator,.mat-mdc-outlined-button .mat-focus-indicator,.mat-tonal-button .mat-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit}.mat-mdc-button:focus>.mat-focus-indicator::before,.mat-mdc-unelevated-button:focus>.mat-focus-indicator::before,.mat-mdc-raised-button:focus>.mat-focus-indicator::before,.mat-mdc-outlined-button:focus>.mat-focus-indicator::before,.mat-tonal-button:focus>.mat-focus-indicator::before{content:"";border-radius:inherit}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable,.mat-tonal-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon,.mat-tonal-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px}.mat-mdc-unelevated-button .mat-focus-indicator::before,.mat-tonal-button .mat-focus-indicator::before,.mat-mdc-raised-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-focus-indicator::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}
`,`@media(forced-colors: active){.mat-mdc-button:not(.mdc-button--outlined),.mat-mdc-unelevated-button:not(.mdc-button--outlined),.mat-mdc-raised-button:not(.mdc-button--outlined),.mat-mdc-outlined-button:not(.mdc-button--outlined),.mat-mdc-button-base.mat-tonal-button,.mat-mdc-icon-button.mat-mdc-icon-button,.mat-mdc-outlined-button .mdc-button__ripple{outline:solid 1px}}
`],encapsulation:2,changeDetection:0})}return n})();function I0(n){return n.hasAttribute("mat-raised-button")?"elevated":n.hasAttribute("mat-stroked-button")?"outlined":n.hasAttribute("mat-flat-button")?"filled":n.hasAttribute("mat-button")?"text":null}var hp=(()=>{class n{static \u0275fac=function(t){return new(t||n)};static \u0275mod=Ie({type:n});static \u0275inj=ke({imports:[Sr,Fe]})}return n})();var zo=class n{static MINIMUM_MOOVE=100;startX=0;startY=0;swipeLeft=di();swipeRight=di();swipeUp=di();swipeDown=di();onTouchStart(r){let e=r.changedTouches[0];this.startX=e.clientX,this.startY=e.clientY}onTouchEnd(r){let e=r.changedTouches[0],t=e.clientX,i=e.clientY;t-this.startX>=n.MINIMUM_MOOVE?this.swipeRight.emit():this.startX-t>=n.MINIMUM_MOOVE&&this.swipeLeft.emit(),i-this.startY>=n.MINIMUM_MOOVE?this.swipeDown.emit():this.startX-t>=n.MINIMUM_MOOVE&&this.swipeUp.emit()}static \u0275fac=function(e){return new(e||n)};static \u0275dir=Ve({type:n,selectors:[["","appSwipe",""]],hostBindings:function(e,t){e&1&&A("touchstart",function(a){return t.onTouchStart(a)})("touchend",function(a){return t.onTouchEnd(a)})},outputs:{swipeLeft:"swipeLeft",swipeRight:"swipeRight",swipeUp:"swipeUp",swipeDown:"swipeDown"}})};var Go=class n{itemLevelFormService=d(ja);itemTypeFormServices=d(kn);maitrisesFormService=d($a);majorPresentFormService=d(Ba);modifierElemMaitrisesFormService=d(Ua);onlyNoElemFormService=d(za);onlyNoSecondaryFormService=d(Fa);rareteItemFormServices=d(qa);resistancesFormService=d(Va);searchItemNameFormService=d(Ha);sortChoiceFormService=d(La);reverseFormService=d(Ga);dropCraftableFormService=d(Wa);resetAllForms(){this.itemLevelFormService.setDefaultValue(),this.itemTypeFormServices.setDefaultValue(),this.maitrisesFormService.setDefaultValue(),this.majorPresentFormService.setDefaultValue(),this.modifierElemMaitrisesFormService.setDefaultValue(),this.onlyNoElemFormService.setDefaultValue(),this.onlyNoSecondaryFormService.setDefaultValue(),this.rareteItemFormServices.setDefaultValue(),this.resistancesFormService.setDefaultValue(),this.searchItemNameFormService.setDefaultValue(),this.sortChoiceFormService.setDefaultValue(),this.reverseFormService.setDefaultValue(),this.dropCraftableFormService.setDefaultValue()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Wo=class n{resistancesFormService=d(Va);imageService=d(me);IdActionsEnum=rt;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-filter-resistances"]],decls:9,vars:12,consts:[[3,"formGroup"],[1,"group"],["tooltip","filter-maitrises.feu",3,"control","srcImg"],["tooltip","filter-maitrises.eau",3,"control","srcImg"],["tooltip","filter-maitrises.terre",3,"control","srcImg"],["tooltip","filter-maitrises.air",3,"control","srcImg"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"form",0)(4,"div",1),x(5,"app-button-checkbox",2)(6,"app-button-checkbox",3)(7,"app-button-checkbox",4)(8,"app-button-checkbox",5),v()()),e&2&&(p(),M(E(2,10,"filter-resistances.resistances-elementaires")),p(2),h("formGroup",t.resistancesFormService.form),p(2),h("control",t.resistancesFormService.form.controls.feu)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_FEU)),p(),h("control",t.resistancesFormService.form.controls.eau)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_EAU)),p(),h("control",t.resistancesFormService.form.controls.terre)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_TERRE)),p(),h("control",t.resistancesFormService.form.controls.air)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_AIR)))},dependencies:[ne,Tn,Sn,_r,ht,Ue,$,W],encapsulation:2})};var Ko=class n{majorPresentFormService=d(Ba);imageService=d(me);IdActionsEnum=rt;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-major-present"]],decls:73,vars:185,consts:[[3,"tooltip","control","srcImg"],[3,"tooltip","control","srcImg","crossedOut"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"div"),x(4,"app-button-checkbox",0),y(5,"translate"),x(6,"app-button-checkbox",0),y(7,"translate"),x(8,"app-button-checkbox",0),y(9,"translate"),x(10,"app-button-checkbox",0),y(11,"translate"),x(12,"app-button-checkbox",0),y(13,"translate"),x(14,"app-button-checkbox",0),y(15,"translate"),x(16,"app-button-checkbox",0),y(17,"translate"),x(18,"app-button-checkbox",0),y(19,"translate"),x(20,"app-button-checkbox",0),y(21,"translate"),x(22,"app-button-checkbox",0),y(23,"translate"),x(24,"app-button-checkbox",0),y(25,"translate"),x(26,"app-button-checkbox",0),y(27,"translate"),x(28,"app-button-checkbox",0),y(29,"translate"),v(),b(30,"h3"),C(31),y(32,"translate"),v(),b(33,"div"),x(34,"app-button-checkbox",1),y(35,"translate"),x(36,"app-button-checkbox",1),y(37,"translate"),x(38,"app-button-checkbox",1),y(39,"translate"),x(40,"app-button-checkbox",1),y(41,"translate"),x(42,"app-button-checkbox",1),y(43,"translate"),x(44,"app-button-checkbox",1),y(45,"translate"),x(46,"app-button-checkbox",1),y(47,"translate"),x(48,"app-button-checkbox",1),y(49,"translate"),x(50,"app-button-checkbox",1),y(51,"translate"),x(52,"app-button-checkbox",1),y(53,"translate"),x(54,"app-button-checkbox",1),y(55,"translate"),x(56,"app-button-checkbox",1),y(57,"translate"),x(58,"app-button-checkbox",1),y(59,"translate"),v(),b(60,"div"),x(61,"app-button-checkbox",1),y(62,"translate"),x(63,"app-button-checkbox",1),y(64,"translate"),x(65,"app-button-checkbox",1),y(66,"translate"),x(67,"app-button-checkbox",1),y(68,"translate"),x(69,"app-button-checkbox",1),y(70,"translate"),x(71,"app-button-checkbox",1),y(72,"translate"),v()),e&2&&(p(),M(E(2,117,"major-present.label")),p(3),h("tooltip",E(5,119,"major-present.PA"))("control",t.majorPresentFormService.form.controls.PA)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PA)),p(2),h("tooltip",E(7,121,"major-present.PM"))("control",t.majorPresentFormService.form.controls.PM)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PM)),p(2),h("tooltip",E(9,123,"major-present.PW"))("control",t.majorPresentFormService.form.controls.PW)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PW)),p(2),h("tooltip",E(11,125,"major-present.PO"))("control",t.majorPresentFormService.form.controls.PO)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PORTEE)),p(2),h("tooltip",E(13,127,"major-present.CONTROLE"))("control",t.majorPresentFormService.form.controls.CONTROLE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.CONTROLE)),p(2),h("tooltip",E(15,129,"major-present.armure-donnee"))("control",t.majorPresentFormService.form.controls.ARMURE_DONNEE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.ARMURE_DONNEE_RECUE)),p(2),h("tooltip",E(17,131,"major-present.armure-recue"))("control",t.majorPresentFormService.form.controls.ARMURE_RECUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.ARMURE_DONNEE_RECUE,!0)),p(2),h("tooltip",E(19,133,"major-present.critique"))("control",t.majorPresentFormService.form.controls.CRITIQUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.COUP_CRITIQUE)),p(2),h("tooltip",E(21,135,"major-present.parade"))("control",t.majorPresentFormService.form.controls.PARADE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PARADE)),p(2),h("tooltip",E(23,137,"major-present.resistance-dos"))("control",t.majorPresentFormService.form.controls.RESISTANCE_DOS)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_DOS)),p(2),h("tooltip",E(25,139,"major-present.resistance-critique"))("control",t.majorPresentFormService.form.controls.RESISTANCE_CRITIQUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_CRITIQUES)),p(2),h("tooltip",E(27,141,"major-present.tacle"))("control",t.majorPresentFormService.form.controls.TACLE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.TACLE)),p(2),h("tooltip",E(29,143,"major-present.esquive"))("control",t.majorPresentFormService.form.controls.ESQUIVE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.ESQUIVE)),p(3),M(E(32,145,"major-present.label-malus")),p(3),h("tooltip",E(35,147,"major-present.PERTE_PA"))("control",t.majorPresentFormService.form.controls.PERTE_PA)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PA))("crossedOut",!0),p(2),h("tooltip",E(37,149,"major-present.PERTE_PM"))("control",t.majorPresentFormService.form.controls.PERTE_PM)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PM))("crossedOut",!0),p(2),h("tooltip",E(39,151,"major-present.PERTE_PW"))("control",t.majorPresentFormService.form.controls.PERTE_PW)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PW))("crossedOut",!0),p(2),h("tooltip",E(41,153,"major-present.PERTE_PO"))("control",t.majorPresentFormService.form.controls.PERTE_PO)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PORTEE))("crossedOut",!0),p(2),h("tooltip",E(43,155,"major-present.PERTE_CONTROLE"))("control",t.majorPresentFormService.form.controls.PERTE_CONTROLE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.CONTROLE))("crossedOut",!0),p(2),h("tooltip",E(45,157,"major-present.PERTE_ARMURE_DONNEE"))("control",t.majorPresentFormService.form.controls.PERTE_ARMURE_DONNEE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.ARMURE_DONNEE_RECUE))("crossedOut",!0),p(2),h("tooltip",E(47,159,"major-present.PERTE_ARMURE_RECUE"))("control",t.majorPresentFormService.form.controls.PERTE_ARMURE_RECUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.ARMURE_DONNEE_RECUE,!0))("crossedOut",!0),p(2),h("tooltip",E(49,161,"major-present.PERTE_CRITIQUE"))("control",t.majorPresentFormService.form.controls.PERTE_CRITIQUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.COUP_CRITIQUE))("crossedOut",!0),p(2),h("tooltip",E(51,163,"major-present.PERTE_PARADE"))("control",t.majorPresentFormService.form.controls.PERTE_PARADE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PARADE))("crossedOut",!0),p(2),h("tooltip",E(53,165,"major-present.PERTE_RESISTANCE_DOS"))("control",t.majorPresentFormService.form.controls.PERTE_RESISTANCE_DOS)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_DOS))("crossedOut",!0),p(2),h("tooltip",E(55,167,"major-present.PERTE_RESISTANCE_CRITIQUE"))("control",t.majorPresentFormService.form.controls.PERTE_RESISTANCE_CRITIQUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_CRITIQUES))("crossedOut",!0),p(2),h("tooltip",E(57,169,"major-present.PERTE_TACLE"))("control",t.majorPresentFormService.form.controls.PERTE_TACLE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.TACLE))("crossedOut",!0),p(2),h("tooltip",E(59,171,"major-present.PERTE_ESQUIVE"))("control",t.majorPresentFormService.form.controls.PERTE_ESQUIVE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.ESQUIVE))("crossedOut",!0),p(3),h("tooltip",E(62,173,"major-present.PERTE_MAITRISES_MELEE"))("control",t.majorPresentFormService.form.controls.PERTE_MAITRISES_MELEE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PERTE_MAITRISES_MELEE))("crossedOut",!0),p(2),h("tooltip",E(64,175,"major-present.PERTE_MAITRISES_DISTANCE"))("control",t.majorPresentFormService.form.controls.PERTE_MAITRISES_DISTANCE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PERTE_MAITRISES_DISTANCE))("crossedOut",!0),p(2),h("tooltip",E(66,177,"major-present.PERTE_MAITRISES_CRITIQUE"))("control",t.majorPresentFormService.form.controls.PERTE_MAITRISES_CRITIQUE)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PERTE_MAITRISES_CRITIQUE))("crossedOut",!0),p(2),h("tooltip",E(68,179,"major-present.PERTE_MAITRISES_DOS"))("control",t.majorPresentFormService.form.controls.PERTE_MAITRISES_DOS)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PERTE_MAITRISES_DOS))("crossedOut",!0),p(2),h("tooltip",E(70,181,"major-present.PERTE_MAITRISES_SOIN"))("control",t.majorPresentFormService.form.controls.PERTE_MAITRISES_SOIN)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PERTE_MAITRISES_SOIN))("crossedOut",!0),p(2),h("tooltip",E(72,183,"major-present.PERTE_MAITRISES_BERZERK"))("control",t.majorPresentFormService.form.controls.PERTE_MAITRISES_BERZERK)("srcImg",t.imageService.getActionIdUrl(t.IdActionsEnum.PERTE_MAITRISES_BERZERK))("crossedOut",!0))},dependencies:[ne,ht,Ue,$,W],encapsulation:2})};var fp=n=>n?(...r)=>n(...r):(...r)=>fetch(...r);var Kn=class extends Error{constructor(r,e="FunctionsError",t){super(r),this.name=e,this.context=t}},Hi=class extends Kn{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}},Qn=class extends Kn{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}},Yn=class extends Kn{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}},Qo=(function(n){return n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2",n})(Qo||{});var Vi=class{constructor(r,{headers:e={},customFetch:t,region:i=Qo.Any}={}){this.url=r,this.headers=e,this.region=i,this.fetch=fp(t)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return nl(this,arguments,void 0,function*(e,t={}){var i;let a,o;try{let{headers:s,method:c,body:l,signal:m,timeout:g}=t,_={},{region:f}=t;f||(f=this.region);let w=new URL(`${this.url}/${e}`);f&&f!=="any"&&(_["x-region"]=f,w.searchParams.set("forceFunctionRegion",f));let S;l&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(_["Content-Type"]="application/octet-stream",S=l):typeof l=="string"?(_["Content-Type"]="text/plain",S=l):typeof FormData<"u"&&l instanceof FormData?S=l:(_["Content-Type"]="application/json",S=JSON.stringify(l)):l&&typeof l!="string"&&!(typeof Blob<"u"&&l instanceof Blob)&&!(l instanceof ArrayBuffer)&&!(typeof FormData<"u"&&l instanceof FormData)?S=JSON.stringify(l):S=l;let T=m;g&&(o=new AbortController,a=setTimeout(()=>o.abort(),g),m?(T=o.signal,m.addEventListener("abort",()=>o.abort())):T=o.signal);let k=yield this.fetch(w.toString(),{method:c||"POST",headers:Object.assign(Object.assign(Object.assign({},_),this.headers),s),body:S,signal:T}).catch(X=>{throw new Hi(X)}),K=k.headers.get("x-relay-error");if(K&&K==="true")throw new Qn(k);if(!k.ok)throw new Yn(k);let D=((i=k.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),R;return D==="application/json"?R=yield k.json():D==="application/octet-stream"||D==="application/pdf"?R=yield k.blob():D==="text/event-stream"?R=k:D==="multipart/form-data"?R=yield k.formData():R=yield k.text(),{data:R,error:null,response:k}}catch(s){return{data:null,error:s,response:s instanceof Yn||s instanceof Qn?s.context:void 0}}finally{a&&clearTimeout(a)}})}};var vp=class extends Error{constructor(n){super(n.message),this.name="PostgrestError",this.details=n.details,this.hint=n.hint,this.code=n.code}},M0=class{constructor(n){var r,e,t;this.shouldThrowOnError=!1,this.method=n.method,this.url=n.url,this.headers=new Headers(n.headers),this.schema=n.schema,this.body=n.body,this.shouldThrowOnError=(r=n.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=n.signal,this.isMaybeSingle=(e=n.isMaybeSingle)!==null&&e!==void 0?e:!1,this.urlLengthLimit=(t=n.urlLengthLimit)!==null&&t!==void 0?t:8e3,n.fetch?this.fetch=n.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,r){return this.headers=new Headers(this.headers),this.headers.set(n,r),this}then(n,r){var e=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");let t=this.fetch,i=t(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(a=>u(this,null,function*(){let o=null,s=null,c=null,l=a.status,m=a.statusText;if(a.ok){var g,_;if(e.method!=="HEAD"){var f;let k=yield a.text();k===""||(e.headers.get("Accept")==="text/csv"||e.headers.get("Accept")&&(!((f=e.headers.get("Accept"))===null||f===void 0)&&f.includes("application/vnd.pgrst.plan+text"))?s=k:s=JSON.parse(k))}let S=(g=e.headers.get("Prefer"))===null||g===void 0?void 0:g.match(/count=(exact|planned|estimated)/),T=(_=a.headers.get("content-range"))===null||_===void 0?void 0:_.split("/");S&&T&&T.length>1&&(c=parseInt(T[1])),e.isMaybeSingle&&e.method==="GET"&&Array.isArray(s)&&(s.length>1?(o={code:"PGRST116",details:`Results contain ${s.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},s=null,c=null,l=406,m="Not Acceptable"):s.length===1?s=s[0]:s=null)}else{var w;let S=yield a.text();try{o=JSON.parse(S),Array.isArray(o)&&a.status===404&&(s=[],o=null,l=200,m="OK")}catch{a.status===404&&S===""?(l=204,m="No Content"):o={message:S}}if(o&&e.isMaybeSingle&&(!(o==null||(w=o.details)===null||w===void 0)&&w.includes("0 rows"))&&(o=null,l=200,m="OK"),o&&e.shouldThrowOnError)throw new vp(o)}return{error:o,data:s,count:c,status:l,statusText:m}}));return this.shouldThrowOnError||(i=i.catch(a=>{var o;let s="",c="",l="",m=a?.cause;if(m){var g,_,f,w;let k=(g=m?.message)!==null&&g!==void 0?g:"",K=(_=m?.code)!==null&&_!==void 0?_:"";s=`${(f=a?.name)!==null&&f!==void 0?f:"FetchError"}: ${a?.message}`,s+=`

Caused by: ${(w=m?.name)!==null&&w!==void 0?w:"Error"}: ${k}`,K&&(s+=` (${K})`),m?.stack&&(s+=`
${m.stack}`)}else{var S;s=(S=a?.stack)!==null&&S!==void 0?S:""}let T=this.url.toString().length;return a?.name==="AbortError"||a?.code==="ABORT_ERR"?(l="",c="Request was aborted (timeout or manual cancellation)",T>this.urlLengthLimit&&(c+=`. Note: Your request URL is ${T} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(m?.name==="HeadersOverflowError"||m?.code==="UND_ERR_HEADERS_OVERFLOW")&&(l="",c="HTTP headers exceeded server limits (typically 16KB)",T>this.urlLengthLimit&&(c+=`. Your request URL is ${T} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(o=a?.name)!==null&&o!==void 0?o:"FetchError"}: ${a?.message}`,details:s,hint:c,code:l},data:null,count:null,status:0,statusText:""}})),i.then(n,r)}returns(){return this}overrideTypes(){return this}},R0=class extends M0{select(n){let r=!1,e=(n??"*").split("").map(t=>/\s/.test(t)&&!r?"":(t==='"'&&(r=!r),t)).join("");return this.url.searchParams.set("select",e),this.headers.append("Prefer","return=representation"),this}order(n,{ascending:r=!0,nullsFirst:e,foreignTable:t,referencedTable:i=t}={}){let a=i?`${i}.order`:"order",o=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${o?`${o},`:""}${n}.${r?"asc":"desc"}${e===void 0?"":e?".nullsfirst":".nullslast"}`),this}limit(n,{foreignTable:r,referencedTable:e=r}={}){let t=typeof e>"u"?"limit":`${e}.limit`;return this.url.searchParams.set(t,`${n}`),this}range(n,r,{foreignTable:e,referencedTable:t=e}={}){let i=typeof t>"u"?"offset":`${t}.offset`,a=typeof t>"u"?"limit":`${t}.limit`;return this.url.searchParams.set(i,`${n}`),this.url.searchParams.set(a,`${r-n+1}`),this}abortSignal(n){return this.signal=n,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:n=!1,verbose:r=!1,settings:e=!1,buffers:t=!1,wal:i=!1,format:a="text"}={}){var o;let s=[n?"analyze":null,r?"verbose":null,e?"settings":null,t?"buffers":null,i?"wal":null].filter(Boolean).join("|"),c=(o=this.headers.get("Accept"))!==null&&o!==void 0?o:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${c}"; options=${s};`),a==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(n){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${n}`),this}},gp=new RegExp("[,()]"),Xn=class extends R0{eq(n,r){return this.url.searchParams.append(n,`eq.${r}`),this}neq(n,r){return this.url.searchParams.append(n,`neq.${r}`),this}gt(n,r){return this.url.searchParams.append(n,`gt.${r}`),this}gte(n,r){return this.url.searchParams.append(n,`gte.${r}`),this}lt(n,r){return this.url.searchParams.append(n,`lt.${r}`),this}lte(n,r){return this.url.searchParams.append(n,`lte.${r}`),this}like(n,r){return this.url.searchParams.append(n,`like.${r}`),this}likeAllOf(n,r){return this.url.searchParams.append(n,`like(all).{${r.join(",")}}`),this}likeAnyOf(n,r){return this.url.searchParams.append(n,`like(any).{${r.join(",")}}`),this}ilike(n,r){return this.url.searchParams.append(n,`ilike.${r}`),this}ilikeAllOf(n,r){return this.url.searchParams.append(n,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(n,r){return this.url.searchParams.append(n,`ilike(any).{${r.join(",")}}`),this}regexMatch(n,r){return this.url.searchParams.append(n,`match.${r}`),this}regexIMatch(n,r){return this.url.searchParams.append(n,`imatch.${r}`),this}is(n,r){return this.url.searchParams.append(n,`is.${r}`),this}isDistinct(n,r){return this.url.searchParams.append(n,`isdistinct.${r}`),this}in(n,r){let e=Array.from(new Set(r)).map(t=>typeof t=="string"&&gp.test(t)?`"${t}"`:`${t}`).join(",");return this.url.searchParams.append(n,`in.(${e})`),this}notIn(n,r){let e=Array.from(new Set(r)).map(t=>typeof t=="string"&&gp.test(t)?`"${t}"`:`${t}`).join(",");return this.url.searchParams.append(n,`not.in.(${e})`),this}contains(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cs.{${r.join(",")}}`):this.url.searchParams.append(n,`cs.${JSON.stringify(r)}`),this}containedBy(n,r){return typeof r=="string"?this.url.searchParams.append(n,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(n,`cd.{${r.join(",")}}`):this.url.searchParams.append(n,`cd.${JSON.stringify(r)}`),this}rangeGt(n,r){return this.url.searchParams.append(n,`sr.${r}`),this}rangeGte(n,r){return this.url.searchParams.append(n,`nxl.${r}`),this}rangeLt(n,r){return this.url.searchParams.append(n,`sl.${r}`),this}rangeLte(n,r){return this.url.searchParams.append(n,`nxr.${r}`),this}rangeAdjacent(n,r){return this.url.searchParams.append(n,`adj.${r}`),this}overlaps(n,r){return typeof r=="string"?this.url.searchParams.append(n,`ov.${r}`):this.url.searchParams.append(n,`ov.{${r.join(",")}}`),this}textSearch(n,r,{config:e,type:t}={}){let i="";t==="plain"?i="pl":t==="phrase"?i="ph":t==="websearch"&&(i="w");let a=e===void 0?"":`(${e})`;return this.url.searchParams.append(n,`${i}fts${a}.${r}`),this}match(n){return Object.entries(n).forEach(([r,e])=>{this.url.searchParams.append(r,`eq.${e}`)}),this}not(n,r,e){return this.url.searchParams.append(n,`not.${r}.${e}`),this}or(n,{foreignTable:r,referencedTable:e=r}={}){let t=e?`${e}.or`:"or";return this.url.searchParams.append(t,`(${n})`),this}filter(n,r,e){return this.url.searchParams.append(n,`${r}.${e}`),this}},O0=class{constructor(n,{headers:r={},schema:e,fetch:t,urlLengthLimit:i=8e3}){this.url=n,this.headers=new Headers(r),this.schema=e,this.fetch=t,this.urlLengthLimit=i}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(n,r){let{head:e=!1,count:t}=r??{},i=e?"HEAD":"GET",a=!1,o=(n??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join(""),{url:s,headers:c}=this.cloneRequestState();return s.searchParams.set("select",o),t&&c.append("Prefer",`count=${t}`),new Xn({method:i,url:s,headers:c,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(n,{count:r,defaultToNull:e=!0}={}){var t;let i="POST",{url:a,headers:o}=this.cloneRequestState();if(r&&o.append("Prefer",`count=${r}`),e||o.append("Prefer","missing=default"),Array.isArray(n)){let s=n.reduce((c,l)=>c.concat(Object.keys(l)),[]);if(s.length>0){let c=[...new Set(s)].map(l=>`"${l}"`);a.searchParams.set("columns",c.join(","))}}return new Xn({method:i,url:a,headers:o,schema:this.schema,body:n,fetch:(t=this.fetch)!==null&&t!==void 0?t:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(n,{onConflict:r,ignoreDuplicates:e=!1,count:t,defaultToNull:i=!0}={}){var a;let o="POST",{url:s,headers:c}=this.cloneRequestState();if(c.append("Prefer",`resolution=${e?"ignore":"merge"}-duplicates`),r!==void 0&&s.searchParams.set("on_conflict",r),t&&c.append("Prefer",`count=${t}`),i||c.append("Prefer","missing=default"),Array.isArray(n)){let l=n.reduce((m,g)=>m.concat(Object.keys(g)),[]);if(l.length>0){let m=[...new Set(l)].map(g=>`"${g}"`);s.searchParams.set("columns",m.join(","))}}return new Xn({method:o,url:s,headers:c,schema:this.schema,body:n,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch,urlLengthLimit:this.urlLengthLimit})}update(n,{count:r}={}){var e;let t="PATCH",{url:i,headers:a}=this.cloneRequestState();return r&&a.append("Prefer",`count=${r}`),new Xn({method:t,url:i,headers:a,schema:this.schema,body:n,fetch:(e=this.fetch)!==null&&e!==void 0?e:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:n}={}){var r;let e="DELETE",{url:t,headers:i}=this.cloneRequestState();return n&&i.append("Prefer",`count=${n}`),new Xn({method:e,url:t,headers:i,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}};function $i(n){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$i(n)}function D0(n,r){if($i(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if($i(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function N0(n){var r=D0(n,"string");return $i(r)=="symbol"?r:r+""}function P0(n,r,e){return(r=N0(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function bp(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function Yo(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?bp(Object(e),!0).forEach(function(t){P0(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):bp(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var xp=class _p{constructor(r,{headers:e={},schema:t,fetch:i,timeout:a,urlLengthLimit:o=8e3}={}){this.url=r,this.headers=new Headers(e),this.schemaName=t,this.urlLengthLimit=o;let s=i??globalThis.fetch;a!==void 0&&a>0?this.fetch=(c,l)=>{let m=new AbortController,g=setTimeout(()=>m.abort(),a),_=l?.signal;if(_){if(_.aborted)return clearTimeout(g),s(c,l);let f=()=>{clearTimeout(g),m.abort()};return _.addEventListener("abort",f,{once:!0}),s(c,Yo(Yo({},l),{},{signal:m.signal})).finally(()=>{clearTimeout(g),_.removeEventListener("abort",f)})}return s(c,Yo(Yo({},l),{},{signal:m.signal})).finally(()=>clearTimeout(g))}:this.fetch=s}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new O0(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(r){return new _p(this.url,{headers:this.headers,schema:r,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(r,e={},{head:t=!1,get:i=!1,count:a}={}){var o;let s,c=new URL(`${this.url}/rpc/${r}`),l,m=f=>f!==null&&typeof f=="object"&&(!Array.isArray(f)||f.some(m)),g=t&&Object.values(e).some(m);g?(s="POST",l=e):t||i?(s=t?"HEAD":"GET",Object.entries(e).filter(([f,w])=>w!==void 0).map(([f,w])=>[f,Array.isArray(w)?`{${w.join(",")}}`:`${w}`]).forEach(([f,w])=>{c.searchParams.append(f,w)})):(s="POST",l=e);let _=new Headers(this.headers);return g?_.set("Prefer",a?`count=${a},return=minimal`:"return=minimal"):a&&_.set("Prefer",`count=${a}`),new Xn({method:s,url:c,headers:_,schema:this.schemaName,body:l,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch,urlLengthLimit:this.urlLengthLimit})}};var Rc=class{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};let e=globalThis.process;if(e){let t=e.versions;if(t&&t.node){let i=t.node,a=parseInt(i.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){let r=this.detectEnvironment();if(r.constructor)return r.constructor;let e=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(e+=`

Suggested solution: ${r.workaround}`),new Error(e)}static createWebSocket(r,e){let t=this.getWebSocketConstructor();return new t(r,e)}static isWebSocketSupported(){try{let r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}},Oc=Rc;var yp="2.97.0";var Ep=`realtime-js/${yp}`,wp="1.0.0",Dc="2.0.0",Nc=Dc;var zi=1e4,Sp=1e3,Tp=100,Or=(function(n){return n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed",n})(Or||{}),Se=(function(n){return n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving",n})(Se||{}),gt=(function(n){return n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token",n})(gt||{}),Pc=(function(n){return n.websocket="websocket",n})(Pc||{}),Zr=(function(n){return n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed",n})(Zr||{});var Xo=class{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,e){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return e(this._binaryEncodeUserBroadcastPush(r));let t=[r.join_ref,r.ref,r.topic,r.event,r.payload];return e(JSON.stringify(t))}_binaryEncodeUserBroadcastPush(r){var e;return this._isArrayBuffer((e=r.payload)===null||e===void 0?void 0:e.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var e,t;let i=(t=(e=r.payload)===null||e===void 0?void 0:e.payload)!==null&&t!==void 0?t:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,i)}_encodeJsonUserBroadcastPush(r){var e,t;let i=(t=(e=r.payload)===null||e===void 0?void 0:e.payload)!==null&&t!==void 0?t:{},o=new TextEncoder().encode(JSON.stringify(i)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,o)}_encodeUserBroadcastPush(r,e,t){var i,a;let o=r.topic,s=(i=r.ref)!==null&&i!==void 0?i:"",c=(a=r.join_ref)!==null&&a!==void 0?a:"",l=r.payload.event,m=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},g=Object.keys(m).length===0?"":JSON.stringify(m);if(c.length>255)throw new Error(`joinRef length ${c.length} exceeds maximum of 255`);if(s.length>255)throw new Error(`ref length ${s.length} exceeds maximum of 255`);if(o.length>255)throw new Error(`topic length ${o.length} exceeds maximum of 255`);if(l.length>255)throw new Error(`userEvent length ${l.length} exceeds maximum of 255`);if(g.length>255)throw new Error(`metadata length ${g.length} exceeds maximum of 255`);let _=this.USER_BROADCAST_PUSH_META_LENGTH+c.length+s.length+o.length+l.length+g.length,f=new ArrayBuffer(this.HEADER_LENGTH+_),w=new DataView(f),S=0;w.setUint8(S++,this.KINDS.userBroadcastPush),w.setUint8(S++,c.length),w.setUint8(S++,s.length),w.setUint8(S++,o.length),w.setUint8(S++,l.length),w.setUint8(S++,g.length),w.setUint8(S++,e),Array.from(c,k=>w.setUint8(S++,k.charCodeAt(0))),Array.from(s,k=>w.setUint8(S++,k.charCodeAt(0))),Array.from(o,k=>w.setUint8(S++,k.charCodeAt(0))),Array.from(l,k=>w.setUint8(S++,k.charCodeAt(0))),Array.from(g,k=>w.setUint8(S++,k.charCodeAt(0)));var T=new Uint8Array(f.byteLength+t.byteLength);return T.set(new Uint8Array(f),0),T.set(new Uint8Array(t),f.byteLength),T.buffer}decode(r,e){if(this._isArrayBuffer(r)){let t=this._binaryDecode(r);return e(t)}if(typeof r=="string"){let t=JSON.parse(r),[i,a,o,s,c]=t;return e({join_ref:i,ref:a,topic:o,event:s,payload:c})}return e({})}_binaryDecode(r){let e=new DataView(r),t=e.getUint8(0),i=new TextDecoder;switch(t){case this.KINDS.userBroadcast:return this._decodeUserBroadcast(r,e,i)}}_decodeUserBroadcast(r,e,t){let i=e.getUint8(1),a=e.getUint8(2),o=e.getUint8(3),s=e.getUint8(4),c=this.HEADER_LENGTH+4,l=t.decode(r.slice(c,c+i));c=c+i;let m=t.decode(r.slice(c,c+a));c=c+a;let g=t.decode(r.slice(c,c+o));c=c+o;let _=r.slice(c,r.byteLength),f=s===this.JSON_ENCODING?JSON.parse(t.decode(_)):_,w={type:this.BROADCAST_EVENT,event:m,payload:f};return o>0&&(w.meta=JSON.parse(g)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST_EVENT,payload:w}}_isArrayBuffer(r){var e;return r instanceof ArrayBuffer||((e=r?.constructor)===null||e===void 0?void 0:e.name)==="ArrayBuffer"}_pick(r,e){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([t])=>e.includes(t)))}};var Jn=class{constructor(r,e){this.callback=r,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var pe=(function(n){return n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange",n})(pe||{}),Fc=(n,r,e={})=>{var t;let i=(t=e.skipTypes)!==null&&t!==void 0?t:[];return r?Object.keys(r).reduce((a,o)=>(a[o]=L0(o,n,r,i),a),{}):{}},L0=(n,r,e,t)=>{let i=r.find(s=>s.name===n),a=i?.type,o=e[n];return a&&!t.includes(a)?Cp(a,o):Lc(o)},Cp=(n,r)=>{if(n.charAt(0)==="_"){let e=n.slice(1,n.length);return j0(r,e)}switch(n){case pe.bool:return F0(r);case pe.float4:case pe.float8:case pe.int2:case pe.int4:case pe.int8:case pe.numeric:case pe.oid:return B0(r);case pe.json:case pe.jsonb:return U0(r);case pe.timestamp:return q0(r);case pe.abstime:case pe.date:case pe.daterange:case pe.int4range:case pe.int8range:case pe.money:case pe.reltime:case pe.text:case pe.time:case pe.timestamptz:case pe.timetz:case pe.tsrange:case pe.tstzrange:return Lc(r);default:return Lc(r)}},Lc=n=>n,F0=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},B0=n=>{if(typeof n=="string"){let r=parseFloat(n);if(!Number.isNaN(r))return r}return n},U0=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch{return n}return n},j0=(n,r)=>{if(typeof n!="string")return n;let e=n.length-1,t=n[e];if(n[0]==="{"&&t==="}"){let a,o=n.slice(1,e);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(s=>Cp(r,s))}return n},q0=n=>typeof n=="string"?n.replace(" ","T"):n,Jo=n=>{let r=new URL(n);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};var Zn=class{constructor(r,e,t={},i=zi){this.channel=r,this.event=e,this.payload=t,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,e){var t;return this._hasReceived(r)&&e((t=this.receivedResp)===null||t===void 0?void 0:t.response),this.recHooks.push({status:r,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let r=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:e}){this.recHooks.filter(t=>t.status===r).forEach(t=>t.callback(e))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}};var Gi=class n{constructor(r,e){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let t=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(t.state,{},i=>{let{onJoin:a,onLeave:o,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=n.syncState(this.state,i,a,o),this.pendingDiffs.forEach(c=>{this.state=n.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],s()}),this.channel._on(t.diff,{},i=>{let{onJoin:a,onLeave:o,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=n.syncDiff(this.state,i,a,o),s())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,e,t,i){let a=this.cloneDeep(r),o=this.transformState(e),s={},c={};return this.map(a,(l,m)=>{o[l]||(c[l]=m)}),this.map(o,(l,m)=>{let g=a[l];if(g){let _=m.map(T=>T.presence_ref),f=g.map(T=>T.presence_ref),w=m.filter(T=>f.indexOf(T.presence_ref)<0),S=g.filter(T=>_.indexOf(T.presence_ref)<0);w.length>0&&(s[l]=w),S.length>0&&(c[l]=S)}else s[l]=m}),this.syncDiff(a,{joins:s,leaves:c},t,i)}static syncDiff(r,e,t,i){let{joins:a,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return t||(t=()=>{}),i||(i=()=>{}),this.map(a,(s,c)=>{var l;let m=(l=r[s])!==null&&l!==void 0?l:[];if(r[s]=this.cloneDeep(c),m.length>0){let g=r[s].map(f=>f.presence_ref),_=m.filter(f=>g.indexOf(f.presence_ref)<0);r[s].unshift(..._)}t(s,m,c)}),this.map(o,(s,c)=>{let l=r[s];if(!l)return;let m=c.map(g=>g.presence_ref);l=l.filter(g=>m.indexOf(g.presence_ref)<0),r[s]=l,i(s,l,c),l.length===0&&delete r[s]}),r}static map(r,e){return Object.getOwnPropertyNames(r).map(t=>e(t,r[t]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((e,t)=>{let i=r[t];return"metas"in i?e[t]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):e[t]=i,e},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Wi=(function(n){return n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system",n})(Wi||{}),Jt=(function(n){return n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR",n})(Jt||{});var Ki=class n{constructor(r,e={config:{}},t){var i,a;if(this.topic=r,this.params=e,this.socket=t,this.bindings={},this.state=Se.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new Zn(this,gt.join,this.params,this.timeout),this.rejoinTimer=new Jn(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Se.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Se.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Se.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gt.reply,{},(o,s)=>{this._trigger(this._replyEventName(s),o)}),this.presence=new Gi(this),this.broadcastEndpointURL=Jo(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,e=this.timeout){var t,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Se.closed){let{config:{broadcast:o,presence:s,private:c}}=this.params,l=(i=(t=this.bindings.postgres_changes)===null||t===void 0?void 0:t.map(f=>f.filter))!==null&&i!==void 0?i:[],m=!!this.bindings[Wi.PRESENCE]&&this.bindings[Wi.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,g={},_={broadcast:o,presence:Object.assign(Object.assign({},s),{enabled:m}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(f=>r?.(Jt.CHANNEL_ERROR,f)),this._onClose(()=>r?.(Jt.CLOSED)),this.updateJoinPayload(Object.assign({config:_},g)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",w=>u(this,[w],function*({postgres_changes:f}){var S;if(this.socket._isManualToken()||this.socket.setAuth(),f===void 0){r?.(Jt.SUBSCRIBED);return}else{let T=this.bindings.postgres_changes,k=(S=T?.length)!==null&&S!==void 0?S:0,K=[];for(let D=0;D<k;D++){let R=T[D],{filter:{event:X,schema:kt,table:ae,filter:ye}}=R,tr=f&&f[D];if(tr&&tr.event===X&&n.isFilterValueEqual(tr.schema,kt)&&n.isFilterValueEqual(tr.table,ae)&&n.isFilterValueEqual(tr.filter,ye))K.push(Object.assign(Object.assign({},R),{id:tr.id}));else{this.unsubscribe(),this.state=Se.errored,r?.(Jt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=K,r&&r(Jt.SUBSCRIBED);return}})).receive("error",f=>{this.state=Se.errored,r?.(Jt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(f).join(", ")||"error")))}).receive("timeout",()=>{r?.(Jt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}track(t){return u(this,arguments,function*(r,e={}){return yield this.send({type:"presence",event:"track",payload:r},e.timeout||this.timeout)})}untrack(){return u(this,arguments,function*(r={}){return yield this.send({type:"presence",event:"untrack"},r)})}on(r,e,t){return this.state===Se.joined&&r===Wi.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>u(this,null,function*(){return yield this.subscribe()}))),this._on(r,e,t)}httpSend(i,a){return u(this,arguments,function*(r,e,t={}){var o;if(e==null)return Promise.reject("Payload is required for httpSend()");let s={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(s.Authorization=`Bearer ${this.socket.accessTokenValue}`);let c={method:"POST",headers:s,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:e,private:this.private}]})},l=yield this._fetchWithTimeout(this.broadcastEndpointURL,c,(o=t.timeout)!==null&&o!==void 0?o:this.timeout);if(l.status===202)return{success:!0};let m=l.statusText;try{let g=yield l.json();m=g.error||g.message||m}catch{}return Promise.reject(new Error(m))})}send(t){return u(this,arguments,function*(r,e={}){var i,a;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");let{event:o,payload:s}=r,c={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(c.Authorization=`Bearer ${this.socket.accessTokenValue}`);let l={method:"POST",headers:c,body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:s,private:this.private}]})};try{let m=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(a=m.body)===null||a===void 0?void 0:a.cancel(),m.ok?"ok":"error"}catch(m){return m.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var s,c,l;let m=this._push(r.type,r,e.timeout||this.timeout);r.type==="broadcast"&&!(!((l=(c=(s=this.params)===null||s===void 0?void 0:s.config)===null||c===void 0?void 0:c.broadcast)===null||l===void 0)&&l.ack)&&o("ok"),m.receive("ok",()=>o("ok")),m.receive("error",()=>o("error")),m.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Se.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gt.close,"leave",this._joinRef())};this.joinPush.destroy();let t=null;return new Promise(i=>{t=new Zn(this,gt.leave,{},r),t.receive("ok",()=>{e(),i("ok")}).receive("timeout",()=>{e(),i("timed out")}).receive("error",()=>{i("error")}),t.send(),this._canPush()||t.trigger("ok",{})}).finally(()=>{t?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Se.closed,this.bindings={}}_fetchWithTimeout(r,e,t){return u(this,null,function*(){let i=new AbortController,a=setTimeout(()=>i.abort(),t),o=yield this.socket.fetch(r,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(a),o})}_push(r,e,t=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new Zn(this,r,e,t);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>Tp){let e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(r,e,t){return e}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,e,t){var i,a;let o=r.toLocaleLowerCase(),{close:s,error:c,leave:l,join:m}=gt;if(t&&[s,c,l,m].indexOf(o)>=0&&t!==this._joinRef())return;let _=this._onMessage(o,e,t);if(e&&!_)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(f=>{var w,S,T;return((w=f.filter)===null||w===void 0?void 0:w.event)==="*"||((T=(S=f.filter)===null||S===void 0?void 0:S.event)===null||T===void 0?void 0:T.toLocaleLowerCase())===o}).map(f=>f.callback(_,t)):(a=this.bindings[o])===null||a===void 0||a.filter(f=>{var w,S,T,k,K,D;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in f){let R=f.id,X=(w=f.filter)===null||w===void 0?void 0:w.event;return R&&((S=e.ids)===null||S===void 0?void 0:S.includes(R))&&(X==="*"||X?.toLocaleLowerCase()===((T=e.data)===null||T===void 0?void 0:T.type.toLocaleLowerCase()))}else{let R=(K=(k=f?.filter)===null||k===void 0?void 0:k.event)===null||K===void 0?void 0:K.toLocaleLowerCase();return R==="*"||R===((D=e?.event)===null||D===void 0?void 0:D.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===o}).map(f=>{if(typeof _=="object"&&"ids"in _){let w=_.data,{schema:S,table:T,commit_timestamp:k,type:K,errors:D}=w;_=Object.assign(Object.assign({},{schema:S,table:T,commit_timestamp:k,eventType:K,new:{},old:{},errors:D}),this._getPayloadRecords(w))}f.callback(_,t)})}_isClosed(){return this.state===Se.closed}_isJoined(){return this.state===Se.joined}_isJoining(){return this.state===Se.joining}_isLeaving(){return this.state===Se.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,e,t){let i=r.toLocaleLowerCase(),a={type:i,filter:e,callback:t};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(r,e){let t=r.toLocaleLowerCase();return this.bindings[t]&&(this.bindings[t]=this.bindings[t].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===t&&n.isEqual(i.filter,e))})),this}static isEqual(r,e){if(Object.keys(r).length!==Object.keys(e).length)return!1;for(let t in r)if(r[t]!==e[t])return!1;return!0}static isFilterValueEqual(r,e){return(r??void 0)===(e??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(gt.close,{},r)}_onError(r){this._on(gt.error,{},e=>r(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Se.joining,this.joinPush.resend(r))}_getPayloadRecords(r){let e={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(e.new=Fc(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(e.old=Fc(r.columns,r.old_record)),e}};var Bc=()=>{},Zo={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},V0=[1e3,2e3,5e3,1e4],$0=1e4,z0=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`,Qi=class{constructor(r,e){var t;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=zi,this.transport=null,this.heartbeatIntervalMs=Zo.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Bc,this.ref=0,this.reconnectTimer=null,this.vsn=Nc,this.logger=Bc,this.conn=null,this.sendBuffer=[],this.serializer=new Xo,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=i=>i?(...a)=>i(...a):(...a)=>fetch(...a),!(!((t=e?.params)===null||t===void 0)&&t.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=e.params.apikey,this.endPoint=`${r}/${Pc.websocket}`,this.httpEndpoint=Jo(r),this._initializeOptions(e),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Oc.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");let e=r.message;throw e.includes("Node.js")?new Error(`${e}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${e}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,e){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){let t=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(t),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,e??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}removeChannel(r){return u(this,null,function*(){let e=yield r.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return u(this,null,function*(){let r=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),r})}log(r,e,t){this.logger(r,e,t)}connectionState(){switch(this.conn&&this.conn.readyState){case Or.connecting:return Zr.Connecting;case Or.open:return Zr.Open;case Or.closing:return Zr.Closing;default:return Zr.Closed}}isConnected(){return this.connectionState()===Zr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,e={config:{}}){let t=`realtime:${r}`,i=this.getChannels().find(a=>a.topic===t);if(i)return i;{let a=new Ki(`realtime:${r}`,e,this);return this.channels.push(a),a}}push(r){let{topic:e,event:t,payload:i,ref:a}=r,o=()=>{this.encode(r,s=>{var c;(c=this.conn)===null||c===void 0||c.send(s)})};this.log("push",`${e} ${t} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(r=null){return u(this,null,function*(){this._authPromise=this._performAuth(r);try{yield this._authPromise}finally{this._authPromise=null}})}_isManualToken(){return this._manuallySetToken}sendHeartbeat(){return u(this,null,function*(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(e){this.log("error","error in heartbeat callback",e)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(e){this.log("error","error in heartbeat callback",e)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(Sp,"heartbeat timeout"),setTimeout(()=>{var e;this.isConnected()||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout()},Zo.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(e){this.log("error","error in heartbeat callback",e)}this._setAuthSafely("heartbeat")})}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let e=this.channels.find(t=>t.topic===r&&(t._isJoined()||t._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${r}"`),e.unsubscribe())}_remove(r){this.channels=this.channels.filter(e=>e.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,e=>{if(e.topic==="phoenix"&&e.event==="phx_reply"&&e.ref&&e.ref===this.pendingHeartbeatRef){let l=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(e.payload.status==="ok"?"ok":"error",l)}catch(m){this.log("error","error in heartbeat callback",m)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}let{topic:t,event:i,payload:a,ref:o}=e,s=o?`(${o})`:"",c=a.status||"";this.log("receive",`${c} ${t} ${i} ${s}`.trim(),a),this.channels.filter(l=>l._isMember(t)).forEach(l=>l._trigger(i,a,o)),this._triggerStateCallbacks("message",e)})}_clearTimer(r){var e;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((e=this.reconnectTimer)===null||e===void 0||e.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===Or.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===Or.open||this.conn.readyState===Or.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");let r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this._terminateWorker()},this.workerRef.onmessage=e=>{e.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var e;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(e=this.reconnectTimer)===null||e===void 0||e.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(e){this.log("error","error in heartbeat callback",e)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(gt.error))}_appendParams(r,e){if(Object.keys(e).length===0)return r;let t=r.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${r}${t}${i}`}_workerObjectUrl(r){let e;if(r)e=r;else{let t=new Blob([z0],{type:"application/javascript"});e=URL.createObjectURL(t)}return e}_setConnectionState(r,e=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=e)}_performAuth(r=null){return u(this,null,function*(){let e,t=!1;if(r)e=r,t=!0;else if(this.accessToken)try{e=yield this.accessToken()}catch(i){this.log("error","Error fetching access token from callback",i),e=this.accessTokenValue}else e=this.accessTokenValue;t?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=e&&(this.accessTokenValue=e,this.channels.forEach(i=>{let a={access_token:e,version:Ep};e&&i.updateJoinPayload(a),i.joinedOnce&&i._isJoined()&&i._push(gt.access_token,{access_token:e})}))})}_waitForAuthIfNeeded(){return u(this,null,function*(){this._authPromise&&(yield this._authPromise)})}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(e=>{this.log("error",`Error setting auth in ${r}`,e)})}_triggerStateCallbacks(r,e){try{this.stateChangeCallbacks[r].forEach(t=>{try{t(e)}catch(i){this.log("error",`error in ${r} callback`,i)}})}catch(t){this.log("error",`error triggering ${r} callbacks`,t)}}_setupReconnectionTimer(){this.reconnectTimer=new Jn(()=>u(this,null,function*(){setTimeout(()=>u(this,null,function*(){yield this._waitForAuthIfNeeded(),this.isConnected()||this.connect()}),Zo.RECONNECT_DELAY)}),this.reconnectAfterMs)}_initializeOptions(r){var e,t,i,a,o,s,c,l,m,g,_,f;switch(this.transport=(e=r?.transport)!==null&&e!==void 0?e:null,this.timeout=(t=r?.timeout)!==null&&t!==void 0?t:zi,this.heartbeatIntervalMs=(i=r?.heartbeatIntervalMs)!==null&&i!==void 0?i:Zo.HEARTBEAT_INTERVAL,this.worker=(a=r?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=r?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(s=r?.heartbeatCallback)!==null&&s!==void 0?s:Bc,this.vsn=(c=r?.vsn)!==null&&c!==void 0?c:Nc,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=r?.reconnectAfterMs)!==null&&l!==void 0?l:w=>V0[w-1]||$0,this.vsn){case wp:this.encode=(m=r?.encode)!==null&&m!==void 0?m:(w,S)=>S(JSON.stringify(w)),this.decode=(g=r?.decode)!==null&&g!==void 0?g:(w,S)=>S(JSON.parse(w));break;case Dc:this.encode=(_=r?.encode)!==null&&_!==void 0?_:this.serializer.encode.bind(this.serializer),this.decode=(f=r?.decode)!==null&&f!==void 0?f:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}};var Yi=class extends Error{constructor(n,r){super(n),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function G0(n,r,e){let t=new URL(r,n);if(e)for(let[i,a]of Object.entries(e))a!==void 0&&t.searchParams.set(i,a);return t.toString()}function W0(n){return u(this,null,function*(){return!n||n.type==="none"?{}:n.type==="bearer"?{Authorization:`Bearer ${n.token}`}:n.type==="header"?{[n.name]:n.value}:n.type==="custom"?yield n.getHeaders():{}})}function K0(n){let r=n.fetchImpl??globalThis.fetch;return{request(c){return u(this,arguments,function*({method:t,path:i,query:a,body:o,headers:s}){let l=G0(n.baseUrl,i,a),m=yield W0(n.auth),g=yield r(l,{method:t,headers:N(N(N({},o?{"Content-Type":"application/json"}:{}),m),s),body:o?JSON.stringify(o):void 0}),_=yield g.text(),f=(g.headers.get("content-type")||"").includes("application/json"),w=f&&_?JSON.parse(_):_;if(!g.ok){let S=f?w:void 0,T=S?.error;throw new Yi(T?.message??`Request failed with status ${g.status}`,{status:g.status,icebergType:T?.type,icebergCode:T?.code,details:S})}return{status:g.status,headers:g.headers,data:w}})}}}function es(n){return n.join("")}var Q0=class{constructor(n,r=""){this.client=n,this.prefix=r}listNamespaces(n){return u(this,null,function*(){let r=n?{parent:es(n.namespace)}:void 0;return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(t=>({namespace:t}))})}createNamespace(n,r){return u(this,null,function*(){let e={namespace:n.namespace,properties:r?.properties};return(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:e})).data})}dropNamespace(n){return u(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${es(n.namespace)}`})})}loadNamespaceMetadata(n){return u(this,null,function*(){return{properties:(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${es(n.namespace)}`})).data.properties}})}namespaceExists(n){return u(this,null,function*(){try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${es(n.namespace)}`}),!0}catch(r){if(r instanceof Yi&&r.status===404)return!1;throw r}})}createNamespaceIfNotExists(n,r){return u(this,null,function*(){try{return yield this.createNamespace(n,r)}catch(e){if(e instanceof Yi&&e.status===409)return;throw e}})}};function ei(n){return n.join("")}var Y0=class{constructor(n,r="",e){this.client=n,this.prefix=r,this.accessDelegation=e}listTables(n){return u(this,null,function*(){return(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ei(n.namespace)}/tables`})).data.identifiers})}createTable(n,r){return u(this,null,function*(){let e={};return this.accessDelegation&&(e["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ei(n.namespace)}/tables`,body:r,headers:e})).data.metadata})}updateTable(n,r){return u(this,null,function*(){let e=yield this.client.request({method:"POST",path:`${this.prefix}/namespaces/${ei(n.namespace)}/tables/${n.name}`,body:r});return{"metadata-location":e.data["metadata-location"],metadata:e.data.metadata}})}dropTable(n,r){return u(this,null,function*(){yield this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${ei(n.namespace)}/tables/${n.name}`,query:{purgeRequested:String(r?.purge??!1)}})})}loadTable(n){return u(this,null,function*(){let r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(yield this.client.request({method:"GET",path:`${this.prefix}/namespaces/${ei(n.namespace)}/tables/${n.name}`,headers:r})).data.metadata})}tableExists(n){return u(this,null,function*(){let r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return yield this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${ei(n.namespace)}/tables/${n.name}`,headers:r}),!0}catch(e){if(e instanceof Yi&&e.status===404)return!1;throw e}})}createTableIfNotExists(n,r){return u(this,null,function*(){try{return yield this.createTable(n,r)}catch(e){if(e instanceof Yi&&e.status===409)return yield this.loadTable({namespace:n.namespace,name:r.name});throw e}})}},kp=class{constructor(n){let r="v1";n.catalogName&&(r+=`/${n.catalogName}`);let e=n.baseUrl.endsWith("/")?n.baseUrl:`${n.baseUrl}/`;this.client=K0({baseUrl:e,auth:n.auth,fetchImpl:n.fetch}),this.accessDelegation=n.accessDelegation?.join(","),this.namespaceOps=new Q0(this.client,r),this.tableOps=new Y0(this.client,r,this.accessDelegation)}listNamespaces(n){return u(this,null,function*(){return this.namespaceOps.listNamespaces(n)})}createNamespace(n,r){return u(this,null,function*(){return this.namespaceOps.createNamespace(n,r)})}dropNamespace(n){return u(this,null,function*(){yield this.namespaceOps.dropNamespace(n)})}loadNamespaceMetadata(n){return u(this,null,function*(){return this.namespaceOps.loadNamespaceMetadata(n)})}listTables(n){return u(this,null,function*(){return this.tableOps.listTables(n)})}createTable(n,r){return u(this,null,function*(){return this.tableOps.createTable(n,r)})}updateTable(n,r){return u(this,null,function*(){return this.tableOps.updateTable(n,r)})}dropTable(n,r){return u(this,null,function*(){yield this.tableOps.dropTable(n,r)})}loadTable(n){return u(this,null,function*(){return this.tableOps.loadTable(n)})}namespaceExists(n){return u(this,null,function*(){return this.namespaceOps.namespaceExists(n)})}tableExists(n){return u(this,null,function*(){return this.tableOps.tableExists(n)})}createNamespaceIfNotExists(n,r){return u(this,null,function*(){return this.namespaceOps.createNamespaceIfNotExists(n,r)})}createTableIfNotExists(n,r){return u(this,null,function*(){return this.tableOps.createTableIfNotExists(n,r)})}};var rs=class extends Error{constructor(n,r="storage",e,t){super(n),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=e,this.statusCode=t}};function ns(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}var ts=class extends rs{constructor(n,r,e,t="storage"){super(n,t,r,e),this.name=t==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=e}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Rp=class extends rs{constructor(n,r,e="storage"){super(n,e),this.name=e==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};var X0=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),J0=n=>{if(typeof n!="object"||n===null)return!1;let r=Object.getPrototypeOf(n);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},Uc=n=>{if(Array.isArray(n))return n.map(e=>Uc(e));if(typeof n=="function"||n!==Object(n))return n;let r={};return Object.entries(n).forEach(([e,t])=>{let i=e.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));r[i]=Uc(t)}),r},Z0=n=>!n||typeof n!="string"||n.length===0||n.length>100||n.trim()!==n||n.includes("/")||n.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(n);function Ji(n){"@babel/helpers - typeof";return Ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ji(n)}function eg(n,r){if(Ji(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if(Ji(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function tg(n){var r=eg(n,"string");return Ji(r)=="symbol"?r:r+""}function rg(n,r,e){return(r=tg(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function Ip(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function F(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?Ip(Object(e),!0).forEach(function(t){rg(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Ip(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Ap=n=>{var r;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(r=n.error)===null||r===void 0?void 0:r.message)||JSON.stringify(n)},ng=(n,r,e,t)=>u(null,null,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!e?.noResolveJson){let i=n,a=i.status||500;if(typeof i.json=="function")i.json().then(o=>{let s=o?.statusCode||o?.code||a+"";r(new ts(Ap(o),a,s,t))}).catch(()=>{if(t==="vectors"){let o=a+"";r(new ts(i.statusText||`HTTP ${a} error`,a,o,t))}else{let o=a+"";r(new ts(i.statusText||`HTTP ${a} error`,a,o,t))}});else{let o=a+"";r(new ts(i.statusText||`HTTP ${a} error`,a,o,t))}}else r(new Rp(Ap(n),n,t))}),ig=(n,r,e,t)=>{let i={method:n,headers:r?.headers||{}};return n==="GET"||n==="HEAD"||!t?F(F({},i),e):(J0(t)?(i.headers=F({"Content-Type":"application/json"},r?.headers),i.body=JSON.stringify(t)):i.body=t,r?.duplex&&(i.duplex=r.duplex),F(F({},i),e))};function Xi(n,r,e,t,i,a,o){return u(this,null,function*(){return new Promise((s,c)=>{n(e,ig(r,t,i,a)).then(l=>{if(!l.ok)throw l;if(t?.noResolveJson)return l;if(o==="vectors"){let m=l.headers.get("content-type");if(l.headers.get("content-length")==="0"||l.status===204)return{};if(!m||!m.includes("application/json"))return{}}return l.json()}).then(l=>s(l)).catch(l=>ng(l,c,t,o))})})}function Op(n="storage"){return{get:(r,e,t,i)=>u(null,null,function*(){return Xi(r,"GET",e,t,i,void 0,n)}),post:(r,e,t,i,a)=>u(null,null,function*(){return Xi(r,"POST",e,i,a,t,n)}),put:(r,e,t,i,a)=>u(null,null,function*(){return Xi(r,"PUT",e,i,a,t,n)}),head:(r,e,t,i)=>u(null,null,function*(){return Xi(r,"HEAD",e,F(F({},t),{},{noResolveJson:!0}),i,void 0,n)}),remove:(r,e,t,i,a)=>u(null,null,function*(){return Xi(r,"DELETE",e,i,a,t,n)})}}var ag=Op("storage"),{get:Zi,post:Tt,put:jc,head:og,remove:qc}=ag,ot=Op("vectors"),ti=class{constructor(n,r={},e,t="storage"){this.shouldThrowOnError=!1,this.url=n,this.headers=r,this.fetch=X0(e),this.namespace=t}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(n,r){return this.headers=F(F({},this.headers),{},{[n]:r}),this}handleOperation(n){return u(this,null,function*(){var r=this;try{return{data:yield n(),error:null}}catch(e){if(r.shouldThrowOnError)throw e;if(ns(e))return{data:null,error:e};throw e}})}},sg=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r}then(n,r){return this.execute().then(n,r)}execute(){return u(this,null,function*(){var n=this;try{return{data:(yield n.downloadFn()).body,error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ns(r))return{data:null,error:r};throw r}})}},Dp;Dp=Symbol.toStringTag;var cg=class{constructor(n,r){this.downloadFn=n,this.shouldThrowOnError=r,this[Dp]="BlobDownloadBuilder",this.promise=null}asStream(){return new sg(this.downloadFn,this.shouldThrowOnError)}then(n,r){return this.getPromise().then(n,r)}catch(n){return this.getPromise().catch(n)}finally(n){return this.getPromise().finally(n)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return u(this,null,function*(){var n=this;try{return{data:yield(yield n.downloadFn()).blob(),error:null}}catch(r){if(n.shouldThrowOnError)throw r;if(ns(r))return{data:null,error:r};throw r}})}},lg={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Mp={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},ug=class extends ti{constructor(n,r={},e,t){super(n,r,t,"storage"),this.bucketId=e}uploadOrUpdate(n,r,e,t){return u(this,null,function*(){var i=this;return i.handleOperation(()=>u(this,null,function*(){let a,o=F(F({},Mp),t),s=F(F({},i.headers),n==="POST"&&{"x-upsert":String(o.upsert)}),c=o.metadata;typeof Blob<"u"&&e instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",i.encodeMetadata(c)),a.append("",e)):typeof FormData<"u"&&e instanceof FormData?(a=e,a.has("cacheControl")||a.append("cacheControl",o.cacheControl),c&&!a.has("metadata")&&a.append("metadata",i.encodeMetadata(c))):(a=e,s["cache-control"]=`max-age=${o.cacheControl}`,s["content-type"]=o.contentType,c&&(s["x-metadata"]=i.toBase64(i.encodeMetadata(c))),(typeof ReadableStream<"u"&&a instanceof ReadableStream||a&&typeof a=="object"&&"pipe"in a&&typeof a.pipe=="function")&&!o.duplex&&(o.duplex="half")),t?.headers&&(s=F(F({},s),t.headers));let l=i._removeEmptyFolders(r),m=i._getFinalPath(l),g=yield(n=="PUT"?jc:Tt)(i.fetch,`${i.url}/object/${m}`,a,F({headers:s},o?.duplex?{duplex:o.duplex}:{}));return{path:l,id:g.Id,fullPath:g.Key}}))})}upload(n,r,e){return u(this,null,function*(){return this.uploadOrUpdate("POST",n,r,e)})}uploadToSignedUrl(n,r,e,t){return u(this,null,function*(){var i=this;let a=i._removeEmptyFolders(n),o=i._getFinalPath(a),s=new URL(i.url+`/object/upload/sign/${o}`);return s.searchParams.set("token",r),i.handleOperation(()=>u(this,null,function*(){let c,l=F({upsert:Mp.upsert},t),m=F(F({},i.headers),{"x-upsert":String(l.upsert)});return typeof Blob<"u"&&e instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",e)):typeof FormData<"u"&&e instanceof FormData?(c=e,c.append("cacheControl",l.cacheControl)):(c=e,m["cache-control"]=`max-age=${l.cacheControl}`,m["content-type"]=l.contentType),{path:a,fullPath:(yield jc(i.fetch,s.toString(),c,{headers:m})).Key}}))})}createSignedUploadUrl(n,r){return u(this,null,function*(){var e=this;return e.handleOperation(()=>u(this,null,function*(){let t=e._getFinalPath(n),i=F({},e.headers);r?.upsert&&(i["x-upsert"]="true");let a=yield Tt(e.fetch,`${e.url}/object/upload/sign/${t}`,{},{headers:i}),o=new URL(e.url+a.url),s=o.searchParams.get("token");if(!s)throw new rs("No token returned by API");return{signedUrl:o.toString(),path:n,token:s}}))})}update(n,r,e){return u(this,null,function*(){return this.uploadOrUpdate("PUT",n,r,e)})}move(n,r,e){return u(this,null,function*(){var t=this;return t.handleOperation(()=>u(this,null,function*(){return yield Tt(t.fetch,`${t.url}/object/move`,{bucketId:t.bucketId,sourceKey:n,destinationKey:r,destinationBucket:e?.destinationBucket},{headers:t.headers})}))})}copy(n,r,e){return u(this,null,function*(){var t=this;return t.handleOperation(()=>u(this,null,function*(){return{path:(yield Tt(t.fetch,`${t.url}/object/copy`,{bucketId:t.bucketId,sourceKey:n,destinationKey:r,destinationBucket:e?.destinationBucket},{headers:t.headers})).Key}}))})}createSignedUrl(n,r,e){return u(this,null,function*(){var t=this;return t.handleOperation(()=>u(this,null,function*(){let i=t._getFinalPath(n),a=yield Tt(t.fetch,`${t.url}/object/sign/${i}`,F({expiresIn:r},e?.transform?{transform:e.transform}:{}),{headers:t.headers}),o=e?.download?`&download=${e.download===!0?"":e.download}`:"";return{signedUrl:encodeURI(`${t.url}${a.signedURL}${o}`)}}))})}createSignedUrls(n,r,e){return u(this,null,function*(){var t=this;return t.handleOperation(()=>u(this,null,function*(){let i=yield Tt(t.fetch,`${t.url}/object/sign/${t.bucketId}`,{expiresIn:r,paths:n},{headers:t.headers}),a=e?.download?`&download=${e.download===!0?"":e.download}`:"";return i.map(o=>F(F({},o),{},{signedUrl:o.signedURL?encodeURI(`${t.url}${o.signedURL}${a}`):null}))}))})}download(n,r,e){let t=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),a=i?`?${i}`:"",o=this._getFinalPath(n),s=()=>Zi(this.fetch,`${this.url}/${t}/${o}${a}`,{headers:this.headers,noResolveJson:!0},e);return new cg(s,this.shouldThrowOnError)}info(n){return u(this,null,function*(){var r=this;let e=r._getFinalPath(n);return r.handleOperation(()=>u(this,null,function*(){return Uc(yield Zi(r.fetch,`${r.url}/object/info/${e}`,{headers:r.headers}))}))})}exists(n){return u(this,null,function*(){var r=this;let e=r._getFinalPath(n);try{return yield og(r.fetch,`${r.url}/object/${e}`,{headers:r.headers}),{data:!0,error:null}}catch(t){if(r.shouldThrowOnError)throw t;if(ns(t)&&t instanceof Rp){let i=t.originalError;if([400,404].includes(i?.status))return{data:!1,error:t}}throw t}})}getPublicUrl(n,r){let e=this._getFinalPath(n),t=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&t.push(i);let a=typeof r?.transform<"u"?"render/image":"object",o=this.transformOptsToQueryString(r?.transform||{});o!==""&&t.push(o);let s=t.join("&");return s!==""&&(s=`?${s}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${e}${s}`)}}}remove(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield qc(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:n},{headers:r.headers})}))})}list(n,r,e){return u(this,null,function*(){var t=this;return t.handleOperation(()=>u(this,null,function*(){let i=F(F(F({},lg),r),{},{prefix:n||""});return yield Tt(t.fetch,`${t.url}/object/list/${t.bucketId}`,i,{headers:t.headers},e)}))})}listV2(n,r){return u(this,null,function*(){var e=this;return e.handleOperation(()=>u(this,null,function*(){let t=F({},n);return yield Tt(e.fetch,`${e.url}/object/list-v2/${e.bucketId}`,t,{headers:e.headers},r)}))})}encodeMetadata(n){return JSON.stringify(n)}toBase64(n){return typeof Buffer<"u"?Buffer.from(n).toString("base64"):btoa(n)}_getFinalPath(n){return`${this.bucketId}/${n.replace(/^\/+/,"")}`}_removeEmptyFolders(n){return n.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(n){let r=[];return n.width&&r.push(`width=${n.width}`),n.height&&r.push(`height=${n.height}`),n.resize&&r.push(`resize=${n.resize}`),n.format&&r.push(`format=${n.format}`),n.quality&&r.push(`quality=${n.quality}`),r.join("&")}},dg="2.97.0",ea={"X-Client-Info":`storage-js/${dg}`},pg=class extends ti{constructor(n,r={},e,t){let i=new URL(n);t?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."));let a=i.href.replace(/\/$/,""),o=F(F({},ea),r);super(a,o,e,"storage")}listBuckets(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){let e=r.listBucketOptionsToQueryString(n);return yield Zi(r.fetch,`${r.url}/bucket${e}`,{headers:r.headers})}))})}getBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield Zi(r.fetch,`${r.url}/bucket/${n}`,{headers:r.headers})}))})}createBucket(e){return u(this,arguments,function*(n,r={public:!1}){var t=this;return t.handleOperation(()=>u(this,null,function*(){return yield Tt(t.fetch,`${t.url}/bucket`,{id:n,name:n,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:t.headers})}))})}updateBucket(n,r){return u(this,null,function*(){var e=this;return e.handleOperation(()=>u(this,null,function*(){return yield jc(e.fetch,`${e.url}/bucket/${n}`,{id:n,name:n,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:e.headers})}))})}emptyBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield Tt(r.fetch,`${r.url}/bucket/${n}/empty`,{},{headers:r.headers})}))})}deleteBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield qc(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers})}))})}listBucketOptionsToQueryString(n){let r={};return n&&("limit"in n&&(r.limit=String(n.limit)),"offset"in n&&(r.offset=String(n.offset)),n.search&&(r.search=n.search),n.sortColumn&&(r.sortColumn=n.sortColumn),n.sortOrder&&(r.sortOrder=n.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},mg=class extends ti{constructor(n,r={},e){let t=n.replace(/\/$/,""),i=F(F({},ea),r);super(t,i,e,"storage")}createBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield Tt(r.fetch,`${r.url}/bucket`,{name:n},{headers:r.headers})}))})}listBuckets(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){let e=new URLSearchParams;n?.limit!==void 0&&e.set("limit",n.limit.toString()),n?.offset!==void 0&&e.set("offset",n.offset.toString()),n?.sortColumn&&e.set("sortColumn",n.sortColumn),n?.sortOrder&&e.set("sortOrder",n.sortOrder),n?.search&&e.set("search",n.search);let t=e.toString(),i=t?`${r.url}/bucket?${t}`:`${r.url}/bucket`;return yield Zi(r.fetch,i,{headers:r.headers})}))})}deleteBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield qc(r.fetch,`${r.url}/bucket/${n}`,{},{headers:r.headers})}))})}from(n){var r=this;if(!Z0(n))throw new rs("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");let e=new kp({baseUrl:this.url,catalogName:n,auth:{type:"custom",getHeaders:()=>u(this,null,function*(){return r.headers})},fetch:this.fetch}),t=this.shouldThrowOnError;return new Proxy(e,{get(i,a){let o=i[a];return typeof o!="function"?o:(...s)=>u(null,null,function*(){try{return{data:yield o.apply(i,s),error:null}}catch(c){if(t)throw c;return{data:null,error:c}}})}})}},hg=class extends ti{constructor(n,r={},e){let t=n.replace(/\/$/,""),i=F(F({},ea),{},{"Content-Type":"application/json"},r);super(t,i,e,"vectors")}createIndex(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return(yield ot.post(r.fetch,`${r.url}/CreateIndex`,n,{headers:r.headers}))||{}}))})}getIndex(n,r){return u(this,null,function*(){var e=this;return e.handleOperation(()=>u(this,null,function*(){return yield ot.post(e.fetch,`${e.url}/GetIndex`,{vectorBucketName:n,indexName:r},{headers:e.headers})}))})}listIndexes(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield ot.post(r.fetch,`${r.url}/ListIndexes`,n,{headers:r.headers})}))})}deleteIndex(n,r){return u(this,null,function*(){var e=this;return e.handleOperation(()=>u(this,null,function*(){return(yield ot.post(e.fetch,`${e.url}/DeleteIndex`,{vectorBucketName:n,indexName:r},{headers:e.headers}))||{}}))})}},fg=class extends ti{constructor(n,r={},e){let t=n.replace(/\/$/,""),i=F(F({},ea),{},{"Content-Type":"application/json"},r);super(t,i,e,"vectors")}putVectors(n){return u(this,null,function*(){var r=this;if(n.vectors.length<1||n.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(()=>u(this,null,function*(){return(yield ot.post(r.fetch,`${r.url}/PutVectors`,n,{headers:r.headers}))||{}}))})}getVectors(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield ot.post(r.fetch,`${r.url}/GetVectors`,n,{headers:r.headers})}))})}listVectors(n){return u(this,null,function*(){var r=this;if(n.segmentCount!==void 0){if(n.segmentCount<1||n.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(n.segmentIndex!==void 0&&(n.segmentIndex<0||n.segmentIndex>=n.segmentCount))throw new Error(`segmentIndex must be between 0 and ${n.segmentCount-1}`)}return r.handleOperation(()=>u(this,null,function*(){return yield ot.post(r.fetch,`${r.url}/ListVectors`,n,{headers:r.headers})}))})}queryVectors(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield ot.post(r.fetch,`${r.url}/QueryVectors`,n,{headers:r.headers})}))})}deleteVectors(n){return u(this,null,function*(){var r=this;if(n.keys.length<1||n.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(()=>u(this,null,function*(){return(yield ot.post(r.fetch,`${r.url}/DeleteVectors`,n,{headers:r.headers}))||{}}))})}},gg=class extends ti{constructor(n,r={},e){let t=n.replace(/\/$/,""),i=F(F({},ea),{},{"Content-Type":"application/json"},r);super(t,i,e,"vectors")}createBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return(yield ot.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:n},{headers:r.headers}))||{}}))})}getBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield ot.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:n},{headers:r.headers})}))})}listBuckets(){return u(this,arguments,function*(n={}){var r=this;return r.handleOperation(()=>u(this,null,function*(){return yield ot.post(r.fetch,`${r.url}/ListVectorBuckets`,n,{headers:r.headers})}))})}deleteBucket(n){return u(this,null,function*(){var r=this;return r.handleOperation(()=>u(this,null,function*(){return(yield ot.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:n},{headers:r.headers}))||{}}))})}},bg=class n extends gg{constructor(r,e={}){super(r,e.headers||{},e.fetch)}from(r){return new vg(this.url,this.headers,r,this.fetch)}createBucket(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"createBucket"),t=this;return e().call(t,r)})}getBucket(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"getBucket"),t=this;return e().call(t,r)})}listBuckets(){return u(this,arguments,function*(r={}){var e=()=>qe(n.prototype,this,"listBuckets"),t=this;return e().call(t,r)})}deleteBucket(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"deleteBucket"),t=this;return e().call(t,r)})}},vg=class n extends hg{constructor(r,e,t,i){super(r,e,i),this.vectorBucketName=t}createIndex(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"createIndex"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName}))})}listIndexes(){return u(this,arguments,function*(r={}){var e=()=>qe(n.prototype,this,"listIndexes"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName}))})}getIndex(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"getIndex"),t=this;return e().call(t,t.vectorBucketName,r)})}deleteIndex(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"deleteIndex"),t=this;return e().call(t,t.vectorBucketName,r)})}index(r){return new xg(this.url,this.headers,this.vectorBucketName,r,this.fetch)}},xg=class n extends fg{constructor(r,e,t,i,a){super(r,e,a),this.vectorBucketName=t,this.indexName=i}putVectors(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"putVectors"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))})}getVectors(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"getVectors"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))})}listVectors(){return u(this,arguments,function*(r={}){var e=()=>qe(n.prototype,this,"listVectors"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))})}queryVectors(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"queryVectors"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))})}deleteVectors(r){return u(this,null,function*(){var e=()=>qe(n.prototype,this,"deleteVectors"),t=this;return e().call(t,F(F({},r),{},{vectorBucketName:t.vectorBucketName,indexName:t.indexName}))})}},Np=class extends pg{constructor(n,r={},e,t){super(n,r,e,t)}from(n){return new ug(this.url,this.headers,n,this.fetch)}get vectors(){return new bg(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new mg(this.url+"/iceberg",this.headers,this.fetch)}};var is="2.97.0";var en=30*1e3,as=3,os=as*en,Pp="http://localhost:9999",Lp="supabase.auth.token";var Fp={"X-Client-Info":`gotrue-js/${is}`};var ta="X-Supabase-Api-Version",Hc={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Bp=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Up=600*1e3;var Dr=class extends Error{constructor(r,e,t){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=t}};function O(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}var ss=class extends Dr{constructor(r,e,t){super(r,e,t),this.name="AuthApiError",this.status=e,this.code=t}};function jp(n){return O(n)&&n.name==="AuthApiError"}var bt=class extends Dr{constructor(r,e){super(r),this.name="AuthUnknownError",this.originalError=e}},Ct=class extends Dr{constructor(r,e,t,i){super(r,t,i),this.name=e,this.status=t}},Pe=class extends Ct{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function ls(n){return O(n)&&n.name==="AuthSessionMissingError"}var Zt=class extends Ct{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},tn=class extends Ct{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}},rn=class extends Ct{constructor(r,e=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};function qp(n){return O(n)&&n.name==="AuthImplicitGrantRedirectError"}var ra=class extends Ct{constructor(r,e=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},cs=class extends Ct{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}};var ri=class extends Ct{constructor(r,e){super(r,"AuthRetryableFetchError",e,void 0)}};function us(n){return O(n)&&n.name==="AuthRetryableFetchError"}var na=class extends Ct{constructor(r,e,t){super(r,"AuthWeakPasswordError",e,"weak_password"),this.reasons=t}};var nn=class extends Ct{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}};var ds="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Hp=` 	
\r=`.split(""),_g=(()=>{let n=new Array(128);for(let r=0;r<n.length;r+=1)n[r]=-1;for(let r=0;r<Hp.length;r+=1)n[Hp[r].charCodeAt(0)]=-2;for(let r=0;r<ds.length;r+=1)n[ds[r].charCodeAt(0)]=r;return n})();function Vp(n,r,e){if(n!==null)for(r.queue=r.queue<<8|n,r.queuedBits+=8;r.queuedBits>=6;){let t=r.queue>>r.queuedBits-6&63;e(ds[t]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){let t=r.queue>>r.queuedBits-6&63;e(ds[t]),r.queuedBits-=6}}function $p(n,r,e){let t=_g[n];if(t>-1)for(r.queue=r.queue<<6|t,r.queuedBits+=6;r.queuedBits>=8;)e(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(t===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Vc(n){let r=[],e=o=>{r.push(String.fromCodePoint(o))},t={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{wg(o,t,e)};for(let o=0;o<n.length;o+=1)$p(n.charCodeAt(o),i,a);return r.join("")}function yg(n,r){if(n<=127){r(n);return}else if(n<=2047){r(192|n>>6),r(128|n&63);return}else if(n<=65535){r(224|n>>12),r(128|n>>6&63),r(128|n&63);return}else if(n<=1114111){r(240|n>>18),r(128|n>>12&63),r(128|n>>6&63),r(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function Eg(n,r){for(let e=0;e<n.length;e+=1){let t=n.charCodeAt(e);if(t>55295&&t<=56319){let i=(t-55296)*1024&65535;t=(n.charCodeAt(e+1)-56320&65535|i)+65536,e+=1}yg(t,r)}}function wg(n,r,e){if(r.utf8seq===0){if(n<=127){e(n);return}for(let t=1;t<6;t+=1)if((n>>7-t&1)===0){r.utf8seq=t;break}if(r.utf8seq===2)r.codepoint=n&31;else if(r.utf8seq===3)r.codepoint=n&15;else if(r.utf8seq===4)r.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|n&63,r.utf8seq-=1,r.utf8seq===0&&e(r.codepoint)}}function Nr(n){let r=[],e={queue:0,queuedBits:0},t=i=>{r.push(i)};for(let i=0;i<n.length;i+=1)$p(n.charCodeAt(i),e,t);return new Uint8Array(r)}function zp(n){let r=[];return Eg(n,e=>r.push(e)),new Uint8Array(r)}function er(n){let r=[],e={queue:0,queuedBits:0},t=i=>{r.push(i)};return n.forEach(i=>Vp(i,e,t)),Vp(null,e,t),r.join("")}function Gp(n){return Math.round(Date.now()/1e3)+n}function Wp(){return Symbol("auth-callback")}var Te=()=>typeof window<"u"&&typeof document<"u",an={tested:!1,writable:!1},ps=()=>{if(!Te())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(an.tested)return an.writable;let n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),an.tested=!0,an.writable=!0}catch{an.tested=!0,an.writable=!1}return an.writable};function Kp(n){let r={},e=new URL(n);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,a)=>{r[a]=i})}catch{}return e.searchParams.forEach((t,i)=>{r[i]=t}),r}var ms=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),Qp=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",on=(n,r,e)=>u(null,null,function*(){yield n.setItem(r,JSON.stringify(e))}),Pr=(n,r)=>u(null,null,function*(){let e=yield n.getItem(r);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),De=(n,r)=>u(null,null,function*(){yield n.removeItem(r)}),ia=class n{constructor(){this.promise=new n.promiseConstructor((r,e)=>{this.resolve=r,this.reject=e})}};ia.promiseConstructor=Promise;function aa(n){let r=n.split(".");if(r.length!==3)throw new nn("Invalid JWT structure");for(let t=0;t<r.length;t++)if(!Bp.test(r[t]))throw new nn("JWT not in base64url format");return{header:JSON.parse(Vc(r[0])),payload:JSON.parse(Vc(r[1])),signature:Nr(r[2]),raw:{header:r[0],payload:r[1]}}}function Yp(n){return u(this,null,function*(){return yield new Promise(r=>{setTimeout(()=>r(null),n)})})}function Xp(n,r){return new Promise((t,i)=>{u(null,null,function*(){for(let a=0;a<1/0;a++)try{let o=yield n(a);if(!r(a,null,o)){t(o);return}}catch(o){if(!r(a,o)){i(o);return}}})})}function Sg(n){return("0"+n.toString(16)).substr(-2)}function Tg(){let r=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length,i="";for(let a=0;a<56;a++)i+=e.charAt(Math.floor(Math.random()*t));return i}return crypto.getRandomValues(r),Array.from(r,Sg).join("")}function Cg(n){return u(this,null,function*(){let e=new TextEncoder().encode(n),t=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(t);return Array.from(i).map(a=>String.fromCharCode(a)).join("")})}function kg(n){return u(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;let e=yield Cg(n);return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")})}function sn(n,r,e=!1){return u(this,null,function*(){let t=Tg(),i=t;e&&(i+="/PASSWORD_RECOVERY"),yield on(n,`${r}-code-verifier`,i);let a=yield kg(t);return[a,t===a?"plain":"s256"]})}var Ig=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Jp(n){let r=n.headers.get(ta);if(!r||!r.match(Ig))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Zp(n){if(!n)throw new Error("Missing exp claim");let r=Math.floor(Date.now()/1e3);if(n<=r)throw new Error("JWT has expired")}function em(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}var Ag=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cn(n){if(!Ag.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function hs(){let n={};return new Proxy(n,{get:(r,e)=>{if(e==="__isUserNotAvailableProxy")return!0;if(typeof e=="symbol"){let t=e.toString();if(t==="Symbol(Symbol.toPrimitive)"||t==="Symbol(Symbol.toStringTag)"||t==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${e}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,e)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${e}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function tm(n,r){return new Proxy(n,{get:(e,t,i)=>{if(t==="__isInsecureUserWarningProxy")return!0;if(typeof t=="symbol"){let a=t.toString();if(a==="Symbol(Symbol.toPrimitive)"||a==="Symbol(Symbol.toStringTag)"||a==="Symbol(util.inspect.custom)"||a==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(e,t,i)}return!r.value&&typeof t=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(e,t,i)}})}function $c(n){return JSON.parse(JSON.stringify(n))}var ln=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),Mg=[502,503,504];function rm(n){return u(this,null,function*(){var r;if(!Qp(n))throw new ri(ln(n),0);if(Mg.includes(n.status))throw new ri(ln(n),n.status);let e;try{e=yield n.json()}catch(a){throw new bt(ln(a),a)}let t,i=Jp(n);if(i&&i.getTime()>=Hc["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?t=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(t=e.error_code),t){if(t==="weak_password")throw new na(ln(e),n.status,((r=e.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(t==="session_not_found")throw new Pe}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new na(ln(e),n.status,e.weak_password.reasons);throw new ss(ln(e),n.status||500,t)})}var Rg=(n,r,e,t)=>{let i={method:n,headers:r?.headers||{}};return n==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),i.body=JSON.stringify(t),Object.assign(Object.assign({},i),e))};function L(n,r,e,t){return u(this,null,function*(){var i;let a=Object.assign({},t?.headers);a[ta]||(a[ta]=Hc["2024-01-01"].name),t?.jwt&&(a.Authorization=`Bearer ${t.jwt}`);let o=(i=t?.query)!==null&&i!==void 0?i:{};t?.redirectTo&&(o.redirect_to=t.redirectTo);let s=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=yield Og(n,r,e+s,{headers:a,noResolveJson:t?.noResolveJson},{},t?.body);return t?.xform?t?.xform(c):{data:Object.assign({},c),error:null}})}function Og(n,r,e,t,i,a){return u(this,null,function*(){let o=Rg(r,t,i,a),s;try{s=yield n(e,Object.assign({},o))}catch(c){throw console.error(c),new ri(ln(c),0)}if(s.ok||(yield rm(s)),t?.noResolveJson)return s;try{return yield s.json()}catch(c){yield rm(c)}})}function vt(n){var r;let e=null;Dg(n)&&(e=Object.assign({},n),n.expires_at||(e.expires_at=Gp(n.expires_in)));let t=(r=n.user)!==null&&r!==void 0?r:n;return{data:{session:e,user:t},error:null}}function zc(n){let r=vt(n);return!r.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((e,t)=>e&&typeof t=="string",!0)&&(r.data.weak_password=n.weak_password),r}function qt(n){var r;return{data:{user:(r=n.user)!==null&&r!==void 0?r:n},error:null}}function nm(n){return{data:n,error:null}}function im(n){let{action_link:r,email_otp:e,hashed_token:t,redirect_to:i,verification_type:a}=n,o=Lr(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),s={action_link:r,email_otp:e,hashed_token:t,redirect_to:i,verification_type:a},c=Object.assign({},o);return{data:{properties:s,user:c},error:null}}function Gc(n){return n}function Dg(n){return n.access_token&&n.refresh_token&&n.expires_in}var fs=["global","local","others"];var ni=class{constructor({url:r="",headers:e={},fetch:t}){this.url=r,this.headers=e,this.fetch=ms(t),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}signOut(t){return u(this,arguments,function*(r,e=fs[0]){if(fs.indexOf(e)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fs.join(", ")}`);try{return yield L(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(i){if(O(i))return{data:null,error:i};throw i}})}inviteUserByEmail(t){return u(this,arguments,function*(r,e={}){try{return yield L(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:qt})}catch(i){if(O(i))return{data:{user:null},error:i};throw i}})}generateLink(r){return u(this,null,function*(){try{let{options:e}=r,t=Lr(r,["options"]),i=Object.assign(Object.assign({},t),e);return"newEmail"in t&&(i.new_email=t?.newEmail,delete i.newEmail),yield L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:im,redirectTo:e?.redirectTo})}catch(e){if(O(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(r){return u(this,null,function*(){try{return yield L(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:qt})}catch(e){if(O(e))return{data:{user:null},error:e};throw e}})}listUsers(r){return u(this,null,function*(){var e,t,i,a,o,s,c;try{let l={nextPage:null,lastPage:0,total:0},m=yield L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(e=r?.page)===null||e===void 0?void 0:e.toString())!==null&&t!==void 0?t:"",per_page:(a=(i=r?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Gc});if(m.error)throw m.error;let g=yield m.json(),_=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(s=m.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(w=>{let S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);l[`${T}Page`]=S}),l.total=parseInt(_)),{data:Object.assign(Object.assign({},g),l),error:null}}catch(l){if(O(l))return{data:{users:[]},error:l};throw l}})}getUserById(r){return u(this,null,function*(){cn(r);try{return yield L(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:qt})}catch(e){if(O(e))return{data:{user:null},error:e};throw e}})}updateUserById(r,e){return u(this,null,function*(){cn(r);try{return yield L(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:e,headers:this.headers,xform:qt})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}})}deleteUser(r,e=!1){return u(this,null,function*(){cn(r);try{return yield L(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:e},xform:qt})}catch(t){if(O(t))return{data:{user:null},error:t};throw t}})}_listFactors(r){return u(this,null,function*(){cn(r.userId);try{let{data:e,error:t}=yield L(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:t}}catch(e){if(O(e))return{data:null,error:e};throw e}})}_deleteFactor(r){return u(this,null,function*(){cn(r.userId),cn(r.id);try{return{data:yield L(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(e){if(O(e))return{data:null,error:e};throw e}})}_listOAuthClients(r){return u(this,null,function*(){var e,t,i,a,o,s,c;try{let l={nextPage:null,lastPage:0,total:0},m=yield L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(t=(e=r?.page)===null||e===void 0?void 0:e.toString())!==null&&t!==void 0?t:"",per_page:(a=(i=r?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:Gc});if(m.error)throw m.error;let g=yield m.json(),_=(o=m.headers.get("x-total-count"))!==null&&o!==void 0?o:0,f=(c=(s=m.headers.get("link"))===null||s===void 0?void 0:s.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(w=>{let S=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),T=JSON.parse(w.split(";")[1].split("=")[1]);l[`${T}Page`]=S}),l.total=parseInt(_)),{data:Object.assign(Object.assign({},g),l),error:null}}catch(l){if(O(l))return{data:{clients:[]},error:l};throw l}})}_createOAuthClient(r){return u(this,null,function*(){try{return yield L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(O(e))return{data:null,error:e};throw e}})}_getOAuthClient(r){return u(this,null,function*(){try{return yield L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(O(e))return{data:null,error:e};throw e}})}_updateOAuthClient(r,e){return u(this,null,function*(){try{return yield L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(O(t))return{data:null,error:t};throw t}})}_deleteOAuthClient(r){return u(this,null,function*(){try{return yield L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(e){if(O(e))return{data:null,error:e};throw e}})}_regenerateOAuthClientSecret(r){return u(this,null,function*(){try{return yield L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(e){if(O(e))return{data:null,error:e};throw e}})}};function Wc(n={}){return{getItem:r=>n[r]||null,setItem:(r,e)=>{n[r]=e},removeItem:r=>{delete n[r]}}}var un={debug:!!(globalThis&&ps()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},oa=class extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}},sa=class extends oa{};function Kc(n,r,e){return u(this,null,function*(){un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,r);let t=new globalThis.AbortController;r>0&&setTimeout(()=>{t.abort(),un.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},r),yield Promise.resolve();try{return yield globalThis.navigator.locks.request(n,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:t.signal},i=>u(null,null,function*(){if(i){un.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,i.name);try{return yield e()}finally{un.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,i.name)}}else{if(r===0)throw un.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new sa(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(un.debug)try{let a=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}}))}catch(i){throw i?.name==="AbortError"?new sa(`Acquiring an exclusive Navigator LockManager lock "${n}" timed out waiting ${r}ms`):i}})}function am(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Qc(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function om(n){return parseInt(n,16)}function sm(n){let r=new TextEncoder().encode(n);return"0x"+Array.from(r,t=>t.toString(16).padStart(2,"0")).join("")}function cm(n){var r;let{chainId:e,domain:t,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:s,requestId:c,resources:l,scheme:m,uri:g,version:_}=n;{if(!Number.isInteger(e))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${e}`);if(!t)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!g)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(_!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${_}`);if(!((r=n.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}let f=Qc(n.address),w=m?`${m}://${t}`:t,S=n.statement?`${n.statement}
`:"",T=`${w} wants you to sign in with your Ethereum account:
${f}

${S}`,k=`URI: ${g}
Version: ${_}
Chain ID: ${e}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(k+=`
Expiration Time: ${i.toISOString()}`),s&&(k+=`
Not Before: ${s.toISOString()}`),c&&(k+=`
Request ID: ${c}`),l){let K=`
Resources:`;for(let D of l){if(!D||typeof D!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${D}`);K+=`
- ${D}`}k+=K}return`${T}
${k}`}var ve=class extends Error{constructor({message:r,code:e,cause:t,name:i}){var a;super(r,{cause:t}),this.__isWebAuthnError=!0,this.name=(a=i??(t instanceof Error?t.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=e}},dn=class extends ve{constructor(r,e){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e,message:r}),this.name="WebAuthnUnknownError",this.originalError=e}};function lm({error:n,options:r}){var e,t,i;let{publicKey:a}=r;if(!a)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ve({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((e=a.authenticatorSelection)===null||e===void 0?void 0:e.requireResidentKey)===!0)return new ve({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(r.mediation==="conditional"&&((t=a.authenticatorSelection)===null||t===void 0?void 0:t.userVerification)==="required")return new ve({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new ve({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new ve({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new ve({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return a.pubKeyCredParams.filter(s=>s.type==="public-key").length===0?new ve({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new ve({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){let o=window.location.hostname;if(Yc(o)){if(a.rp.id!==o)return new ve({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ve({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new ve({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function um({error:n,options:r}){let{publicKey:e}=r;if(!e)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(r.signal instanceof AbortSignal)return new ve({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new ve({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){let t=window.location.hostname;if(Yc(t)){if(e.rpId!==t)return new ve({message:`The RP ID "${e.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new ve({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new ve({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new ve({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}var Xc=class{createNewAbortSignal(){if(this.controller){let e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}let r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){let r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}},Ng=new Xc;function pm(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);let{challenge:r,user:e,excludeCredentials:t}=n,i=Lr(n,["challenge","user","excludeCredentials"]),a=Nr(r).buffer,o=Object.assign(Object.assign({},e),{id:Nr(e.id).buffer}),s=Object.assign(Object.assign({},i),{challenge:a,user:o});if(t&&t.length>0){s.excludeCredentials=new Array(t.length);for(let c=0;c<t.length;c++){let l=t[c];s.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:Nr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return s}function mm(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);let{challenge:r,allowCredentials:e}=n,t=Lr(n,["challenge","allowCredentials"]),i=Nr(r).buffer,a=Object.assign(Object.assign({},t),{challenge:i});if(e&&e.length>0){a.allowCredentials=new Array(e.length);for(let o=0;o<e.length;o++){let s=e[o];a.allowCredentials[o]=Object.assign(Object.assign({},s),{id:Nr(s.id).buffer,type:s.type||"public-key",transports:s.transports})}}return a}function hm(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n;return{id:n.id,rawId:n.id,response:{attestationObject:er(new Uint8Array(n.response.attestationObject)),clientDataJSON:er(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(r=e.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function fm(n){var r;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();let e=n,t=n.getClientExtensionResults(),i=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:er(new Uint8Array(i.authenticatorData)),clientDataJSON:er(new Uint8Array(i.clientDataJSON)),signature:er(new Uint8Array(i.signature)),userHandle:i.userHandle?er(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:t,authenticatorAttachment:(r=e.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Yc(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function dm(){var n,r;return!!(Te()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator?.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}function Pg(n){return u(this,null,function*(){try{let r=yield navigator.credentials.create(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new dn("Browser returned unexpected credential type",r)}:{data:null,error:new dn("Empty credential response",r)}}catch(r){return{data:null,error:lm({error:r,options:n})}}})}function Lg(n){return u(this,null,function*(){try{let r=yield navigator.credentials.get(n);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new dn("Browser returned unexpected credential type",r)}:{data:null,error:new dn("Empty credential response",r)}}catch(r){return{data:null,error:um({error:r,options:n})}}})}var Fg={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Bg={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function gs(...n){let r=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),e=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),t={};for(let i of n)if(i)for(let a in i){let o=i[a];if(o!==void 0)if(Array.isArray(o))t[a]=o;else if(e(o))t[a]=o;else if(r(o)){let s=t[a];r(s)?t[a]=gs(s,o):t[a]=gs(o)}else t[a]=o}return t}function Ug(n,r){return gs(Fg,n,r||{})}function jg(n,r){return gs(Bg,n,r||{})}var bs=class{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}_enroll(r){return u(this,null,function*(){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))})}_challenge(o,s){return u(this,arguments,function*({factorId:r,webauthn:e,friendlyName:t,signal:i},a){var c;try{let{data:l,error:m}=yield this.client.mfa.challenge({factorId:r,webauthn:e});if(!l)return{data:null,error:m};let g=i??Ng.createNewAbortSignal();if(l.webauthn.type==="create"){let{user:_}=l.webauthn.credential_options.publicKey;if(!_.name){let f=t;if(f)_.name=`${_.id}:${f}`;else{let S=(yield this.client.getUser()).data.user,T=((c=S?.user_metadata)===null||c===void 0?void 0:c.name)||S?.email||S?.id||"User";_.name=`${_.id}:${T}`}}_.displayName||(_.displayName=_.name)}switch(l.webauthn.type){case"create":{let _=Ug(l.webauthn.credential_options.publicKey,a?.create),{data:f,error:w}=yield Pg({publicKey:_,signal:g});return f?{data:{factorId:r,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:w}}case"request":{let _=jg(l.webauthn.credential_options.publicKey,a?.request),{data:f,error:w}=yield Lg(Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:_,signal:g}));return f?{data:{factorId:r,challengeId:l.id,webauthn:{type:l.webauthn.type,credential_response:f}},error:null}:{data:null,error:w}}}}catch(l){return O(l)?{data:null,error:l}:{data:null,error:new bt("Unexpected error in challenge",l)}}})}_verify(i){return u(this,arguments,function*({challengeId:r,factorId:e,webauthn:t}){return this.client.mfa.verify({factorId:e,challengeId:r,webauthn:t})})}_authenticate(o,s){return u(this,arguments,function*({factorId:r,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:t=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!e)return{data:null,error:new Dr("rpId is required for WebAuthn authentication")};try{if(!dm())return{data:null,error:new bt("Browser does not support WebAuthn",null)};let{data:c,error:l}=yield this.challenge({factorId:r,webauthn:{rpId:e,rpOrigins:t},signal:i},{request:a});if(!c)return{data:null,error:l};let{webauthn:m}=c;return this._verify({factorId:r,challengeId:c.challengeId,webauthn:{type:m.type,rpId:e,rpOrigins:t,credential_response:m.credential_response}})}catch(c){return O(c)?{data:null,error:c}:{data:null,error:new bt("Unexpected error in authenticate",c)}}})}_register(o,s){return u(this,arguments,function*({friendlyName:r,webauthn:{rpId:e=typeof window<"u"?window.location.hostname:void 0,rpOrigins:t=typeof window<"u"?[window.location.origin]:void 0,signal:i}={}},a){if(!e)return{data:null,error:new Dr("rpId is required for WebAuthn registration")};try{if(!dm())return{data:null,error:new bt("Browser does not support WebAuthn",null)};let{data:c,error:l}=yield this._enroll({friendlyName:r});if(!c)return yield this.client.mfa.listFactors().then(_=>{var f;return(f=_.data)===null||f===void 0?void 0:f.all.find(w=>w.factor_type==="webauthn"&&w.friendly_name===r&&w.status!=="unverified")}).then(_=>_?this.client.mfa.unenroll({factorId:_?.id}):void 0),{data:null,error:l};let{data:m,error:g}=yield this._challenge({factorId:c.id,friendlyName:c.friendly_name,webauthn:{rpId:e,rpOrigins:t},signal:i},{create:a});return m?this._verify({factorId:c.id,challengeId:m.challengeId,webauthn:{rpId:e,rpOrigins:t,type:m.webauthn.type,credential_response:m.webauthn.credential_response}}):{data:null,error:g}}catch(c){return O(c)?{data:null,error:c}:{data:null,error:new bt("Unexpected error in register",c)}}})}};am();var qg={url:Pp,storageKey:Lp,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Fp,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};function gm(n,r,e){return u(this,null,function*(){return yield e()})}var ii={},Hg=(()=>{class n{get jwks(){var e,t;return(t=(e=ii[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ii[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ii[this.storageKey]=Object.assign(Object.assign({},ii[this.storageKey]),{cachedAt:e})}constructor(e){var t,i,a;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;let o=Object.assign(Object.assign({},qg),e);if(this.storageKey=o.storageKey,this.instanceID=(t=n.nextInstanceID[this.storageKey])!==null&&t!==void 0?t:0,n.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!o.debug,typeof o.debug=="function"&&(this.logger=o.debug),this.instanceID>0&&Te()){let s=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(s),this.logDebugMessages&&console.trace(s)}if(this.persistSession=o.persistSession,this.autoRefreshToken=o.autoRefreshToken,this.admin=new ni({url:o.url,headers:o.headers,fetch:o.fetch}),this.url=o.url,this.headers=o.headers,this.fetch=ms(o.fetch),this.lock=o.lock||gm,this.detectSessionInUrl=o.detectSessionInUrl,this.flowType=o.flowType,this.hasCustomAuthorizationHeader=o.hasCustomAuthorizationHeader,this.throwOnError=o.throwOnError,this.lockAcquireTimeout=o.lockAcquireTimeout,o.lock?this.lock=o.lock:this.persistSession&&Te()&&(!((i=globalThis?.navigator)===null||i===void 0)&&i.locks)?this.lock=Kc:this.lock=gm,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bs(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(o.storage?this.storage=o.storage:ps()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Wc(this.memoryStorage)),o.userStorage&&(this.userStorage=o.userStorage)):(this.memoryStorage={},this.storage=Wc(this.memoryStorage)),Te()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(s){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",s)}(a=this.broadcastChannel)===null||a===void 0||a.addEventListener("message",s=>u(this,null,function*(){this._debug("received broadcast notification from other tab or client",s);try{yield this._notifyAllSubscribers(s.data.event,s.data.session,!1)}catch(c){this._debug("#broadcastChannel","error",c)}}))}o.skipAutoInitialize||this.initialize().catch(s=>{this._debug("#initialize()","error",s)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${is}) ${new Date().toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}initialize(){return u(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=u(this,null,function*(){return yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return u(this,null,function*(){var e;try{let t={},i="none";if(Te()&&(t=Kp(window.location.href),this._isImplicitGrantCallback(t)?i="implicit":(yield this._isPKCECallback(t))&&(i="pkce")),Te()&&this.detectSessionInUrl&&i!=="none"){let{data:a,error:o}=yield this._getSessionFromURL(t,i);if(o){if(this._debug("#_initialize()","error detecting session from URL",o),qp(o)){let l=(e=o.details)===null||e===void 0?void 0:e.code;if(l==="identity_already_exists"||l==="identity_not_found"||l==="single_identity_not_deletable")return{error:o}}return{error:o}}let{session:s,redirectType:c}=a;return this._debug("#_initialize()","detected session in URL",s,"redirect type",c),yield this._saveSession(s),setTimeout(()=>u(this,null,function*(){c==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",s):yield this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(t){return O(t)?this._returnResult({error:t}):this._returnResult({error:new bt("Unexpected error during initialization",t)})}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return u(this,null,function*(){var t,i,a;try{let o=yield L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(a=e?.options)===null||a===void 0?void 0:a.captchaToken}},xform:vt}),{data:s,error:c}=o;if(c||!s)return this._returnResult({data:{user:null,session:null},error:c});let l=s.session,m=s.user;return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:m,session:l},error:null})}catch(o){if(O(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signUp(e){return u(this,null,function*(){var t,i,a;try{let o;if("email"in e){let{email:g,password:_,options:f}=e,w=null,S=null;this.flowType==="pkce"&&([w,S]=yield sn(this.storage,this.storageKey)),o=yield L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:g,password:_,data:(t=f?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:w,code_challenge_method:S},xform:vt})}else if("phone"in e){let{phone:g,password:_,options:f}=e;o=yield L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:_,data:(i=f?.data)!==null&&i!==void 0?i:{},channel:(a=f?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:vt})}else throw new tn("You must provide either an email or phone number and a password");let{data:s,error:c}=o;if(c||!s)return yield De(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:c});let l=s.session,m=s.user;return s.session&&(yield this._saveSession(s.session),yield this._notifyAllSubscribers("SIGNED_IN",l)),this._returnResult({data:{user:m,session:l},error:null})}catch(o){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}signInWithPassword(e){return u(this,null,function*(){try{let t;if("email"in e){let{email:o,password:s,options:c}=e;t=yield L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:zc})}else if("phone"in e){let{phone:o,password:s,options:c}=e;t=yield L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:s,gotrue_meta_security:{captcha_token:c?.captchaToken}},xform:zc})}else throw new tn("You must provide either an email or phone number and a password");let{data:i,error:a}=t;if(a)return this._returnResult({data:{user:null,session:null},error:a});if(!i||!i.session||!i.user){let o=new Zt;return this._returnResult({data:{user:null,session:null},error:o})}return i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:a})}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}signInWithOAuth(e){return u(this,null,function*(){var t,i,a,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(a=e.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return u(this,null,function*(){return yield this.initializePromise,this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return this._exchangeCodeForSession(e)}))})}signInWithWeb3(e){return u(this,null,function*(){let{chain:t}=e;switch(t){case"ethereum":return yield this.signInWithEthereum(e);case"solana":return yield this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}})}signInWithEthereum(e){return u(this,null,function*(){var t,i,a,o,s,c,l,m,g,_,f;let w,S;if("message"in e)w=e.message,S=e.signature;else{let{chain:T,wallet:k,statement:K,options:D}=e,R;if(Te())if(typeof k=="object")R=k;else{let Ht=window;if("ethereum"in Ht&&typeof Ht.ethereum=="object"&&"request"in Ht.ethereum&&typeof Ht.ethereum.request=="function")R=Ht.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof k!="object"||!D?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");R=k}let X=new URL((t=D?.url)!==null&&t!==void 0?t:window.location.href),kt=yield R.request({method:"eth_requestAccounts"}).then(Ht=>Ht).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!kt||kt.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");let ae=Qc(kt[0]),ye=(i=D?.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!ye){let Ht=yield R.request({method:"eth_chainId"});ye=om(Ht)}let tr={domain:X.host,address:ae,statement:K,uri:X.href,version:"1",chainId:ye,nonce:(a=D?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(s=(o=D?.signInWithEthereum)===null||o===void 0?void 0:o.issuedAt)!==null&&s!==void 0?s:new Date,expirationTime:(c=D?.signInWithEthereum)===null||c===void 0?void 0:c.expirationTime,notBefore:(l=D?.signInWithEthereum)===null||l===void 0?void 0:l.notBefore,requestId:(m=D?.signInWithEthereum)===null||m===void 0?void 0:m.requestId,resources:(g=D?.signInWithEthereum)===null||g===void 0?void 0:g.resources};w=cm(tr),S=yield R.request({method:"personal_sign",params:[sm(w),ae]})}try{let{data:T,error:k}=yield L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:w,signature:S},!((_=e.options)===null||_===void 0)&&_.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:vt});if(k)throw k;if(!T||!T.session||!T.user){let K=new Zt;return this._returnResult({data:{user:null,session:null},error:K})}return T.session&&(yield this._saveSession(T.session),yield this._notifyAllSubscribers("SIGNED_IN",T.session)),this._returnResult({data:Object.assign({},T),error:k})}catch(T){if(O(T))return this._returnResult({data:{user:null,session:null},error:T});throw T}})}signInWithSolana(e){return u(this,null,function*(){var t,i,a,o,s,c,l,m,g,_,f,w;let S,T;if("message"in e)S=e.message,T=e.signature;else{let{chain:k,wallet:K,statement:D,options:R}=e,X;if(Te())if(typeof K=="object")X=K;else{let ae=window;if("solana"in ae&&typeof ae.solana=="object"&&("signIn"in ae.solana&&typeof ae.solana.signIn=="function"||"signMessage"in ae.solana&&typeof ae.solana.signMessage=="function"))X=ae.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof K!="object"||!R?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");X=K}let kt=new URL((t=R?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in X&&X.signIn){let ae=yield X.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},R?.signInWithSolana),{version:"1",domain:kt.host,uri:kt.href}),D?{statement:D}:null)),ye;if(Array.isArray(ae)&&ae[0]&&typeof ae[0]=="object")ye=ae[0];else if(ae&&typeof ae=="object"&&"signedMessage"in ae&&"signature"in ae)ye=ae;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in ye&&"signature"in ye&&(typeof ye.signedMessage=="string"||ye.signedMessage instanceof Uint8Array)&&ye.signature instanceof Uint8Array)S=typeof ye.signedMessage=="string"?ye.signedMessage:new TextDecoder().decode(ye.signedMessage),T=ye.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in X)||typeof X.signMessage!="function"||!("publicKey"in X)||typeof X!="object"||!X.publicKey||!("toBase58"in X.publicKey)||typeof X.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");S=[`${kt.host} wants you to sign in with your Solana account:`,X.publicKey.toBase58(),...D?["",D,""]:[""],"Version: 1",`URI: ${kt.href}`,`Issued At: ${(a=(i=R?.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((o=R?.signInWithSolana)===null||o===void 0)&&o.notBefore?[`Not Before: ${R.signInWithSolana.notBefore}`]:[],...!((s=R?.signInWithSolana)===null||s===void 0)&&s.expirationTime?[`Expiration Time: ${R.signInWithSolana.expirationTime}`]:[],...!((c=R?.signInWithSolana)===null||c===void 0)&&c.chainId?[`Chain ID: ${R.signInWithSolana.chainId}`]:[],...!((l=R?.signInWithSolana)===null||l===void 0)&&l.nonce?[`Nonce: ${R.signInWithSolana.nonce}`]:[],...!((m=R?.signInWithSolana)===null||m===void 0)&&m.requestId?[`Request ID: ${R.signInWithSolana.requestId}`]:[],...!((_=(g=R?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||_===void 0)&&_.length?["Resources",...R.signInWithSolana.resources.map(ye=>`- ${ye}`)]:[]].join(`
`);let ae=yield X.signMessage(new TextEncoder().encode(S),"utf8");if(!ae||!(ae instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");T=ae}}try{let{data:k,error:K}=yield L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:S,signature:er(T)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(w=e.options)===null||w===void 0?void 0:w.captchaToken}}:null),xform:vt});if(K)throw K;if(!k||!k.session||!k.user){let D=new Zt;return this._returnResult({data:{user:null,session:null},error:D})}return k.session&&(yield this._saveSession(k.session),yield this._notifyAllSubscribers("SIGNED_IN",k.session)),this._returnResult({data:Object.assign({},k),error:K})}catch(k){if(O(k))return this._returnResult({data:{user:null,session:null},error:k});throw k}})}_exchangeCodeForSession(e){return u(this,null,function*(){let t=yield Pr(this.storage,`${this.storageKey}-code-verifier`),[i,a]=(t??"").split("/");try{if(!i&&this.flowType==="pkce")throw new cs;let{data:o,error:s}=yield L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:vt});if(yield De(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!o||!o.session||!o.user){let c=new Zt;return this._returnResult({data:{user:null,session:null,redirectType:null},error:c})}return o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:Object.assign(Object.assign({},o),{redirectType:a??null}),error:s})}catch(o){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(o))return this._returnResult({data:{user:null,session:null,redirectType:null},error:o});throw o}})}signInWithIdToken(e){return u(this,null,function*(){try{let{options:t,provider:i,token:a,access_token:o,nonce:s}=e,c=yield L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:a,access_token:o,nonce:s,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:vt}),{data:l,error:m}=c;if(m)return this._returnResult({data:{user:null,session:null},error:m});if(!l||!l.session||!l.user){let g=new Zt;return this._returnResult({data:{user:null,session:null},error:g})}return l.session&&(yield this._saveSession(l.session),yield this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:l,error:m})}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}signInWithOtp(e){return u(this,null,function*(){var t,i,a,o,s;try{if("email"in e){let{email:c,options:l}=e,m=null,g=null;this.flowType==="pkce"&&([m,g]=yield sn(this.storage,this.storageKey));let{error:_}=yield L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:c,data:(t=l?.data)!==null&&t!==void 0?t:{},create_user:(i=l?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},code_challenge:m,code_challenge_method:g},redirectTo:l?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:_})}if("phone"in e){let{phone:c,options:l}=e,{data:m,error:g}=yield L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:c,data:(a=l?.data)!==null&&a!==void 0?a:{},create_user:(o=l?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:l?.captchaToken},channel:(s=l?.channel)!==null&&s!==void 0?s:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:m?.message_id},error:g})}throw new tn("You must provide either an email or phone number.")}catch(c){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(c))return this._returnResult({data:{user:null,session:null},error:c});throw c}})}verifyOtp(e){return u(this,null,function*(){var t,i;try{let a,o;"options"in e&&(a=(t=e.options)===null||t===void 0?void 0:t.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:s,error:c}=yield L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:a,xform:vt});if(c)throw c;if(!s)throw new Error("An error occurred on token verification.");let l=s.session,m=s.user;return l?.access_token&&(yield this._saveSession(l),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",l)),this._returnResult({data:{user:m,session:l},error:null})}catch(a){if(O(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}})}signInWithSSO(e){return u(this,null,function*(){var t,i,a,o,s;try{let c=null,l=null;this.flowType==="pkce"&&([c,l]=yield sn(this.storage,this.storageKey));let m=yield L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&i!==void 0?i:void 0}),!((a=e?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:c,code_challenge_method:l}),headers:this.headers,xform:nm});return!((o=m.data)===null||o===void 0)&&o.url&&Te()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(m.data.url),this._returnResult(m)}catch(c){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(c))return this._returnResult({data:null,error:c});throw c}})}reauthenticate(){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return u(this,null,function*(){try{return yield this._useSession(e=>u(this,null,function*(){let{data:{session:t},error:i}=e;if(i)throw i;if(!t)throw new Pe;let{error:a}=yield L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:a})}))}catch(e){if(O(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}})}resend(e){return u(this,null,function*(){try{let t=`${this.url}/resend`;if("email"in e){let{email:i,type:a,options:o}=e,{error:s}=yield L(this.fetch,"POST",t,{headers:this.headers,body:{email:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:s})}else if("phone"in e){let{phone:i,type:a,options:o}=e,{data:s,error:c}=yield L(this.fetch,"POST",t,{headers:this.headers,body:{phone:i,type:a,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:s?.message_id},error:c})}throw new tn("You must provide either an email or phone number and a type")}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}getSession(){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return this._useSession(t=>u(this,null,function*(){return t}))}))})}_acquireLock(e,t){return u(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=u(this,null,function*(){return yield i,yield t()});return this.pendingInLock.push(u(this,null,function*(){try{yield a}catch{}})),a}return yield this.lock(`lock:${this.storageKey}`,e,()=>u(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=t();for(this.pendingInLock.push(u(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let a=[...this.pendingInLock];yield Promise.all(a),this.pendingInLock.splice(0,a.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return u(this,null,function*(){this._debug("#_useSession","begin");try{let t=yield this.__loadSession();return yield e(t)}finally{this._debug("#_useSession","end")}})}__loadSession(){return u(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,t=yield Pr(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at*1e3-Date.now()<os:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.userStorage){let s=yield Pr(this.userStorage,this.storageKey+"-user");s?.user?e.user=s.user:e.user=hs()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){let s={value:this.suppressGetSessionWarning};e.user=tm(e.user,s),s.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}let{data:a,error:o}=yield this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{session:null},error:o}):this._returnResult({data:{session:a},error:null})}finally{this._debug("#__loadSession()","end")}})}getUser(e){return u(this,null,function*(){if(e)return yield this._getUser(e);yield this.initializePromise;let t=yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._getUser()}));return t.data.user&&(this.suppressGetSessionWarning=!0),t})}_getUser(e){return u(this,null,function*(){try{return e?yield L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:qt}):yield this._useSession(t=>u(this,null,function*(){var i,a,o;let{data:s,error:c}=t;if(c)throw c;return!(!((i=s.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pe}:yield L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(a=s.session)===null||a===void 0?void 0:a.access_token)!==null&&o!==void 0?o:void 0,xform:qt})}))}catch(t){if(O(t))return ls(t)&&(yield this._removeSession(),yield De(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}})}updateUser(i){return u(this,arguments,function*(e,t={}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._updateUser(e,t)}))})}_updateUser(i){return u(this,arguments,function*(e,t={}){try{return yield this._useSession(a=>u(this,null,function*(){let{data:o,error:s}=a;if(s)throw s;if(!o.session)throw new Pe;let c=o.session,l=null,m=null;this.flowType==="pkce"&&e.email!=null&&([l,m]=yield sn(this.storage,this.storageKey));let{data:g,error:_}=yield L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:m}),jwt:c.access_token,xform:qt});if(_)throw _;return c.user=g.user,yield this._saveSession(c),yield this._notifyAllSubscribers("USER_UPDATED",c),this._returnResult({data:{user:c.user},error:null})}))}catch(a){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(a))return this._returnResult({data:{user:null},error:a});throw a}})}setSession(e){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return u(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new Pe;let t=Date.now()/1e3,i=t,a=!0,o=null,{payload:s}=aa(e.access_token);if(s.exp&&(i=s.exp,a=i<=t),a){let{data:c,error:l}=yield this._callRefreshToken(e.refresh_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c)return{data:{user:null,session:null},error:null};o=c}else{let{data:c,error:l}=yield this._getUser(e.access_token);if(l)return this._returnResult({data:{user:null,session:null},error:l});o={access_token:e.access_token,refresh_token:e.refresh_token,user:c.user,token_type:"bearer",expires_in:i-t,expires_at:i},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return this._returnResult({data:{user:o.user,session:o},error:null})}catch(t){if(O(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}})}refreshSession(e){return u(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var i;if(!e){let{data:s,error:c}=t;if(c)throw c;e=(i=s.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new Pe;let{data:a,error:o}=yield this._callRefreshToken(e.refresh_token);return o?this._returnResult({data:{user:null,session:null},error:o}):a?this._returnResult({data:{user:a.user,session:a},error:null}):this._returnResult({data:{user:null,session:null},error:null})}))}catch(t){if(O(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}})}_getSessionFromURL(e,t){return u(this,null,function*(){try{if(!Te())throw new rn("No browser detected.");if(e.error||e.error_description||e.error_code)throw new rn(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ra("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new rn("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ra("No code detected.");let{data:D,error:R}=yield this._exchangeCodeForSession(e.code);if(R)throw R;let X=new URL(window.location.href);return X.searchParams.delete("code"),window.history.replaceState(window.history.state,"",X.toString()),{data:{session:D.session,redirectType:null},error:null}}let{provider_token:i,provider_refresh_token:a,access_token:o,refresh_token:s,expires_in:c,expires_at:l,token_type:m}=e;if(!o||!c||!s||!m)throw new rn("No session defined in URL");let g=Math.round(Date.now()/1e3),_=parseInt(c),f=g+_;l&&(f=parseInt(l));let w=f-g;w*1e3<=en&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${w}s, should have been closer to ${_}s`);let S=f-_;g-S>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",S,f,g):g-S<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",S,f,g);let{data:T,error:k}=yield this._getUser(o);if(k)throw k;let K={provider_token:i,provider_refresh_token:a,access_token:o,expires_in:_,expires_at:f,refresh_token:s,token_type:m,user:T.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:K,redirectType:e.type},error:null})}catch(i){if(O(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}})}_isImplicitGrantCallback(e){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),e):!!(e.access_token||e.error_description)}_isPKCECallback(e){return u(this,null,function*(){let t=yield Pr(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)})}signOut(){return u(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return u(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(t=>u(this,null,function*(){var i;let{data:a,error:o}=t;if(o&&!ls(o))return this._returnResult({error:o});let s=(i=a.session)===null||i===void 0?void 0:i.access_token;if(s){let{error:c}=yield this.admin.signOut(s,e);if(c&&!(jp(c)&&(c.status===404||c.status===401||c.status===403)||ls(c)))return this._returnResult({error:c})}return e!=="others"&&(yield this._removeSession(),yield De(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})}))})}onAuthStateChange(e){let t=Wp(),i={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,i),u(this,null,function*(){yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){this._emitInitialSession(t)}))}),{data:{subscription:i}}}_emitInitialSession(e){return u(this,null,function*(){return yield this._useSession(t=>u(this,null,function*(){var i,a;try{let{data:{session:o},error:s}=t;if(s)throw s;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(a=this.stateChangeEmitters.get(e))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(i){return u(this,arguments,function*(e,t={}){let a=null,o=null;this.flowType==="pkce"&&([a,o]=yield sn(this.storage,this.storageKey,!0));try{return yield L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:a,code_challenge_method:o,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(s))return this._returnResult({data:null,error:s});throw s}})}getUserIdentities(){return u(this,null,function*(){var e;try{let{data:t,error:i}=yield this.getUser();if(i)throw i;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}})}linkIdentity(e){return u(this,null,function*(){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)})}linkIdentityOAuth(e){return u(this,null,function*(){var t;try{let{data:i,error:a}=yield this._useSession(o=>u(this,null,function*(){var s,c,l,m,g;let{data:_,error:f}=o;if(f)throw f;let w=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(c=e.options)===null||c===void 0?void 0:c.scopes,queryParams:(l=e.options)===null||l===void 0?void 0:l.queryParams,skipBrowserRedirect:!0});return yield L(this.fetch,"GET",w,{headers:this.headers,jwt:(g=(m=_.session)===null||m===void 0?void 0:m.access_token)!==null&&g!==void 0?g:void 0})}));if(a)throw a;return Te()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(i?.url),this._returnResult({data:{provider:e.provider,url:i?.url},error:null})}catch(i){if(O(i))return this._returnResult({data:{provider:e.provider,url:null},error:i});throw i}})}linkIdentityIdToken(e){return u(this,null,function*(){return yield this._useSession(t=>u(this,null,function*(){var i;try{let{error:a,data:{session:o}}=t;if(a)throw a;let{options:s,provider:c,token:l,access_token:m,nonce:g}=e,_=yield L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=o?.access_token)!==null&&i!==void 0?i:void 0,body:{provider:c,id_token:l,access_token:m,nonce:g,link_identity:!0,gotrue_meta_security:{captcha_token:s?.captchaToken}},xform:vt}),{data:f,error:w}=_;return w?this._returnResult({data:{user:null,session:null},error:w}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new Zt}):(f.session&&(yield this._saveSession(f.session),yield this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:w}))}catch(a){if(yield De(this.storage,`${this.storageKey}-code-verifier`),O(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}))})}unlinkIdentity(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var i,a;let{data:o,error:s}=t;if(s)throw s;return yield L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0})}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}})}_refreshAccessToken(e){return u(this,null,function*(){let t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{let i=Date.now();return yield Xp(a=>u(this,null,function*(){return a>0&&(yield Yp(200*Math.pow(2,a-1))),this._debug(t,"refreshing attempt",a),yield L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:vt})}),(a,o)=>{let s=200*Math.pow(2,a);return o&&us(o)&&Date.now()+s-i<en})}catch(i){if(this._debug(t,"error",i),O(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(t,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,t){return u(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",i),Te()&&!t.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return u(this,null,function*(){var e,t;let i="#_recoverAndRefresh()";this._debug(i,"begin");try{let a=yield Pr(this.storage,this.storageKey);if(a&&this.userStorage){let s=yield Pr(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!s&&(s={user:a.user},yield on(this.userStorage,this.storageKey+"-user",s)),a.user=(e=s?.user)!==null&&e!==void 0?e:hs()}else if(a&&!a.user&&!a.user){let s=yield Pr(this.storage,this.storageKey+"-user");s&&s?.user?(a.user=s.user,yield De(this.storage,this.storageKey+"-user"),yield on(this.storage,this.storageKey,a)):a.user=hs()}if(this._debug(i,"session from storage",a),!this._isValidSession(a)){this._debug(i,"session is not valid"),a!==null&&(yield this._removeSession());return}let o=((t=a.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<os;if(this._debug(i,`session has${o?"":" not"} expired with margin of ${os}s`),o){if(this.autoRefreshToken&&a.refresh_token){let{error:s}=yield this._callRefreshToken(a.refresh_token);s&&(console.error(s),us(s)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",s),yield this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{let{data:s,error:c}=yield this._getUser(a.access_token);!c&&s?.user?(a.user=s.user,yield this._saveSession(a),yield this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(s){console.error("Error getting user data:",s),this._debug(i,"error getting user data, skipping SIGNED_IN notification",s)}else yield this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(i,"error",a),console.error(a);return}finally{this._debug(i,"end")}})}_callRefreshToken(e){return u(this,null,function*(){var t,i;if(!e)throw new Pe;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let a=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new ia;let{data:o,error:s}=yield this._refreshAccessToken(e);if(s)throw s;if(!o.session)throw new Pe;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let c={data:o.session,error:null};return this.refreshingDeferred.resolve(c),c}catch(o){if(this._debug(a,"error",o),O(o)){let s={data:null,error:o};return us(o)||(yield this._removeSession()),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(s),s}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(a,"end")}})}_notifyAllSubscribers(e,t,i=!0){return u(this,null,function*(){let a=`#_notifyAllSubscribers(${e})`;this._debug(a,"begin",t,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:t});let o=[],s=Array.from(this.stateChangeEmitters.values()).map(c=>u(this,null,function*(){try{yield c.callback(e,t)}catch(l){o.push(l)}}));if(yield Promise.all(s),o.length>0){for(let c=0;c<o.length;c+=1)console.error(o[c]);throw o[0]}}finally{this._debug(a,"end")}})}_saveSession(e){return u(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield De(this.storage,`${this.storageKey}-code-verifier`);let t=Object.assign({},e),i=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&t.user&&(yield on(this.userStorage,this.storageKey+"-user",{user:t.user}));let a=Object.assign({},t);delete a.user;let o=$c(a);yield on(this.storage,this.storageKey,o)}else{let a=$c(t);yield on(this.storage,this.storageKey,a)}})}_removeSession(){return u(this,null,function*(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,yield De(this.storage,this.storageKey),yield De(this.storage,this.storageKey+"-code-verifier"),yield De(this.storage,this.storageKey+"-user"),this.userStorage&&(yield De(this.userStorage,this.storageKey+"-user")),yield this._notifyAllSubscribers("SIGNED_OUT",null)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Te()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}_startAutoRefresh(){return u(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),en);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e);let t=setTimeout(()=>u(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0);this.autoRefreshTickTimeout=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t)})}_stopAutoRefresh(){return u(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e);let t=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,t&&clearTimeout(t)})}startAutoRefresh(){return u(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return u(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return u(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>u(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(t=>u(this,null,function*(){let{data:{session:i}}=t;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let a=Math.floor((i.expires_at*1e3-e)/en);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${en}ms, refresh threshold is ${as} ticks`),a<=as&&(yield this._callRefreshToken(i.refresh_token))}))}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof oa)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return u(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!Te()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>u(this,null,function*(){try{yield this._onVisibilityChanged(!1)}catch(e){this._debug("#visibilityChangedCallback","error",e)}}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return u(this,null,function*(){let t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,t,i){return u(this,null,function*(){let a=[`provider=${encodeURIComponent(t)}`];if(i?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&a.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,s]=yield sn(this.storage,this.storageKey),c=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(s)}`});a.push(c.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);a.push(o.toString())}return i?.skipBrowserRedirect&&a.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${a.join("&")}`})}_unenroll(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var i;let{data:a,error:o}=t;return o?this._returnResult({data:null,error:o}):yield L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token})}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}})}_enroll(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var i,a;let{data:o,error:s}=t;if(s)return this._returnResult({data:null,error:s});let c=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:l,error:m}=yield L(this.fetch,"POST",`${this.url}/factors`,{body:c,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return m?this._returnResult({data:null,error:m}):(e.factorType==="totp"&&l.type==="totp"&&(!((a=l?.totp)===null||a===void 0)&&a.qr_code)&&(l.totp.qr_code=`data:image/svg+xml;utf-8,${l.totp.qr_code}`),this._returnResult({data:l,error:null}))}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}})}_verify(e){return u(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var i;let{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});let s=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?hm(e.webauthn.credential_response):fm(e.webauthn.credential_response)})}:{code:e.code}),{data:c,error:l}=yield L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:s,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});return l?this._returnResult({data:null,error:l}):(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),this._returnResult({data:c,error:l}))}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}}))})}_challenge(e){return u(this,null,function*(){return this._acquireLock(this.lockAcquireTimeout,()=>u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){var i;let{data:a,error:o}=t;if(o)return this._returnResult({data:null,error:o});let s=yield L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(i=a?.session)===null||i===void 0?void 0:i.access_token});if(s.error)return s;let{data:c}=s;if(c.type!=="webauthn")return{data:c,error:null};switch(c.webauthn.type){case"create":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:pm(c.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},c),{webauthn:Object.assign(Object.assign({},c.webauthn),{credential_options:Object.assign(Object.assign({},c.webauthn.credential_options),{publicKey:mm(c.webauthn.credential_options.publicKey)})})}),error:null}}}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}}))})}_challengeAndVerify(e){return u(this,null,function*(){let{data:t,error:i}=yield this._challenge({factorId:e.factorId});return i?this._returnResult({data:null,error:i}):yield this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})})}_listFactors(){return u(this,null,function*(){var e;let{data:{user:t},error:i}=yield this.getUser();if(i)return{data:null,error:i};let a={all:[],phone:[],totp:[],webauthn:[]};for(let o of(e=t?.factors)!==null&&e!==void 0?e:[])a.all.push(o),o.status==="verified"&&a[o.factor_type].push(o);return{data:a,error:null}})}_getAuthenticatorAssuranceLevel(e){return u(this,null,function*(){var t,i,a,o;if(e)try{let{payload:w}=aa(e),S=null;w.aal&&(S=w.aal);let T=S,{data:{user:k},error:K}=yield this.getUser(e);if(K)return this._returnResult({data:null,error:K});((i=(t=k?.factors)===null||t===void 0?void 0:t.filter(X=>X.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(T="aal2");let R=w.amr||[];return{data:{currentLevel:S,nextLevel:T,currentAuthenticationMethods:R},error:null}}catch(w){if(O(w))return this._returnResult({data:null,error:w});throw w}let{data:{session:s},error:c}=yield this.getSession();if(c)return this._returnResult({data:null,error:c});if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let{payload:l}=aa(s.access_token),m=null;l.aal&&(m=l.aal);let g=m;((o=(a=s.user.factors)===null||a===void 0?void 0:a.filter(w=>w.status==="verified"))!==null&&o!==void 0?o:[]).length>0&&(g="aal2");let f=l.amr||[];return{data:{currentLevel:m,nextLevel:g,currentAuthenticationMethods:f},error:null}})}_getAuthorizationDetails(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){let{data:{session:i},error:a}=t;return a?this._returnResult({data:null,error:a}):i?yield L(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:i.access_token,xform:o=>({data:o,error:null})}):this._returnResult({data:null,error:new Pe})}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}})}_approveAuthorization(e,t){return u(this,null,function*(){try{return yield this._useSession(i=>u(this,null,function*(){let{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Pe});let s=yield L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"approve"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&Te()&&!t?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s}))}catch(i){if(O(i))return this._returnResult({data:null,error:i});throw i}})}_denyAuthorization(e,t){return u(this,null,function*(){try{return yield this._useSession(i=>u(this,null,function*(){let{data:{session:a},error:o}=i;if(o)return this._returnResult({data:null,error:o});if(!a)return this._returnResult({data:null,error:new Pe});let s=yield L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:a.access_token,body:{action:"deny"},xform:c=>({data:c,error:null})});return s.data&&s.data.redirect_url&&Te()&&!t?.skipBrowserRedirect&&window.location.assign(s.data.redirect_url),s}))}catch(i){if(O(i))return this._returnResult({data:null,error:i});throw i}})}_listOAuthGrants(){return u(this,null,function*(){try{return yield this._useSession(e=>u(this,null,function*(){let{data:{session:t},error:i}=e;return i?this._returnResult({data:null,error:i}):t?yield L(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:t.access_token,xform:a=>({data:a,error:null})}):this._returnResult({data:null,error:new Pe})}))}catch(e){if(O(e))return this._returnResult({data:null,error:e});throw e}})}_revokeOAuthGrant(e){return u(this,null,function*(){try{return yield this._useSession(t=>u(this,null,function*(){let{data:{session:i},error:a}=t;return a?this._returnResult({data:null,error:a}):i?(yield L(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:i.access_token,query:{client_id:e.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new Pe})}))}catch(t){if(O(t))return this._returnResult({data:null,error:t});throw t}})}fetchJwk(i){return u(this,arguments,function*(e,t={keys:[]}){let a=t.keys.find(l=>l.kid===e);if(a)return a;let o=Date.now();if(a=this.jwks.keys.find(l=>l.kid===e),a&&this.jwks_cached_at+Up>o)return a;let{data:s,error:c}=yield L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(c)throw c;return!s.keys||s.keys.length===0||(this.jwks=s,this.jwks_cached_at=o,a=s.keys.find(l=>l.kid===e),!a)?null:a})}getClaims(i){return u(this,arguments,function*(e,t={}){try{let a=e;if(!a){let{data:S,error:T}=yield this.getSession();if(T||!S.session)return this._returnResult({data:null,error:T});a=S.session.access_token}let{header:o,payload:s,signature:c,raw:{header:l,payload:m}}=aa(a);t?.allowExpired||Zp(s.exp);let g=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:yield this.fetchJwk(o.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!g){let{error:S}=yield this.getUser(a);if(S)throw S;return{data:{claims:s,header:o,signature:c},error:null}}let _=em(o.alg),f=yield crypto.subtle.importKey("jwk",g,_,!0,["verify"]);if(!(yield crypto.subtle.verify(_,f,c,zp(`${l}.${m}`))))throw new nn("Invalid JWT signature");return{data:{claims:s,header:o,signature:c},error:null}}catch(a){if(O(a))return this._returnResult({data:null,error:a});throw a}})}}return n.nextInstanceID={},n})(),Jc=Hg;var Vg=Jc,Zc=Vg;var $g="2.97.0",ca="";typeof Deno<"u"?ca="deno":typeof document<"u"?ca="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ca="react-native":ca="node";var zg={"X-Client-Info":`supabase-js-${ca}/${$g}`},Gg={headers:zg},Wg={schema:"public"},Kg={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Qg={};function la(n){"@babel/helpers - typeof";return la=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},la(n)}function Yg(n,r){if(la(n)!="object"||!n)return n;var e=n[Symbol.toPrimitive];if(e!==void 0){var t=e.call(n,r||"default");if(la(t)!="object")return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(n)}function Xg(n){var r=Yg(n,"string");return la(r)=="symbol"?r:r+""}function Jg(n,r,e){return(r=Xg(r))in n?Object.defineProperty(n,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[r]=e,n}function bm(n,r){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(n);r&&(t=t.filter(function(i){return Object.getOwnPropertyDescriptor(n,i).enumerable})),e.push.apply(e,t)}return e}function _e(n){for(var r=1;r<arguments.length;r++){var e=arguments[r]!=null?arguments[r]:{};r%2?bm(Object(e),!0).forEach(function(t){Jg(n,t,e[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):bm(Object(e)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))})}return n}var Zg=n=>n?(...r)=>n(...r):(...r)=>fetch(...r),eb=()=>Headers,tb=(n,r,e)=>{let t=Zg(e),i=eb();return(a,o)=>u(null,null,function*(){var s;let c=(s=yield r())!==null&&s!==void 0?s:n,l=new i(o?.headers);return l.has("apikey")||l.set("apikey",n),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),t(a,_e(_e({},o),{},{headers:l}))})};function rb(n){return n.endsWith("/")?n:n+"/"}function nb(n,r){var e,t;let{db:i,auth:a,realtime:o,global:s}=n,{db:c,auth:l,realtime:m,global:g}=r,_={db:_e(_e({},c),i),auth:_e(_e({},l),a),realtime:_e(_e({},m),o),storage:{},global:_e(_e(_e({},g),s),{},{headers:_e(_e({},(e=g?.headers)!==null&&e!==void 0?e:{}),(t=s?.headers)!==null&&t!==void 0?t:{})}),accessToken:()=>u(null,null,function*(){return""})};return n.accessToken?_.accessToken=n.accessToken:delete _.accessToken,_}function ib(n){let r=n?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(rb(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var ab=class extends Zc{constructor(n){super(n)}},ob=class{constructor(n,r,e){var t,i;this.supabaseUrl=n,this.supabaseKey=r;let a=ib(n);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);let o=`sb-${a.hostname.split(".")[0]}-auth-token`,s={db:Wg,realtime:Qg,auth:_e(_e({},Kg),{},{storageKey:o}),global:Gg},c=nb(e??{},s);if(this.storageKey=(t=c.auth.storageKey)!==null&&t!==void 0?t:"",this.headers=(i=c.global.headers)!==null&&i!==void 0?i:{},c.accessToken)this.accessToken=c.accessToken,this.auth=new Proxy({},{get:(m,g)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(g)} is not possible`)}});else{var l;this.auth=this._initSupabaseAuthClient((l=c.auth)!==null&&l!==void 0?l:{},this.headers,c.global.fetch)}this.fetch=tb(r,this._getAccessToken.bind(this),c.global.fetch),this.realtime=this._initRealtimeClient(_e({headers:this.headers,accessToken:this._getAccessToken.bind(this)},c.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(m=>this.realtime.setAuth(m)).catch(m=>console.warn("Failed to set initial Realtime auth token:",m)),this.rest=new xp(new URL("rest/v1",a).href,{headers:this.headers,schema:c.db.schema,fetch:this.fetch,timeout:c.db.timeout,urlLengthLimit:c.db.urlLengthLimit}),this.storage=new Np(this.storageUrl.href,this.headers,this.fetch,e?.storage),c.accessToken||this._listenForAuthEvents()}get functions(){return new Vi(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(n){return this.rest.from(n)}schema(n){return this.rest.schema(n)}rpc(n,r={},e={head:!1,get:!1,count:void 0}){return this.rest.rpc(n,r,e)}channel(n,r={config:{}}){return this.realtime.channel(n,r)}getChannels(){return this.realtime.getChannels()}removeChannel(n){return this.realtime.removeChannel(n)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){return u(this,null,function*(){var n=this,r,e;if(n.accessToken)return yield n.accessToken();let{data:t}=yield n.auth.getSession();return(r=(e=t.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:n.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:n,persistSession:r,detectSessionInUrl:e,storage:t,userStorage:i,storageKey:a,flowType:o,lock:s,debug:c,throwOnError:l},m,g){let _={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ab({url:this.authUrl.href,headers:_e(_e({},_),m),storageKey:a,autoRefreshToken:n,persistSession:r,detectSessionInUrl:e,storage:t,userStorage:i,flowType:o,lock:s,debug:c,throwOnError:l,fetch:g,hasCustomAuthorizationHeader:Object.keys(this.headers).some(f=>f.toLowerCase()==="authorization")})}_initRealtimeClient(n){return new Qi(this.realtimeUrl.href,_e(_e({},n),{},{params:_e(_e({},{apikey:this.supabaseKey}),n?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((n,r)=>{this._handleTokenChanged(n,"CLIENT",r?.access_token)})}_handleTokenChanged(n,r,e){(n==="TOKEN_REFRESHED"||n==="SIGNED_IN")&&this.changedAccessToken!==e?(this.changedAccessToken=e,this.realtime.setAuth(e)):n==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}},vm=(n,r,e)=>new ob(n,r,e);function sb(){if(typeof window<"u")return!1;let n=globalThis.process;if(!n)return!1;let r=n.version;if(r==null)return!1;let e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}sb()&&console.warn("\u26A0\uFE0F  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");var el=null,ai=class n{supabase;isBrowser;localStorageService=d(gr);constructor(r){this.isBrowser=fr(r);let e="https://nsxhzgbzihkpltpsqpip.supabase.co",t="sb_publishable_4twYhHBfyncLO2Fq8YLSLA_GaUjMka1";if(!this.isBrowser){this.supabase=null;return}el||(el=vm(e,t,{auth:{persistSession:!1,autoRefreshToken:!1,detectSessionInUrl:!1}})),this.supabase=el}getBuildsList(){return this.isBrowser?He(this.supabase.from("build").select("*")).pipe(V(({data:r,error:e})=>{if(e)throw e;return r??[]})):P([])}getBuildById(r){return this.isBrowser?He(this.supabase.from("build").select("*").eq("id",r).single()).pipe(V(({data:e,error:t})=>{if(t)throw t;return e??null})):P(null)}createEmptyBuild(){if(!this.isBrowser)return P(null);let r={nameBuild:"Nouveau build",classe:1,level:200,itemsId:"",aptitudes:"",sorts:"0-0-0-0-0-0-0-0-0-0-0-0-0-0-0-0-0-0",enchantement:"",elementSelector:"",compressed:!1,token:this.localStorageService.getItem("KEY_TOKEN")||""};return He(this.supabase.from("build").insert([r]).select()).pipe(V(({data:e,error:t})=>{if(t)throw t;return e[0]??null}))}updateBuild(r){return this.isBrowser?He(this.supabase.from("build").update(r).eq("id",r.id)).pipe(V(({error:e})=>{if(e)throw e})):P(void 0)}static \u0275fac=function(e){return new(e||n)(We(ci))};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Xe=class n{localStorageService=d(gr);levelFormService=d(fi);itemChooseService=d(Nt);classeFormService=d(Er);codeAptitudesService=d(Du);sortFormService=d(Iu);chasseFormService=d(Mu);elementSelectorService=d(Qa);supabaseService=d(ai);router=d(mt);buildList=new Ge([]);buildList$=this.buildList.asObservable();constructor(){let r=this.localStorageService.getItem("KEY_SAVE_BUILD_ALL")||[];this.buildList.next(r)}createBuildIfNotExists(r){r==="no-build"?this.createAndNavigate():this.supabaseService.getBuildById(r).pipe(ee(1),le(e=>{e&&this.loadBuild(e)}),Br(()=>(this.createAndNavigate(),[]))).subscribe()}createAndNavigate(){this.supabaseService.createEmptyBuild().subscribe(r=>{r?.id&&(this.localStorageService.setItem("KEY_BUILD_ID",r.id),this.localStorageService.setItem("KEY_TOKEN_BUILD_CURRENT",this.localStorageService.getItem("KEY_TOKEN")||""),this.loadBuild(r),this.router.navigate(["/",r.id]))})}listenBuildChanges(){da([this.levelFormService.level$,this.itemChooseService.idItems$,this.classeFormService.classe$,this.codeAptitudesService.code$,this.sortFormService.codeBuild$,this.chasseFormService.enchantement$]).pipe(le(()=>{let r=this.localStorageService.getItem("KEY_TOKEN_BUILD_CURRENT"),e=this.localStorageService.getItem("KEY_TOKEN");r&&e&&r!==e||(this.saveCurrentBuild(),this.saveBuildToSupabase())})).subscribe()}saveBuildToSupabase(){let r={id:this.localStorageService.getItem("KEY_BUILD_ID")||"",nameBuild:this.getNameFromBuild(),level:this.levelFormService.getValue(),itemsId:this.itemChooseService.getIdItems(),classe:this.classeFormService.getValue(),aptitudes:this.codeAptitudesService.getCode(),sorts:this.sortFormService.getCodeBuild(),enchantement:this.chasseFormService.getCodeBuild(),elementSelector:this.elementSelectorService.encodeForBuild(),compressed:!1};this.supabaseService.updateBuild(r).subscribe()}getNameFromBuild(){let r=this.localStorageService.getItem("KEY_BUILD_ID")||"";return this.buildList.getValue().find(i=>i.id===r)?.nameBuild||this.generateDefaultName()}saveCurrentBuild(r){let e={id:this.localStorageService.getItem("KEY_BUILD_ID")||"",nameBuild:r||this.getNameFromBuild(),level:this.levelFormService.getValue(),itemsId:this.itemChooseService.getIdItems(),classe:this.classeFormService.getValue(),aptitudes:this.codeAptitudesService.getCode(),sorts:this.sortFormService.getCodeBuild(),enchantement:this.chasseFormService.getCodeBuild(),elementSelector:this.elementSelectorService.encodeForBuild(),compressed:!1,createdAt:Date.now()};this.addBuildToLocalStorage(e)}addBuildToLocalStorage(r){if(!r.itemsId&&!r.aptitudes&&!r.sorts&&!r.enchantement&&!r.elementSelector)return;let e=this.buildList.getValue().filter(t=>t.id!==r.id);e.unshift(r),e.length>50&&e.pop(),this.buildList.next(e),this.localStorageService.setItem("KEY_SAVE_BUILD_ALL",e)}loadBuild(r){this.levelFormService.setValue(r.level??fi.DEFAULT_VALUE),this.elementSelectorService.decodeAndApplyFromBuild(r.elementSelector??""),this.itemChooseService.setIdItemsFromBuild(r.itemsId??""),this.classeFormService.setValue(r.classe??7),this.codeAptitudesService.saveCode(r.aptitudes??""),this.sortFormService.decodeAndSaveCodeBuild(r.sorts??"0-0-0-0-0-0-0-0-0-0-0-0-0-0-0-0-0-0"),this.chasseFormService.decodeAndSaveCodeBuild(r.enchantement??""),this.localStorageService.setItem("KEY_BUILD_ID",r.id??""),this.localStorageService.setItem("KEY_TOKEN_BUILD_CURRENT",r.token||this.localStorageService.getItem("KEY_TOKEN")||"")}removeBuildByIndex(r){let e=this.buildList.getValue();r>=0&&r<e.length&&(e.splice(r,1),this.buildList.next(e),this.localStorageService.setItem("KEY_SAVE_BUILD_ALL",e))}removeBuild(r){let t=this.buildList.getValue().findIndex(i=>i.itemsId===r.itemsId);t!==-1&&this.removeBuildByIndex(t)}generateDefaultName(){let r=new Date;return`Build ${r.toLocaleDateString()} ${r.toLocaleTimeString()}`}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};function lb(n,r){if(n&1){let e=fe();b(0,"div",2)(1,"img",7),y(2,"translate"),A("click",function(i){B(e);let a=q();return U(a.goToZenith(i))}),v()()}n&2&&(p(),h("matTooltip",E(2,1,"build.zenith")))}var xm=(f=>(f.CASQUE="CASQUE",f.AMULETTE="AMULETTE",f.PLASTRON="PLASTRON",f.ANNEAU_DROITE="ANNEAU_DROITE",f.ANNEAU_GAUCHE="ANNEAU_GAUCHE",f.BOTTES="BOTTES",f.CAPE="CAPE",f.EPAULETTES="EPAULETTES",f.CEINTURE="CEINTURE",f.SECONDE_MAIN="SECONDE_MAIN",f.PREMIERE_MAIN="PREMIERE_MAIN",f.ACCESSOIRES="ACCESSOIRES",f.FAMILIER="FAMILIER",f))(xm||{}),vs=class n{itemService=d(yr);itemTypeService=d(Cn);imageService=d(me);saveBuildService=d(Xe);itemChooseService=d(Nt);build=$e(void 0);ItemTypeBuild=xm;mapImageItems=new Map([["CASQUE","./aptitudes/EmplacementCoiffe.png"],["AMULETTE","./aptitudes/EmplacementAmulette.png"],["PLASTRON","./aptitudes/EmplacementPlastron.png"],["ANNEAU_DROITE","./aptitudes/EmplacementAnneauDroite.png"],["ANNEAU_GAUCHE","./aptitudes/EmplacementAnneauGauche.png"],["BOTTES","./aptitudes/EmplacementBottes.png"],["CAPE","./aptitudes/EmplacementCape.png"],["EPAULETTES","./aptitudes/EmplacementEpaulettes.png"],["CEINTURE","./aptitudes/EmplacementCeinture.png"],["SECONDE_MAIN","./aptitudes/EmplacementSecondeMain.png"],["PREMIERE_MAIN","./aptitudes/EmplacementPremi\xE8reMain.png"],["ACCESSOIRES","./aptitudes/EmplacementEmbl\xE8me.png"],["FAMILIER","./aptitudes/EmplacementFamilier.png"]]);firstAnneau=!0;ngOnInit(){let r=this.build()?.itemsId?.split(",");r&&r.length&&r.forEach(e=>{let t=this.itemService.getItem(parseInt(e));t&&this.getItemType(t).forEach(i=>{this.mapImageItems.has(i)&&this.mapImageItems.set(i,this.imageService.getItemUrl(t.idImage))})})}goToZenith(r){r.stopPropagation(),window.open("https://www.zenithwakfu.com/builder/"+this.build()?.codeZenith,"_blank")}removeBuild(r){r.stopPropagation(),this.saveBuildService.removeBuild(this.build())}loadBuild(){let r=this.build();r&&this.saveBuildService.loadBuild(r)}getItemType(r){switch(this.itemTypeService.getItemType(r.itemTypeId)){case 8:return["CASQUE"];case 5:return["AMULETTE"];case 9:return["PLASTRON"];case 3:return this.firstAnneau?(this.firstAnneau=!1,["ANNEAU_DROITE"]):["ANNEAU_GAUCHE"];case 4:return["BOTTES"];case 6:return["CAPE"];case 10:return["EPAULETTES"];case 7:return["CEINTURE"];case 1:return["PREMIERE_MAIN","SECONDE_MAIN"];case 2:return["PREMIERE_MAIN"];case 13:case 12:return["SECONDE_MAIN"];case 11:return["ACCESSOIRES"];case 14:return["FAMILIER"];default:return[]}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-build"]],inputs:{build:[1,"build"]},decls:23,vars:19,consts:[[1,"header"],[1,"header-name"],[1,"header-zenith"],[1,"content",3,"click"],[1,"row"],["alt","image",3,"src"],[3,"click"],["src","./zenith-logo.webp","alt","zenith",3,"click","matTooltip"]],template:function(e,t){if(e&1&&(b(0,"div",0)(1,"div",1),C(2),v(),oe(3,lb,3,3,"div",2),v(),b(4,"div",3),A("click",function(){return t.loadBuild()}),b(5,"div",4),x(6,"img",5)(7,"img",5)(8,"img",5)(9,"img",5)(10,"img",5)(11,"img",5)(12,"img",5),v(),x(13,"hr"),b(14,"div",4),x(15,"img",5)(16,"img",5)(17,"img",5)(18,"img",5)(19,"img",5)(20,"img",5),b(21,"button",6),A("click",function(a){return t.removeBuild(a)}),C(22,"X"),v()()()),e&2){let i,a,o,s;p(),Rt("position",(i=t.build())!=null&&i.codeZenith?"absolute":"initial"),p(),M((a=t.build())==null?null:a.nameBuild),p(),se((o=t.build())!=null&&o.codeZenith?3:-1),p(),Rt("border-top-right-radius",(s=t.build())!=null&&s.codeZenith?"0":"10px"),p(2),h("src",t.mapImageItems.get(t.ItemTypeBuild.CASQUE),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.AMULETTE),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.PLASTRON),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.ANNEAU_GAUCHE),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.ANNEAU_DROITE),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.BOTTES),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.CAPE),J),p(3),h("src",t.mapImageItems.get(t.ItemTypeBuild.EPAULETTES),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.CEINTURE),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.SECONDE_MAIN),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.PREMIERE_MAIN),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.ACCESSOIRES),J),p(),h("src",t.mapImageItems.get(t.ItemTypeBuild.FAMILIER),J)}},dependencies:[Ra,Ma,$,W],styles:[".header[_ngcontent-%COMP%]{position:relative;z-index:-1}.header[_ngcontent-%COMP%]   .header-name[_ngcontent-%COMP%]{width:80%;background-color:#1b263b;padding:10px;border-top-left-radius:10px;border-top-right-radius:42px;font-weight:600;font-size:large;color:#fff}.header[_ngcontent-%COMP%]   .header-zenith[_ngcontent-%COMP%]{position:relative;z-index:-1;border-top-left-radius:10px;border-top-right-radius:10px;background-color:orange;width:100%;height:42px;text-align:end}.header[_ngcontent-%COMP%]   .header-zenith[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{background-color:#dfe0e1;color:#1b263b;width:30px;height:30px;text-align:center;align-content:center;margin-right:1%;margin-top:.5%;cursor:pointer;border-radius:25%;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;margin-left:5px}.header[_ngcontent-%COMP%]   .header-zenith[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:active{background-color:#1b263b;color:#dfe0e1;transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #dfe0e1}.content[_ngcontent-%COMP%]{width:calc(100% - 20px);background-color:#1b263b;padding:10px;border-bottom-left-radius:10px;border-bottom-right-radius:10px;cursor:pointer}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:40px;height:40px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;cursor:pointer;background-color:#fff;color:#213a57;font-weight:600;font-size:large;border-radius:10px}.content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #1b263b}.content[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{margin:10px 0;border:1px solid #415A77}[_nghost-%COMP%]:hover{transform:scale(1.03)}"]})};var ub=(n,r)=>r.createdAt;function db(n,r){n&1&&(b(0,"div",0)(1,"span"),C(2,"\u{1F62B}"),v(),b(3,"p"),C(4),y(5,"translate"),v()()),n&2&&(p(4),M(E(5,1,"builds-list.no-build")))}function pb(n,r){if(n&1&&x(0,"app-build",1),n&2){let e=r.$implicit;h("build",e)}}function mb(n,r){if(n&1&&xt(0,pb,1,1,"app-build",1,ub),n&2){let e=q();_t(e)}}function hb(n,r){n&1&&oe(0,db,6,3,"div",0)(1,mb,2,0),n&2&&se(r.length===0?0:1)}var xs=class n{saveBuildService=d(Xe);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-builds-list"]],decls:5,vars:6,consts:[[1,"no-build"],[3,"build"]],template:function(e,t){if(e&1&&(b(0,"h2"),C(1),y(2,"translate"),v(),oe(3,hb,2,1),y(4,"async")),e&2){let i;p(),M(E(2,2,"builds-list.label")),p(2),se((i=E(4,4,t.saveBuildService.buildList$))?3:-1,i)}},dependencies:[hr,vs,$,fn,W],styles:["app-build[_ngcontent-%COMP%]{display:block;margin-bottom:10px}h2[_ngcontent-%COMP%]{color:#fff}.no-build[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;color:#fff}.no-build[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:200px}"]})};var oi=class n{http=d(gn);urlZenith="https://api.zenithwakfu.com/builder/api/";headers=new zl({Host:"api.zenithwakfu.com",Origin:"https://zenithwakfu.com",Referer:"https://zenithwakfu.com/","X-Requested-With":"XMLHttpRequest"});ELEMENTS_MAITRISES=[122,124,123,125];ELEMENTS_RESISTANCES=[82,83,84,85];createBuild(r){return this.http.post(this.urlZenith+"create",r,{headers:this.headers})}getBuildInfo(r){return this.http.get(this.urlZenith+"infos/build/"+r,{headers:this.headers})}addItemRequest(r){return this.http.post(this.urlZenith+"equipment/add",r,{headers:this.headers})}getBuild(r){return this.http.get(this.urlZenith+"build/"+r,{headers:this.headers})}prepareRequestsCustomStatistics(r,e,t){let i=[];for(let a=0;a<e;a++){let o={id_build:r.id_build,id_stats:t[a],value:r.value};i.push(this.uniqueUpdateCustomStatistics(o))}return Fr(i)}updateCustomStatistics(r,e){return r.id_stats===1068?this.prepareRequestsCustomStatistics(r,e.params[2],this.ELEMENTS_MAITRISES):r.id_stats===120?this.prepareRequestsCustomStatistics(r,4,this.ELEMENTS_MAITRISES):r.id_stats===1069?this.prepareRequestsCustomStatistics(r,e.params[2],this.ELEMENTS_RESISTANCES):r.id_stats===80?this.prepareRequestsCustomStatistics(r,4,this.ELEMENTS_RESISTANCES):Fr([this.uniqueUpdateCustomStatistics(r)])}uniqueUpdateCustomStatistics(r){return this.http.post(this.urlZenith+"customstatistics/update",r,{headers:this.headers})}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var _s=class n extends Pa{saveBuildService=d(Xe);zenithApiService=d(oi);static DEFAULT_VALUE="";form=new Na(n.DEFAULT_VALUE,{nonNullable:!0});keyEnum="KEY_IMPORT_BUILD";constructor(){super(),this.init()}importBuildFromUrlGearfu(){let r=this.form.value.split("itemsId=")[1];r&&this.saveBuildService.addBuildToLocalStorage({itemsId:r,nameBuild:"Gearfu - Build import"})}importBuildFromUrlZenith(){let r=this.form.value.split("builder/")[1];r&&this.zenithApiService.getBuild(r).pipe(le(e=>{let t=e.equipments.map(i=>i.id_equipment);this.saveBuildService.addBuildToLocalStorage({itemsId:t.join(","),nameBuild:e.name_build,codeZenith:e.link_build})})).subscribe()}handleChanges(r){}setValue(r){this.form.setValue(r??n.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(n.DEFAULT_VALUE)}importBuild(){this.form.value.includes("Gearfu")?this.importBuildFromUrlGearfu():this.form.value.includes("zenithwakfu")&&this.importBuildFromUrlZenith()}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ys=class n{importBuildService=d(_s);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-import-build"]],decls:10,vars:7,consts:[["matInput","",3,"formControl"],["fontIcon","check",3,"click"]],template:function(e,t){e&1&&(b(0,"h2"),C(1),y(2,"translate"),v(),b(3,"div")(4,"mat-form-field")(5,"mat-label"),C(6),y(7,"translate"),v(),x(8,"input",0),v(),b(9,"mat-icon",1),A("click",function(){return t.importBuildService.importBuild()}),v()()),e&2&&(p(),M(E(2,3,"import-build.label")),p(5),M(E(7,5,"import-build.placeholder")),p(2),h("formControl",t.importBuildService.form))},dependencies:[Ye,pt,Ft,Dt,dt,Be,Cr,Tr,ne,Qe,xr,vr,$,W],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 76px)}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;cursor:pointer;background-color:#fff;color:#213a57;font-size:50px;border-radius:10px;text-align:center}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #1b263b}"]})};var Es=class n extends Pa{saveBuildService=d(Xe);static DEFAULT_VALUE="";keyEnum="KEY_NAME_BUILD";form=new Na(n.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(r){}setValue(r){this.form.setValue(r??n.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(n.DEFAULT_VALUE)}addBuild(){this.saveBuildService.saveCurrentBuild(this.form.value||void 0)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ws=class n{nameBuildFormService=d(Es);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-name-build"]],decls:10,vars:7,consts:[["matInput","",3,"formControl"],["fontIcon","save",3,"click"]],template:function(e,t){e&1&&(b(0,"h2"),C(1),y(2,"translate"),v(),b(3,"div")(4,"mat-form-field")(5,"mat-label"),C(6),y(7,"translate"),v(),x(8,"input",0),v(),b(9,"mat-icon",1),A("click",function(){return t.nameBuildFormService.addBuild()}),v()()),e&2&&(p(),M(E(2,3,"name-build.label")),p(5),M(E(7,5,"name-build.placeholder")),p(2),h("formControl",t.nameBuildFormService.form))},dependencies:[Ye,pt,Ft,Dt,dt,Be,Cr,Tr,ne,Qe,xr,vr,$,W],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{color:#fff}[_nghost-%COMP%]   div[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:calc(100% - 76px)}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:56px;height:56px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;cursor:pointer;background-color:#fff;color:#213a57;font-size:50px;border-radius:10px;text-align:center}[_nghost-%COMP%]   div[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #1b263b}"]})};var Ss=class n{onlyNoElemFormService=d(za);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-only-no-elem"]],decls:11,vars:11,consts:[[3,"change","checked"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"section")(4,"mat-button-toggle-group")(5,"mat-button-toggle",0),A("change",function(){return t.onlyNoElemFormService.setValue(!0)}),C(6),y(7,"translate"),v(),b(8,"mat-button-toggle",0),A("change",function(){return t.onlyNoElemFormService.setValue(!1)}),C(9),y(10,"translate"),v()()()),e&2&&(p(),M(E(2,5,"only-no-elem.label")),p(4),h("checked",t.onlyNoElemFormService.form.value),p(),M(E(7,7,"only-no-elem.oui")),p(2),h("checked",!t.onlyNoElemFormService.form.value),p(),M(E(10,9,"only-no-elem.non")))},dependencies:[Uo,ji,zn,$,W],styles:["mat-button-toggle[_ngcontent-%COMP%]{color:var(--mat-button-toggle-selected-state-text-color, var(--mat-sys-on-secondary-container));background-color:var(--mat-button-toggle-selected-state-background-color, var(--mat-sys-secondary-container))}"]})};var Ts=class n{reverseFormService=d(Ga);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-reverse-button"]],decls:1,vars:1,consts:[["matIcon","swap_vert",3,"control"]],template:function(e,t){e&1&&x(0,"app-button-checkbox",0),e&2&&h("control",t.reverseFormService.form)},dependencies:[Ue,$],styles:["button[_ngcontent-%COMP%]{border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;cursor:pointer;background-color:#fff;color:#213a57;font-weight:600;font-size:17px;height:34px;width:41px;border-radius:25%}button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #1b263b}"]})};var Cs=class n{obtentionFormService=d(Wa);imageService=d(me);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-obtention"]],decls:14,vars:28,consts:[[3,"tooltip","control","srcImg"]],template:function(e,t){e&1&&(b(0,"h3"),C(1),y(2,"translate"),v(),b(3,"div"),x(4,"app-button-checkbox",0),y(5,"translate"),x(6,"app-button-checkbox",0),y(7,"translate"),x(8,"app-button-checkbox",0),y(9,"translate"),x(10,"app-button-checkbox",0),y(11,"translate"),x(12,"app-button-checkbox",0),y(13,"translate"),v()),e&2&&(p(),M(E(2,16,"obtention.cacher")),p(3),h("tooltip",E(5,18,"obtention.craftable"))("control",t.obtentionFormService.form.controls.CRAFTABLE)("srcImg",t.imageService.getItemUrl(71919810)),p(2),h("tooltip",E(7,20,"obtention.droppable"))("control",t.obtentionFormService.form.controls.DROP)("srcImg",t.imageService.getMonsterUrl(100200039)),p(2),h("tooltip",E(9,22,"obtention.boss"))("control",t.obtentionFormService.form.controls.BOSS)("srcImg",t.imageService.getMonsterUrl(100200044)),p(2),h("tooltip",E(11,24,"obtention.archi"))("control",t.obtentionFormService.form.controls.ARCHI)("srcImg",t.imageService.getAchievementUrl(5341)),p(2),h("tooltip",E(13,26,"obtention.pvp"))("control",t.obtentionFormService.form.controls.PVP)("srcImg",t.imageService.getItemUrl(53124705)))},dependencies:[ne,ht,Ue,$,W],encapsulation:2})};var fb=["firstImage"];function gb(n,r){if(n&1){let e=fe();b(0,"img",2,0),A("appActivate",function(){let i=B(e).$implicit,a=q();return U(a.changeClasses(i))}),v()}if(n&2){let e=r.$implicit,t=r.$index;h("src",`classes/icon/${e}.jpg`,J)("tabindex",0),ie("data-first",t===0?"":null)}}var ks=class n{classeFormService=d(Er);idClasses=Object.values(Ya).filter(r=>typeof r=="number");firstImage=ya("firstImage");constructor(){ha(()=>{let r=this.firstImage();r&&r.nativeElement.focus()})}changeClasses(r){this.classeFormService.setValue(r)}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-classes-tooltip"]],viewQuery:function(e,t){e&1&&xa(t.firstImage,fb,5),e&2&&_a()},decls:2,vars:0,consts:[["firstImage",""],["alt","",3,"src","tabindex"],["alt","",3,"appActivate","src","tabindex"]],template:function(e,t){e&1&&xt(0,gb,2,3,"img",1,Wt),e&2&&_t(t.idClasses)},dependencies:[En,Pt],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:100%;width:100%;display:grid;grid-template-columns:repeat(6,1fr);grid-template-rows:repeat(3,1fr);grid-column-gap:5px;grid-row-gap:5px;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   img[_ngcontent-%COMP%]{width:60px;height:60px;align-self:center;justify-self:center;cursor:pointer}[_nghost-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2);transition:transform .2s}@media screen and (max-width:700px){img[_ngcontent-%COMP%]{width:40px!important;height:40px!important}}"]})};var Is=class n{imageService=d(me);bonusFormService=d(Ru);static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-bonus"]],decls:3,vars:4,consts:[[1,"row"],[3,"control","srcImg"]],template:function(e,t){e&1&&(b(0,"div",0),x(1,"app-button-checkbox",1)(2,"app-button-checkbox",1),v()),e&2&&(p(),h("control",t.bonusFormService.form.controls.dragodinde)("srcImg",t.imageService.getItemUrl(70718708)),p(),h("control",t.bonusFormService.form.controls.guilde)("srcImg",t.imageService.getItemUrl(47216942)))},dependencies:[Ue],styles:[".row[_ngcontent-%COMP%]{display:flex;width:max-content}"]})};var bb=["inputField"];function vb(n,r){if(n&1){let e=fe();b(0,"input",4,0),A("keydown",function(i){B(e);let a=q();return U(a.onKeyDown(i))}),v()}if(n&2){let e=q();h("formControl",e.controlValue())}}function xb(n,r){if(n&1&&(b(0,"span"),C(1),v()),n&2){let e=q(2);et(e.getClass(e.idActionEnum())),Rt("color",e.color()),p(),M(e.calculResistance(e.idActionEnum()))}}function _b(n,r){if(n&1&&(b(0,"span"),C(1),v()),n&2){let e=q(2);et(e.getClass(e.idActionEnum())),Rt("color",e.color()),p(),M(e.getValue(e.idActionEnum()))}}function yb(n,r){if(n&1&&(C(0),y(1,"translate"),oe(2,xb,2,5,"span",5)(3,_b,2,5,"span",5)),n&2){let e=q();mr(" ",E(1,2,e.label())," "),p(2),se(e.displayResistance()?2:3)}}var As=class n{recapStatsService=d(In);recapStats=Kt(this.recapStatsService.recap$,{initialValue:[]});elementRef=d(Ee);inputElement=ya("inputField");imageService=d(me);displayInput=Le(!1);constructor(){ha(()=>{this.displayInput()&&this.inputElement()&&setTimeout(()=>this.inputElement()?.nativeElement.focus(),0)})}showInput(){this.displayInput.set(!0)}onKeyDown(r){r.key==="Enter"&&(this.displayInput.set(!1),r.stopPropagation())}onClickOutside(r){this.displayInput()&&!this.elementRef.nativeElement.contains(r.target)&&this.displayInput.set(!1)}idActionEnum=$e.required();isArmureDonnee=$e(!1);label=$e.required();color=$e("");displayResistance=$e(!1);controlValue=$e.required();calculResistance(r){let e=this.getValue(r);return`${Math.floor((1-Math.pow(.8,e/100))*100)}% (${e})`}getClass(r){let e=this.getValue(r);return e>0?"positif":e<0?"negatif":""}getValue(r){let e=this.recapStats().filter(t=>t.id===r);return e.length?r!==39?e[0].value:e[this.isArmureDonnee()?0:1].value:0}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-input-resume-aptitudes"]],viewQuery:function(e,t){e&1&&xa(t.inputElement,bb,5),e&2&&_a()},hostBindings:function(e,t){e&1&&A("click",function(a){return t.onClickOutside(a)},gl)},inputs:{idActionEnum:[1,"idActionEnum"],isArmureDonnee:[1,"isArmureDonnee"],label:[1,"label"],color:[1,"color"],displayResistance:[1,"displayResistance"],controlValue:[1,"controlValue"]},decls:4,vars:4,consts:[["inputField",""],[3,"appActivate"],["alt","",3,"src"],[3,"formControl"],[3,"keydown","formControl"],[3,"class","color"]],template:function(e,t){e&1&&(b(0,"div",1),A("appActivate",function(){return t.showInput()}),x(1,"img",2),oe(2,vb,2,1,"input",3)(3,yb,4,4),v()),e&2&&(re("change",t.controlValue().value),p(),h("src",t.imageService.getActionIdUrl(t.idActionEnum()),J),p(),se(t.displayInput()?2:3))},dependencies:[$,ne,dt,Be,Qe,Pt,W],styles:[".change[_ngcontent-%COMP%]{border:2px #5e758e dashed;border-radius:5px;min-width:fit-content;margin:-2px}div[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%}div[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}div[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}div[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px;width:22px;height:22px}div[_ngcontent-%COMP%]   .positif[_ngcontent-%COMP%]{color:#4caf50}div[_ngcontent-%COMP%]   .negatif[_ngcontent-%COMP%]{color:#f44336}@media screen and (max-width:700px){[_nghost-%COMP%]{font-size:11px!important}img[_ngcontent-%COMP%]{width:16px!important;height:16px!important}}"]})};var Ms=class n{recapStatsService=d(In);imageService=d(me);IdActionsEnum=rt;levelFormService=d(fi);aptitudesManualFormService=d(Ou);recapStats=Kt(this.recapStatsService.recap$,{initialValue:[]});tooltipService=d(Ka);viewContainerRef=d(At);classeFormService=d(Er);idClasse=Kt(this.classeFormService.classe$,{initialValue:7});constructor(){this.classeFormService.classe$.subscribe(()=>{this.tooltipService.forceClose()})}getValue(r){let e=this.recapStats().filter(t=>t.id===r);return e.length?e[0].value:0}openTooltip(r){this.tooltipService.forceClose(),this.tooltipService.cancelClose();let e;window.innerWidth<=700&&(e=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"bottom",offsetY:0,offsetX:0}]),this.tooltipService.openTooltip(this.viewContainerRef,ks,r,{},e,!0,!0)}getArmureValue(r,e){let t=e?121:120,i=this.recapStats().filter(a=>a.id===r&&a.parameterMajorAction===t);return i.length?i[0].value:0}getClass(r){let e=this.getValue(r);return e>0?"positif":e<0?"negatif":""}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-resume-aptitudes"]],decls:71,vars:137,consts:[["alt","class",1,"classes",3,"appActivate","src"],[1,"level"],["type","text",3,"formControl"],["id","first-block",1,"block"],[1,"row-4"],[3,"controlValue","idActionEnum","label","color"],[1,"block"],[3,"controlValue","idActionEnum","label","color","displayResistance"],[1,"row-2"],[3,"controlValue","idActionEnum","label"],[3,"controlValue","idActionEnum","isArmureDonnee","label"]],template:function(e,t){e&1&&(b(0,"img",0),A("appActivate",function(a){return t.openTooltip(a)}),v(),x(1,"app-bonus"),b(2,"div",1)(3,"p"),C(4),y(5,"translate"),v(),x(6,"input",2),v(),b(7,"div",3)(8,"div",4),x(9,"app-input-resume-aptitudes",5)(10,"app-input-resume-aptitudes",5)(11,"app-input-resume-aptitudes",5)(12,"app-input-resume-aptitudes",5),v()(),b(13,"h3"),C(14),y(15,"translate"),v(),b(16,"div",6)(17,"div",4),x(18,"app-input-resume-aptitudes",5)(19,"app-input-resume-aptitudes",5)(20,"app-input-resume-aptitudes",5)(21,"app-input-resume-aptitudes",5),v(),b(22,"div",4),x(23,"app-input-resume-aptitudes",7)(24,"app-input-resume-aptitudes",7)(25,"app-input-resume-aptitudes",7)(26,"app-input-resume-aptitudes",7),v()(),b(27,"h3"),C(28),y(29,"translate"),v(),b(30,"div",6)(31,"div",8),x(32,"app-input-resume-aptitudes",9)(33,"app-input-resume-aptitudes",9),v(),b(34,"div",8),x(35,"app-input-resume-aptitudes",9)(36,"app-input-resume-aptitudes",9),v(),b(37,"div",8),x(38,"app-input-resume-aptitudes",9)(39,"app-input-resume-aptitudes",9),v(),b(40,"div",8),x(41,"app-input-resume-aptitudes",9)(42,"app-input-resume-aptitudes",9),v(),b(43,"div",8),x(44,"app-input-resume-aptitudes",9)(45,"app-input-resume-aptitudes",9),v(),b(46,"div",8),x(47,"app-input-resume-aptitudes",9)(48,"app-input-resume-aptitudes",9),v()(),b(49,"h3"),C(50),y(51,"translate"),v(),b(52,"div",6)(53,"div",8),x(54,"app-input-resume-aptitudes",9)(55,"app-input-resume-aptitudes",9),v(),b(56,"div",8),x(57,"app-input-resume-aptitudes",9)(58,"app-input-resume-aptitudes",9),v(),b(59,"div",8),x(60,"app-input-resume-aptitudes",9)(61,"app-input-resume-aptitudes",10),v(),b(62,"div",8),x(63,"app-input-resume-aptitudes",9)(64,"app-input-resume-aptitudes",9),v(),b(65,"div",8),x(66,"app-input-resume-aptitudes",9)(67,"app-input-resume-aptitudes",9),v(),b(68,"div",8),x(69,"app-input-resume-aptitudes",9)(70,"div"),v()()),e&2&&(h("src",`classes/${t.idClasse()}.jpg`,J),ie("key",t.idClasse()),p(4),M(E(5,129,"resume-aptitudes.level")),p(2),h("formControl",t.levelFormService.form),p(3),h("controlValue",t.aptitudesManualFormService.form.controls.pointDeVie)("idActionEnum",t.IdActionsEnum.POINT_DE_VIE)("label","resume-aptitudes.PV")("color","red"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.pa)("idActionEnum",t.IdActionsEnum.PA)("label","resume-aptitudes.PA")("color","#268de2"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.pm)("idActionEnum",t.IdActionsEnum.PM)("label","resume-aptitudes.PM")("color","green"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.pw)("idActionEnum",t.IdActionsEnum.BOOST_PW)("label","resume-aptitudes.PW")("color","#268de2"),p(2),M(E(15,131,"resume-aptitudes.maitrises-resistances")),p(4),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseFeu)("idActionEnum",t.IdActionsEnum.MAITRISES_FEU)("label","")("color","orange"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseEau)("idActionEnum",t.IdActionsEnum.MAITRISES_EAU)("label","")("color","#268de2"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseTerre)("idActionEnum",t.IdActionsEnum.MAITRISES_TERRE)("label","")("color","rgb(6, 209, 6)"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseAir)("idActionEnum",t.IdActionsEnum.MAITRISES_AIR)("label","")("color","rgb(191, 121, 224)"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.resistancesFeu)("idActionEnum",t.IdActionsEnum.RESISTANCES_FEU)("label","")("color","orange")("displayResistance",!0),p(),h("controlValue",t.aptitudesManualFormService.form.controls.resistancesEau)("idActionEnum",t.IdActionsEnum.RESISTANCES_EAU)("label","")("color","#268de2")("displayResistance",!0),p(),h("controlValue",t.aptitudesManualFormService.form.controls.resistancesTerre)("idActionEnum",t.IdActionsEnum.RESISTANCES_TERRE)("label","")("color","rgb(6, 209, 6)")("displayResistance",!0),p(),h("controlValue",t.aptitudesManualFormService.form.controls.resistancesAir)("idActionEnum",t.IdActionsEnum.RESISTANCES_AIR)("label","")("color","rgb(191, 121, 224)")("displayResistance",!0),p(2),M(E(29,133,"resume-aptitudes.combat")),p(4),h("controlValue",t.aptitudesManualFormService.form.controls.di)("idActionEnum",t.IdActionsEnum.DI)("label","resume-aptitudes.DI"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.soinsRealises)("idActionEnum",t.IdActionsEnum.SOINS_REALISE)("label","resume-aptitudes.SR"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.cc)("idActionEnum",t.IdActionsEnum.COUP_CRITIQUE)("label","resume-aptitudes.%-critique"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.parade)("idActionEnum",t.IdActionsEnum.PARADE)("label","resume-aptitudes.%-parade"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.initiative)("idActionEnum",t.IdActionsEnum.INITIATIVE)("label","resume-aptitudes.initiative"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.portee)("idActionEnum",t.IdActionsEnum.PORTEE)("label","resume-aptitudes.po"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.esquive)("idActionEnum",t.IdActionsEnum.ESQUIVE)("label","resume-aptitudes.esquive"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.tacle)("idActionEnum",t.IdActionsEnum.TACLE)("label","resume-aptitudes.tacle"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.sagesse)("idActionEnum",t.IdActionsEnum.SAGESSE)("label","resume-aptitudes.sagesse"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.prospection)("idActionEnum",t.IdActionsEnum.PROSPECTION)("label","resume-aptitudes.prospection"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.controle)("idActionEnum",t.IdActionsEnum.CONTROLE)("label","resume-aptitudes.controle"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.volonte)("idActionEnum",t.IdActionsEnum.VOLONTE)("label","resume-aptitudes.volonte"),p(2),M(E(51,135,"resume-aptitudes.secondaire")),p(4),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseCritique)("idActionEnum",t.IdActionsEnum.MAITRISES_CRITIQUES)("label","resume-aptitudes.maitrises-critique"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.resistancesCritique)("idActionEnum",t.IdActionsEnum.RESISTANCES_CRITIQUES)("label","resume-aptitudes.resistances-critique"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseDos)("idActionEnum",t.IdActionsEnum.MAITRISES_DOS)("label","resume-aptitudes.maitrises-dos"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.resistancesDos)("idActionEnum",t.IdActionsEnum.RESISTANCES_DOS)("label","resume-aptitudes.resistances-dos"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseMelee)("idActionEnum",t.IdActionsEnum.MAITRISES_MELEE)("label","resume-aptitudes.maitrises-melee"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.armureDonnee)("idActionEnum",t.IdActionsEnum.ARMURE_DONNEE_RECUE)("isArmureDonnee",!0)("label","resume-aptitudes.armure-donnee"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseDistance)("idActionEnum",t.IdActionsEnum.MAITRISES_DISTANCES)("label","resume-aptitudes.maitrises-distance"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.armureRecue)("idActionEnum",t.IdActionsEnum.ARMURE_DONNEE_RECUE)("label","resume-aptitudes.armure-recue"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseSoins)("idActionEnum",t.IdActionsEnum.MAITRISES_SOIN)("label","resume-aptitudes.maitrises-soin"),p(),h("controlValue",t.aptitudesManualFormService.form.controls.DIindirect)("idActionEnum",t.IdActionsEnum.DI_INDIRECT)("label","resume-aptitudes.DI_indirect"),p(2),h("controlValue",t.aptitudesManualFormService.form.controls.maitriseBerzerk)("idActionEnum",t.IdActionsEnum.MAITRISES_BERZERK)("label","resume-aptitudes.maitrises-berzerk"))},dependencies:[$,ne,dt,Be,Qe,En,Is,As,Pt,W],styles:["[_nghost-%COMP%]{width:95%;display:block;margin:auto}[_nghost-%COMP%]   app-bonus[_ngcontent-%COMP%]{bottom:90px;display:flex;margin-top:-50px;justify-content:space-between;align-items:center;position:relative;z-index:1}[_nghost-%COMP%]   h3[_ngcontent-%COMP%]{margin:5px 0}[_nghost-%COMP%]   #first-block[_ngcontent-%COMP%]{margin-top:10px}[_nghost-%COMP%]   .classes[_ngcontent-%COMP%]{width:112%;height:140px;margin-left:-6%;cursor:pointer;transition:opacity .2s ease-in-out,transform .2s}[_nghost-%COMP%]   .classes[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .classes.lazy-loading[_ngcontent-%COMP%]{opacity:.3}[_nghost-%COMP%]   .level[_ngcontent-%COMP%]{display:flex;margin-top:-50px;justify-content:space-between;align-items:center;position:relative;z-index:1}[_nghost-%COMP%]   .level[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60px;height:28px;border:2px solid #415A77;text-align:center;border-radius:10px}[_nghost-%COMP%]   .block[_ngcontent-%COMP%]{border-radius:10px;overflow:auto}[_nghost-%COMP%]   .block[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px}[_nghost-%COMP%]   .row-4[_ngcontent-%COMP%]{font-size:14px;display:flex;background-color:#0d1b2a;justify-content:space-around;padding:2px 0}[_nghost-%COMP%]   .row-4[_ngcontent-%COMP%]   app-input-resume-aptitudes[_ngcontent-%COMP%]{width:20%}[_nghost-%COMP%]   .row-2[_ngcontent-%COMP%]{display:flex;background-color:#0d1b2a;justify-content:space-around;padding:2px 0;font-size:14px}[_nghost-%COMP%]   .row-2[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], [_nghost-%COMP%]   .row-2[_ngcontent-%COMP%]   app-input-resume-aptitudes[_ngcontent-%COMP%]{width:45%}"]})};function Eb(n,r){if(n&1){let e=fe();Al(0),y(1,"async"),b(2,"div",2),A("mouseenter",function(i){B(e);let a=Rl(0),o=q();return U(o.openTooltip(i,a))})("mouseleave",function(){B(e);let i=q();return U(i.onMouseLeave())}),b(3,"img",3),A("appActivate",function(){B(e);let i=q();return U(i.setFilter())}),v(),b(4,"span",4),A("appActivate",function(){B(e);let i=q();return U(i.itemChooseService.deleteItem(i.itemType(),i.indexItem()))}),C(5,"X"),v()()}if(n&2){let e=q(),t=Ml(E(1,3,e.$item));p(2),Rt("background-color",e.colorRarityService.mapColors.get(t.rarity)),p(),h("src",e.imageService.getItemUrl(t.idImage),J)}}function wb(n,r){if(n&1){let e=fe();b(0,"img",5),A("mouseenter",function(){B(e);let i=q();return U(i.tooltipService.forceClose())})("appActivate",function(){B(e);let i=q();return U(i.setFilter())}),v()}if(n&2){let e=q();h("src",e.backgroundItemType(),J)}}var Rs=class n{colorRarityService=d(Da);itemChooseService=d(Nt);itemTypeFormServices=d(kn);tooltipService=d(Ka);viewContainerRef=d(At);imageService=d(me);router=d(mt);backgroundItemType=$e.required();itemType=$e.required();indexItem=$e(0);$item;ngOnInit(){this.$item=this.itemChooseService.getObsItem(this.itemType()).pipe(xe(r=>r!==void 0),V(r=>r[this.indexItem()]),Je(void 0))}openTooltip(r,e){this.tooltipService.forceClose(),e&&(this.tooltipService.cancelClose(),this.tooltipService.openTooltip(this.viewContainerRef,Su,r,{item:e,isTooltip:!0},void 0,!0,!0))}onMouseLeave(){this.tooltipService.closeTooltip()}setFilter(){let r=this.router.parseUrl(this.router.url).fragment??"",e=this.getBuildIdFromUrl(this.router.url);this.router.navigate(["/",e],{fragment:r||void 0}),this.itemType()===12?this.itemTypeFormServices.setItemType(this.itemType(),13):this.itemType()===2?this.itemTypeFormServices.setItemType(this.itemType(),1):this.itemTypeFormServices.setItemType(this.itemType())}getBuildIdFromUrl(r){return r.match(/^\/([^\/\?#]+)/)?.[1]??"local"}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-item-choose-display"]],hostAttrs:["ngSkipHydration","true"],inputs:{backgroundItemType:[1,"backgroundItemType"],itemType:[1,"itemType"],indexItem:[1,"indexItem"]},decls:4,vars:5,consts:[[1,"itemPresent",3,"backgroundColor"],["alt","noItem",1,"noItem",3,"src"],[1,"itemPresent",3,"mouseenter","mouseleave"],["alt","items","appFallback","",3,"appActivate","src"],[3,"appActivate"],["alt","noItem",1,"noItem",3,"mouseenter","appActivate","src"]],template:function(e,t){e&1&&(oe(0,Eb,6,6,"div",0),y(1,"async"),y(2,"async"),kl(3,wb,1,1,"img",1)),e&2&&se(E(1,1,t.$item)!==void 0&&E(2,3,t.$item)!==null?0:3)},dependencies:[hr,Oa,Pt,fn],styles:['.noItem[_ngcontent-%COMP%]{cursor:pointer;width:56px;height:56px}.itemPresent[_ngcontent-%COMP%]{cursor:pointer;width:56px;height:56px;position:relative}.itemPresent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:56px;height:56px;margin-right:10px}.itemPresent[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none;position:absolute;content:"X";top:0;right:5px;font-weight:bolder;color:#213a57;font-size:25px;text-shadow:-2px -2px 0 #000,2px -2px 0 #000,-2px 2px 0 #000,2px 2px 0 #000,-3px 0px 0 #000,3px 0px 0 #000,0px -3px 0 #000,0px 3px 0 #000}.itemPresent[_ngcontent-%COMP%]:active, .noItem[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:inset 3px 2px 5px #1b263b}.itemPresent[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{display:block}.itemPresent[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]:hover{transform:scale(1.2)}@media screen and (min-width:1001px)and (max-width:1700px){.noItem[_ngcontent-%COMP%], .itemPresent[_ngcontent-%COMP%], .itemPresent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:36px;height:36px}}@media screen and (max-width:1000px){img[_ngcontent-%COMP%]{margin-right:0!important}}']})};var si=class n{zenithApiService=d(oi);itemChooseService=d(Nt);itemsService=d(yr);itemTypeServices=d(Cn);translateService=d(yn);actionService=d(du);classeFormService=d(Er);firstRing=!0;getMaxLevelItemInBuild(){return this.itemChooseService.idItems$.pipe(Y(r=>{let t=r.split(",").map(i=>parseInt(i,10)).filter(i=>!isNaN(i)).map(i=>this.itemsService.searchItem(i).pipe(ee(1),V(a=>a?a.level:0)));return Fr(t).pipe(V(i=>Math.max(...i)))}))}getLevelForBuild(){return this.getMaxLevelItemInBuild().pipe(V(r=>Jl.find(e=>e>=r)||r))}createBuild(){let r={},e="";return this.getLevelForBuild().pipe(Y(()=>this.getLevelForBuild()),Y(t=>this.zenithApiService.createBuild({flags:[],id_job:this.classeFormService.getValue(),is_visible:!0,level:t,name:"Gearfu - Generated"})),le(t=>e=t.link),Y(t=>this.zenithApiService.getBuildInfo(t.link)),ol(this.itemChooseService.idItems$),Y(([t,i])=>{let a=i.split(",").map(l=>parseInt(l,10)).filter(l=>!isNaN(l)),o=[],s=[],c=a.map(l=>this.itemsService.searchItem(l).pipe(ee(1),Y(m=>m?(m.level>=231&&s.push(m),this.zenithApiService.addItemRequest(this.createAddItemsRequest(t.id_build,m)).pipe(V(()=>m),Br(g=>(console.log(g),g&&g.status===500?(o.push(m),P(m)):ua(()=>g))))):P(m))));return Fr(c).pipe(Y(()=>this.zenithApiService.getBuild(e)),le(l=>r=l),Y(()=>{if(!o.length&&!s.length)return P(t.link_build);let l=this.handleMissingItems(o),m=this.handleItems231AndMore(s,r);l.push(...m);let g=l.map(_=>this.zenithApiService.updateCustomStatistics({id_build:t.id_build,id_stats:_.actionId,value:_.params[0]||0},_));return pa(()=>g.length>0,Fr(g).pipe(V(()=>t.link_build)),P(t.link_build)).pipe(le(()=>this.firstRing=!0))}))}))}handleItems231AndMore(r,e){let t=this.convertItemsToMapEffecs(r);return e.equipments.filter(a=>r.find(o=>o.id===a.id_equipment)).map(a=>a.effects.map(o=>o.values.map(s=>{let c=s.id_stats;return this.actionService.isAMalus(c)&&(c=this.actionService.getOpposedEffect(c)),c===193&&(c=191),{id:s.id_stats,actionId:c,params:[s.damage,0,s.elements.length,0]}}))).flat(2).forEach(a=>{let o=t.get(a.actionId);o&&(o.params[0]-=a.params[0]||0)}),Array.from(t.values()).filter(a=>a.params[0]!==0)}handleMissingItems(r){let e=this.convertItemsToMapEffecs(r);return Array.from(e.values())}convertItemsToMapEffecs(r){let e=new Map;return r.forEach(t=>{t.equipEffects.forEach(i=>{if([304,39].includes(i.actionId))return;let a=i.actionId;this.actionService.isAMalus(a)&&(a=this.actionService.getOpposedEffect(a));let o=e.get(a);o?o.params[0]+=i.params[0]||0:e.set(a,Ce(N({},i),{actionId:a,params:[...i.params]}))})}),e}getItemTypeId(r){let e=this.itemTypeServices.getItemType(r.itemTypeId);return e===3?this.firstRing?(this.firstRing=!1,23):24:e===2||e===1?540:e===12||e===13?520:r.itemTypeId}createAddItemsRequest(r,e){return{equipment:{id_equipment:e.id,level:e.itemTypeId===582?50:e.level,id_rarity:e.rarity,ap_cost:0,mp_cost:0,wp_cost:0,min_range:0,max_range:0,name_equipment:e.title[this.translateService.currentLang],line_of_sight:0,name_equipment_type:"",image_equipment_type:"",effects:this.createEffectItems(e.equipEffects),translations:[],criterias:[],metadata:{side:this.getItemTypeId(e)},order:0,name_rarity:"",image_rarity:""},id_build:r}}createEffectItems(r){return r.map(e=>({id_effect:e.id,name_effect:"",ui_position:0,from_evolution:0,container_min_level:0,container_max_level:0,is_critical:0,is_use_effect:0,pivot:{},translations:[],values:[1068,1069].includes(e.actionId)?[{id_spell_effect_value:0,offset:0,damage:0,ratio:0,id_stats:e.actionId,id_effect:0,will_calculate_damage:0,will_calculate_heal:0,base:null,evolution:null,random_number:e.params[2],statistics:{},elements:[{id_element:1,id_inner_stats:this.isRandomMaitrise(e)?122:82,image_element:"fire.png"},{id_element:2,id_inner_stats:this.isRandomMaitrise(e)?124:83,image_element:"water.png"},{id_element:3,id_inner_stats:this.isRandomMaitrise(e)?123:84,image_element:"earth.png"},{id_element:4,id_inner_stats:this.isRandomMaitrise(e)?125:85,image_element:"wind.png"}].slice(0,e.params[2])}]:[],inner_stats:[]}))}isRandomMaitrise(r){return r.actionId===1068}static \u0275fac=function(e){return new(e||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var Os=class n{itemChooseService=d(Nt);zenithService=d(si);recapStatsService=d(In);imageService=d(me);saveBuildService=d(Xe);maitrisesTotal=Kt(this.recapStatsService.maitrisesTotal$,{initialValue:0});resistancesTotal=Kt(this.recapStatsService.resistancesTotal$,{initialValue:0});poidsTotal=Kt(this.recapStatsService.poidsTotal$,{initialValue:0});ItemTypeEnum=zr;IdActionsEnum=rt;copyToClipboard(){navigator.clipboard.writeText(window.location.href).then()}navigateToCraftku(){this.itemChooseService.idItems$.pipe(ee(1)).subscribe(r=>{window.open("https://craftkfu.waklab.fr/?"+r,"_blank")})}navigateToWakfuIndex(){window.open("https://efusryuga.github.io/WakfuIndex/","_blank")}navigateToWakfocus(){window.open("https://www.dropbox.com/scl/fo/12onmfink7n0g5wj96f3y/AAxeJABC7OSe3UkPsbspDkg?rlkey=h2w7w4wp4jer3l0uw3jmy8q0k&st=nrkw68lp&dl=0","_blank")}generateBuild(){this.zenithService.createBuild().pipe(ee(1)).subscribe(r=>window.open("https://www.zenithwakfu.com/builder/"+r,"_blank"))}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=I({type:n,selectors:[["app-item-choose"]],decls:38,vars:36,consts:[[1,"content"],[1,"buttonGroupe"],[1,"firstLine",3,"appActivate","matTooltip"],["src","./zenith-logo.webp","alt","zenith","id","zenithButton"],[1,"secondLine"],["aria-hidden","false","fontIcon","gavel","matTooltip","Craftku","alt","craftku","id","craftkuButton",3,"appActivate","matTooltipShowDelay"],[1,"nouveauBuild",3,"appActivate"],["backgroundItemType","./aptitudes/EmplacementCoiffe.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementAmulette.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementPlastron.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementAnneauGauche.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementAnneauDroite.png",3,"itemType","indexItem"],["backgroundItemType","./aptitudes/EmplacementBottes.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementCape.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementEpaulettes.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementCeinture.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementSecondeMain.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementPremi\xE8reMain.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementEmbl\xE8me.png",3,"itemType"],["backgroundItemType","./aptitudes/EmplacementFamilier.png",3,"itemType"],[1,"totalValue"],["alt","poids",1,"poids",3,"src"]],template:function(e,t){e&1&&(b(0,"div",0)(1,"div",1)(2,"div",2),y(3,"translate"),A("appActivate",function(){return t.generateBuild()}),x(4,"img",3),b(5,"span"),C(6),y(7,"translate"),v()(),b(8,"div",4)(9,"mat-icon",5),A("appActivate",function(){return t.navigateToCraftku()}),v(),b(10,"div",6),A("appActivate",function(){return t.saveBuildService.createAndNavigate()}),C(11," Nouveau build "),v()()(),x(12,"app-item-choose-display",7)(13,"app-item-choose-display",8)(14,"app-item-choose-display",9)(15,"app-item-choose-display",10)(16,"app-item-choose-display",11)(17,"app-item-choose-display",12)(18,"app-item-choose-display",13)(19,"app-item-choose-display",14)(20,"app-item-choose-display",15)(21,"app-item-choose-display",16)(22,"app-item-choose-display",17)(23,"app-item-choose-display",18)(24,"app-item-choose-display",19),b(25,"div",20)(26,"span"),x(27,"img",21),C(28),y(29,"translate"),v(),b(30,"span"),x(31,"img",21),C(32),y(33,"translate"),v(),b(34,"span"),x(35,"img",21),C(36),y(37,"translate"),v()()()),e&2&&(p(2),h("matTooltip",E(3,26,"item-choose.zenith")),p(4),M(E(7,28,"item-choose.zenith-export")),p(3),h("matTooltipShowDelay",300),p(3),h("itemType",t.ItemTypeEnum.CASQUE),p(),h("itemType",t.ItemTypeEnum.AMULETTE),p(),h("itemType",t.ItemTypeEnum.PLASTRON),p(),h("itemType",t.ItemTypeEnum.ANNEAU),p(),h("itemType",t.ItemTypeEnum.ANNEAU)("indexItem",1),p(),h("itemType",t.ItemTypeEnum.BOTTES),p(),h("itemType",t.ItemTypeEnum.CAPE),p(),h("itemType",t.ItemTypeEnum.EPAULETTES),p(),h("itemType",t.ItemTypeEnum.CEINTURE),p(),h("itemType",t.ItemTypeEnum.BOUCLIER),p(),h("itemType",t.ItemTypeEnum.UNE_MAIN),p(),h("itemType",t.ItemTypeEnum.ACCESSOIRES),p(),h("itemType",t.ItemTypeEnum.FAMILIER),p(3),h("src",t.imageService.getActionIdUrl(t.IdActionsEnum.MAITRISES_ELEMENTAIRES),J),p(),hn(" ",E(29,30,"item-choose.maitrise-total")," : ",t.maitrisesTotal()," "),p(3),h("src",t.imageService.getActionIdUrl(t.IdActionsEnum.RESISTANCES_ELEMENTAIRE),J),p(),hn(" ",E(33,32,"item-choose.resistance-total")," : ",t.resistancesTotal()," "),p(3),h("src","aptitudes/poids.png",J),p(),hn(" ",E(37,34,"item-choose.poids-total")," : ",t.poidsTotal()," "))},dependencies:[Rs,xr,vr,Ra,Ma,$,hr,Pt,W],styles:[".content[_ngcontent-%COMP%]{display:flex;align-items:center}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:column}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .firstLine[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-around;margin-left:5px;width:calc(100% - 5px);color:#213a57;font-weight:400;font-size:16px;background-color:#dfe0e1;cursor:pointer;border-radius:10px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .firstLine[_ngcontent-%COMP%]:active{background-color:#1b263b;color:#dfe0e1;transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #dfe0e1}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .secondLine[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;width:100%}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .secondLine[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{background-color:#dfe0e1;color:#1b263b;width:30px;height:30px;text-align:center;align-content:center;padding:0 2px;cursor:pointer;border-radius:25%;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;margin-left:5px}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .secondLine[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:active{background-color:#1b263b;color:#dfe0e1;transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #dfe0e1}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .secondLine[_ngcontent-%COMP%]   .nouveauBuild[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-around;margin-left:5px;height:30px;width:100%;color:#213a57;font-weight:400;font-size:16px;background-color:#dfe0e1;cursor:pointer;border-radius:10px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033}.content[_ngcontent-%COMP%]   .buttonGroupe[_ngcontent-%COMP%]   .secondLine[_ngcontent-%COMP%]   .nouveauBuild[_ngcontent-%COMP%]:active{background-color:#1b263b;color:#dfe0e1;transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #dfe0e1}.content[_ngcontent-%COMP%]   app-item-choose-display[_ngcontent-%COMP%]{margin-left:10px}.content[_ngcontent-%COMP%]   app-item-choose-display[_ngcontent-%COMP%]:hover{transform:scale(1.06)}.content[_ngcontent-%COMP%]   .totalValue[_ngcontent-%COMP%]{display:flex;flex-direction:column}.content[_ngcontent-%COMP%]   .totalValue[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:10px;display:flex;align-items:center}.content[_ngcontent-%COMP%]   .totalValue[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{width:20px;height:20px;margin-right:5px}@media screen and (max-width:1350px){.totalValue[_ngcontent-%COMP%]{display:none!important}}@media screen and (max-width:1200px){.mat-icon[_ngcontent-%COMP%], img[_ngcontent-%COMP%], .buttonGroupe[_ngcontent-%COMP%]{display:none!important}}@media screen and (max-width:1000px){app-item-choose-display[_ngcontent-%COMP%]{margin-left:unset!important;margin:0 auto!important}.content[_ngcontent-%COMP%]{flex-wrap:wrap;height:100%}span[_ngcontent-%COMP%]{display:none!important}}"]})};function Sb(n,r){if(n&1){let e=fe();b(0,"div",20)(1,"div",24)(2,"h2"),C(3),y(4,"translate"),v(),x(5,"app-reverse-button"),b(6,"button",18),A("click",function(){B(e);let i=q();return U(i.resetFormServices.resetAllForms())}),C(7,"X"),v()(),x(8,"app-search-item-name")(9,"app-obtention")(10,"app-item-types")(11,"app-item-level")(12,"app-rarete-item")(13,"app-filter-maitrises")(14,"app-major-present")(15,"app-filter-resistances"),b(16,"h2"),C(17),y(18,"translate"),v(),x(19,"app-sort-choice")(20,"app-modifier-mecanism")(21,"app-only-no-elem")(22,"app-only-no-secondary"),v()}n&2&&(p(3),M(E(4,2,"app.filter-item")),p(14),M(E(18,4,"app.sort-item")))}function Tb(n,r){n&1&&(b(0,"div",21),x(1,"app-name-build")(2,"app-import-build")(3,"app-builds-list"),v())}function Cb(n,r){n&1&&(b(0,"div",22),x(1,"app-resume-aptitudes"),v())}var Ds=class n{constructor(r){this.platformId=r;this.translate.addLangs(["fr","en","es","pt"]),this.translate.setDefaultLang("en");let e=this.localStorageService.getItem("KEY_LANG");e?this.translate.use(e):fr(this.platformId)?this.translate.use(navigator.language.split("-")[0]??"en"):this.translate.use("en")}resetFormServices=d(Go);translate=d(yn);displayFilterService=d(Tu);localStorageService=d(gr);itemService=d(yr);ankamaCdnFacade=d(uu);monsterDropService=d(yu);itemConditionService=d(pu);statesDefinitionService=d(wu);sublimationService=d(Au);sortService=d(ku);router=d(mt);familierService=d(Eu);sortLevelService=d(Cu);elementSelectorService=d(Qa);zenithService=d(si);supabaseService=d(ai);saveBuildService=d(Xe);displayFilter=!1;filterOrBuild="filter";ngOnInit(){if(this.elementSelectorService.init(),this.ankamaCdnFacade.load(),this.monsterDropService.load(),this.itemConditionService.load(),this.statesDefinitionService.load(),this.sortService.load(),this.sublimationService.load(),this.familierService.load(),this.sortLevelService.load(),this.itemService.init(),fr(this.platformId)){this.verifyToken();let r=this.getBuildIdFromRoute(this.router.url);this.saveBuildService.createBuildIfNotExists(r),this.localStorageService.setItem("KEY_BUILD_ID",r),this.saveBuildService.listenBuildChanges()}if(this.displayFilterService.isDisplayed$.subscribe(r=>{this.displayFilter=r}),this.updateFilterOrBuildFromRoute(this.router.url),this.router.events.pipe(xe(r=>r instanceof wt)).subscribe(r=>{this.updateFilterOrBuildFromRoute(r.urlAfterRedirects)}),fr(this.platformId)){let r=setInterval(()=>{this.itemService.isLoading()||(this.removeLoader(),clearInterval(r))},100);setTimeout(()=>{clearInterval(r),this.removeLoader()},1e4)}}verifyToken(){if(!this.localStorageService.getItem("KEY_TOKEN")){let e=this.generateUuid();this.localStorageService.setItem("KEY_TOKEN",e)}}generateUuid(){return globalThis.crypto?.randomUUID?globalThis.crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,r=>{let e=Math.floor(Math.random()*16);return(r==="x"?e:e&3|8).toString(16)})}openDiscord(){fr(this.platformId)&&window.open("https://discord.gg/fFmzBmZjSb","_blank")}generateBuild(){this.zenithService.createBuild().pipe(ee(1)).subscribe(r=>{fr(this.platformId)&&window.open("https://www.zenithwakfu.com/builder/"+r,"_blank")})}updateFilterOrBuildFromRoute(r){r.includes("/aptitudes")||r.includes("/sorts")||r.includes("/enchantements")?this.filterOrBuild="aptitudes":this.filterOrBuild="filter"}removeLoader(){let r=document.getElementById("app-loader");r&&(r.style.opacity="0",r.style.transition="opacity 0.5s ease-out",setTimeout(()=>{r.remove()},500))}setLang(r){this.translate.use(r),this.localStorageService.setItem("KEY_LANG",r)}redirectToListItems(r){let e=this.router.parseUrl(this.router.url).fragment??"",t=this.getBuildIdFromRoute(this.router.url);this.router.navigate(["/",t],{fragment:e||void 0}).then(()=>this.filterOrBuild=r)}redirectToAptitudes(){this.filterOrBuild="aptitudes";let r=this.router.parseUrl(this.router.url).fragment??"",e=this.getBuildIdFromRoute(this.router.url);this.router.navigate(["/",e,"aptitudes"],{fragment:r||void 0})}redirectToSorts(){this.filterOrBuild="aptitudes";let r=this.router.parseUrl(this.router.url).fragment??"",e=this.getBuildIdFromRoute(this.router.url);this.router.navigate(["/",e,"sorts"],{fragment:r||void 0})}redirectToEnchantements(){this.filterOrBuild="aptitudes";let r=this.router.parseUrl(this.router.url).fragment??"",e=this.getBuildIdFromRoute(this.router.url);this.router.navigate(["/",e,"enchantements"],{fragment:r||void 0})}getBuildIdFromRoute(r){return r.split("?")[0].split("#")[0].split("/").filter(Boolean)[0]??wa}static \u0275fac=function(e){return new(e||n)(vl(ci))};static \u0275cmp=I({type:n,selectors:[["app-root"]],decls:45,vars:21,consts:[["menu","matMenu"],["id","logo","src","logo.png","alt","logo"],["src","gearfu.png","alt","gearfu",1,"gearfu"],["mat-button","",1,"flagButton",3,"matMenuTriggerFor"],["alt","flag",1,"flag",3,"src"],["mat-menu-item","",3,"click"],["src","aptitudes/fr.webp","alt","flag","width","40px"],["src","aptitudes/en.webp","alt","flag","width","40px"],["src","aptitudes/es.webp","alt","flag","width","40px"],["src","aptitudes/pt.webp","alt","flag","width","40px"],["mat-button","",1,"zenithButton",3,"click"],["src","./zenith-logo.webp","alt","zenith","id","zenithButton"],["src","discord.png","alt","discord",1,"discord",3,"click"],["fontIcon","menu",1,"menu",3,"click"],[1,"content"],["appSwipe","",1,"filter",3,"swipeRight","tabIndex"],[1,"filter-header"],[1,"filter-build"],[3,"click"],[1,"filter-aptitudes"],[1,"filter-content"],[1,"build-content"],[1,"aptitudes-content"],[1,"content-application"],[1,"filter-title"]],template:function(e,t){if(e&1){let i=fe();b(0,"header"),x(1,"img",1)(2,"img",2)(3,"app-item-choose"),b(4,"button",3),x(5,"img",4),v(),b(6,"mat-menu",null,0)(8,"button",5),A("click",function(){return B(i),U(t.setLang("fr"))}),x(9,"img",6),v(),b(10,"button",5),A("click",function(){return B(i),U(t.setLang("en"))}),x(11,"img",7),v(),b(12,"button",5),A("click",function(){return B(i),U(t.setLang("es"))}),x(13,"img",8),v(),b(14,"button",5),A("click",function(){return B(i),U(t.setLang("pt"))}),x(15,"img",9),v()(),b(16,"button",10),A("click",function(){return B(i),U(t.generateBuild())}),x(17,"img",11),v(),b(18,"img",12),A("click",function(){return B(i),U(t.openDiscord())}),v(),b(19,"mat-icon",13),A("click",function(){return B(i),U(t.displayFilterService.toggleDisplay())}),v()(),b(20,"div",14)(21,"div",15),A("swipeRight",function(){return B(i),U(t.displayFilterService.setDisplay(!1))}),b(22,"div",16)(23,"div",17)(24,"button",18),A("click",function(){return B(i),U(t.redirectToListItems("filter"))}),C(25),y(26,"translate"),v(),b(27,"button",18),A("click",function(){return B(i),U(t.redirectToListItems("build"))}),C(28),y(29,"translate"),v()(),b(30,"div",19)(31,"button",18),A("click",function(){return B(i),U(t.redirectToAptitudes())}),C(32),y(33,"translate"),v(),b(34,"button",18),A("click",function(){return B(i),U(t.redirectToSorts())}),C(35),y(36,"translate"),v(),b(37,"button",18),A("click",function(){return B(i),U(t.redirectToEnchantements())}),C(38),y(39,"translate"),v()()(),oe(40,Sb,23,6,"div",20)(41,Tb,4,0,"div",21)(42,Cb,2,0,"div",22),v(),b(43,"div",23),x(44,"router-outlet"),v()()}if(e&2){let i=Mt(7);p(4),h("matMenuTriggerFor",i),p(),h("src","aptitudes/"+t.translate.currentLang+".webp",J),p(16),re("open",t.displayFilter),h("tabIndex",-1),p(4),M(E(26,11,"app.filter-item")),p(3),M(E(29,13,"app.build")),p(4),M(E(33,15,"app.aptitudes")),p(3),M(E(36,17,"app.sorts")),p(3),M(E(39,19,"app.enchantement")),p(2),se(t.filterOrBuild==="filter"?40:t.filterOrBuild==="build"?41:t.filterOrBuild==="aptitudes"?42:-1)}},dependencies:[sp,Wn,qi,op,hp,mp,xr,vr,ko,Io,Ao,Mo,Wo,Fo,Ss,jo,Ko,qo,Ho,Os,$,zo,xs,ys,ws,Ts,Cs,Mi,Ms,W],styles:["header[_ngcontent-%COMP%]{display:flex;position:fixed;width:96%;height:50px;justify-content:space-between;align-items:center;padding:15px 50px;background:linear-gradient(to right,#0d1b2a,#1b263b,#415a77);color:#fff;box-shadow:0 4px 6px #0003;top:0;z-index:1}header[_ngcontent-%COMP%]   .zenithButton[_ngcontent-%COMP%]{display:none}header[_ngcontent-%COMP%]   .flag[_ngcontent-%COMP%]{width:40px;height:40px}header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50px;height:50px}header[_ngcontent-%COMP%]   .gearfu[_ngcontent-%COMP%]{width:93px;height:50px;margin-left:20px;margin-right:auto}header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-right:auto;margin-left:25px;font-size:x-large;text-shadow:6px 4px 6px rgba(240,240,255,.3);font-family:auto;letter-spacing:3px}header[_ngcontent-%COMP%]   .flagButton[_ngcontent-%COMP%]{margin-left:auto}header[_ngcontent-%COMP%]   .flagButton[_ngcontent-%COMP%]:hover{transform:scale(1.06)}header[_ngcontent-%COMP%]   .discord[_ngcontent-%COMP%]{cursor:pointer}header[_ngcontent-%COMP%]   .discord[_ngcontent-%COMP%]:hover{transform:scale(1.06)}.content[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:80px;min-height:calc(100vh - 80px)}.filter[_ngcontent-%COMP%]{background:linear-gradient(to right,#213a57,#618a97);opacity:.9;color:#fff;font-weight:400;position:fixed;width:430px;overflow-y:scroll;height:calc(100% - 85px);padding-bottom:50px}.filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;cursor:pointer;background-color:#fff;color:#213a57;font-weight:600;font-size:17px;height:34px}.filter[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active{transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #1b263b}.filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{background:linear-gradient(to right,#0d1b2a,#1b263b,#415a77);display:flex;flex-direction:column}.filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-build[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-aptitudes[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 0}.filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-build[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .filter-aptitudes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:50%;border-radius:10px}.filter[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]{padding:10px}.filter[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.filter[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .filter[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   app-reverse-button[_ngcontent-%COMP%]{width:41px;border-radius:25%}.filter[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-title[_ngcontent-%COMP%]   app-reverse-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:15px}.filter[_ngcontent-%COMP%]   .build-content[_ngcontent-%COMP%]{padding:10px}.filter[_ngcontent-%COMP%]   app-builds-list[_ngcontent-%COMP%]{display:block}.filter[_ngcontent-%COMP%]{scrollbar-width:none}.filter[_ngcontent-%COMP%]   [_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.content-application[_ngcontent-%COMP%]{width:calc(100% - 430px);margin-left:430px;padding-bottom:50px}@-webkit-keyframes _ngcontent-%COMP%_rotating{0%{-webkit-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes _ngcontent-%COMP%_rotating{0%{-ms-transform:rotate(0deg);-moz-transform:rotate(0deg);-webkit-transform:rotate(0deg);-o-transform:rotate(0deg);transform:rotate(0)}to{-ms-transform:rotate(360deg);-moz-transform:rotate(360deg);-webkit-transform:rotate(360deg);-o-transform:rotate(360deg);transform:rotate(360deg)}}#logo[_ngcontent-%COMP%]{-webkit-animation:_ngcontent-%COMP%_rotating 5s linear infinite;-moz-animation:rotating 5s linear infinite;-ms-animation:rotating 5s linear infinite;-o-animation:rotating 5s linear infinite;animation:_ngcontent-%COMP%_rotating 5s linear infinite}  .mat-mdc-menu-panel{background:linear-gradient(to right,#0d1b2a,#1b263b,#415a77)!important;min-width:0!important}@media screen and (min-width:1000px){.menu[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:1000px){app-item-choose[_ngcontent-%COMP%]{z-index:50;position:fixed;top:80px;left:0;height:calc(100vh - 80px);overflow-y:scroll;background:#1b263b;width:70px}.content-application[_ngcontent-%COMP%]{width:calc(100% - 70px);margin-left:70px;font-size:12px}header[_ngcontent-%COMP%]{padding:15px;width:100%}header[_ngcontent-%COMP%]   .zenithButton[_ngcontent-%COMP%]{display:flex;align-items:center;flex-direction:row;justify-content:space-around;margin-left:5px;margin-right:20px;width:50px;color:#213a57;font-weight:400;font-size:16px;background-color:#dfe0e1;cursor:pointer;border-radius:10px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033}header[_ngcontent-%COMP%]   .zenithButton[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;text-align:center;align-content:center}header[_ngcontent-%COMP%]   .zenithButton[_ngcontent-%COMP%]:active{background-color:#1b263b;color:#dfe0e1;transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #dfe0e1}header[_ngcontent-%COMP%]   .flagButton[_ngcontent-%COMP%]{display:none}header[_ngcontent-%COMP%]   .menu[_ngcontent-%COMP%]{margin-right:25px;width:44px;height:44px;text-align:center;align-content:center;cursor:pointer}.content[_ngcontent-%COMP%]{height:calc(100vh - 118px);overflow-y:scroll;touch-action:pan-y!important}.content[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{display:flex!important;margin-left:0!important;width:100%}.content[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   filter-aptitudes[_ngcontent-%COMP%]{display:none}.content[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(50% - 20px);font-size:14px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.content[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   .filter-aptitudes[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:calc(33% - 20px)}.content[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]{z-index:100;position:fixed;top:80px;right:-200%;width:100%;height:calc(100% - 80px);transition:right .3s ease-in-out}.content[_ngcontent-%COMP%]   .filter[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{width:90%;margin:auto;display:block}.content[_ngcontent-%COMP%]   .filter.open[_ngcontent-%COMP%]{right:0}.discord[_ngcontent-%COMP%]{display:none}}"]})};$l(Ds,Ce(N({},_c),{providers:[Ea(),..._c.providers]})).catch(n=>console.error(n));
