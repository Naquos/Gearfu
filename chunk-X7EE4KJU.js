import{c as Y,d as Z}from"./chunk-EDVRXTDB.js";import{k as ee}from"./chunk-MKN6OV7K.js";import"./chunk-GRJWWDEZ.js";import"./chunk-H6IPQVH3.js";import{w as X}from"./chunk-AYIWESSK.js";import{$ as N,$c as K,Da as u,Ea as U,Fa as _,Ga as z,Ha as V,Ia as C,Ja as x,Ka as H,L as c,La as l,Ma as d,Na as f,Oa as a,P as L,Pa as s,Q as A,Qa as m,Ra as q,Rb as y,Sa as G,Sb as O,Ta as M,Ub as J,V as j,Va as g,ad as Q,ca as F,d as D,ed as W,ga as $,hb as w,ia as r,jb as R,na as I,qa as p,sa as B,ub as h,vb as v}from"./chunk-55AHIQTK.js";import"./chunk-EQDQRRRY.js";var E=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-item-skeleton"]],decls:20,vars:0,consts:[[1,"skeleton-item"],[1,"skeleton-header"],[1,"skeleton-box"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-text","skeleton-title-text"],[1,"skeleton-image"],[1,"skeleton-text","skeleton-weight"],[1,"skeleton-effects"],[1,"skeleton-effect-list"],[1,"skeleton-text"],[1,"skeleton-craft-drop"]],template:function(t,i){t&1&&(a(0,"div",0)(1,"div",1),m(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2),s(),a(6,"div",3)(7,"div",4),m(8,"div",5)(9,"div",6)(10,"div",7),s(),a(11,"div",8)(12,"div",9),m(13,"div",10)(14,"div",10)(15,"div",10)(16,"div",10),s(),a(17,"div",11),m(18,"div",2)(19,"div",2),s()()()())},styles:[".skeleton-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009}.skeleton-header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px;padding:10px;justify-content:space-around}.skeleton-header[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;height:100%}.skeleton-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:30%;gap:10px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-title-text[_ngcontent-%COMP%]{height:24px;width:120px;margin:0 auto}.skeleton-title[_ngcontent-%COMP%]   .skeleton-image[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-weight[_ngcontent-%COMP%]{height:18px;width:100px}.skeleton-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;flex:1}.skeleton-effect-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.skeleton-text[_ngcontent-%COMP%]{height:16px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:4px;width:100%}.skeleton-craft-drop[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-around;margin-top:10px}.skeleton-craft-drop[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}"]})};var k=class n{constructor(e){this.el=e}appIntersect=new j;intersectRoot;observer;ngOnInit(){this.observer=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&this.appIntersect.emit()})},{root:this.intersectRoot||null,threshold:.1,rootMargin:"300px"}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||n)(I(N))};static \u0275dir=B({type:n,selectors:[["","appIntersect",""]],inputs:{intersectRoot:"intersectRoot"},outputs:{appIntersect:"appIntersect"}})};var ie=(n,e)=>e.id;function oe(n,e){n&1&&f(0,"app-item-skeleton")}function re(n,e){if(n&1&&(l(0,"div",1),C(1,oe,1,0,"app-item-skeleton",null,V),d()),n&2){let t=g();r(),x(t.skeletonArray)}}function ae(n,e){if(n&1&&f(0,"app-item",2),n&2){let t=e.$implicit;H("item",t)}}function se(n,e){if(n&1){let t=q();l(0,"div",4,0),M("appIntersect",function(){L(t);let o=g(2);return A(o.onScrollEnd())}),f(2,"app-item-skeleton"),d()}}function pe(n,e){if(n&1&&(l(0,"div",1),C(1,ae,1,1,"app-item",2,ie),u(3,se,3,0,"div",3),d()),n&2){let t=g();r(),x(e),r(2),_(t.currentIndex<t.allItems.length?3:-1)}}var S=class n{itemsService=c(X);skeletonArray=Array(36).fill(0);displayedItems$=new D([]);allItems=[];itemsPerLoad=36;currentIndex=0;observer;isBrowser;constructor(e){this.isBrowser=J(e)}ngOnInit(){this.itemsService.items$?.subscribe(e=>{this.allItems=e,this.currentIndex=0,this.displayedItems$.next([]),this.loadMoreItems(),this.isBrowser&&this.scrollToTop()})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}loadMoreItems(){let e=this.allItems.slice(this.currentIndex,this.currentIndex+this.itemsPerLoad),t=this.displayedItems$.value;this.displayedItems$.next([...t,...e]),this.currentIndex+=this.itemsPerLoad}onScrollEnd(){this.currentIndex<this.allItems.length&&this.loadMoreItems()}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||n)(I(F))};static \u0275cmp=p({type:n,selectors:[["app-item-list"]],decls:3,vars:3,consts:[["loadTrigger",""],[1,"content"],[3,"item"],[1,"load-trigger"],[1,"load-trigger",3,"appIntersect"]],template:function(t,i){if(t&1&&(u(0,re,3,0,"div",1),h(1,"async"),U(2,pe,4,1,"div",1)),t&2){let o;_(i.itemsService.isLoading()?0:(o=v(1,1,i.displayedItems$))?2:-1,o)}},dependencies:[Y,O,E,k,y],styles:["[_nghost-%COMP%]{display:block}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:20px;grid-row-gap:20px}.content[_ngcontent-%COMP%]   app-item[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.load-trigger[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;align-items:center;min-height:250px}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:400px;width:100%}.loader-container[_ngcontent-%COMP%]   .loader-title[_ngcontent-%COMP%]{width:200px;margin-bottom:20px}.loader-container[_ngcontent-%COMP%]   .loader-spinner[_ngcontent-%COMP%]{width:100px;height:100px;padding:10px;background-color:#415a77;border-radius:50%;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (min-width:1700px)and (max-width:2110px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (min-width:1450px)and (max-width:1700px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:1450px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]})};function ce(n,e){if(n&1&&(a(0,"span"),m(1,"img",2),w(2),s()),n&2){let t=e.$implicit,i=g(2);r(),G("src",i.getEffectPng(t),$),r(),R(" ",i.displayEffect(t)," ")}}function me(n,e){n&1&&(a(0,"div",0),C(1,ce,3,2,"span",null,z),s(),a(3,"div",1),w(4),h(5,"translate"),s()),n&2&&(r(),x(e),r(3),R(" ",v(5,1,"recap-stats.info")," "))}var b=class n{recapStatsService=c(ee);imageService=c(W);static RESISTANCES_LIST=[82,83,84,85];displayEffect(e){let t=e.value<0?"-":"",i=Math.abs(e.value);if(n.RESISTANCES_LIST.includes(e.id)){let o=Math.floor((1-Math.pow(.8,i/100))*100);return`${t}${o}% (${i})`}return t+i}getEffectPng(e){return this.imageService.getActionIdUrl(e.id,e.id===39&&e.parameterMajorAction===121)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-recap-stats"]],decls:2,vars:3,consts:[[1,"content"],[1,"info"],["alt","aptitudes",3,"src"]],template:function(t,i){if(t&1&&(u(0,me,6,3),h(1,"async")),t&2){let o;_((o=v(1,1,i.recapStatsService.recap$))?0:-1,o)}},dependencies:[O,Q,y,K],styles:["[_nghost-%COMP%]{background:linear-gradient(to right,#213a57,#618a97);width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(18,1fr);grid-template-rows:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:3px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:#fff}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:3px;margin-right:5px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;color:#fff;width:100%}"]})};var te=class n{displayFilterService=c(Z);static \u0275fac=function(t){return new(t||n)};static \u0275cmp=p({type:n,selectors:[["app-list-item-router"]],decls:2,vars:0,consts:[["appSwipe","",3,"swipeLeft"]],template:function(t,i){t&1&&(f(0,"app-recap-stats"),l(1,"app-item-list",0),M("swipeLeft",function(){return i.displayFilterService.setDisplay(!0)}),d())},dependencies:[S,b],styles:["app-recap-stats[_ngcontent-%COMP%]{display:block;position:relative;width:100%;min-height:64px;margin-bottom:10px}app-item-list[_ngcontent-%COMP%]{width:98%;margin:auto}@media screen and (max-width:700px){app-recap-stats[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:1000px){app-recap-stats[_ngcontent-%COMP%]{display:none!important}}"]})};export{te as ListItemRouterComponent};
