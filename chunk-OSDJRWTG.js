import{a as I}from"./chunk-P2SC5CIM.js";import{Cd as o,H as S,L as t,d as c}from"./chunk-4VXWW5XM.js";var n=class a{aptitudesFormService=t(I);urlServices=t(o);code=new c("");code$=this.code.asObservable();mapCode=new Map([[1,-7],[16,80],[17,-2],[27,-4],[36,-3],[23,120],[26,1052],[30,1053],[31,20],[18,173],[19,175],[20,171],[21,-5],[37,177],[9,150],[10,875],[11,149],[12,180],[13,1055],[14,26],[15,71],[34,988],[2,31],[3,41],[4,160],[5,191],[6,184],[8,-6],[35,35]]);constructor(){let i=this.urlServices.getAptitudesFromUrl();this.aptitudesFormService.recapStat$.subscribe(()=>{this.updateCode()}),i!==void 0&&(this.saveCode(i),this.code.next(i))}updateCode(){let i="",e=this.aptitudesFormService.form.value;if(!e){this.code.next("");return}e.percentagePV&&(i+=`1:${e.percentagePV}-`),e.resistancesElementaires&&(i+=`16:${e.resistancesElementaires}-`),e.barriere&&(i+=`17:${e.barriere}-`),e.soinsRecus&&(i+=`27:${e.soinsRecus}-`),e.pdvArmure&&(i+=`36:${e.pdvArmure}-`),e.maitriseElem&&(i+=`23:${e.maitriseElem}-`),e.maitrisesMelee&&(i+=`26:${e.maitrisesMelee}-`),e.maitrisesDistance&&(i+=`30:${e.maitrisesDistance}-`),e.pdv&&(i+=`31:${e.pdv}-`),e.tacle&&(i+=`18:${e.tacle}-`),e.esquive&&(i+=`19:${e.esquive}-`),e.initiative&&(i+=`20:${e.initiative}-`),e.tacleEsquive&&(i+=`21:${e.tacleEsquive}-`),e.volonte&&(i+=`37:${e.volonte}-`),e.percentageCC&&(i+=`9:${e.percentageCC}-`),e.parade&&(i+=`10:${e.parade}-`),e.maitriseCritique&&(i+=`11:${e.maitriseCritique}-`),e.maitriseDos&&(i+=`12:${e.maitriseDos}-`),e.maitriseBerzerk&&(i+=`13:${e.maitriseBerzerk}-`),e.maitriseSoins&&(i+=`14:${e.maitriseSoins}-`),e.resistancesDos&&(i+=`15:${e.resistancesDos}-`),e.resistancesCritique&&(i+=`34:${e.resistancesCritique}-`),e.pa&&(i+=`2:${e.pa}-`),e.pm&&(i+=`3:${e.pm}-`),e.po&&(i+=`4:${e.po}-`),e.pw&&(i+=`5:${e.pw}-`),e.controle&&(i+=`6:${e.controle}-`),e.di&&(i+=`8:${e.di}-`),e.resistancesElementairesMajeur&&(i+=`35:${e.resistancesElementairesMajeur}-`),i.endsWith("-")&&(i=i.slice(0,-1)),this.urlServices.setAptitudesInUrl(i),this.code.next(i)}saveCode(i){let e=i.split("-"),s={};e.forEach(m=>{let[p,R]=m.split(":"),A=parseInt(p,10),r=parseInt(R,10),E=this.mapCode.get(A);if(E!==void 0)switch(E){case-7:s.percentagePV=r;break;case 80:s.resistancesElementaires=r;break;case-2:s.barriere=r;break;case-4:s.soinsRecus=r;break;case-3:s.pdvArmure=r;break;case 120:s.maitriseElem=r;break;case 1052:s.maitrisesMelee=r;break;case 1053:s.maitrisesDistance=r;break;case 20:s.pdv=r;break;case 173:s.tacle=r;break;case 175:s.esquive=r;break;case 171:s.initiative=r;break;case-5:s.tacleEsquive=r;break;case 177:s.volonte=r;break;case 150:s.percentageCC=r;break;case 875:s.parade=r;break;case 149:s.maitriseCritique=r;break;case 180:s.maitriseDos=r;break;case 1055:s.maitriseBerzerk=r;break;case 26:s.maitriseSoins=r;break;case 71:s.resistancesDos=r;break;case 988:s.resistancesCritique=r;break;case 31:s.pa=r;break;case 41:s.pm=r;break;case 160:s.po=r;break;case 191:s.pw=r;break;case 184:s.controle=r;break;case-6:s.di=r;break;case 35:s.resistancesElementairesMajeur=r;break}}),this.aptitudesFormService.setValue(s)}static \u0275fac=function(e){return new(e||a)};static \u0275prov=S({token:a,factory:a.\u0275fac,providedIn:"root"})};export{n as a};
