import{Ad as z,B as M,C as x,D as I,H as u,L as m,Lc as Te,Rc as fe,Ta as he,Y as Ae,_c as _e,ac as D,c as B,d as E,ed as J,f as U,h,i as L,l as ce,m as Se,md as N,od as a,p as C,s as $,sa as be,u as Re,w as V,xd as Le,yd as ve,z as F,zd as T}from"./chunk-BFHEPWFO.js";import{a as y,b as Ie}from"./chunk-EQDQRRRY.js";var G=class r{http=m(D);baseUrl="https://wakfu.cdn.ankama.com/gamedata/";getConfig(){return this.http.get(this.baseUrl+"config.json")}getItems(e){return this.http.get(this.baseUrl+e+"/items.json")}getActions(e){return this.http.get(this.baseUrl+e+"/actions.json")}getStates(e){return this.http.get(this.baseUrl+e+"/states.json")}getRecipesResult(e){return this.http.get(this.baseUrl+e+"/recipeResults.json")}getJobsItems(e){return this.http.get(this.baseUrl+e+"/jobsItems.json")}getRecipeIngredients(e){return this.http.get(this.baseUrl+e+"/recipeIngredients.json")}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var Ue=(A=>(A[A.LE_DIANINE=24700]="LE_DIANINE",A[A.LE_DORRRRE=24610]="LE_DORRRRE",A[A.LE_JALM=24593]="LE_JALM",A[A.LA_FLOUFF=24607]="LA_FLOUFF",A[A.L_ATTENTIONNEE=24551]="L_ATTENTIONNEE",A[A.LA_GAINE=24566]="LA_GAINE",A[A.LA_ZEOR=24668]="LA_ZEOR",A[A.LE_CONDOTTIER=24513]="LE_CONDOTTIER",A[A.LES_OPRESSANTES=24524]="LES_OPRESSANTES",A[A.LE_FOUIP=24601]="LE_FOUIP",A[A.LE_FELDSPATH=24615]="LE_FELDSPATH",A[A.LES_MELLES=24538]="LES_MELLES",A[A.LE_FAINNE=24585]="LE_FAINNE",A[A.LA_PROMESSE=24537]="LA_PROMESSE",A[A.LE_LIEUTE=24505]="LE_LIEUTE",A[A.LE_PELO=24521]="LE_PELO",A[A.LE_TIG=24488]="LE_TIG",A[A.LE_CABOT=24426]="LE_CABOT",A[A.LA_BASTOS=24408]="LA_BASTOS",A))(Ue||{}),Ce=r=>Object.values(Ue).includes(r);var ee=class r{ankamaCdnService=m(G);static MEDAILLE_BRAVOURE_ITEM_ID=24705;config=new E("");config$=this.config.asObservable().pipe(C(e=>e.length>0));action=new E([]);action$=this.action.asObservable().pipe(C(e=>e.length>0));item=new E([]);item$=this.item.asObservable().pipe(C(e=>e.length>0));states=new E([]);states$=this.states.asObservable().pipe(C(e=>e.length>0));recipes=new E([]);recipes$=this.recipes.asObservable().pipe(C(e=>e.length>0));idSiouperes=new E([]);idSiouperes$=this.idSiouperes.asObservable().pipe(C(e=>e.length>0));recipeIngredients=new E([]);recipeIngredients$=this.recipeIngredients.asObservable().pipe(C(e=>e.length>0));mapProductItemIdToRecipeResult=new Map;mapRecipeIdToRecipeIngredients=new Map;loadItems(e){this.ankamaCdnService.getItems(e).pipe(I(t=>this.item.next(t))).subscribe()}loadActions(e){this.ankamaCdnService.getActions(e).pipe(I(t=>this.action.next(t))).subscribe()}loadStates(e){this.ankamaCdnService.getStates(e).pipe(I(t=>this.states.next(t))).subscribe()}loadRecipeIngredients(e){this.ankamaCdnService.getRecipeIngredients(e).pipe(I(t=>this.recipeIngredients.next(t)),I(t=>{t.forEach(i=>{let o=this.mapRecipeIdToRecipeIngredients.get(i.recipeId)||[];o.push(i),this.mapRecipeIdToRecipeIngredients.set(i.recipeId,o)})})).subscribe()}loadRecipesResult(e){this.ankamaCdnService.getRecipesResult(e).pipe(I(t=>this.recipes.next(t)),I(t=>{t.forEach(i=>{this.mapProductItemIdToRecipeResult.set(i.productedItemId,i)})})).subscribe()}loadIdSioupere(e){this.ankamaCdnService.getJobsItems(e).pipe(h(t=>t.filter(i=>i.title.fr.toLowerCase().includes("sioup\xE8re"))),I(t=>this.idSiouperes.next(t))).subscribe()}load(){this.ankamaCdnService.getConfig().pipe(I(e=>this.config.next(e.version)),I(e=>this.loadItems(e.version)),I(e=>this.loadActions(e.version)),I(e=>this.loadStates(e.version)),I(e=>this.loadRecipesResult(e.version)),I(e=>this.loadIdSioupere(e.version)),I(e=>this.loadRecipeIngredients(e.version))).subscribe()}getActionList(){return this.action.getValue()}getStatesList(){return this.states.getValue()}isItemPvP(e){if(Ce(e))return!0;let t=this.mapProductItemIdToRecipeResult.get(e);return t?(this.mapRecipeIdToRecipeIngredients.get(t.recipeId)||[]).some(o=>o.itemId===r.MEDAILLE_BRAVOURE_ITEM_ID):!1}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var w=class r{imageService=m(J);itemTypes=new Map([[1,{ids:[101,111,114,117,223,253]}],[2,{ids:[108,110,113,115,254]}],[3,{ids:[103]}],[4,{ids:[119]}],[5,{ids:[120]}],[6,{ids:[132]}],[7,{ids:[133]}],[8,{ids:[134]}],[9,{ids:[136]}],[10,{ids:[138]}],[11,{ids:[646]}],[12,{ids:[189]}],[13,{ids:[112]}],[14,{ids:[582]}]]);getItemTypes(){return this.itemTypes}getItemType(e){let t;return this.itemTypes.forEach((i,o)=>{i.ids.includes(e)&&(t=o)}),t}getLogo(e){return e?this.imageService.mapUrlItemType.get(e)??"":""}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var te=class r{http=m(D);monsterDrops=new E([]);monsterDrops$=this.monsterDrops.asObservable();loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/monstres_drops_gfx.json").pipe(I(t=>this.monsterDrops.next(t)),F(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),this.monsterDrops.next([]),e()}})}),this.loadPromise)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};function Ne(r){switch(r){case 1:return 1;case 2:return 3;case 3:return 4;case 4:return 6;case 5:return 7;case 6:return 10;case 7:return 15;case 8:return 19;case 9:return 24;case 10:return 30;case 11:return 33;default:return 0}}function Oe(r){switch(r){case 1:return 2;case 2:return 5;case 3:return 7;case 4:return 10;case 5:return 12;case 6:return 15;case 7:return 17;case 8:return 20;case 9:return 22;case 10:return 25;case 11:return 27;default:return 0}}var _t=[20,35,50,65,80,95,110,125,140,155,170,185,200,215,230,245],pe=[{maxLevel:36,ratio:P(1/2)},{maxLevel:51,ratio:P(3/5)},{maxLevel:66,ratio:P(4/7)},{maxLevel:81,ratio:P(6/10)},{maxLevel:96,ratio:P(7/12)},{maxLevel:126,ratio:P(10/15)},{maxLevel:141,ratio:P(15/17)},{maxLevel:171,ratio:P(19/20)},{maxLevel:186,ratio:P(24/22)},{maxLevel:216,ratio:P(30/25)}];function Lt(r){let e=pe.findIndex(t=>r<t.maxLevel);return e===-1?11:e+1}function P(r){return Math.trunc(r*100)/100}var ie=class r{http=m(D);familiers=new E([]);familiers$=this.familiers.asObservable();loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/familiers_stats.json").pipe(I(t=>this.familiers.next(t)),F(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load monster drops:",t),this.familiers.next([]),e()}})}),this.loadPromise)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var de=(v=>(v.POIDS="POIDS",v.MAITRISES="MAITRISES",v.RESISTANCES="RESISTANCES",v.EQUILIBRE="EQUILIBRE",v.PARADE_ARMURE_DONNEE="PARADE_ARMURE_DONNEE",v.POINT_DE_VIE="POINT_DE_VIE",v.TACLE="TACLE",v.ESQUIVE="ESQUIVE",v.TACLE_ESQUIVE="TACLE_ESQUIVE",v.CRITIQUE="CRITIQUE",v.PARADE="PARADE",v.CRITIQUE_PARADE="CRITIQUE_PARADE",v.PA="PA",v.PM="PM",v.PO="PO",v.PW="PW",v))(de||{});var Q=class r extends T{itemTypeServices=m(w);selected=new E([]);selected$=this.selected.asObservable();keyEnum="KEY_ITEM_TYPE";form=new N({deuxMains:new a,uneMain:new a,anneau:new a,bottes:new a,amulette:new a,cape:new a,ceinture:new a,casque:new a,plastron:new a,epaulettes:new a,bouclier:new a,dague:new a,accessoires:new a,familier:new a});constructor(){super(),this.init()}handleChanges(e){let t=[];e.uneMain&&t.push(this.itemTypeServices.getItemTypes().get(2)?.ids),e.deuxMains&&t.push(this.itemTypeServices.getItemTypes().get(1)?.ids),e.anneau&&t.push(this.itemTypeServices.getItemTypes().get(3)?.ids),e.bottes&&t.push(this.itemTypeServices.getItemTypes().get(4)?.ids),e.amulette&&t.push(this.itemTypeServices.getItemTypes().get(5)?.ids),e.cape&&t.push(this.itemTypeServices.getItemTypes().get(6)?.ids),e.ceinture&&t.push(this.itemTypeServices.getItemTypes().get(7)?.ids),e.casque&&t.push(this.itemTypeServices.getItemTypes().get(8)?.ids),e.plastron&&t.push(this.itemTypeServices.getItemTypes().get(9)?.ids),e.epaulettes&&t.push(this.itemTypeServices.getItemTypes().get(10)?.ids),e.bouclier&&t.push(this.itemTypeServices.getItemTypes().get(12)?.ids),e.dague&&t.push(this.itemTypeServices.getItemTypes().get(13)?.ids),e.accessoires&&t.push(this.itemTypeServices.getItemTypes().get(11)?.ids),e.familier&&t.push(this.itemTypeServices.getItemTypes().get(14)?.ids),this.selected.next(t.flat())}setValue(e){this.form.setValue({deuxMains:e?.deuxMains??!1,uneMain:e?.uneMain??!1,anneau:e?.anneau??!1,bottes:e?.bottes??!1,amulette:e?.amulette??!1,cape:e?.cape??!1,ceinture:e?.ceinture??!1,casque:e?.casque??!1,plastron:e?.plastron??!1,epaulettes:e?.epaulettes??!1,bouclier:e?.bouclier??!1,dague:e?.dague??!1,accessoires:e?.accessoires??!1,familier:e?.familier??!1})}setDefaultValue(){this.setItemType()}setItemType(...e){this.form.setValue({deuxMains:e.includes(1),uneMain:e.includes(2),anneau:e.includes(3),bottes:e.includes(4),amulette:e.includes(5),cape:e.includes(6),ceinture:e.includes(7),casque:e.includes(8),plastron:e.includes(9),epaulettes:e.includes(10),bouclier:e.includes(12),dague:e.includes(13),accessoires:e.includes(11),familier:e.includes(14)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var re=class r extends T{static DEFAULT_VALUE="MAITRISES";sort=new E(r.DEFAULT_VALUE);sort$=this.sort.asObservable();keyEnum="KEY_SORT_CHOICE";form=new a(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.sort.next(e)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var q=class r extends T{static DEFAULT_VALUE=!1;onlyNoSecondary=new E(!1);onlyNoSecondary$=this.onlyNoSecondary.asObservable();keyEnum="KEY_ONLY_NO_SECONDARY";form=new a(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.onlyNoSecondary.next(e??!1)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var j=class r extends T{idMajor=new E([]);idMajor$=this.idMajor.asObservable();keyEnum="KEY_MAJOR_PRESENT";form=new N({PA:new a,PM:new a,PW:new a,PO:new a,CONTROLE:new a,ARMURE_DONNEE:new a,ARMURE_RECUE:new a,CRITIQUE:new a,PARADE:new a,RESISTANCE_DOS:new a,RESISTANCE_CRITIQUE:new a,PERTE_PA:new a,PERTE_PM:new a,PERTE_PW:new a,PERTE_PO:new a,PERTE_CONTROLE:new a,PERTE_ARMURE_DONNEE:new a,PERTE_ARMURE_RECUE:new a,PERTE_CRITIQUE:new a,PERTE_PARADE:new a,PERTE_RESISTANCE_DOS:new a,PERTE_RESISTANCE_CRITIQUE:new a,PERTE_MAITRISES_MELEE:new a,PERTE_MAITRISES_DISTANCE:new a,PERTE_MAITRISES_CRITIQUE:new a,PERTE_MAITRISES_DOS:new a,PERTE_MAITRISES_SOIN:new a,PERTE_MAITRISES_BERZERK:new a});constructor(){super(),this.init()}handleChanges(e){let t=[];e.PA&&t.push({id:31}),e.PM&&t.push({id:41}),e.PW&&t.push({id:191}),e.PO&&t.push({id:160}),e.CONTROLE&&t.push({id:184}),e.ARMURE_DONNEE&&t.push({id:39,parameter:120}),e.ARMURE_RECUE&&t.push({id:39,parameter:121}),e.CRITIQUE&&t.push({id:150}),e.PARADE&&t.push({id:875}),e.RESISTANCE_DOS&&t.push({id:71}),e.RESISTANCE_CRITIQUE&&t.push({id:988}),e.PERTE_PA&&t.push({id:56}),e.PERTE_PM&&t.push({id:57}),e.PERTE_PW&&t.push({id:192}),e.PERTE_PO&&t.push({id:161}),e.PERTE_CONTROLE&&t.push({id:-1}),e.PERTE_ARMURE_DONNEE&&t.push({id:40,parameter:120}),e.PERTE_ARMURE_RECUE&&t.push({id:40,parameter:121}),e.PERTE_CRITIQUE&&t.push({id:168}),e.PERTE_PARADE&&t.push({id:876}),e.PERTE_RESISTANCE_DOS&&t.push({id:1063}),e.PERTE_RESISTANCE_CRITIQUE&&t.push({id:1062}),e.PERTE_MAITRISES_MELEE&&t.push({id:1059}),e.PERTE_MAITRISES_DISTANCE&&t.push({id:1060}),e.PERTE_MAITRISES_CRITIQUE&&t.push({id:1056}),e.PERTE_MAITRISES_DOS&&t.push({id:181}),e.PERTE_MAITRISES_SOIN&&t.push({id:-1}),e.PERTE_MAITRISES_BERZERK&&t.push({id:1061}),this.idMajor.next(t)}setValue(e){this.form.setValue({PA:e?.PA??!1,PM:e?.PM??!1,PW:e?.PW??!1,PO:e?.PO??!1,CONTROLE:e?.CONTROLE??!1,ARMURE_DONNEE:e?.ARMURE_DONNEE??!1,ARMURE_RECUE:e?.ARMURE_RECUE??!1,CRITIQUE:e?.CRITIQUE??!1,PARADE:e?.PARADE??!1,RESISTANCE_DOS:e?.RESISTANCE_DOS??!1,RESISTANCE_CRITIQUE:e?.RESISTANCE_CRITIQUE??!1,PERTE_PA:e?.PERTE_PA??!1,PERTE_PM:e?.PERTE_PM??!1,PERTE_PW:e?.PERTE_PW??!1,PERTE_PO:e?.PERTE_PO??!1,PERTE_CONTROLE:e?.PERTE_CONTROLE??!1,PERTE_ARMURE_DONNEE:e?.PERTE_ARMURE_DONNEE??!1,PERTE_ARMURE_RECUE:e?.PERTE_ARMURE_RECUE??!1,PERTE_CRITIQUE:e?.PERTE_CRITIQUE??!1,PERTE_PARADE:e?.PERTE_PARADE??!1,PERTE_RESISTANCE_DOS:e?.PERTE_RESISTANCE_DOS??!1,PERTE_RESISTANCE_CRITIQUE:e?.PERTE_RESISTANCE_CRITIQUE??!1,PERTE_MAITRISES_MELEE:e?.PERTE_MAITRISES_MELEE??!1,PERTE_MAITRISES_DISTANCE:e?.PERTE_MAITRISES_DISTANCE??!1,PERTE_MAITRISES_CRITIQUE:e?.PERTE_MAITRISES_CRITIQUE??!1,PERTE_MAITRISES_DOS:e?.PERTE_MAITRISES_DOS??!1,PERTE_MAITRISES_SOIN:e?.PERTE_MAITRISES_SOIN??!1,PERTE_MAITRISES_BERZERK:e?.PERTE_MAITRISES_BERZERK??!1})}setDefaultValue(){this.setMajor()}setMajor(...e){this.form.setValue({PA:e.some(t=>t.id===31),PM:e.some(t=>t.id===41),PW:e.some(t=>t.id===191),PO:e.some(t=>t.id===160),CONTROLE:e.some(t=>t.id===184),ARMURE_DONNEE:e.some(t=>t.id===39&&t.parameter===120),ARMURE_RECUE:e.some(t=>t.id===39&&t.parameter===121),CRITIQUE:e.some(t=>t.id===150),PARADE:e.some(t=>t.id===875),RESISTANCE_DOS:e.some(t=>t.id===71),RESISTANCE_CRITIQUE:e.some(t=>t.id===988),PERTE_PA:e.some(t=>t.id===56),PERTE_PM:e.some(t=>t.id===57),PERTE_PW:e.some(t=>t.id===192),PERTE_PO:e.some(t=>t.id===161),PERTE_CONTROLE:e.some(t=>t.id===-1),PERTE_ARMURE_DONNEE:e.some(t=>t.id===40&&t.parameter===120),PERTE_ARMURE_RECUE:e.some(t=>t.id===40&&t.parameter===121),PERTE_CRITIQUE:e.some(t=>t.id===168),PERTE_PARADE:e.some(t=>t.id===876),PERTE_RESISTANCE_DOS:e.some(t=>t.id===1063),PERTE_RESISTANCE_CRITIQUE:e.some(t=>t.id===1062),PERTE_MAITRISES_MELEE:e.some(t=>t.id===1059),PERTE_MAITRISES_DISTANCE:e.some(t=>t.id===1060),PERTE_MAITRISES_CRITIQUE:e.some(t=>t.id===1056),PERTE_MAITRISES_DOS:e.some(t=>t.id===181),PERTE_MAITRISES_SOIN:e.some(t=>t.id===-1),PERTE_MAITRISES_BERZERK:e.some(t=>t.id===1061)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var ye=(o=>(o.COEUR_HUPPERMAGE="COEUR_HUPPERMAGE",o.DENOUEMENT="DENOUEMENT",o.DEMESURE="DEMESURE",o.CHAOS="CHAOS",o))(ye||{});var k=class r extends T{static DEFAULT_VALUE=[];multiplicateurElem=new E(1);multiplicateurElem$=this.multiplicateurElem.asObservable();denouement=new E(!1);denouement$=this.denouement.asObservable();demesure=new E(!1);demesure$=this.demesure.asObservable();chaos=new E(!1);chaos$=this.chaos.asObservable();keyEnum="KEY_MODIFIER_MECANISM";form=new a(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){let t=1;e?.includes("COEUR_HUPPERMAGE".valueOf())&&(t*=1.2),this.multiplicateurElem.next(t),this.denouement.next(e?.includes("DENOUEMENT".valueOf())??!1),this.demesure.next(e?.includes("DEMESURE".valueOf())??!1),this.chaos.next(e?.includes("CHAOS".valueOf())??!1)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var H=class r extends T{static DEFAULT_LEVEL_MIN=200;static DEFAULT_LEVEL_MAX=245;selected=new E([]);selected$=this.selected.asObservable();levelMin=new E(r.DEFAULT_LEVEL_MIN);levelMin$=this.levelMin.asObservable();levelMax=new E(r.DEFAULT_LEVEL_MAX);levelMax$=this.levelMax.asObservable();keyEnum="KEY_ITEM_LEVEL";form=new N({levelMin:new a(r.DEFAULT_LEVEL_MIN,{nonNullable:!0}),levelMax:new a(r.DEFAULT_LEVEL_MAX,{nonNullable:!0})});constructor(){super(),this.init()}handleChanges(e){this.levelMin.next(e.levelMin??r.DEFAULT_LEVEL_MIN),this.levelMax.next(e.levelMax??r.DEFAULT_LEVEL_MAX)}setValue(e){this.form.setValue({levelMin:e?.levelMin??r.DEFAULT_LEVEL_MIN,levelMax:e?.levelMax??r.DEFAULT_LEVEL_MAX})}setDefaultValue(){this.form.setValue({levelMin:r.DEFAULT_LEVEL_MIN,levelMax:r.DEFAULT_LEVEL_MAX})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var W=class r extends T{selected=new E([]);selected$=this.selected.asObservable();rarity=new E([]);rarity$=this.rarity.asObservable();keyEnum="KEY_RARETE_ITEM";form=new N({normal:new a,rare:new a,mythique:new a,legendaire:new a,souvenir:new a,relique:new a,epique:new a});constructor(){super(),this.init()}handleChanges(e){let t=[];e.normal&&t.push(1),e.rare&&t.push(2),e.mythique&&t.push(3),e.legendaire&&t.push(4),e.relique&&t.push(5),e.souvenir&&t.push(6),e.epique&&t.push(7),this.rarity.next(t)}setValue(e){this.form.setValue({normal:e?.normal??!1,rare:e?.rare??!1,mythique:e?.mythique??!1,legendaire:e?.legendaire??!1,souvenir:e?.souvenir??!1,relique:e?.relique??!1,epique:e?.epique??!1})}setRarity(...e){this.form.setValue({normal:e.includes(1),rare:e.includes(2),mythique:e.includes(3),legendaire:e.includes(4),relique:e.includes(5),souvenir:e.includes(6),epique:e.includes(7)})}setDefaultValue(){this.setRarity()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var se=class r extends T{rareteItemFormServices=m(W);itemTypeFormServices=m(Q);itemTypeService=m(w);itemLevelFormService=m(H);majorPresentFormService=m(j);static DEFAULT_VALUE="";itemName=new E("");itemName$=this.itemName.asObservable();keyEnum="KEY_SEARCH_ITEM_NAME";form=new a(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.itemName.next(e??r.DEFAULT_VALUE)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}setFilter(e){this.rareteItemFormServices.setDefaultValue(),this.majorPresentFormService.setDefaultValue();let t=this.itemTypeService.getItemType(e.itemTypeId);if(t)if(this.itemTypeFormServices.setItemType(t),e.level<=20)this.itemLevelFormService.setValue({levelMin:0,levelMax:20});else{let i=Math.ceil((e.level-20)/15);this.itemLevelFormService.setValue({levelMin:(i-1)*15+20+1,levelMax:i*15+20})}}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var K=class r extends T{idResistances=new E([]);idResistances$=this.idResistances.asObservable();keyEnum="KEY_RESISTANCES";form=new N({feu:new a,eau:new a,terre:new a,air:new a});constructor(){super(),this.init()}handleChanges(e){let t=[];e.feu&&t.push(82),e.eau&&t.push(83),e.terre&&t.push(84),e.air&&t.push(85),this.idResistances.next(t)}setValue(e){this.form.setValue({feu:e?.feu??!1,eau:e?.eau??!1,terre:e?.terre??!1,air:e?.air??!1})}setResistances(...e){this.form.setValue({feu:e.includes(82),eau:e.includes(83),terre:e.includes(84),air:e.includes(85)})}setDefaultValue(){this.setResistances()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var Y=class r extends T{nbElements=new E(0);nbElements$=this.nbElements.asObservable();idMaitrises=new E([]);idMaitrises$=this.idMaitrises.asObservable();keyEnum="KEY_MAITRISES";form=new N({feu:new a,eau:new a,terre:new a,air:new a,critique:new a,dos:new a,melee:new a,distance:new a,soin:new a,berzerk:new a});constructor(){super(),this.init()}handleChanges(e){let t=0,i=[];e.feu&&(t++,i.push(122)),e.eau&&(t++,i.push(124)),e.terre&&(t++,i.push(123)),e.air&&(t++,i.push(125)),this.nbElements.next(t),e.critique&&i.push(149),e.dos&&i.push(180),e.melee&&i.push(1052),e.distance&&i.push(1053),e.soin&&i.push(26),e.berzerk&&i.push(1055),this.idMaitrises.next(i)}setValue(e){this.form.setValue({feu:e?.feu??!1,eau:e?.eau??!1,terre:e?.terre??!1,air:e?.air??!1,critique:e?.critique??!1,dos:e?.dos??!1,melee:e?.melee??!1,distance:e?.distance??!1,soin:e?.soin??!1,berzerk:e?.berzerk??!1})}setDefaultValue(){this.setMaitrises()}setMaitrises(...e){this.form.setValue({feu:e.includes(122),eau:e.includes(124),terre:e.includes(123),air:e.includes(125),critique:e.includes(149),dos:e.includes(180),melee:e.includes(1052),distance:e.includes(1053),soin:e.includes(26),berzerk:e.includes(1055)})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var Z=class r extends T{static DEFAULT_VALUE=!1;onlyNoElem=new E(!1);onlyNoElem$=this.onlyNoElem.asObservable();keyEnum="KEY_ONLY_NO_ELEM";form=new a(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.onlyNoElem.next(e??!1)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var ne=class r extends T{static DEFAULT_VALUE=!1;reverse=new E(r.DEFAULT_VALUE);reverse$=this.reverse.asObservable();keyEnum="KEY_REVERSE";form=new a(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super(),this.init()}handleChanges(e){this.reverse.next(e??r.DEFAULT_VALUE)}setValue(e){this.form.setValue(e??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var ae=class r extends T{static DEFAULT_VALUE_DROP=!0;static DEFAULT_VALUE_CRAFTABLE=!0;static DEFAULT_VALUE_BOSS=!0;static DEFAULT_VALUE_ARCHI=!0;static DEFAULT_VALUE_PVP=!0;drop=new E(r.DEFAULT_VALUE_DROP);drop$=this.drop.asObservable();craftable=new E(r.DEFAULT_VALUE_CRAFTABLE);craftable$=this.craftable.asObservable();boss=new E(r.DEFAULT_VALUE_BOSS);boss$=this.boss.asObservable();archi=new E(r.DEFAULT_VALUE_ARCHI);archi$=this.archi.asObservable();pvp=new E(r.DEFAULT_VALUE_PVP);pvp$=this.pvp.asObservable();keyEnum="KEY_OBTENTION";form=new N({DROP:new a,CRAFTABLE:new a,BOSS:new a,ARCHI:new a,PVP:new a});constructor(){super(),this.init()}handleChanges(e){this.drop.next(!e.DROP),this.craftable.next(!e.CRAFTABLE),this.boss.next(!e.BOSS),this.archi.next(!e.ARCHI),this.pvp.next(!e.PVP)}setValue(e){this.form.setValue({DROP:e?.DROP??r.DEFAULT_VALUE_DROP,CRAFTABLE:e?.CRAFTABLE??r.DEFAULT_VALUE_CRAFTABLE,BOSS:e?.BOSS??r.DEFAULT_VALUE_BOSS,ARCHI:e?.ARCHI??r.DEFAULT_VALUE_ARCHI,PVP:e?.PVP??r.DEFAULT_VALUE_PVP})}setDefaultValue(){this.setValue({DROP:r.DEFAULT_VALUE_DROP,CRAFTABLE:r.DEFAULT_VALUE_CRAFTABLE,BOSS:r.DEFAULT_VALUE_BOSS,ARCHI:r.DEFAULT_VALUE_ARCHI,PVP:r.DEFAULT_VALUE_PVP})}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var Me=(l=>(l[l.EMBLEME_SHUSHU_1=18670]="EMBLEME_SHUSHU_1",l[l.EMBLEME_SHUSHU_2=18671]="EMBLEME_SHUSHU_2",l[l.EMBLEME_SHUSHU_3=18672]="EMBLEME_SHUSHU_3",l[l.EMBLEME_SHUSHU_4=18673]="EMBLEME_SHUSHU_4",l[l.EMBLEME_SHUSHU_5=18674]="EMBLEME_SHUSHU_5",l[l.EMBLEME_SHUSHU_6=18675]="EMBLEME_SHUSHU_6",l[l.EMBLEME_SHUSHU_7=18676]="EMBLEME_SHUSHU_7",l[l.EMBLEME_SHUSHU_8=18677]="EMBLEME_SHUSHU_8",l[l.EMBLEME_SHUSHU_9=18678]="EMBLEME_SHUSHU_9",l[l.EMBLEME_SHUSHU_10=18679]="EMBLEME_SHUSHU_10",l[l.EMBLEME_SHUSHU_11=18680]="EMBLEME_SHUSHU_11",l[l.EMBLEME_SHUSHU_12=18681]="EMBLEME_SHUSHU_12",l))(Me||{}),Pe=r=>Object.values(Me).includes(r);var Ee=class r{itemTypeFormServices=m(Q);translateService=m(_e);onlyNoSecondaryFormService=m(q);sortChoiceFormService=m(re);majorPresentFormService=m(j);modifierElemMaitrisesFormService=m(k);searchItemNameFormService=m(se);rareteItemFormService=m(W);itemLevelFormService=m(H);resistanceFormService=m(K);maitrisesFormService=m(Y);ankamaCdnFacade=m(ee);onlyNoElemFormService=m(Z);reverseFormService=m(ne);obtentionFormService=m(ae);monsterDropService=m(te);familiersService=m(ie);static ARMURE_DONNEE_RECUE_LIST=[39,40];static RESISTANCE_ELEM_IDS=[85,83,84,82];static MALUS_RESIS_ELEM_IDS=[97,96,98];static MAITRISES_ELEM_IDS=[122,123,124,125];static PERTE_MAITRISES_IDS=[130,132];static EQUILIBRE_RESISTANCE_MULTIPLIER=1.2;static DEFAULT_NB_ELEMENTS=4;idPierresList=[29847,29848,29849,29850,29851];items=[];fullItems$=new E([]);items$;itemsFilterByItemName$;itemsFilters$;recipesByProductId=new Map;itemsByName=new Map;monsterDropsByItemId=new Map;archiIds=new Set;sublimations=new E([]);sublimations$=this.sublimations.asObservable();isLoading=Ae(!0);init(){this.initItemsList(),this.initFilter();let e=L([this.itemsFilters$,this.maitrisesFormService.nbElements$,this.maitrisesFormService.idMaitrises$,this.sortChoiceFormService.sort$,this.modifierElemMaitrisesFormService.multiplicateurElem$,this.modifierElemMaitrisesFormService.denouement$,this.resistanceFormService.idResistances$,this.onlyNoElemFormService.onlyNoElem$,this.onlyNoSecondaryFormService.onlyNoSecondary$,this.modifierElemMaitrisesFormService.chaos$]).pipe(I(([t,i,o,s,n,c,S,d,p,R])=>this.fillItemWeightMap(t,i,o,s,n,S,c,d,p,R)),h(([t])=>t));this.items$=L([e,this.reverseFormService.reverse$]).pipe(h(([t,i])=>{let o=t.sort(this.sortItems());return i?o.reverse():o}),I(()=>this.isLoading.set(!1)),F(1)),this.items$.pipe($(1)).subscribe()}initFamiliers(){this.familiersService.familiers$.pipe($(1)).subscribe(e=>{let t=new Map;this.items.forEach(i=>{t.set(i.id,i)}),e.forEach(i=>{let o=t.get(i.id);o&&i.statsList.forEach((s,n)=>{n<o.equipEffects.length&&(o.equipEffects[n].params[0]=s)})})})}sortItems(){return(e,t)=>t.weightForSort>e.weightForSort?1:t.weightForSort===e.weightForSort?t.weight-e.weight:-1}isNotWIP(e){return!!e.title}filterObtention(e,t,i,o,s,n){let c=e.isCraftable&&!i;return c=c||e.mobDropable.length>0&&!t,c=c||e.bossDropable.length>0&&!o,c=c||e.archiDropable.length>0&&!s,c=c||e.isPvP&&!n,c=c||e.mobDropable.length===0&&e.bossDropable.length===0&&e.archiDropable.length===0&&!e.isCraftable&&!e.isPvP,c}loadSublimations(){let t=this.items.filter(i=>i.itemTypeId===812).filter(i=>i.enchantement.isEpic||i.enchantement.isRelic||["I","II","III"].includes(i.title.fr.split(" ").pop()||"")).sort((i,o)=>i.title.fr.localeCompare(o.title.fr));this.sublimations.next(t),this.prepareJsonSublimations(t)}prepareJsonSublimations(e){let t=[],i=new Map;e.forEach(o=>{if(o.enchantement.isEpic||o.enchantement.isRelic)i.set(o.title.fr,[o]);else{let s=o.title.fr.replace(/ I{1,3}$| II$| III$/,"").trim();i.has(s)||i.set(s,[]),i.get(s)?.push(o)}}),i.forEach(o=>{let s=[];o.forEach(p=>{if(p.enchantement.isEpic||p.enchantement.isRelic)s.push({id:p.id,level:1});else{let R=p.title.fr.endsWith(" III")?3:p.title.fr.endsWith(" II")?2:1;s.push({id:p.id,level:R})}});let n=0,c=o[0];if(!c.enchantement.isEpic&&!c.enchantement.isRelic){let p=c.description.fr.slice(c.description.fr.length-2,c.description.fr.length-1);n=Number.parseInt(p||"0")}let S=c.enchantement.isEpic||c.enchantement.isRelic,d=[];t.push({linkSublimation:s,title:{fr:S?o[0].title.fr:o[0].title.fr.replace(/ I{1,3}$| II$| III$/,"").trim(),en:S?o[0].title.en:o[0].title.en.replace(/ I{1,3}$| II$| III$/,"").trim(),es:S?o[0].title.es:o[0].title.es.replace(/ I{1,3}$| II$| III$/,"").trim(),pt:S?o[0].title.pt:o[0].title.pt.replace(/ I{1,3}$| II$| III$/,"").trim()},description:{fr:"",en:"",es:"",pt:""},levelMax:n,baseEffect:d,id:s[0].id,gfxId:c.idImage,isEpic:c.enchantement.isEpic,isRelic:c.enchantement.isRelic,slotColorPattern:c.enchantement.slotColorPattern,bossDropable:[],isCraftable:!1})})}initFilter(){this.items=this.items.filter(d=>![480,811,812].includes(d.itemTypeId)).filter(d=>this.isNotWIP(d)),this.initFamiliers(),this.fullItems$.next(this.items),this.itemsFilterByItemName$=L([this.fullItems$,this.searchItemNameFormService.itemName$]).pipe(h(([d,p])=>d.filter(R=>this.normalizeString(R.title[this.translateService.currentLang].toString()).includes(this.normalizeString(p)))));let e=L([this.itemsFilterByItemName$,this.obtentionFormService.drop$,this.obtentionFormService.craftable$,this.obtentionFormService.boss$,this.obtentionFormService.archi$,this.obtentionFormService.pvp$]).pipe(h(([d,p,R,l,b,f])=>d.filter(g=>this.filterObtention(g,p,R,l,b,f)))),t=L([e,this.itemLevelFormService.levelMin$]).pipe(h(([d,p])=>d.filter(R=>R.level>=p||R.itemTypeId===582))),i=L([t,this.itemLevelFormService.levelMax$]).pipe(h(([d,p])=>d.filter(R=>R.level<=p||R.itemTypeId===582))),o=L([i,this.rareteItemFormService.rarity$]).pipe(h(([d,p])=>d.filter(R=>p.length===0||p.includes(R.rarity)||R.itemTypeId===582))),s=L([o,this.onlyNoElemFormService.onlyNoElem$]).pipe(h(([d,p])=>d.filter(R=>!p||!R.equipEffects.find(l=>[122,124,123,125,120,1068].includes(l.actionId))))),n=L([s,this.onlyNoSecondaryFormService.onlyNoSecondary$,this.modifierElemMaitrisesFormService.denouement$,this.onlyNoElemFormService.onlyNoElem$]).pipe(h(([d,p,R,l])=>d.filter(b=>!p||!b.equipEffects.find(f=>[180,1052,1053,26,1055].includes(f.actionId))&&(R&&!l||!b.equipEffects.find(f=>f.actionId===149))))),c=L([n,this.majorPresentFormService.idMajor$]).pipe(h(([d,p])=>d.filter(R=>this.majorIsPresent(p,R)))),S=L([c,this.modifierElemMaitrisesFormService.demesure$]).pipe(h(([d,p])=>d.filter(R=>!p||R.equipEffects.find(l=>[875,150].includes(l.actionId)))));this.itemsFilters$=L([S,this.itemTypeFormServices.selected$]).pipe(h(([d,p])=>d.filter(R=>p.length===0||p.includes(R.itemTypeId))))}normalizeString(e){return e.normalize("NFKD").replace(/['''´’`]/g,"'").replace(/\s+/g," ").trim().toLowerCase()}fillItemWeightMap(e,t,i,o,s,n,c,S,d,p){let R=0,l=0;e.forEach(b=>{b.resistance=Math.trunc(this.calculResistancesForAnItem(b,n)),b.maitrise=Math.trunc(this.calculMaitrisesForAnItem(b,t,i,s,c,S,d,p)),b.weight=this.calculWeight(b.resistance,b.maitrise,b.level),b.weightForSort=0}),o==="EQUILIBRE"&&e.length&&(R=e.sort((b,f)=>f.maitrise-b.maitrise)[0].maitrise,l=e.sort((b,f)=>f.resistance-b.resistance)[0].resistance),e.forEach(b=>{let f=this.createEffectsMap(b);b.weightForSort=this.calculateWeightForSort(b,o,f,R,l)})}createEffectsMap(e){let t=new Map;return e.equipEffects.forEach(i=>{t.set(i.actionId,i.params[0])}),t}calculateWeightForSort(e,t,i,o,s){switch(t){case"POIDS":return e.weight;case"MAITRISES":return e.maitrise;case"EQUILIBRE":return e.maitrise/o+r.EQUILIBRE_RESISTANCE_MULTIPLIER*(e.resistance/s);case"POINT_DE_VIE":return this.calculateNetEffect(i,20,21);case"PARADE_ARMURE_DONNEE":return this.calculateParadeArmureDonnee(e,i);case"TACLE":return this.calculateNetEffect(i,173,174);case"ESQUIVE":return this.calculateNetEffect(i,175,176);case"TACLE_ESQUIVE":return this.calculateNetEffect(i,173,174)+this.calculateNetEffect(i,175,176);case"CRITIQUE":return this.calculateNetEffect(i,150,168);case"PARADE":return this.calculateNetEffect(i,875,876);case"CRITIQUE_PARADE":return this.calculateNetEffect(i,150,168)+this.calculateNetEffect(i,875,876);case"PA":return this.calculateNetEffect(i,31,56);case"PM":return this.calculateNetEffect(i,41,57);case"PO":return this.calculateNetEffect(i,160,161);case"PW":return this.calculateNetEffect(i,193,194)+this.calculateNetEffect(i,191,192);default:return e.resistance}}calculateParadeArmureDonnee(e,t){let i=t.get(875)??0;return e.equipEffects.forEach(o=>{o.actionId===39&&o.params[4]===120&&(i+=o.params[0])}),i}getEffectValue(e,t){return e.get(t)??0}calculateNetEffect(e,t,i){return this.getEffectValue(e,t)-this.getEffectValue(e,i)}calculWeight(e,t,i){return Math.trunc(this.ratioWeightByLevel(i)*e+t)}ratioWeightByLevel(e){return pe.find(i=>e<i.maxLevel)?.ratio??P(33/27)}initItemsList(){L([this.ankamaCdnFacade.item$,this.ankamaCdnFacade.recipes$,this.ankamaCdnFacade.idSiouperes$,this.monsterDropService.monsterDrops$]).pipe($(1),I(([e,t,i,o])=>{e.filter(s=>!Pe(s.definition.item.id)).forEach(s=>this.items.push({id:s.definition.item.id,level:s.definition.item.level,rarity:s.definition.item.baseParameters.rarity,itemTypeId:s.definition.item.baseParameters.itemTypeId,equipEffects:s.definition.equipEffects.map(n=>({id:n.effect.definition.id,actionId:n.effect.definition.actionId,params:n.effect.definition.params})),title:{fr:s.title.fr.trim(),en:s.title.en.trim(),es:s.title.es.trim(),pt:s.title.pt.trim()},description:s.description,idImage:s.definition.item.graphicParameters.gfxId,weightForSort:0,weight:0,maitrise:0,resistance:0,isCraftable:!1,mobDropable:[],bossDropable:[],archiDropable:[],isPvP:!1,enchantement:{slotColorPattern:s.definition.item.sublimationParameters?.slotColorPattern??[],isEpic:s.definition.item.sublimationParameters?.isEpic??!1,isRelic:s.definition.item.sublimationParameters?.isRelic??!1}})),this.buildIndexes(t,o,i),this.items.forEach(s=>this.calculItemIsCraftable(s)),this.items.forEach(s=>this.calculItemIsDropable(s)),this.items.forEach(s=>this.calculIsItemPvP(s))})).subscribe()}buildIndexes(e,t,i){for(let o of e)this.recipesByProductId.set(o.productedItemId,o);for(let o of this.items)this.itemsByName.has(o.title.fr)||this.itemsByName.set(o.title.fr,[]),this.itemsByName.get(o.title.fr).push(o);for(let o of t)for(let s of o.idsDrop)this.monsterDropsByItemId.has(s)||this.monsterDropsByItemId.set(s,[]),this.monsterDropsByItemId.get(s).push(o);for(let o of i)this.archiIds.add(o.definition.id)}calculIsItemPvP(e){if(!this.ankamaCdnFacade.isItemPvP(e.id))return;let i=this.itemsByName.get(e.title.fr);i&&i.forEach(o=>o.isPvP=!0)}calculItemIsCraftable(e){if(e.isCraftable||!this.recipesByProductId.get(e.id))return;if(e.rarity===6){e.isCraftable=!0;return}let i=this.itemsByName.get(e.title.fr);if(!(!i||i.some(s=>e.level<=35?s.rarity<e.rarity:s.rarity<e.rarity&&s.level>=35)))for(let s of i)s.isCraftable=!0}calculItemIsDropable(e){if(e.mobDropable.length)return;let t=this.monsterDropsByItemId.get(e.id);if(!t||t.length===0)return;let i=t.filter(n=>n.idsDrop.some(c=>this.idPierresList.includes(c))),o=t.filter(n=>n.idsDrop.some(c=>this.archiIds.has(c))).filter(n=>!i.includes(n));if(t=t.filter(n=>!i.includes(n)&&!o.includes(n)),e.rarity===6){t.length&&(e.mobDropable=t),i.length&&(e.bossDropable=i),o.length&&(e.archiDropable=o);return}let s=this.itemsByName.get(e.title.fr);if(s)for(let n of s)n.rarity!==6&&((n.rarity!==1||n.level<=35)&&n.level>=e.level&&t.length&&(n.mobDropable=t),i.length&&(n.bossDropable=i),o.length&&(n.archiDropable=o))}searchItem(e){return this.fullItems$.pipe(C(t=>t.length>0),h(t=>t.find(i=>i.id===e)))}getItem(e){return this.fullItems$.value.find(t=>t.id===e)}majorIsPresent(e,t){return!e.find(i=>!r.ARMURE_DONNEE_RECUE_LIST.includes(i.id)&&!t.equipEffects.map(o=>o.actionId).includes(i.id)||i.id===39&&!t.equipEffects.find(o=>o.actionId===39&&o.params[4]===i.parameter)||i.id===40&&!t.equipEffects.find(o=>o.actionId===40&&o.params[4]===i.parameter))}calculResistancesForAnItem(e,t){let i=0,o=t.length===0?r.DEFAULT_NB_ELEMENTS:t.length;return e.equipEffects.forEach(s=>{s.actionId===1069&&s.params[2]>=t.length?i+=s.params[0]*Math.min(s.params[2],o):s.actionId===80?i+=s.params[0]*o:s.actionId===90||s.actionId===100?i-=s.params[0]*o:r.RESISTANCE_ELEM_IDS.includes(s.actionId)&&(o===r.DEFAULT_NB_ELEMENTS||t.includes(s.actionId))?i+=s.params[0]:(o===r.DEFAULT_NB_ELEMENTS&&r.MALUS_RESIS_ELEM_IDS.includes(s.actionId)||s.actionId===97&&t.includes(82)||s.actionId===96&&t.includes(84)||s.actionId===98&&t.includes(83))&&(i-=s.params[0])}),i}calculMaitrisesForAnItem(e,t,i,o,s,n,c,S){let d=0,p=[...i].filter(l=>!r.MAITRISES_ELEM_IDS.includes(l));e.equipEffects.forEach(l=>{!n&&!S&&(l.actionId===120||l.actionId===1068&&l.params[2]>=t||l.actionId===149&&s)?d+=l.params[0]*o:!c&&p.includes(l.actionId)?d+=l.params[0]:(!n&&!S&&r.PERTE_MAITRISES_IDS.includes(l.actionId)||!c&&(l.actionId===1056&&i.includes(149)||l.actionId===181&&i.includes(180)||l.actionId===1059&&i.includes(1052)||l.actionId===1060&&i.includes(1053)||l.actionId===1061&&i.includes(1055)))&&(d-=l.params[0])});let R=e.equipEffects.find(l=>r.MAITRISES_ELEM_IDS.includes(l.actionId)&&(t===0||t===1&&i.includes(l.actionId)));return!n&&!S&&R&&(d+=R.params[0]*o),d}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var ge=class r{overlay=m(fe);overlayRefs=[];mouseEnter$=new B;mouseLeave$=new B;destroy$=new B;keepOpenOnHover=!1;constructor(){this.mouseLeave$.pipe(M(()=>{let e=this.keepOpenOnHover?100:0;return Se(e).pipe(x(this.mouseEnter$),x(this.destroy$))})).subscribe(()=>{this.forceClose()})}closeTooltip(){this.mouseLeave$.next()}cancelClose(){this.mouseEnter$.next()}forceClose(){this.overlayRefs.forEach(e=>e.dispose()),this.overlayRefs=[],this.keepOpenOnHover=!1}openTooltip(e,t,i,o,s,n=!0,c=!1){this.cancelClose(),this.keepOpenOnHover=c;let S=s;S||(S=[{originX:"center",originY:"top",overlayX:"center",overlayY:"bottom",offsetY:80}]);let d=this.overlay.position().flexibleConnectedTo(i.target).withPositions(S).withPush(n),p=this.overlay.create({positionStrategy:d,hasBackdrop:!1,panelClass:"no-max-width",scrollStrategy:this.overlay.scrollStrategies.reposition()}),R=new Te(t,e),l=p.attach(R);if(l.instance&&Object.assign(l.instance,o),c){let b=p.overlayElement,f=new B,g=new B;b.addEventListener("mouseenter",()=>{f.next(),this.cancelClose()}),b.addEventListener("mouseleave",()=>{g.next(),this.closeTooltip()}),p.detachments().subscribe(()=>{f.complete(),g.complete()})}return this.overlayRefs.push(p),p}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.mouseEnter$.complete(),this.mouseLeave$.complete(),this.forceClose()}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var le=class r{sublimations=new Map;sublimationsClassique=[];sublimationsEpiqueRelique=[];http=m(D);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(e=>{this.http.get("/sublimations.json").pipe(I(t=>t.forEach(i=>this.sublimations.set(i.title.fr,i))),I(t=>this.sublimationsClassique.push(...t.filter(i=>!i.isEpic&&!i.isRelic))),I(t=>this.sublimationsEpiqueRelique.push(...t.filter(i=>i.isEpic||i.isRelic))),F(1)).subscribe({next:()=>e(),error:t=>{console.error("Failed to load sublimations:",t),e()}})}),this.loadPromise)}getSublimations(){return this.sublimationsClassique}getSublimationsEpiqueRelique(){return this.sublimationsEpiqueRelique}getSublimationById(e){for(let t of this.sublimations.values())if(t.id===e)return t}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};function X(){let r=[];for(let e=0;e<4;e++)r.push({color:-1,lvl:0});return{chasses:r,sublimation:void 0}}function Ve(r){switch(r){case 1:return 3;case 2:return 6;case 3:return 9;case 4:return 12;case 5:return 15;case 6:return 21;case 7:return 30;case 8:return 39;case 9:return 48;case 10:return 60;case 11:return 66;default:return 0}}function Fe(r){switch(r){case 1:return 2;case 2:return 4;case 3:return 6;case 4:return 8;case 5:return 10;case 6:return 14;case 7:return 20;case 8:return 26;case 9:return 32;case 10:return 40;case 11:return 44;default:return 0}}function De(r){switch(r){case 1:return 4;case 2:return 8;case 3:return 12;case 4:return 16;case 5:return 20;case 6:return 28;case 7:return 40;case 8:return 52;case 9:return 64;case 10:return 80;case 11:return 88;default:return 0}}function we(r){switch(r){case 1:return 1;case 2:return 2;case 3:return 3;case 4:return 4;case 5:return 5;case 6:return 7;case 7:return 10;case 8:return 13;case 9:return 16;case 10:return 20;case 11:return 22;default:return 0}}var Be=class r extends T{static DEFAULT_VALUE=()=>{let e=[];for(let t=0;t<10;t++)e.push(X());return{chasseCombinaison:e}};recapChassesEffect=new E([]);recapChassesEffect$=this.recapChassesEffect.asObservable();enchantement=new E(r.DEFAULT_VALUE());enchantement$=this.enchantement.asObservable();sublimationsIdToLevel=new E(new Map);sublimationsIdToLevel$=this.sublimationsIdToLevel.asObservable();keyEnum="KEY_ENCHANTEMENT";form=new a(r.DEFAULT_VALUE(),{nonNullable:!0});sublimationService=m(le);urlServices=m(z);isLoadingFromUrl=!1;indexToItemType=new Map([[0,8],[1,5],[2,9],[3,3],[4,3],[5,4],[6,6],[7,10],[8,7],[9,2]]);doubleEffect=new Map([[120,[9,6]],[26,[5,10]],[1052,[8,6]],[1053,[7,2]],[1055,[5,6]],[149,[10,2]],[180,[7,4]],[173,[3,3]],[175,[3,3]],[171,[5,6]],[82,[9,7]],[83,[9,10]],[85,[9,6]],[84,[9,4]],[20,[8,2]]]);constructor(){super();let e=this.urlServices.getEnchantementFromUrl();this.init(),e&&this.sublimationService.load().then(()=>{this.isLoadingFromUrl=!0,this.decodeAndSaveCodeBuild(e),this.isLoadingFromUrl=!1,this.enchantement.next(this.form.value),this.handleChanges(this.form.value)})}generateCodeBuild(e){let t=[];e.chasseCombinaison.forEach(o=>{let s=[];o.chasses.forEach(c=>{if(c.color===-1)s.push("0");else{let S=c.joker?"1":"0",d=c.idAction||0;s.push(`${c.color}.${c.lvl}.${d}.${S}`)}});let n=s.join("-");o.sublimation&&(n+=`_${o.sublimation.id}.${o.sublimation.level}`),t.push(n)});let i=t.join("|");return e.epique&&(i+=`|E${e.epique.id}`),e.relique&&(i+=`|R${e.relique.id}`),i}decodeAndSaveCodeBuild(e){try{let t={chasseCombinaison:[],epique:void 0,relique:void 0};for(let n=0;n<10;n++)t.chasseCombinaison.push(X());let i=e.split("|"),o=[],s=[];for(let n of i)n.startsWith("E")||n.startsWith("R")?s.push(n):n.trim()&&o.push(n);for(let n=0;n<Math.min(10,o.length);n++){let c=o[n],[S,d]=c.split("_"),p=S.split("-"),R=X();for(let l=0;l<Math.min(4,p.length);l++){let b=p[l];if(b==="0"||!b)continue;let f=b.split(".");if(f.length>=4){let[g,v,qe,je]=f.map(A=>parseInt(A,10));R.chasses[l]={color:g,lvl:v,idAction:qe,joker:je===1}}}if(d){let[l,b]=d.split(".").map(g=>parseInt(g,10)),f=this.sublimationService.getSublimationById(l);f?R.sublimation={id:l,title:y({},f.title),slotColorPattern:f.slotColorPattern,level:b,isValid:!0}:console.warn(`Sublimation ${l} not found in database`)}t.chasseCombinaison[n]=R}for(let n of s)if(n.startsWith("E")){let c=parseInt(n.substring(1),10),S=this.sublimationService.getSublimationById(c);S&&(t.epique={id:S.id,idImage:S.gfxId,title:y({},S.title),epique:!0,relique:!1})}else if(n.startsWith("R")){let c=parseInt(n.substring(1),10),S=this.sublimationService.getSublimationById(c);S&&(t.relique={id:S.id,idImage:S.gfxId,title:y({},S.title),epique:!1,relique:!0})}this.setValue(t)}catch(t){console.error("Error decoding enchantement from URL:",t)}}equalChasses(e,t){return e.color===t.color&&e.lvl===t.lvl&&e.idAction===t.idAction}removeEpic(){let e=this.getValue();e.epique=void 0,this.setValue(e)}removeRelic(){let e=this.getValue();e.relique=void 0,this.setValue(e)}applySublimationEpicRelic(e){let t=this.getValue();e.epique?(t.epique={id:e.id,idImage:e.idImage,title:y({},e.title),epique:!0,relique:!1},this.setValue(t)):e.relique&&(t.relique={id:e.id,idImage:e.idImage,title:y({},e.title),epique:!1,relique:!0},this.setValue(t))}applySumblimation(e,t){let i=this.getValue(),s=i.chasseCombinaison[e];s.sublimation=t,s.sublimation.isValid=this.canApplySublimation(s,t),this.setValue(i)}removeSublimation(e){let t=this.getValue(),o=t.chasseCombinaison[e];o.sublimation=void 0,this.setValue(t)}applyEffect(e,t,i){let o=this.getValue(),n=o.chasseCombinaison[t];this.equalChasses(n.chasses[e],i)?this.clearEffect(e,t):n.chasses[e]=i,n.sublimation&&(n.sublimation.isValid=this.canApplySublimation(n,n.sublimation)),this.setValue(o)}clearChasseCombinaison(e){let t=this.getValue(),i=t.chasseCombinaison;i[e]=X(),this.setValue(t)}clearEffect(e,t){let i=this.getValue(),s=i.chasseCombinaison[t];s.chasses[e]=X().chasses[0],s.sublimation&&(s.sublimation.isValid=this.canApplySublimation(s,s.sublimation)),this.setValue(i)}changeJokerState(e,t){let i=this.getValue(),o=[...i.chasseCombinaison],s=y({},o[t]),n=[...s.chasses],c=y({},n[e]);c.idAction&&(c.joker=!c.joker,n[e]=c,s.chasses=n,o[t]=s,s.sublimation&&(s.sublimation.isValid=this.canApplySublimation(s,s.sublimation)),this.setValue(Ie(y({},i),{chasseCombinaison:o})))}getChasseEffectValue(e){return e.idAction?[173,175].includes(e.idAction)?Ve(e.lvl):[171].includes(e.idAction)?Fe(e.lvl):[20].includes(e.idAction)?De(e.lvl):[120].includes(e.idAction)?we(e.lvl):[26,1052,1053,1055,149,180].includes(e.idAction)?Ne(e.lvl):[82,83,85,84].includes(e.idAction)?Oe(e.lvl):0:0}handleChanges(e){if(this.isLoadingFromUrl)return;let t=[];e.chasseCombinaison.forEach((n,c)=>{n.chasses.forEach(S=>{if(!S.idAction)return;let d=this.indexToItemType.get(c);if(!d)return;let p=this.doubleEffect.get(S.idAction)?.includes(d)?2:1;t.push({id:S.idAction,value:p*this.getChasseEffectValue(S),params:[]})})});let i=e.chasseCombinaison.filter(n=>!!n.sublimation).map(n=>n.sublimation),o=this.calculMaxSublimationLevel(i);e.epique&&o.set(e.epique.id,1),e.relique&&o.set(e.relique.id,1),this.sublimationsIdToLevel.next(o),this.enchantement.next(e),this.recapChassesEffect.next(t);let s=this.generateCodeBuild(e);this.urlServices.setEnchantementInUrl(s)}calculMaxSublimationLevel(e){let t=new Map;return e.forEach(i=>{let o=t.get(i.id);o===void 0?t.set(i.id,i.level):t.set(i.id,o+i.level)}),t.forEach((i,o)=>{let s=this.sublimationService.getSublimationById(o)?.levelMax;s!==void 0&&i>s&&t.set(o,Math.min(i,s))}),t}setValue(e){let t=e??r.DEFAULT_VALUE(),i={chasseCombinaison:t.chasseCombinaison.map(o=>({chasses:[...o.chasses],sublimation:o.sublimation?y({},o.sublimation):void 0})),epique:t.epique?y({},t.epique):void 0,relique:t.relique?y({},t.relique):void 0};this.form.setValue(i,{emitEvent:!this.isLoadingFromUrl}),this.isLoadingFromUrl||this.enchantement.next(i)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE())}getValue(){return this.enchantement.getValue()}canApplySublimationWithItem(e,t){return this.canApplySublimation(e,{id:t.id,title:y({},t.title),slotColorPattern:t.slotColorPattern,isValid:!1,level:t.linkSublimation[0].level})}canApplySublimation(e,t){let i=e.chasses,o=t.slotColorPattern;if(o.length>i.length)return!1;for(let s=0;s<=i.length-o.length;s++)if(this.matchPattern(i,o,s))return!0;return!1}matchPattern(e,t,i){for(let o=0;o<t.length;o++){let s=e[i+o],n=t[o];if(s.color===-1)return!1;if(!(s.joker&&this.isValidJokerReplacement(n))&&s.color!==n)return!1}return!0}isValidJokerReplacement(e){return e===3||e===1||e===2}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var $e=class r{neoImageMap=new Map([[1115705791,"n\xE9o/neo-bouftou-royal.png"],[1115705800,"n\xE9o/neo-chene-mou.png"],[1115705797,"n\xE9o/neo-corbeau-noir.png"],[1115705795,"n\xE9o/neo-gligli-royal.png"],[1115705794,"n\xE9o/neo-goel-le-golem.png"],[1115705799,"n\xE9o/neo-kya-missiz-frizz.png"],[1115705793,"n\xE9o/neo-moogr-royale.png"],[1115705806,"n\xE9o/neo-ogrest.png"],[1115705805,"n\xE9o/neo-pandore.png"],[1115705792,"n\xE9o/neo-piou-royal.png"],[1115705804,"n\xE9o/neo-remington-smisse.png"],[1115705796,"n\xE9o/neo-vampyro.png"],[1115705803,"n\xE9o/neo-wa-wabbit.png"]]);imageMap=new Map([[1111105448,"mob/ydalipe.png"],[-1,"mob/bilbygirl.png"],[11,"mob/bilbyboy.png"],[126002474,"mob/gelee-reglisse.png"],[40,"mob/assassin-encapuchonne.png"],[-2,"mob/protecteur-encapuchonne.png"],[107700210,"mob/ratchitik.png"],[1111105445,"mob/lela.png"],[1111105447,"mob/erpel.png"],[1111105446,"mob/eenca.png"],[107702129,"mob/ratagasd-le-marron.png"],[121801632,"mob/moumoute-la-postiche.png"],[128401429,"mob/scaraboss.png"],[128401430,"mob/scarafon.png"],[128401431,"mob/scaramel.png"],[128401432,"mob/scarabruni.png"]]);onError(e){if(e instanceof HTMLImageElement){let t=e.src.split("/").pop()?.split(".").shift(),i=t?this.neoImageMap.get(+t):null,o=t?this.imageMap.get(+t):null;e.src=i??o??J.IMAGE_ERROR}}static \u0275fac=function(t){return new(t||r)};static \u0275dir=be({type:r,selectors:[["img","appFallback",""]],hostBindings:function(t,i){t&1&&he("error",function(s){return i.onError(s.target)})}})};var xe=class r{mapColors=new Map([[2,"#4c9646"],[3,"#dd7f13"],[4,"#ffef64"],[5,"#c570ef"],[6,"#80d6d4"],[7,"#eebcd7"]]);static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};var Qe=class r extends ve{itemTypeService=m(w);itemService=m(Ee);localStorageService=m(Le);modifierElemMaitrisesFormService=m(k);resistancesFormService=m(K);maitrisesFormService=m(Y);onlyNoElemFormService=m(Z);onlyNoSecondaryFormService=m(q);urlServices=m(z);mapItem=new Map([[2,new E([void 0])],[3,new E([void 0,void 0])],[4,new E([void 0])],[5,new E([void 0])],[6,new E([void 0])],[7,new E([void 0])],[8,new E([void 0])],[9,new E([void 0])],[10,new E([void 0])],[11,new E([void 0])],[12,new E([void 0])],[14,new E([void 0])]]);idItems=new E("");idItems$=this.idItems.asObservable();totalWeight=new E(0);totalWeight$=this.totalWeight.asObservable();listItem=new E([]);listItem$=this.listItem.asObservable();totalMaitrises=new E(0);totalMaitrises$=this.totalMaitrises.asObservable();totalResistances=new E(0);totalResistances$=this.totalResistances.asObservable();indexAnneau=0;constructor(){super(),this.initItemsDirectly(),this.handleCalculTotal()}handleCalculTotal(){L([this.listItem$,this.maitrisesFormService.nbElements$,this.maitrisesFormService.idMaitrises$,this.modifierElemMaitrisesFormService.multiplicateurElem$,this.modifierElemMaitrisesFormService.denouement$,this.resistancesFormService.idResistances$,this.onlyNoElemFormService.onlyNoElem$,this.onlyNoSecondaryFormService.onlyNoSecondary$,this.modifierElemMaitrisesFormService.chaos$]).pipe(x(this.destroy$),I(([e,t,i,o,s,n,c,S,d])=>this.calculTotal(e,t,i,o,n,s,c,S,d))).subscribe()}updateUrl(){L([this.getObsItem(2),this.getObsItem(3),this.getObsItem(4),this.getObsItem(5),this.getObsItem(6),this.getObsItem(7),this.getObsItem(8),this.getObsItem(9),this.getObsItem(10),this.getObsItem(11),this.getObsItem(12),this.getObsItem(14)]).pipe(x(this.destroy$),h(e=>e.flat()),h(e=>e.filter(t=>t!=null)),I(e=>this.listItem.next([...new Set(e)])),h(e=>e.map(t=>t?.id)),h(e=>e.filter(t=>t).join(",")),Re(),I(e=>this.setIdItems(e))).subscribe(e=>{this.localStorageService.setItem("KEY_BUILD",e),this.urlServices.setItemsIdInUrl(e)})}initItemsDirectly(){let e="";typeof window<"u"&&(e=new URLSearchParams(window.location.search).get("itemsId")||""),e||(e=this.localStorageService.getItem("KEY_BUILD")||""),e&&e.trim()!==""&&e.split(",").forEach(i=>{let o=parseInt(i);isNaN(o)||this.setItemWithIdItem(o)}),this.updateUrl()}initItemChooses(){return this.urlServices.itemsId$.pipe($(1),h(e=>e&&e.trim()!==""?e.split(","):[]),I(e=>e.forEach(t=>{let i=parseInt(t);isNaN(i)||this.setItemWithIdItem(i)})),h(()=>null))}calculTotal(e,t,i,o,s,n,c,S,d){let p=0,R=0,l=0;e.forEach(b=>{let f=this.itemService.calculResistancesForAnItem(b,s),g=this.itemService.calculMaitrisesForAnItem(b,t,i,o,n,c,S,d);R+=f,l+=g,p+=this.itemService.calculWeight(f,g,b.level)}),this.totalWeight.next(Math.trunc(p)),this.totalMaitrises.next(Math.trunc(l)),this.totalResistances.next(Math.trunc(R))}setItemWithIdItem(e){this.itemService.searchItem(e).pipe(V(),C(t=>t!==void 0)).subscribe(t=>{let i=this.itemTypeService.getItemType(t.itemTypeId);i&&this.setItem(i,t,!1)})}cleanItemChoosen(){this.indexAnneau=0,this.mapItem.forEach((e,t)=>{e.next(t===3?[void 0,void 0]:[void 0])})}setIdItemsFromBuild(e){this.cleanItemChoosen(),this.idItems.next(e);let t=e.split(",");t&&t.forEach(i=>{let o=this.itemService.getItem(parseInt(i));if(!o)return;let s=this.itemTypeService.getItemType(o.itemTypeId);s&&this.setItem(s,o,!1)})}setIdItems(e){this.idItems.next(e)}getObsItem(e){return this.mapItem.get(e)?.asObservable()??U()}deleteItem(e,t){this.getObsItem(e).pipe(V(),M(i=>ce(()=>i!==void 0&&!!i[0]?.itemTypeId&&this.itemTypeService.getItemType(i[0]?.itemTypeId)===1,U(i).pipe(I(()=>{this.mapItem.get(12)?.next([void 0]),this.mapItem.get(2)?.next([void 0])})),U(i).pipe(h(o=>(o[t]=void 0,o)),I(o=>this.mapItem.get(e)?.next(o)))))).subscribe()}setItem(e,t,i=!0){U(null).pipe(V(),M(()=>ce(()=>i,this.deleteItemInBuild(t).pipe(C(o=>!o)),U(null))),M(()=>this.ensureUniqueRelic(t)),M(()=>this.ensureCompatibleWithSecondHand(e,t)),M(()=>this.ensureCompatibleWithFirstHand(e,t)),M(()=>this.handleRings(e,t)),M(()=>this.handleDeuxMains(e,t)),M(()=>this.finalEquip(e,t))).subscribe()}ensureUniqueRelic(e){return[7,5].includes(e.rarity)?this.deleteFirstItemOnRarity(e.rarity):U(null)}ensureCompatibleWithSecondHand(e,t){return[13,12].includes(e)?this.getObsItem(2).pipe(V(),I(()=>this.mapItem.get(12)?.next([t])),h(i=>i[0]),C(i=>i!==void 0&&this.itemTypeService.getItemType(i.itemTypeId)===1),I(()=>this.mapItem.get(2)?.next([void 0])),h(()=>null)):U(null)}ensureCompatibleWithFirstHand(e,t){return e!==2?U(null):this.getObsItem(12).pipe(V(),I(()=>this.mapItem.get(2)?.next([t])),h(i=>i[0]),C(i=>i!==void 0&&this.itemTypeService.getItemType(i.itemTypeId)===1),I(()=>this.mapItem.get(12)?.next([void 0])),h(()=>null))}handleRings(e,t){return e!==3?U(null):this.getObsItem(3).pipe(V(),M(i=>i.find(o=>o?.title===t.title)?U(null):U(i).pipe(h(o=>{let s=[...o];return s[this.indexAnneau]=t,s}),I(o=>this.mapItem.get(3)?.next(o)),I(()=>this.indexAnneau=this.indexAnneau===0?1:0))),h(()=>null))}handleDeuxMains(e,t){return e!==1?U(null):U(null).pipe(I(()=>{this.mapItem.get(12)?.next([t]),this.mapItem.get(2)?.next([t])}))}finalEquip(e,t){return e===3?U(null):U(null).pipe(I(()=>this.mapItem.get(e)?.next([t])))}deleteFirstItemOnRarity(e){return L([this.getObsItem(2),this.getObsItem(3),this.getObsItem(4),this.getObsItem(5),this.getObsItem(6),this.getObsItem(7),this.getObsItem(8),this.getObsItem(9),this.getObsItem(10),this.getObsItem(11),this.getObsItem(12),this.getObsItem(14)]).pipe(V(),h(t=>t.filter(i=>i.find(o=>o?.rarity===e))),I(t=>t.forEach(i=>{let o=i.find(n=>n!==void 0)?.itemTypeId;if(!o)return;let s=this.itemTypeService.getItemType(o);if(s===1)this.mapItem.get(2)?.next([void 0]),this.mapItem.get(12)?.next([void 0]);else if(s===13)this.mapItem.get(12)?.next([void 0]);else if(s===3){let n=i.findIndex(c=>c?.rarity===e);this.indexAnneau=n,i[n]=void 0,this.mapItem.get(3)?.next(i)}else s!==void 0&&this.mapItem.get(s)?.next([void 0])})),h(()=>null))}deleteItemInBuild(e){let t=!1;return L([this.getObsItem(2),this.getObsItem(3),this.getObsItem(4),this.getObsItem(5),this.getObsItem(6),this.getObsItem(7),this.getObsItem(8),this.getObsItem(9),this.getObsItem(10),this.getObsItem(11),this.getObsItem(12),this.getObsItem(14)]).pipe(V(),h(i=>i.filter(o=>o.find(s=>s?.id===e.id))),I(i=>i.forEach(o=>{let s=o.find(c=>c!==void 0)?.itemTypeId;if(!s)return;t=!0;let n=this.itemTypeService.getItemType(s);if(n===1)this.mapItem.get(2)?.next([void 0]),this.mapItem.get(12)?.next([void 0]);else if(n===13)this.mapItem.get(12)?.next([void 0]);else if(n===3){let c=o.findIndex(S=>S?.id===e.id);o[c]=void 0,this.indexAnneau=c,this.mapItem.get(3)?.next(o)}else n!==void 0&&this.mapItem.get(n)?.next([void 0])})),h(()=>t))}static \u0275fac=function(t){return new(t||r)};static \u0275prov=u({token:r,factory:r.\u0275fac,providedIn:"root"})};export{$e as a,ee as b,xe as c,de as d,w as e,Q as f,re as g,q as h,j as i,ye as j,k,H as l,W as m,se as n,K as o,Y as p,Z as q,ne as r,ae as s,te as t,_t as u,Lt as v,ie as w,Ee as x,ge as y,Qe as z,le as A,Be as B};
