import{a as We}from"./chunk-7DWYOFFY.js";import{a as be,c as qe,d as Ke}from"./chunk-PALE3FTD.js";import{a as Fe,b as Ve,c as we,d as Be,e as Ee}from"./chunk-UCOX5EWS.js";import{a as re,b as W,c as ne,e as je,u as oe,v as Ce,w as pe,y as He}from"./chunk-HAP6XARG.js";import{$ as Pe,A as Y,B as Me,Cd as $e,D as j,Da as I,Dd as Ge,E as T,Fa as R,Ga as F,I as u,Ia as x,Ib as ee,Ja as L,Ka as m,La as l,M as p,Ma as c,Na as C,Oa as Se,Pa as he,Q as P,R as O,Ra as V,Ta as g,Tb as te,Ub as B,Va as E,b as ve,bc as ie,c as Ae,cd as k,d as M,dd as ae,eb as H,ed as se,fd as b,ga as h,gb as X,ha as o,hb as v,i as _,ib as ye,id as ke,j as G,jb as w,kb as N,na as Oe,oa as D,ob as Ne,pb as Ue,q as Te,qb as De,qd as Qe,ra as ge,sa as J,sd as $,t as ue,tb as xe,ub as f,vb as d,wb as Le}from"./chunk-TUA6PSGT.js";import{a as z,b as Z}from"./chunk-EQDQRRRY.js";var Xe=class s{isDisplayed=new M(!1);isDisplayed$=this.isDisplayed.asObservable();toggleDisplay(){this.isDisplayed.next(!this.isDisplayed.value)}setDisplay(t){this.isDisplayed.next(t)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var ce=class s{condition=new Map;http=p(ie);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(t=>{this.http.get("/itemConditions.json").pipe(T(i=>i.forEach(e=>this.condition.set(e.id,e))),Y(1)).subscribe({next:()=>t(),error:i=>{console.error("Failed to load monster drops:",i),t()}})}),this.loadPromise)}findCondition(t){return this.condition.get(t)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var le=class s{stateDefinitionService=new Map;http=p(ie);loadPromise;load(){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise(t=>{this.http.get("/statesDefinition.json").pipe(T(i=>i.forEach(e=>this.stateDefinitionService.set(e.id,{id:e.id,description:{fr:e.description.fr,en:e.description.en,es:e.description.es,pt:e.description.pt}}))),Y(1)).subscribe({next:()=>t(),error:i=>{console.error("Failed to load monster drops:",i),t()}})}),this.loadPromise)}findStatesDefinition(t){return this.stateDefinitionService.get(t)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var Q=class s{translateService=p(k);ankamaCdnFacade=p(W);static malusActions=new Set([21,40,56,57,90,96,97,98,100,130,132,161,168,172,174,176,181,192,194,876,1056,1059,1060,1061,1062,1063]);static opposedEffects=new Map;static opposedPairs=[[20,21],[39,40,!0],[80,90],[84,96],[82,97],[83,98],[80,100],[120,130],[122,132],[150,168],[171,172],[173,174],[175,176],[180,181],[191,192],[193,194],[875,876],[149,1056],[1052,1059],[1053,1060],[1055,1061],[988,1062],[71,1063],[31,56],[41,57],[160,161]];constructor(){for(let[t,i]of s.opposedPairs)s.opposedEffects.set(t,i),s.opposedEffects.set(i,t)}getEffectById(t){let i=this.ankamaCdnFacade.getActionList().find(e=>e.definition.id===t);return i?`${i.description[this.translateService.currentLang]}`:""}isAMalus(t){return s.malusActions.has(t)}isOpposed(t,i){let e=t.actionId,a=i.actionId;for(let[r,n,S]of s.opposedPairs)if((e===r||a===r)&&(e===n||a===n))return S?t.params[4]===i.params[4]:!0;return!1}getOpposedEffect(t){return s.opposedEffects.get(t)??t}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var q=class s{ankamaCdnFacade=p(W);translateService=p(k);actionService=p(Q);transform(t){return G([this.translateService.onLangChange.pipe(Me({lang:this.translateService.currentLang,translations:{}})),this.ankamaCdnFacade.action$]).pipe(_(([,i])=>i),_(i=>this.findAction(i,t)),_(i=>this.getDefinitions(i)),_(i=>this.getDefinitionsComplete(i,t)))}getDefinitionsComplete(t,i){let e=`${t}`;return e=this.replaceValues(e,i),e=this.cleanHeaderDefinition(e),e=this.cleanRecoltEffect(e),e=this.singularOrPlurial(e,i),e=this.atLeastSixParameters(e,i),e=this.armorGivenOrReceived(e,i),e=this.deleteDoubleMinus(e),e}deleteDoubleMinus(t){return t.replace(/--/g,"")}armorGivenOrReceived(t,i){if(i.actionId!==39&&i.actionId!==40)return t;let e=i.params[4]===120?this.translateService.instant("abstract.donnee"):this.translateService.instant("abstract.recue"),a=Math.abs(i.params[0]),r=this.actionService.isAMalus(i.actionId);return(r&&i.params[0]>0||!r&&i.params[0]<0?"-":"")+a+this.translateService.instant("abstract.armure")+e}atLeastSixParameters(t,i){let e=/{\[~3\]\?(.*):(.*)}/,a=t.match(e);return a&&(t=a[i.params.length>=6?1:2]),t}singularOrPlurial(t,i){return t=this.singularOrPlurialWithRegex(t,i,/\{\[>2\]\?([^}]){0,5}:([^}]){0,5}\}/g,2),t=this.singularOrPlurialWithRegex(t,i,/\{\[>1\]\?([^}]){0,5}:([^}]){0,5}\}/g),t}singularOrPlurialWithRegex(t,i,e,a=0){let r=[...t.matchAll(e)];if(r&&i.params.length>a){let n=r.map(S=>S[i.params[a]>=2?1:2]);for(let S=0;S<r.length;S++)t=t.replace(r[S][0],n[S]??"")}return t}cleanDefinition(t,i){let e=t.match(i);return e&&(t=t.replace(e[0],"")),t}cleanRecoltEffect(t){return this.cleanDefinition(t,/{\[~2]?.+}/g)}cleanHeaderDefinition(t){return this.cleanDefinition(t,/(\[#.*\]) /g)}replaceValues(t,i){let e=/(\[#\d\])/g,a=[...t.matchAll(e)].map(r=>r[1]);if(a)for(let r of a){let n=0;switch(r){case"[#1]":n=0;break;case"[#2]":n=2;break;case"[#3]":n=4;break}i.params.length>n&&(t=t.replace(r,i.params[n].toString()))}return t}getDefinitions(t){return t.description[this.translateService.currentLang]}findAction(t,i){return t.filter(e=>e.definition.id===i.actionId)[0]}static \u0275fac=function(i){return new(i||s)};static \u0275pipe=ge({name:"actions",type:s,pure:!0})};var fe=class s{AnkamaCdnFacade=p(W);findStates(t){let i=this.AnkamaCdnFacade.getStatesList().find(e=>e.definition.id===t);if(i)return{id:i.definition.id,fr:i.title.fr,en:i.title.en,es:i.title.es,pt:i.title.pt}}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var K=class s{translateService=p(k);itemTypeService=p(je);itemChooseService=p(pe);actionsService=p(Q);statesService=p(fe);imageService=p(ke);destroy$=new Ae;resistances=0;maitrises=0;IdActionEnum=b;mapSortAction=new Map([[31,0],[56,1],[41,2],[57,3],[193,4],[191,4],[192,5],[184,6],[160,7],[161,8],[20,9],[21,10],[173,11],[175,12],[172,13],[875,14],[174,15],[176,16],[876,17],[120,18],[1068,19],[149,20],[180,21],[26,22],[1055,23],[1053,24],[1052,25],[1056,26],[181,27],[1061,28],[1060,29],[1059,30],[150,31],[39,32],[168,33],[40,34],[988,35],[71,36],[80,37],[1069,38],[82,39],[83,40],[85,41],[84,42],[1062,43],[1063,44],[90,45],[97,46],[98,47],[96,48]]);Math=Math;itemChoosen$=new M([[]]);IdActionsEnum=b;getEffectPng(t){return this.imageService.getActionIdUrl(t.actionId,t.actionId===39&&t.params[4]===121)}initItemChoosen(t){let i=this.itemTypeService.getItemType(t.itemTypeId);if(!i)return;let e=new ve;i===13?e=this.itemChooseService.getObsItem(12).pipe(_(a=>[a])):i===1?e=G([this.itemChooseService.getObsItem(2),this.itemChooseService.getObsItem(12)]).pipe(_(([a,r])=>[a,r])):e=this.itemChooseService.getObsItem(i).pipe(_(a=>[a])),e.pipe(j(this.destroy$)).subscribe(a=>this.itemChoosen$.next(a))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=D({type:s,selectors:[["app-item"]],decls:0,vars:0,template:function(i,e){},encapsulation:2})};function tt(s,t){if(s&1&&(l(0,"div",0)(1,"span"),C(2,"img",7),v(3),f(4,"translate"),c(),l(5,"span"),C(6,"img",8),v(7),f(8,"translate"),c()()),s&2){let i=E();o(),X(i.getBackgroundDifferentsStatsOnValue(i.maitrises)),o(),m("src",i.imageService.getActionIdUrl(i.IdActionEnum.MAITRISES_ELEMENTAIRES),h),o(),N("",d(4,10,"item.maitrises")," ",i.Math.trunc(i.maitrises)),o(2),X(i.getBackgroundDifferentsStatsOnValue(i.resistances)),o(),m("src",i.imageService.getActionIdUrl(i.IdActionEnum.RESISTANCES_ELEMENTAIRE),h),o(),N("",d(8,12,"item.resistances")," ",i.resistances)}}function it(s,t){if(s&1&&(l(0,"div",4)(1,"h3"),v(2),c(),C(3,"img",9),c()),s&2){let i=t.$implicit,e=E(2);o(),H("color",e.colorRarityService.mapColors.get(i.rarity)),o(),N("",e.getTitle(i)," (",i.level,")"),o(),m("src",e.imageService.getItemUrl(i.idImage),h)}}function at(s,t){s&1&&x(0,it,4,5,"div",4,F),s&2&&L(t)}function st(s,t){if(s&1&&(C(0,"img",11),v(1),f(2,"actions"),f(3,"async")),s&2){let i=E().$implicit,e=E(2);m("src",e.getEffectPng(i),h),o(),w(" ",d(3,4,d(2,2,i))," ")}}function rt(s,t){if(s&1&&(l(0,"p"),I(1,st,4,6),c()),s&2){let i=t.$implicit,e=E(2);X(e.getBackgroundDifferentsStats(i)),o(),R(i.actionId!==e.IdActionEnum.APPLIQUE_ETAT&&i.value!==0?1:-1)}}function nt(s,t){s&1&&(l(0,"div"),x(1,rt,2,3,"p",10,F),c()),s&2&&(o(),L(t))}var de=class s extends K{itemService=p(oe);colorRarityService=p(ne);cdr=p(ee);item;indexItemChoosen=0;ARMURE_DONNEE_RECUE=[39,40];listDifferentsStatsItem=[];loaded$;weight=0;itemSelected$=this.itemChoosen$.pipe(Te(t=>t.length!==0),_(t=>t.map(i=>i[this.indexItemChoosen])),_(t=>t.length>=2&&t[0]?.id===t[1]?.id?[t.find(i=>i!==void 0)]:t),_(t=>t.filter(i=>i!==void 0)));differentStatsItemList$=this.itemSelected$.pipe(j(this.destroy$),T(t=>{this.listDifferentsStatsItem=[],this.fillListCurrentItem(),t.forEach(i=>i?this.fillMapDifferentStatsItem(i):"")}),_(()=>this.listDifferentsStatsItem.sort((t,i)=>(this.mapSortAction.get(t.actionId)??999)-(this.mapSortAction.get(i.actionId)??999))));constructor(){super()}ngAfterViewInit(){this.item&&(this.item.equipEffects=this.item.equipEffects.sort((t,i)=>(this.mapSortAction.get(t.actionId)??999)-(this.mapSortAction.get(i.actionId)??999)),this.loaded$=this.itemSelected$.pipe(j(this.destroy$),_(t=>(this.resistances=this.item.resistance,this.maitrises=this.item.maitrise,this.weight=this.itemService.calculWeight(this.resistances,this.maitrises,this.item.level),t.forEach(i=>{i&&(this.resistances-=i.resistance,this.maitrises-=i.maitrise,this.weight=this.itemService.calculWeight(this.resistances,this.maitrises,i.level))}),!0))),this.initItemChoosen(this.item),this.cdr.detectChanges())}setItem(t){let i=this.itemTypeService.getItemType(t.itemTypeId);i&&this.itemChooseService.setItem(i,t)}getTitle(t){return t?t.title[this.translateService.currentLang]:""}getBackgroundDifferentsStatsOnValue(t){return t>0?"green":t<0?"red":""}getBackgroundDifferentsStats(t){let i=this.actionsService.isAMalus(t.actionId);return t.value>0&&!i||t.value<0&&i||t.presentOnCurrentItem&&!t.presentOnEquippedItem&&!i?"green":t.value<0&&!i||t.value>0&&i||!t.presentOnCurrentItem&&t.presentOnEquippedItem&&i?"red":""}getByActionId(t,i){return this.listDifferentsStatsItem.find(e=>e.actionId===t&&e.isArmureRecue===i)}pushSetDifferentsStatsItem(t){t&&(this.listDifferentsStatsItem=this.listDifferentsStatsItem.filter(i=>i.actionId!==t.actionId||i.isArmureRecue!==t.isArmureRecue),this.listDifferentsStatsItem.push(t))}fillListCurrentItem(){this.item.equipEffects.forEach(t=>{let i=this.ARMURE_DONNEE_RECUE.includes(t.actionId)&&t.params[4]===121,e=this.getByActionId(t.actionId,i);if(e){let a=e.params;a[0]+=t.params[0],e=Z(z({},e),{value:e.value+t.params[0],params:a,presentOnCurrentItem:!0})}else e={value:t.params[0],params:[...t.params],actionId:t.actionId,presentOnCurrentItem:!0,presentOnEquippedItem:!1,isArmureRecue:i};this.pushSetDifferentsStatsItem(e)})}fillMapDifferentStatsItem(t){t.equipEffects.forEach(i=>{let e=this.ARMURE_DONNEE_RECUE.includes(i.actionId)&&i.params[4]===121,a=this.getByActionId(i.actionId,e),r=this.item.equipEffects.find(n=>this.actionsService.isOpposed(n,i));if(r){let n=[...i.params];n[0]=r.params[0]+n[0],a={value:r.params[0]+i.params[0],params:n,actionId:r.actionId,presentOnCurrentItem:!0,presentOnEquippedItem:!0,isArmureRecue:e}}else if(a&&a.isArmureRecue===e){let n=a.params;n[0]-=i.params[0],a=Z(z({},a),{value:a.value-i.params[0],params:n,presentOnEquippedItem:!0})}else{let n=[...i.params];n[0]=-n[0],a={value:-i.params[0],params:n,actionId:i.actionId,presentOnCurrentItem:!1,presentOnEquippedItem:!0,isArmureRecue:e}}this.pushSetDifferentsStatsItem(a)}),this.calculDifferenceResistance()}calculDifferenceResistance(){let t=this.getByActionId(80,!1),i=[82,83,85,84];t&&i.find(e=>this.getByActionId(e,!1))&&(i.forEach(e=>{let a=this.getByActionId(e,!1);a?(a.params[0]+=t.params[0],a.value+=t.params[0],a.presentOnCurrentItem=!0,a.presentOnEquippedItem=!0):a=Z(z({},t),{actionId:e,presentOnCurrentItem:!0,presentOnEquippedItem:!0}),this.pushSetDifferentsStatsItem(a)}),this.listDifferentsStatsItem=this.listDifferentsStatsItem.filter(e=>e.actionId!==80))}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=D({type:s,selectors:[["app-item-tooltip"]],inputs:{item:"item",indexItemChoosen:"indexItemChoosen"},features:[J],decls:17,vars:21,consts:[[1,"header"],[1,"content",3,"click"],[1,"column"],[1,"row"],[1,"title"],["alt","item",3,"src"],["alt","poids",3,"src"],["alt","Maitrises",3,"src"],["alt","Resistances",3,"src"],["appFallback","","alt","items",3,"src"],[3,"class"],["alt","aptitudes",3,"src"]],template:function(i,e){if(i&1&&(I(0,tt,9,14,"div",0),f(1,"async"),l(2,"div",1),g("click",function(){return e.setItem(e.item)}),l(3,"div",2)(4,"div",3)(5,"div",4)(6,"h3"),v(7),c(),C(8,"img",5),c(),I(9,at,2,0),f(10,"async"),c(),l(11,"span"),C(12,"img",6),v(13),f(14,"translate"),c()(),I(15,nt,3,0,"div"),f(16,"async"),c()),i&2){let a,r;R(d(1,13,e.loaded$)?0:-1),o(6),H("color",e.colorRarityService.mapColors.get(e.item.rarity)),o(),N("",e.getTitle(e.item)," (",e.item.level,")"),o(),m("src",e.imageService.getItemUrl(e.item.idImage),h),o(),R((a=d(10,15,e.itemSelected$))?9:-1,a),o(2),X(e.getBackgroundDifferentsStatsOnValue(e.weight)+" poids"),o(),m("src","aptitudes/poids.png",h),o(),N("",d(14,17,"item.poids")," ",e.weight," "),o(2),R((r=d(16,19,e.differentStatsItemList$))?15:-1,r)}},dependencies:[B,se,re,te,ae,q],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:fit-content;width:600px;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px;width:200px;display:flex;justify-content:space-around;align-items:center;margin:2px auto}[_nghost-%COMP%]   .green[_ngcontent-%COMP%]{background:linear-gradient(145deg,#4caf50,#00c896)}[_nghost-%COMP%]   .red[_ngcontent-%COMP%]{background:linear-gradient(145deg,#e63946,#ff6b35)}[_nghost-%COMP%]   .green[_ngcontent-%COMP%], [_nghost-%COMP%]   .red[_ngcontent-%COMP%]{color:#0d1b2a}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin:0 10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;cursor:pointer}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:50px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:space-around;cursor:pointer}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-around;align-items:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:30%;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2px 0;border-radius:20px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{align-items:center;display:flex;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px;margin:0 10px}[_nghost-%COMP%]   .iconComparator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;color:#415a77;background-color:#e5e9ea;border-radius:50%;cursor:pointer;border:5px solid #0D1B2A}@media screen and (max-width: 700px){[_nghost-%COMP%]{width:300px;font-size:12px}}@media screen and (max-width: 700px){  .cdk-overlay-pane{transform:none!important}}"]})};function ot(s,t){if(s&1&&C(0,"app-item-tooltip",0),s&2){let i=E().$index,e=E();m("item",e.item)("indexItemChoosen",i)}}function pt(s,t){if(s&1&&I(0,ot,1,2,"app-item-tooltip",0),s&2){let i=t.$index,e=E();R(e.itemsChoosen[i]!==void 0?0:-1)}}var _e=class s{item;itemsChoosen=[];static \u0275fac=function(i){return new(i||s)};static \u0275cmp=D({type:s,selectors:[["app-items-tooltip"]],inputs:{item:"item",itemsChoosen:"itemsChoosen"},decls:2,vars:0,consts:[[3,"item","indexItemChoosen"]],template:function(i,e){i&1&&x(0,pt,1,1,null,null,F),i&2&&L(e.itemsChoosen)},dependencies:[B,de],encapsulation:2})};function Et(s,t){if(s&1&&(Se(0,"div"),v(1),he()),s&2){let i=E();o(),w(" ",i.definition()," ")}}var Ie=class s{statesDefinitionService=p(le);translateService=p(k);statesDefinitionId=0;nameStates="";definition(){let t=this.statesDefinitionService.findStatesDefinition(this.statesDefinitionId);if(t)return t.description[this.translateService.currentLang]}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=D({type:s,selectors:[["app-states"]],inputs:{statesDefinitionId:"statesDefinitionId",nameStates:"nameStates"},decls:4,vars:2,consts:[[1,"header"]],template:function(i,e){i&1&&(Se(0,"div",0)(1,"span"),v(2),he()(),I(3,Et,2,1,"div")),i&2&&(o(2),ye(e.nameStates),o(),R(e.definition()?3:-1))},dependencies:[B],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:10px;color:#fff;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:auto}"]})};var ct=s=>({ratio:s}),lt=(s,t)=>t.id;function ft(s,t){s&1&&(l(0,"div",7),v(1),c()),s&2&&(o(),w(" [ ",t," ] "))}function mt(s,t){if(s&1&&(C(0,"img",19),v(1),f(2,"actions"),f(3,"async")),s&2){let i=E().$implicit,e=E(2);m("src",e.getEffectPng(i),h),o(),w(" ",d(3,4,d(2,2,i))," ")}}function dt(s,t){if(s&1){let i=V();Ne(0),l(1,"span",20),g("mouseenter",function(a){P(i);let r=De(0),n=E(3);return O(n.openStatesTooltip(a,(r==null?null:r.id)??0,n.getStatesTranslate(r)))})("mouseleave",function(){P(i);let a=E(3);return O(a.stateTooltipService.closeTooltip())}),v(2),c()}if(s&2){let i=E().$implicit,e=E(2),a=Ue(e.statesService.findStates(i.params[0]));o(2),w(" ",e.getStatesTranslate(a)," ")}}function _t(s,t){if(s&1&&(l(0,"p"),I(1,mt,4,6)(2,dt,3,2,"span",18),c()),s&2){let i=t.$implicit,e=E(2);o(),R(i.actionId!==e.IdActionEnum.APPLIQUE_ETAT?1:2)}}function It(s,t){if(s&1){let i=V();l(0,"img",21),f(1,"translate"),g("click",function(){P(i);let a=E(2);return O(a.navigateToCraftku())}),c()}if(s&2){let i=E(2);m("src",i.imageService.getItemUrl(71919810),h)("matTooltip",d(1,2,"item.craftable"))}}function Rt(s,t){if(s&1){let i=V();l(0,"img",23),f(1,"translate"),g("click",function(){let a=P(i).$implicit,r=E(3);return O(r.openEncyclopedieForMonster(a.idMob))}),c()}if(s&2){let i=t.$implicit,e=E(3);m("src",e.imageService.getMonsterUrl(i.gfxId),h)("matTooltip",`${d(1,2,"item.droppable")} (${e.nameMonster(i)})`)}}function St(s,t){if(s&1&&x(0,Rt,2,4,"img",22,F),s&2){let i=E(2);L(i.item.mobDropable)}}function ht(s,t){if(s&1){let i=V();l(0,"img",25),f(1,"translate"),g("click",function(){let a=P(i).$implicit,r=E(3);return O(r.openEncyclopedieForMonster(a.idMob))}),c()}if(s&2){let i=t.$implicit,e=E(3);m("src",e.imageService.getMonsterUrl(i.gfxId),h)("matTooltip",`${d(1,2,"item.boss-drop")} (${e.nameMonster(i)})`)}}function Ct(s,t){if(s&1&&x(0,ht,2,4,"img",24,F),s&2){let i=E(2);L(i.item.bossDropable)}}function vt(s,t){if(s&1){let i=V();l(0,"img",27),f(1,"translate"),g("click",function(){let a=P(i).$implicit,r=E(3);return O(r.openEncyclopedieForMonster(a.idMob))}),c()}if(s&2){let i=t.$implicit,e=E(3);m("src",e.imageService.getMonsterUrl(i.gfxId),h)("matTooltip",`${d(1,2,"item.archi-drop")} (${e.nameMonster(i)})`)}}function At(s,t){if(s&1&&x(0,vt,2,4,"img",26,F),s&2){let i=E(2);L(i.item.archiDropable)}}function Tt(s,t){if(s&1&&(C(0,"img",17),f(1,"translate")),s&2){let i=E(2);m("src",i.imageService.getItemUrl(53124705),h)("matTooltip",d(1,2,"item.pvp"))}}function ut(s,t){if(s&1){let i=V();l(0,"div",0)(1,"span",1),f(2,"translate"),g("click",function(){P(i);let a=E();return O(a.copyToClipboard())}),C(3,"mat-icon",2),c(),l(4,"span"),C(5,"img",3),v(6),f(7,"translate"),c(),l(8,"span"),C(9,"img",4),v(10),f(11,"translate"),c(),l(12,"span",5),g("click",function(){P(i);let a=E();return O(a.openEncyclopedie(a.item.id))}),C(13,"img",6),c()(),I(14,ft,2,1,"div",7),f(15,"async"),l(16,"div",8),g("click",function(){P(i);let a=E();return O(a.setItemChoosen())}),l(17,"div",9)(18,"h3"),v(19),C(20,"img",10),c(),C(21,"img",11),l(22,"div",12),f(23,"translate"),C(24,"img",13),v(25),f(26,"translate"),c()(),l(27,"div",14)(28,"div"),x(29,_t,3,1,"p",null,lt),c(),l(31,"div",15),I(32,It,2,4,"img",16),I(33,St,2,0),I(34,Ct,2,0),I(35,At,2,0),I(36,Tt,2,4,"img",17),c()()()}if(s&2){let i,e=E();o(),m("matTooltip",d(2,24,"item.copier")),o(4),m("src",e.imageService.getActionIdUrl(e.IdActionEnum.MAITRISES_ELEMENTAIRES),h),o(),N("",d(7,26,"item.maitrises")," ",e.Math.trunc(e.item.maitrise)),o(3),m("src",e.imageService.getActionIdUrl(e.IdActionEnum.RESISTANCES_ELEMENTAIRE),h),o(),N("",d(11,28,"item.resistances")," ",e.item.resistance),o(4),R((i=d(15,30,e.textCondition()))?14:-1,i),o(4),H("color",e.colorRarityService.mapColors.get(e.item.rarity)),o(),N("",e.getTitle()," (",e.item.level,") "),o(),m("src",e.itemTypeService.getLogo(e.itemTypeService.getItemType(e.item.itemTypeId)),h),o(),m("src",e.imageService.getItemUrl(e.item.idImage),h),o(),m("matTooltip",Le(23,32,"item.poids-infobulle",xe(37,ct,e.itemService.ratioWeightByLevel(e.item.level))))("matTooltipShowDelay",300),o(2),m("src","aptitudes/poids.png",h),o(),N("",d(26,35,"item.poids")," ",e.item.weight),o(4),L(e.item.equipEffects),o(3),R(e.item.isCraftable?32:-1),o(),R(e.item.mobDropable?33:-1),o(),R(e.item.bossDropable?34:-1),o(),R(e.item.archiDropable?35:-1),o(),R(e.item.isPvP?36:-1)}}function Mt(s,t){if(s&1){let i=V();l(0,"mat-icon",29),g("mouseenter",function(a){P(i);let r=E(2);return O(r.openTooltip(a,r.item))})("mouseleave",function(){P(i);let a=E(2);return O(a.tooltipService.closeTooltip())}),c()}}function Pt(s,t){if(s&1&&I(0,Mt,1,0,"mat-icon",28),s&2){let i=E();R(i.itemIsPresentAndNotChoosen(t)?0:-1)}}var Ze=class s extends K{viewContainerRef=p(Oe);el=p(Pe);itemService=p(oe);colorRarityService=p(ne);tooltipService=p(Ce);stateTooltipService=p(Ce);cdr=p(ee);itemConditionService=p(ce);item;condition=new M(void 0);condition$=this.condition.asObservable();constructor(){super()}navigateToCraftku(){window.open("https://craftkfu.waklab.fr/?"+this.item.id,"_blank")}setItemChoosen(){let t=this.itemTypeService.getItemType(this.item.itemTypeId);t&&this.itemChooseService.setItem(t,this.item)}itemIsPresentAndNotChoosen(t){return!!t.find(i=>i.find(e=>e!==void 0)&&!i.find(e=>e?.id===this.item.id))}ngAfterViewInit(){if(this.item){this.item.equipEffects=this.item.equipEffects.sort((i,e)=>(this.mapSortAction.get(i.actionId)??999)-(this.mapSortAction.get(e.actionId)??999)),this.initItemChoosen(this.item);let t=this.itemConditionService.findCondition(this.item.id);t&&this.condition.next(t),this.cdr.detectChanges()}}textCondition(){return this.condition$.pipe(_(t=>t?.description[this.translateService.currentLang]??void 0))}nameMonster(t){return t.name[this.translateService.currentLang]??""}openTooltip(t,i){let e=t.pageX>window.screen.width/2;this.tooltipService.closeTooltip(),this.itemChoosen$.pipe(ue(1),_(a=>a.find(r=>r.find(n=>n)))).subscribe(a=>{this.tooltipService.openTooltip(this.viewContainerRef,_e,t,{item:i,itemsChoosen:a},[{originX:e?"end":"center",originY:"bottom",overlayX:e?"end":"center",overlayY:"bottom",offsetY:0,offsetX:e?-this.el.nativeElement.offsetWidth:340}],!1)})}openEncyclopedie(t){window.open("https://www.wakfu.com/fr/mmorpg/encyclopedie/armures/"+t)}openEncyclopedieForMonster(t){window.open("https://www.wakfu.com/fr/mmorpg/encyclopedie/monstres/"+t)}copyToClipboard(){navigator.clipboard.writeText(this.item.title[this.translateService.currentLang])}getStatesTranslate(t){if(!t)return"";let i=this.translateService.currentLang;return t[i].toString()??""}getTitle(){return this.item.title[this.translateService.currentLang]}openStatesTooltip(t,i,e){this.stateTooltipService.closeTooltip(),this.stateTooltipService.openTooltip(this.viewContainerRef,Ie,t,{statesDefinitionId:i,nameStates:e},[{originX:"center",originY:"top",overlayX:"center",overlayY:"top",offsetY:20,offsetX:0}])}static \u0275fac=function(i){return new(i||s)};static \u0275cmp=D({type:s,selectors:[["app-item"]],inputs:{item:"item"},features:[J],decls:3,vars:4,consts:[[1,"header"],[1,"imgContainer","fileCopy",3,"click","matTooltip"],["fontIcon","file_copy"],["alt","Maitrises",3,"src"],["alt","R\xE9sistances",3,"src"],[1,"imgContainer",3,"click"],["src","aptitudes/Encyclop\xE9die.png","alt","Encyclop\xE9die"],[1,"condition"],[1,"content",3,"click"],[1,"title"],["alt","item type logo",3,"src"],["alt","items","appFallback","",3,"src"],[1,"poids",3,"matTooltip","matTooltipShowDelay"],["alt","poids",3,"src"],[1,"effects"],[1,"craftAndDrop"],["alt","craftable",1,"craftable",3,"src","matTooltip"],["alt","pvp",3,"src","matTooltip"],[1,"appliqueEtat"],["alt","aptitudes",3,"src"],[1,"appliqueEtat",3,"mouseenter","mouseleave"],["alt","craftable",1,"craftable",3,"click","src","matTooltip"],["alt","droppable","appFallback","",1,"monster",3,"src","matTooltip"],["alt","droppable","appFallback","",1,"monster",3,"click","src","matTooltip"],["alt","boss drop","appFallback","",1,"monster",3,"src","matTooltip"],["alt","boss drop","appFallback","",1,"monster",3,"click","src","matTooltip"],["alt","archi drop","appFallback","",1,"monster",3,"src","matTooltip"],["alt","archi drop","appFallback","",1,"monster",3,"click","src","matTooltip"],["fontIcon","swap_horiz",1,"iconComparator"],["fontIcon","swap_horiz",1,"iconComparator",3,"mouseenter","mouseleave"]],template:function(i,e){if(i&1&&(I(0,ut,37,39),I(1,Pt,1,1),f(2,"async")),i&2){let a;R(e.item?0:-1),o(),R((a=d(2,2,e.itemChoosen$))?1:-1,a)}},dependencies:[B,Ve,Fe,se,Be,we,re,be,te,ae,q],styles:["[_nghost-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;color:#fff;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative}[_nghost-%COMP%]   span[_ngcontent-%COMP%]{border-radius:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;justify-content:space-around;align-items:center;margin:auto}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin:0 5px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{width:40px;height:40px;cursor:pointer;align-content:center}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{width:50px;height:50px}[_nghost-%COMP%]   .header[_ngcontent-%COMP%]   .imgContainer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .condition[_ngcontent-%COMP%]{text-align:center;color:red;font-weight:bolder;margin-bottom:5px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{height:100%;display:flex;justify-content:space-around;cursor:pointer}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:first-child{margin-right:10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{display:flex;max-width:30%;flex-direction:column}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin:auto}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;min-width:30px;min-height:30px;vertical-align:middle}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{width:80px;height:80px;min-width:80px;min-height:80px;margin:auto;object-fit:contain;border-radius:8px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]{align-items:center;display:flex;text-align:center}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]   .poids[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:22px;height:22px;min-width:22px;min-height:22px;margin:0 10px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0;border-radius:20px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:10px;width:24px;height:24px;min-width:24px;min-height:24px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .appliqueEtat[_ngcontent-%COMP%]{font-weight:500;text-decoration:underline}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;align-items:center;justify-content:space-around}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:80px;height:80px;min-width:80px;min-height:80px;object-fit:contain;flex:0 0 calc(33% - 10px);max-width:calc(33% - 10px)}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .monster[_ngcontent-%COMP%]:hover, [_nghost-%COMP%]   .content[_ngcontent-%COMP%]   .effects[_ngcontent-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   .craftable[_ngcontent-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .iconComparator[_ngcontent-%COMP%]{position:absolute;right:10px;bottom:10px;color:#415a77;background-color:#e5e9ea;border-radius:50%;cursor:pointer;border:5px solid #0D1B2A}@media screen and (max-width: 900px){[_nghost-%COMP%]{max-width:90%;margin:auto}[_nghost-%COMP%]   .fileCopy[_ngcontent-%COMP%]{display:none!important}[_nghost-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px!important;height:40px!important;min-width:40px!important;min-height:40px!important}[_nghost-%COMP%]   .craftAndDrop[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:nth-of-type(n+4){display:none!important}}"]})};var Re=class s extends Ge{static DEFAULT_VALUE={dragodinde:!1,neoFamilier1:!1,neoFamilier2:!1,neoFamilier3:!1,neoFamilier4:!1,guilde:!1};recapStats=new M([]);recapStats$=this.recapStats.asObservable();levelFormService=p(Ee);keyEnum="KEY_BONUS";form=new Qe({dragodinde:new $(s.DEFAULT_VALUE.dragodinde,{nonNullable:!0}),neoFamilier1:new $(s.DEFAULT_VALUE.neoFamilier1,{nonNullable:!0}),neoFamilier2:new $(s.DEFAULT_VALUE.neoFamilier2,{nonNullable:!0}),neoFamilier3:new $(s.DEFAULT_VALUE.neoFamilier3,{nonNullable:!0}),neoFamilier4:new $(s.DEFAULT_VALUE.neoFamilier4,{nonNullable:!0}),guilde:new $(s.DEFAULT_VALUE.guilde,{nonNullable:!0})});constructor(){super(),this.init()}handleChanges(t){let i=this.levelFormService.form.value,e=[];t.dragodinde&&e.push({id:120,value:40,params:[]}),t.guilde&&(e.push({id:20,value:55,params:[]}),e.push({id:80,value:20,params:[]}),e.push({id:-6,value:8,params:[]}),e.push({id:162,value:10,params:[]}),e.push({id:166,value:10,params:[]}),e.push({id:171,value:10,params:[]}),e.push({id:173,value:20,params:[]}),e.push({id:175,value:20,params:[]}),e.push({id:-9,value:8,params:[]})),t.neoFamilier1&&(e.push({id:120,value:i,params:[]}),e.push({id:20,value:2*i,params:[]}),e.push({id:177,value:5,params:[]}),e.push({id:150,value:3,params:[]}),e.push({id:875,value:3,params:[]})),t.neoFamilier2&&(e.push({id:41,value:1,params:[]}),e.push({id:120,value:Math.floor(1.5*i),params:[]}),e.push({id:20,value:3*i,params:[]}),e.push({id:177,value:10,params:[]}),e.push({id:150,value:3,params:[]}),e.push({id:875,value:3,params:[]})),t.neoFamilier3&&(e.push({id:41,value:1,params:[]}),e.push({id:191,value:2,params:[]}),e.push({id:120,value:2*i,params:[]}),e.push({id:20,value:4*i,params:[]}),e.push({id:177,value:15,params:[]}),e.push({id:150,value:3,params:[]}),e.push({id:875,value:3,params:[]})),t.neoFamilier4&&(e.push({id:31,value:1,params:[]}),e.push({id:41,value:1,params:[]}),e.push({id:191,value:2,params:[]}),e.push({id:120,value:2*i,params:[]}),e.push({id:20,value:4*i,params:[]}),e.push({id:177,value:20,params:[]}),e.push({id:150,value:3,params:[]}),e.push({id:875,value:3,params:[]})),this.recapStats.next(e)}setValue(t){this.form.setValue(t??s.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(s.DEFAULT_VALUE)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};var Ye=class s extends $e{actionService=p(Q);itemChooseService=p(pe);aptitudesFormService=p(We);levelFormService=p(Ee);classeFormService=p(qe);sortFormService=p(Ke);chasseFormService=p(He);bonusFormService=p(Re);maitrisesSecondairesList=[149,180,26,1055,1052,1053];naturalEffects=[{id:31,value:6,params:[]},{id:41,value:3,params:[]},{id:191,value:6,params:[]},{id:150,value:3,params:[]},{id:184,value:1,params:[]}];initialEffectList=[{id:122,value:0,params:[]},{id:124,value:0,params:[]},{id:123,value:0,params:[]},{id:125,value:0,params:[]},{id:1052,value:0,params:[]},{id:1053,value:0,params:[]},{id:149,value:0,params:[]},{id:180,value:0,params:[]},{id:26,value:0,params:[]},{id:1055,value:0,params:[]},{id:150,value:0,params:[]},{id:875,value:0,params:[]},{id:71,value:0,params:[]},{id:988,value:0,params:[]},{id:184,value:0,params:[]},{id:-6,value:0,params:[]},{id:-8,value:0,params:[]},{id:162,value:0,params:[]},{id:82,value:0,params:[]},{id:83,value:0,params:[]},{id:84,value:0,params:[]},{id:85,value:0,params:[]},{id:31,value:0,params:[]},{id:41,value:0,params:[]},{id:191,value:0,params:[]},{id:160,value:0,params:[]},{id:20,value:0,params:[]},{id:39,parameterMajorAction:120,value:0,params:[]},{id:39,parameterMajorAction:121,value:0,params:[]},{id:175,value:0,params:[]},{id:173,value:0,params:[]},{id:177,value:0,params:[]},{id:171,value:0,params:[]},{id:-9,value:0,params:[]},{id:-7,value:0,params:[]},{id:166,value:0,params:[]}];recap=new M([...this.initialEffectList]);recap$=this.recap.asObservable();maitrisesTotal=new M(0);maitrisesTotal$=this.maitrisesTotal.asObservable();resistancesTotal=new M(0);resistancesTotal$=this.resistancesTotal.asObservable();constructor(){super(),this.initializeListeners()}initializeListeners(){G([this.itemChooseService.listItem$,this.aptitudesFormService.recapStat$,this.levelFormService.level$,this.chasseFormService.recapChassesEffect$,this.chasseFormService.sublimationsIdToLevel$,this.bonusFormService.recapStats$,this.classeFormService.classe$,this.sortFormService.sortPassifs$]).pipe(j(this.destroy$),T(()=>this.resetEffects()),_(([t,i,e,a,r,n])=>{let S=this.extractEquipEffects(t),A=this.mapToRecapStats(S);return A.push(...i,...a,...n),{recapStat:A,level:e,sublimationsIdToLevel:r}}),T(()=>this.applyNatifEffects()),T(()=>this.applyEffectByClass()),T((t=>t.recapStat.forEach(i=>this.applyEffect(i)))),T(()=>this.applyEffectPassif()),T(t=>this.applyEffectSublimation(t.sublimationsIdToLevel)),T(()=>this.applyPdv()),T(()=>this.emitEffects())).subscribe()}applyPdv(){let t=this.recap.value.find(e=>e.id===20),i=this.recap.value.find(e=>e.id===-7);if(t&&i){let a=50+this.levelFormService.getValue()*10;t.value=Math.floor((a+t.value)*(1+i.value/100))}}allMaitrisesSecondairesNull(){return this.maitrisesSecondairesList.every(t=>{let i=this.recap.value.find(e=>e.id===t);return i?i.value<=0:!0})}applyEffectSublimation(t){let i=this.levelFormService.getValue();t.forEach((e,a)=>{if(a===29004&&this.allMaitrisesSecondairesNull())this.applyEffect({id:160,value:Math.floor(.5*e),params:[]}),this.applyEffect({id:191,value:Math.floor(.5*e),params:[]}),this.applyEffect({id:39,value:e*-5,parameterMajorAction:120,params:[]}),this.applyEffect({id:39,value:e*-5,parameterMajorAction:121,params:[]});else if(a===30752)this.applyEffect({id:-9,value:-20,params:[]});else if(a===30956)this.applyEffect({id:41,value:Math.floor(.5*e),params:[]});else if(a===31369)this.applyEffect({id:39,value:e*5,parameterMajorAction:120,params:[]});else if(a===29591&&this.allMaitrisesSecondairesNull())this.applyEffect({id:150,value:e*5,params:[]});else if(a===28900)this.applyEffect({id:-6,value:-20,params:[]});else if(a===29495)this.applyEffect({id:-6,value:10,params:[]}),this.applyEffect({id:41,value:-3+e,params:[]});else if(a===31630)this.applyEffect({id:988,value:e*5,params:[]});else if(a===31633)this.applyEffect({id:71,value:e*5,params:[]});else if(a===29497)this.applyEffect({id:80,value:75,params:[]}),this.applyEffect({id:31,value:-3+e,params:[]});else if(a===28828)this.applyEffect({id:120,value:Math.floor(.15*i*e),params:[]});else if(a===28830)this.applyEffect({id:-7,value:e*5,params:[]});else if(a===27158)this.applyEffect({id:177,value:-20,params:[]});else if(a===29499)this.applyEffect({id:160,value:-1,params:[]}),this.applyEffect({id:173,value:Math.floor(.5*i*e),params:[]}),this.applyEffect({id:175,value:Math.floor(.5*i*e),params:[]});else if(a===30763)this.applyEffect({id:875,value:10*e,params:[]});else if(a===28849)this.applyEffect({id:150,value:5*e,params:[]});else if(a===31627)this.applyEffect({id:875,value:3*e,params:[]});else if(a===28824)this.applyEffect({id:193,value:1,params:[]}),this.applyEffect({id:177,value:-40+10*e,params:[]});else if(a===28845)this.applyEffect({id:39,value:3*e,parameterMajorAction:121,params:[]});else if(a===28880)this.applyEffect({id:39,value:5*e,parameterMajorAction:120,params:[]});else if(a===28858)this.applyEffect({id:175,value:Math.floor(.5*i*e),params:[]});else if(a===30961)this.applyEffect({id:175,value:Math.floor(.5*i*e),params:[]});else if(a===28908)this.applyEffect({id:120,value:Math.floor(.25*i*e),params:[]});else if(a===27161)this.applyEffect({id:80,value:-50,params:[]});else if(a===27159)this.applyEffect({id:-6,value:-15,params:[]});else if(a===30953)this.applyEffect({id:-6,value:3*e,params:[]});else if(a===27153)this.applyEffect({id:-6,value:-15,params:[]});else if(a===28897)this.applyEffect({id:150,value:10*e,params:[]});else if(a===28871)this.applyEffect({id:150,value:3*e,params:[]});else if(a===30957)this.applyEffect({id:150,value:4*e,params:[]});else if(a===30967)this.applyEffect({id:173,value:Math.floor(.5*i),params:[]});else if(a===29001&&this.allMaitrisesSecondairesNull())this.applyEffect({id:-6,value:8*e,params:[]});else if(a===28867)this.applyEffect({id:875,value:5*e,params:[]});else if(a===29513){let r=this.recap.value.find(S=>S.id===41)?.value??0,n=Math.max(0,r-4);this.applyEffect({id:175,value:2*n*e,params:[]})}else if(a===29007)this.applyEffect({id:875,value:5*e,params:[]});else if(a===28894)this.applyEffect({id:191,value:-1*e,params:[]});else if(a===28826)this.applyEffect({id:120,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:1055,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:149,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:180,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:1052,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:1053,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:26,value:Math.floor(.05*e*i),params:[]}),this.applyEffect({id:80,value:3*e,params:[]});else if(a===27124)this.applyEffect({id:177,value:-20,params:[]});else if(a===28988)this.applyEffect({id:-9,value:-10,params:[]});else if(a===28822)this.applyEffect({id:-8,value:5*e,params:[]});else if(a===31636)this.applyEffect({id:191,value:-1,params:[]});else if(a===27959){let r=this.recap.value.find(n=>n.id===26)?.value??0;this.applyEffect({id:-9,value:-r,params:[]}),this.applyEffect({id:-9,value:10,params:[]})}else if(a===28852)this.applyEffect({id:173,value:50*e*i,params:[]});else if(a===28842)this.applyEffect({id:150,value:50*e,params:[]}),this.applyEffect({id:-6,value:-50,params:[]}),this.applyEffect({id:-9,value:-50,params:[]});else if(a===28840){let r=this.recap.value.find(n=>n.id===175)?.value??0;this.applyEffect({id:175,value:-r,params:[]})}else if(a===28847)this.applyEffect({id:41,value:1,params:[]}),this.applyEffect({id:-6,value:-30+10*e,params:[]});else if(a===28851)this.applyEffect({id:160,value:1,params:[]}),this.applyEffect({id:175,value:-450+150*e,params:[]}),this.applyEffect({id:173,value:-450+150*e,params:[]});else if(a===30996)this.applyEffect({id:-6,value:-15,params:[]}),this.applyEffect({id:-9,value:30,params:[]});else if(a===25795)this.applyEffect({id:-6,value:-20,params:[]});else if(a===31609)this.applyEffect({id:80,value:50,params:[]});else if(a===31601)this.applyEffect({id:80,value:-100,params:[]});else if(a===29876)this.applyEffect({id:80,value:-50,params:[]});else if(a===30995){let r=this.recap.value.find(U=>U.id===122)?.value??0;this.applyEffect({id:122,value:-r,params:[]});let n=this.recap.value.find(U=>U.id===124)?.value??0;this.applyEffect({id:124,value:-n,params:[]});let S=this.recap.value.find(U=>U.id===123)?.value??0;this.applyEffect({id:123,value:-S,params:[]});let A=this.recap.value.find(U=>U.id===125)?.value??0;this.applyEffect({id:125,value:-A,params:[]}),this.applyEffect({id:-6,value:20,params:[]}),this.applyEffect({id:-9,value:20,params:[]})}else if(a===27190)this.applyEffect({id:-6,value:20,params:[]}),this.applyEffect({id:-9,value:20,params:[]}),this.applyNerfConcentrationElementaire();else if(a===24131)this.applyEffect({id:-6,value:20,params:[]}),this.applyEffect({id:150,value:50,params:[]});else if(a===30993)this.applyEffect({id:-8,value:40,params:[]});else if(a===29873)this.applyEffect({id:-8,value:30,params:[]});else if(a===24132){let r=this.recap.value.find(n=>n.id===149)?.value??0;this.applyEffect({id:149,value:-r,params:[]}),this.applyEffect({id:120,value:r,params:[]})}else if(a===30994)this.applyEffect({id:-6,value:20,params:[]}),this.applyEffect({id:-9,value:20,params:[]});else if(a===30997){let r=this.recap.value.find(n=>n.id===26)?.value??0;this.applyEffect({id:26,value:-r,params:[]}),this.applyEffect({id:-9,value:30,params:[]})}else if(a===25799)this.applyEffect({id:-6,value:-10,params:[]});else if(a===29871)this.applyEffect({id:-6,value:-10,params:[]});else if(a===25797)this.applyEffect({id:175,value:Math.floor(2.5*i),params:[]});else if(a===28383)(this.recap.value.find(n=>n.id===175)?.value??0)>i&&this.applyEffect({id:173,value:i,params:[]});else if(a===28384)this.applyEffect({id:160,value:1,params:[]});else if(a===24130)this.applyEffect({id:-6,value:15,params:[]}),i>=100&&this.applyEffect({id:-6,value:10,params:[]});else if(a===27188){let r=this.recap.value.find(n=>n.id===160)?.value??0;r>0&&this.applyEffect({id:160,value:-r,params:[]}),this.applyEffect({id:41,value:1,params:[]})}else a===27186?(this.applyEffect({id:41,value:-2,params:[]}),this.applyEffect({id:31,value:2,params:[]})):a===24134?this.applyEffect({id:150,value:10,params:[]}):a===31614?(this.applyEffect({id:875,value:20,params:[]}),this.applyEffect({id:177,value:10,params:[]})):a===27189?(this.applyEffect({id:177,value:10,params:[]}),this.applyEffect({id:875,value:15,params:[]})):a===28385?(this.applyEffect({id:-7,value:30,params:[]}),this.applyEffect({id:39,value:-50,parameterMajorAction:121,params:[]})):a===31613?(this.applyEffect({id:-7,value:-30,params:[]}),this.applyEffect({id:39,parameterMajorAction:120,value:30,params:[]})):a===24133?(this.applyEffect({id:-9,value:20,params:[]}),this.applyEffect({id:39,value:15,parameterMajorAction:120,params:[]})):a===28389?this.applyEffect({id:80,value:-50,params:[]}):a===25793?(this.applyEffect({id:-7,value:-30,params:[]}),this.applyEffect({id:39,parameterMajorAction:121,value:30,params:[]})):a===25794?(this.applyEffect({id:80,value:50,params:[]}),this.applyEffect({id:71,value:-200,params:[]})):a===29875?this.applyEffect({id:160,value:3,params:[]}):a===30998&&this.applyEffect({id:177,value:20,params:[]})})}applyNerfConcentrationElementaire(){let t=this.recap.value.find(A=>A.id===122)?.value??0,i=this.recap.value.find(A=>A.id===124)?.value??0,e=this.recap.value.find(A=>A.id===123)?.value??0,a=this.recap.value.find(A=>A.id===125)?.value??0,S=[{id:122,value:t},{id:124,value:i},{id:123,value:e},{id:125,value:a}].sort((A,U)=>U.value-A.value)[0].id;122!==S&&this.applyEffect({id:122,value:Math.floor(.3*-t),params:[]}),124!==S&&this.applyEffect({id:124,value:Math.floor(.3*-i),params:[]}),123!==S&&this.applyEffect({id:123,value:Math.floor(.3*-e),params:[]}),125!==S&&this.applyEffect({id:125,value:Math.floor(.3*-a),params:[]})}applyEffectPassif(){this.applyEffectPassifGenerique(),this.applyEffectPassifClasse()}applyEffectPassifClasse(){switch(this.classeFormService.getValue()){case 1:this.applyEffectPassifFeca();break;case 2:this.applyEffectPassifOsamodas();break;case 4:this.applyEffectPassifSram();break;case 5:this.applyEffectPassifXelor();break;case 7:this.applyEffectPassifEniripsa();break;case 8:this.applyEffectPassifIop();break;case 9:this.applyEffectPassifCra();break;case 10:this.applyEffectPassifSadida();break;case 11:this.applyEffectPassifSacrieur();break;case 12:this.applyEffectPassifPandawa();break;case 14:this.applyEffectPassifZobal();break;case 15:this.applyEffectPassifOuginak();break;case 16:this.applyEffectPassifSteamer();break;case 18:this.applyEffectPassifEliotrope();break;case 19:this.applyEffectPassifHuppermage();break}}applyEffectPassifHuppermage(){this.sortFormService.getSortPassifs().find(i=>i===7193)&&this.applyEffect({id:177,value:20,params:[]})}applyEffectPassifEliotrope(){this.sortFormService.getSortPassifs().find(i=>i===7208)&&this.applyEffect({id:160,value:-1,params:[]})}applyEffectPassifSteamer(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();t.find(e=>e===7181)&&this.applyEffect({id:-8,value:-30,params:[]}),t.find(e=>e===7344)&&this.applyEffect({id:20,value:6*i,params:[]}),t.find(e=>e===2819)&&this.applyEffect({id:41,value:-1,params:[]}),t.find(e=>e===2816)&&this.applyEffect({id:39,value:-30,parameterMajorAction:121,params:[]}),t.find(e=>e===5462)&&this.applyEffect({id:-8,value:-20,params:[]})}applyEffectPassifOuginak(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();t.find(e=>e===6276)&&(this.applyEffect({id:-8,value:50,params:[]}),this.applyEffect({id:160,value:-2,params:[]})),t.find(e=>e===6278)&&this.applyEffect({id:875,value:30,params:[]}),t.find(e=>e===5103)&&this.applyEffect({id:41,value:1,params:[]}),t.find(e=>e===6275)&&this.applyEffect({id:-8,value:-15,params:[]}),t.find(e=>e===7343)&&this.applyEffect({id:191,value:3,params:[]}),t.find(e=>e===7557)&&this.applyEffect({id:191,value:-1,params:[]}),t.find(e=>e===6277)&&(this.applyEffect({id:-6,value:-10,params:[]}),this.applyEffect({id:39,value:30,parameterMajorAction:121,params:[]}),this.applyEffect({id:20,value:4*i,params:[]})),t.find(e=>e===7328)&&this.applyEffect({id:41,value:-1,params:[]}),t.find(e=>e===6272)&&this.applyEffect({id:-8,value:-15,params:[]}),t.find(e=>e===7193)&&(this.applyEffect({id:177,value:20,params:[]}),this.applyEffect({id:-6,value:-10,params:[]})),t.find(e=>e===7596)&&this.applyEffect({id:173,value:3*i,params:[]})}applyEffectPassifZobal(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();if(t.find(e=>e===5359)&&this.applyEffect({id:41,value:1,params:[]}),t.find(e=>e===7093)&&this.applyEffect({id:175,value:2*i,params:[]}),t.find(e=>e===7111)){let e=this.recap.value.find(a=>a.id===175)?.value??0;if(e>=0){let a=Math.min(Math.floor(e/2),2*i);this.applyEffect({id:1053,value:a,params:[]})}}if(t.find(e=>e===7104)&&this.applyEffect({id:-6,value:-25,params:[]}),t.find(e=>e===3356)&&(this.applyEffect({id:-6,value:25,params:[]}),this.applyEffect({id:39,value:-40,parameterMajorAction:121,params:[]}),this.applyEffect({id:39,value:-40,parameterMajorAction:120,params:[]})),t.find(e=>e===3363)){let e=this.recap.value.find(a=>a.id===173)?.value??0;e>=0&&this.applyEffect({id:173,value:e,params:[]}),this.applyEffect({id:41,value:-1,params:[]})}if(t.find(e=>e===7094)){let e=this.recap.value.find(a=>a.id===173)?.value??0;if(e>=0){let a=Math.min(Math.floor(e/2),2*i);this.applyEffect({id:1052,value:a,params:[]})}}t.find(e=>e===7113)&&this.applyEffect({id:177,value:10,params:[]})}applyEffectPassifPandawa(){let t=this.sortFormService.getSortPassifs();t.find(i=>i===7987)&&(this.applyEffect({id:-9,value:20,params:[]}),this.applyEffect({id:-6,value:-10,params:[]})),t.find(i=>i===5149)&&(this.applyEffect({id:-6,value:15,params:[]}),this.applyEffect({id:80,value:-50,params:[]})),t.find(i=>i===5151)&&this.applyEffect({id:-6,value:10,params:[]})}applyEffectPassifSacrieur(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();if(t.find(e=>e===7218)&&this.applyEffect({id:160,value:-2,params:[]}),t.find(e=>e===7213)&&this.applyEffect({id:39,value:-50,parameterMajorAction:121,params:[]}),t.find(e=>e===5192)){let e=this.recap.value.find(a=>a.id===173)?.value??0;e>=0&&this.applyEffect({id:173,value:-e,params:[]})}t.find(e=>e===5051)&&this.applyEffect({id:20,value:8*i,params:[]})}applyEffectPassifSadida(){this.sortFormService.getSortPassifs().find(i=>i===7193)&&this.applyEffect({id:177,value:20,params:[]})}applyEffectPassifCra(){if(this.sortFormService.getSortPassifs().find(i=>i===588)){let i=this.recap.value.find(e=>e.id===175)?.value??0;this.applyEffect({id:175,value:-i,params:[]}),this.applyEffect({id:177,value:20,params:[]})}}applyEffectPassifIop(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();t.find(e=>e===525)&&this.applyEffect({id:20,value:3*i,params:[]}),t.find(e=>e===7111)&&this.applyEffect({id:39,value:-20,parameterMajorAction:121,params:[]})}applyEffectPassifEniripsa(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();t.find(e=>e===5453)&&this.applyEffect({id:20,value:8*i,params:[]})}applyEffectPassifXelor(){let t=this.sortFormService.getSortPassifs();t.find(i=>i===756)&&(this.applyEffect({id:191,value:6,params:[]}),this.applyEffect({id:41,value:-2,params:[]})),t.find(i=>i===7196)&&this.applyEffect({id:191,value:-6,params:[]})}applyEffectPassifSram(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();if(t.find(e=>e===4609)&&this.applyEffect({id:184,value:4,params:[]}),t.find(e=>e===5122)&&this.applyEffect({id:1053,value:Math.floor(i*1.5),params:[]}),t.find(e=>e===5126)&&this.applyEffect({id:177,value:20,params:[]}),t.find(e=>e===2437)){let e=this.recap.value.find(r=>r.id===175)?.value??0;e>=0&&this.applyEffect({id:150,value:Math.min(Math.floor(e/20),15),params:[]});let a=this.recap.value.find(r=>r.id===173)?.value??0;a>=0&&this.applyEffect({id:150,value:Math.min(Math.floor(a/20),15),params:[]})}}applyEffectPassifOsamodas(){let t=this.sortFormService.getSortPassifs();t.find(i=>i===7340)&&this.applyEffect({id:191,value:3,params:[]}),t.find(i=>i===7333)&&this.applyEffect({id:-6,value:25,params:[]}),t.find(i=>i===7331)&&this.applyEffect({id:-6,value:20,params:[]}),t.find(i=>i===7330)&&this.applyEffect({id:160,value:2,params:[]}),t.find(i=>i===7344)&&this.applyEffect({id:80,value:-100,params:[]})}applyEffectPassifFeca(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();if(t.find(e=>e===6997)&&this.applyEffect({id:875,value:30,params:[]}),t.find(e=>e===7004)&&this.applyEffect({id:39,value:100,parameterMajorAction:120,params:[]}),t.find(e=>e===2374)&&this.applyEffect({id:39,value:-100,parameterMajorAction:121,params:[]}),t.find(e=>e===5245)&&this.applyEffect({id:-6,value:10,params:[]}),t.find(e=>e===866)){let e=this.recap.value.find(a=>a.id===875);e&&e.value<=100&&(this.applyEffect({id:39,value:e.value,parameterMajorAction:120,params:[]}),this.applyEffect({id:875,value:-e.value,params:[]}))}t.find(e=>e===2295)&&(this.applyEffect({id:39,value:-100,parameterMajorAction:121,params:[]}),this.applyEffect({id:-6,value:25,params:[]})),t.find(e=>e===6989)&&this.applyEffect({id:160,value:1,params:[]}),t.find(e=>e===7005)&&(this.applyEffect({id:20,value:3*i,params:[]}),this.applyEffect({id:-6,value:-20,params:[]}))}applyEffectPassifGenerique(){let t=this.sortFormService.getSortPassifs(),i=this.levelFormService.getValue();t.find(e=>e===5144)&&(this.applyEffect({id:-6,value:15,params:[]}),this.applyEffect({id:-9,value:-30,params:[]})),t.find(e=>e===4957)&&this.applyEffect({id:175,value:i,params:[]}),t.find(e=>e===4956)&&this.applyEffect({id:171,value:Math.floor(i/2),params:[]}),t.find(e=>e===4958)&&this.applyEffect({id:173,value:i,params:[]}),t.find(e=>e===5146)&&(this.applyEffect({id:-9,value:30,params:[]}),this.applyEffect({id:39,value:25,parameterMajorAction:120,params:[]}),this.applyEffect({id:-6,value:-15,params:[]})),t.find(e=>e===5237)&&(this.applyEffect({id:31,value:1,params:[]}),this.applyEffect({id:-6,value:-20,params:[]}),this.applyEffect({id:177,value:10,params:[]})),t.find(e=>e===5145)&&(this.applyEffect({id:-7,value:60,params:[]}),this.applyEffect({id:-4,value:25,params:[]}),this.applyEffect({id:-6,value:-25,params:[]}),this.applyEffect({id:-9,value:-50,params:[]}))}applyEffectByClass(){let t=this.classeFormService.getValue(),i=this.levelFormService.getValue();switch(t){case 9:this.applyEffect({id:160,value:1,params:[]});break;case 6:this.applyEffect({id:150,value:20,params:[]});break;case 11:this.applyEffect({id:20,value:4*i,params:[]});break;case 4:this.applyEffect({id:180,value:i,params:[]}),this.applyEffect({id:184,value:1,params:[]});break;case 8:this.applyEffect({id:41,value:1,params:[]});break;case 7:this.applyEffect({id:20,value:2*i,params:[]});break;case 18:(this.recap.value.find(e=>e.id===160)?.value??0)>=2&&(this.applyEffect({id:160,value:-2,params:[]}),this.applyEffect({id:41,value:1,params:[]}));break;case 5:this.applyEffect({id:191,value:6,params:[]});break}}applyNatifEffects(){this.naturalEffects.forEach(t=>this.applyEffect(t))}resetEffects(){this.recap.value.forEach(t=>t.value=0)}extractEquipEffects(t){return t.flatMap(i=>i.equipEffects)}mapToRecapStats(t){return t.map(i=>({id:i.actionId,parameterMajorAction:i.actionId!==39?void 0:i.params[4]===120?120:121,value:i.params[0],params:i.params}))}applyEffectResistance(t){if(t.id===80)this.applyEffect({id:82,value:t.value,params:t.params}),this.applyEffect({id:83,value:t.value,params:t.params}),this.applyEffect({id:84,value:t.value,params:t.params}),this.applyEffect({id:85,value:t.value,params:t.params});else if(t.id===90||t.id===100)this.applyEffect({id:82,value:-t.value,params:t.params}),this.applyEffect({id:83,value:-t.value,params:t.params}),this.applyEffect({id:84,value:-t.value,params:t.params}),this.applyEffect({id:85,value:-t.value,params:t.params});else if(t.id===1069){let i=t.params[2];i>=1&&this.applyEffect({id:82,value:t.value,params:t.params}),i>=2&&this.applyEffect({id:83,value:t.value,params:t.params}),i>=3&&this.applyEffect({id:84,value:t.value,params:t.params}),i>=4&&this.applyEffect({id:85,value:t.value,params:t.params})}else t.id===35&&this.applyEffect({id:80,value:50,params:t.params})}applyEffectMaitrisesElementaires(t){if(t.id===120)this.applyEffect({id:122,value:t.value,params:t.params}),this.applyEffect({id:124,value:t.value,params:t.params}),this.applyEffect({id:123,value:t.value,params:t.params}),this.applyEffect({id:125,value:t.value,params:t.params});else if(t.id===130)this.applyEffect({id:122,value:-t.value,params:t.params}),this.applyEffect({id:124,value:-t.value,params:t.params}),this.applyEffect({id:123,value:-t.value,params:t.params}),this.applyEffect({id:125,value:-t.value,params:t.params});else if(t.id===1068){let i=t.params[2];i>=1&&this.applyEffect({id:122,value:t.value,params:t.params}),i>=2&&this.applyEffect({id:124,value:t.value,params:t.params}),i>=3&&this.applyEffect({id:123,value:t.value,params:t.params}),i>=4&&this.applyEffect({id:125,value:t.value,params:t.params})}}applyEffect(t){this.applyEffectResistance(t),this.applyEffectMaitrisesElementaires(t);let i=this.actionService.isAMalus(t.id),e=i?this.actionService.getOpposedEffect(t.id):t.id,a=i?-1:1,r=this.recap.value.find(n=>n.id!==39&&n.id===e||n.id===39&&n.parameterMajorAction===t.parameterMajorAction);r&&(r.value+=a*t.value)}emitEffects(){this.recap.next([...this.recap.value]);let t=this.recap.value.filter(r=>[1052,1053,149,180,26,1055].includes(r.id)).filter(r=>r.value>0).reduce((r,n)=>r+n.value,0),i=Math.max(this.recap.value.find(r=>r.id===122)?.value||0,this.recap.value.find(r=>r.id===124)?.value||0,this.recap.value.find(r=>r.id===123)?.value||0,this.recap.value.find(r=>r.id===125)?.value||0,0),e=t+i;this.maitrisesTotal.next(e);let a=this.recap.value.filter(r=>[82,83,84,85].includes(r.id)).reduce((r,n)=>r+n.value,0);this.resistancesTotal.next(a)}static \u0275fac=function(i){return new(i||s)};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{Q as a,ce as b,le as c,Ze as d,Xe as e,Re as f,Ye as g};
