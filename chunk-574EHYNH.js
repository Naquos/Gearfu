import{a as Z,b as ne,d as ie,e as oe,f as ae}from"./chunk-LHDNFXUH.js";import{k as re}from"./chunk-RAAESBJK.js";import"./chunk-2AXDVZZ3.js";import"./chunk-OJXYJNA7.js";import{A as te,B as E,a as Y,r as ee}from"./chunk-5TWZWONL.js";import{$,$c as Q,Da as v,Ea as z,Fa as u,Ga as H,Ha as q,Ia as C,Ja as _,Ka as G,L as o,La as l,Ma as d,Na as f,Oa as s,P as j,Pa as p,Q as N,Qa as c,Ra as J,Rb as M,Sa as K,Sb as O,Ta as S,Ub as P,V as B,Va as g,ad as W,ca as I,d as F,ed as X,ga as U,hb as D,ia as a,jb as L,na as y,qa as m,sa as V,ub as h,vb as x}from"./chunk-XCVTTDPB.js";import"./chunk-EQDQRRRY.js";var k=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-item-skeleton"]],decls:20,vars:0,consts:[[1,"skeleton-item"],[1,"skeleton-header"],[1,"skeleton-box"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-text","skeleton-title-text"],[1,"skeleton-image"],[1,"skeleton-text","skeleton-weight"],[1,"skeleton-effects"],[1,"skeleton-effect-list"],[1,"skeleton-text"],[1,"skeleton-craft-drop"]],template:function(t,i){t&1&&(s(0,"div",0)(1,"div",1),c(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2),p(),s(6,"div",3)(7,"div",4),c(8,"div",5)(9,"div",6)(10,"div",7),p(),s(11,"div",8)(12,"div",9),c(13,"div",10)(14,"div",10)(15,"div",10)(16,"div",10),p(),s(17,"div",11),c(18,"div",2)(19,"div",2),p()()()())},styles:[".skeleton-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009}.skeleton-header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px;padding:10px;justify-content:space-around}.skeleton-header[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:40px;height:40px;background:#ffffff1f;animation:_ngcontent-%COMP%_skeleton-pulse 1.4s ease-in-out infinite;border-radius:8px}.skeleton-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;height:100%}.skeleton-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:30%;gap:10px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-title-text[_ngcontent-%COMP%]{height:24px;width:120px;margin:0 auto}.skeleton-title[_ngcontent-%COMP%]   .skeleton-image[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto;background:#ffffff1f;animation:_ngcontent-%COMP%_skeleton-pulse 1.4s ease-in-out infinite;border-radius:8px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-weight[_ngcontent-%COMP%]{height:18px;width:100px}.skeleton-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;flex:1}.skeleton-effect-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.skeleton-text[_ngcontent-%COMP%]{height:16px;background:#ffffff1f;animation:_ngcontent-%COMP%_skeleton-pulse 1.4s ease-in-out infinite;border-radius:4px;width:100%}.skeleton-craft-drop[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-around;margin-top:10px}.skeleton-craft-drop[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:80px;height:80px;background:#ffffff1f;animation:_ngcontent-%COMP%_skeleton-pulse 1.4s ease-in-out infinite;border-radius:8px}@keyframes _ngcontent-%COMP%_skeleton-pulse{0%{opacity:.45}50%{opacity:.9}to{opacity:.45}}"]})};var w=class n{constructor(e){this.el=e}appIntersect=new B;intersectRoot;observer;ngOnInit(){this.observer=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&this.appIntersect.emit()})},{root:this.intersectRoot||null,threshold:.1,rootMargin:"300px"}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||n)(y($))};static \u0275dir=V({type:n,selectors:[["","appIntersect",""]],inputs:{intersectRoot:"intersectRoot"},outputs:{appIntersect:"appIntersect"}})};var me=(n,e)=>e.id;function ce(n,e){n&1&&f(0,"app-item-skeleton")}function le(n,e){if(n&1&&(l(0,"div",1),C(1,ce,1,0,"app-item-skeleton",null,q),d()),n&2){let t=g();a(),_(t.skeletonArray)}}function de(n,e){if(n&1&&f(0,"app-item",2),n&2){let t=e.$implicit;G("item",t)}}function fe(n,e){if(n&1){let t=J();l(0,"div",4,0),S("appIntersect",function(){j(t);let r=g(2);return N(r.onScrollEnd())}),f(2,"app-item-skeleton"),d()}}function ge(n,e){if(n&1&&(l(0,"div",1),C(1,de,1,1,"app-item",2,me),v(3,fe,3,0,"div",3),d()),n&2){let t=g();a(),_(e),a(2),u(t.currentIndex<t.allItems.length?3:-1)}}var R=class n{itemsService=o(E);skeletonArray=Array(36).fill(0);displayedItems$=new F([]);allItems=[];itemsPerLoad=36;currentIndex=0;observer;isBrowser;constructor(e){this.isBrowser=P(e)}ngOnInit(){this.itemsService.items$?.subscribe(e=>{this.allItems=e,this.currentIndex=0,this.displayedItems$.next([]),this.loadMoreItems(),this.isBrowser&&this.scrollToTop()})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}loadMoreItems(){let e=this.allItems.slice(this.currentIndex,this.currentIndex+this.itemsPerLoad),t=this.displayedItems$.value;this.displayedItems$.next([...t,...e]),this.currentIndex+=this.itemsPerLoad}onScrollEnd(){this.currentIndex<this.allItems.length&&this.loadMoreItems()}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(t){return new(t||n)(y(I))};static \u0275cmp=m({type:n,selectors:[["app-item-list"]],decls:3,vars:3,consts:[["loadTrigger",""],[1,"content"],[3,"item"],[1,"load-trigger"],[1,"load-trigger",3,"appIntersect"]],template:function(t,i){if(t&1&&(v(0,le,3,0,"div",1),h(1,"async"),z(2,ge,4,1,"div",1)),t&2){let r;u(i.itemsService.isLoading()?0:(r=x(1,1,i.displayedItems$))?2:-1,r)}},dependencies:[ie,O,k,w,M],styles:["[_nghost-%COMP%]{display:block}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:20px;grid-row-gap:20px}.content[_ngcontent-%COMP%]   app-item[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.load-trigger[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;align-items:center;min-height:250px}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:400px;width:100%}.loader-container[_ngcontent-%COMP%]   .loader-title[_ngcontent-%COMP%]{width:200px;margin-bottom:20px}.loader-container[_ngcontent-%COMP%]   .loader-spinner[_ngcontent-%COMP%]{width:100px;height:100px;padding:10px;background-color:#415a77;border-radius:50%;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (min-width:1700px)and (max-width:2000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (min-width:1450px)and (max-width:1700px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width:1450px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}@media screen and (min-width:701px)and (max-width:1000px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})};function ve(n,e){if(n&1&&(s(0,"span"),c(1,"img",2),D(2),p()),n&2){let t=e.$implicit,i=g(2);a(),K("src",i.getEffectPng(t),U),a(),L(" ",i.displayEffect(t)," ")}}function ue(n,e){n&1&&(s(0,"div",0),C(1,ve,3,2,"span",null,H),p(),s(3,"div",1),D(4),h(5,"translate"),p()),n&2&&(a(),_(e),a(3),L(" ",x(5,1,"recap-stats.info")," "))}var T=class n{recapStatsService=o(re);imageService=o(X);static RESISTANCES_LIST=[82,83,84,85];displayEffect(e){let t=e.value<0?"-":"",i=Math.abs(e.value);if(n.RESISTANCES_LIST.includes(e.id)){let r=Math.floor((1-Math.pow(.8,i/100))*100);return`${t}${r}% (${i})`}return t+i}getEffectPng(e){return this.imageService.getActionIdUrl(e.id,e.id===39&&e.parameterMajorAction===121)}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-recap-stats"]],decls:2,vars:3,consts:[[1,"content"],[1,"info"],["alt","aptitudes",3,"src"]],template:function(t,i){if(t&1&&(v(0,ue,6,3),h(1,"async")),t&2){let r;u((r=x(1,1,i.recapStatsService.recap$))?0:-1,r)}},dependencies:[O,W,M,Q],styles:["[_nghost-%COMP%]{background:linear-gradient(to right,#213a57,#618a97);width:100%}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(18,1fr);grid-template-rows:repeat(2,1fr);grid-column-gap:10px;grid-row-gap:3px}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{text-align:center;color:#fff}[_nghost-%COMP%]   .content[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:relative;top:3px;margin-right:5px}[_nghost-%COMP%]   .info[_ngcontent-%COMP%]{text-align:center;color:#fff;width:100%}"]})};var se=class n{displayFilterService=o(oe);itemService=o(E);ankamaCdnFacade=o(Y);monsterDropService=o(ee);itemConditionService=o(Z);statesDefinitionService=o(ne);familiersService=o(te);itemsShellService=o(ae);platformId=o(I);ngOnInit(){if(this.itemsShellService.reset(),this.ankamaCdnFacade.load(),this.monsterDropService.load(),this.itemConditionService.load(),this.statesDefinitionService.load(),this.familiersService.load(),this.itemService.init(),setTimeout(()=>{this.itemsShellService.setReady()},0),P(this.platformId)){let e=setInterval(()=>{this.itemService.isLoading()||(this.removeLoader(),clearInterval(e))},100);setTimeout(()=>{clearInterval(e),this.removeLoader()},1e4)}}removeLoader(){let e=document.getElementById("app-loader");e&&(e.style.opacity="0",e.style.transition="opacity 0.5s ease-out",setTimeout(()=>{e.remove()},500))}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=m({type:n,selectors:[["app-list-item-router"]],decls:2,vars:0,consts:[["appSwipe","",3,"swipeLeft"]],template:function(t,i){t&1&&(f(0,"app-recap-stats"),l(1,"app-item-list",0),S("swipeLeft",function(){return i.displayFilterService.setDisplay(!0)}),d())},dependencies:[R,T],styles:["app-recap-stats[_ngcontent-%COMP%]{display:block;position:relative;width:100%;min-height:64px;margin-bottom:10px}app-item-list[_ngcontent-%COMP%]{width:98%;margin:auto}@media screen and (max-width:700px){app-recap-stats[_ngcontent-%COMP%]{display:none}}@media screen and (max-width:1000px){app-recap-stats[_ngcontent-%COMP%]{display:none!important}}"]})};export{se as ListItemRouterComponent};
