import{Aa as m,Ba as f,Bb as A,Ca as i,Cd as z,Da as o,Ea as r,F as k,Fa as D,Ha as L,Hc as F,J as O,Ja as g,K as b,S as y,V as M,Y as d,aa as l,bb as j,cb as B,d as I,da as c,fa as P,ja as w,ra as h,sa as E,ta as _,va as S,wa as C,xa as v,ya as T,yb as R,za as p,zb as $}from"./chunk-RD3RSA5S.js";import"./chunk-6MDQTQU3.js";var x=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=c({type:t,selectors:[["app-item-skeleton"]],decls:20,vars:0,consts:[[1,"skeleton-item"],[1,"skeleton-header"],[1,"skeleton-box"],[1,"skeleton-content"],[1,"skeleton-title"],[1,"skeleton-text","skeleton-title-text"],[1,"skeleton-image"],[1,"skeleton-text","skeleton-weight"],[1,"skeleton-effects"],[1,"skeleton-effect-list"],[1,"skeleton-text"],[1,"skeleton-craft-drop"]],template:function(e,s){e&1&&(i(0,"div",0)(1,"div",1),r(2,"span",2)(3,"span",2)(4,"span",2)(5,"span",2),o(),i(6,"div",3)(7,"div",4),r(8,"div",5)(9,"div",6)(10,"div",7),o(),i(11,"div",8)(12,"div",9),r(13,"div",10)(14,"div",10)(15,"div",10)(16,"div",10),o(),i(17,"div",11),r(18,"div",2)(19,"div",2),o()()()())},styles:[".skeleton-item[_ngcontent-%COMP%]{background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:5px;height:100%;width:100%;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009}.skeleton-header[_ngcontent-%COMP%]{display:flex;border-bottom:3px solid #415A77;margin-bottom:10px;padding:10px;justify-content:space-around}.skeleton-header[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:40px;height:40px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-content[_ngcontent-%COMP%]{display:flex;justify-content:space-around;padding:10px;height:100%}.skeleton-title[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-width:30%;gap:10px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-title-text[_ngcontent-%COMP%]{height:24px;width:120px;margin:0 auto}.skeleton-title[_ngcontent-%COMP%]   .skeleton-image[_ngcontent-%COMP%]{width:80px;height:80px;margin:auto;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}.skeleton-title[_ngcontent-%COMP%]   .skeleton-weight[_ngcontent-%COMP%]{height:18px;width:100px}.skeleton-effects[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:space-between;flex:1}.skeleton-effect-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.skeleton-text[_ngcontent-%COMP%]{height:16px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:4px;width:100%}.skeleton-craft-drop[_ngcontent-%COMP%]{display:flex;gap:10px;justify-content:space-around;margin-top:10px}.skeleton-craft-drop[_ngcontent-%COMP%]   .skeleton-box[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(90deg,#ffffff0d 25%,#ffffff26,#ffffff0d 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:8px}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}"]})};var u=class t{constructor(n){this.el=n}appIntersect=new w;intersectRoot;observer;ngOnInit(){this.observer=new IntersectionObserver(n=>{n.forEach(e=>{e.isIntersecting&&this.appIntersect.emit()})},{root:this.intersectRoot||null,threshold:.1,rootMargin:"300px"}),this.observer.observe(this.el.nativeElement)}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(e){return new(e||t)(l(y))};static \u0275dir=P({type:t,selectors:[["","appIntersect",""]],inputs:{intersectRoot:"intersectRoot"},outputs:{appIntersect:"appIntersect"}})};var q=(t,n)=>n.id;function G(t,n){t&1&&f(0,"app-item-skeleton")}function J(t,n){if(t&1&&(p(0,"div",1),C(1,G,1,0,"app-item-skeleton",null,S),m()),t&2){let e=g();d(),v(e.skeletonArray)}}function K(t,n){if(t&1&&f(0,"app-item",2),t&2){let e=n.$implicit;T("item",e)}}function Q(t,n){if(t&1){let e=D();p(0,"div",4,0),L("appIntersect",function(){O(e);let a=g(2);return b(a.onScrollEnd())}),f(2,"app-item-skeleton"),m()}}function U(t,n){if(t&1&&(p(0,"div",1),C(1,K,1,1,"app-item",2,q),h(3,Q,3,0,"div",3),m()),t&2){let e=g();d(),v(n),d(2),_(e.currentIndex<e.allItems.length?3:-1)}}var V=class t{itemsService=k(F);skeletonArray=Array(36).fill(0);displayedItems$=new I([]);allItems=[];itemsPerLoad=36;currentIndex=0;observer;isBrowser;constructor(n){this.isBrowser=A(n)}ngOnInit(){this.itemsService.items$?.subscribe(n=>{this.allItems=n,this.currentIndex=0,this.displayedItems$.next([]),this.loadMoreItems(),this.isBrowser&&this.scrollToTop()})}scrollToTop(){window.scrollTo({top:0,behavior:"smooth"})}loadMoreItems(){let n=this.allItems.slice(this.currentIndex,this.currentIndex+this.itemsPerLoad),e=this.displayedItems$.value;this.displayedItems$.next([...e,...n]),this.currentIndex+=this.itemsPerLoad}onScrollEnd(){this.currentIndex<this.allItems.length&&this.loadMoreItems()}ngOnDestroy(){this.observer&&this.observer.disconnect()}static \u0275fac=function(e){return new(e||t)(l(M))};static \u0275cmp=c({type:t,selectors:[["app-item-list"]],decls:3,vars:3,consts:[["loadTrigger",""],[1,"content"],[3,"item"],[1,"load-trigger"],[1,"load-trigger",3,"appIntersect"]],template:function(e,s){if(e&1&&(h(0,J,3,0,"div",1),j(1,"async"),E(2,U,4,1,"div",1)),e&2){let a;_(s.itemsService.isLoading()?0:(a=B(1,1,s.displayedItems$))?2:-1,a)}},dependencies:[z,$,x,u,R],styles:["[_nghost-%COMP%]{display:block}.content[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);grid-template-rows:repeat(5,1fr);grid-column-gap:20px;grid-row-gap:20px}.content[_ngcontent-%COMP%]   app-item[_ngcontent-%COMP%]:hover{transform:scale(1.03)}.load-trigger[_ngcontent-%COMP%]{grid-column:1/-1;display:flex;justify-content:center;align-items:center;min-height:250px}.loader-container[_ngcontent-%COMP%]{display:flex;justify-content:center;flex-direction:column;align-items:center;min-height:400px;width:100%}.loader-container[_ngcontent-%COMP%]   .loader-title[_ngcontent-%COMP%]{width:200px;margin-bottom:20px}.loader-container[_ngcontent-%COMP%]   .loader-spinner[_ngcontent-%COMP%]{width:100px;height:100px;padding:10px;background-color:#415a77;border-radius:50%;animation:_ngcontent-%COMP%_spin 2s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media screen and (min-width: 1700px) and (max-width: 2110px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(3,1fr)}}@media screen and (min-width: 1450px) and (max-width: 1700px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}@media screen and (max-width: 1450px){.content[_ngcontent-%COMP%]{grid-template-columns:repeat(1,1fr)}}"]})};export{V as ItemListComponent};
