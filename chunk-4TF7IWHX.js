import{Ad as L,H as A,L as o,d as n,id as E,md as l,od as a,zd as U}from"./chunk-BFHEPWFO.js";var m=class e extends U{static DEFAULT_VALUE=0;recapStat=new n([]);recapStat$=this.recapStat.asObservable();keyEnum="KEY_APTITUDES";form=new l({percentagePV:new a(e.DEFAULT_VALUE,{nonNullable:!0}),resistancesElementaires:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(10)]}),barriere:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(10)]}),soinsRecus:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(5)]}),pdvArmure:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(10)]}),maitriseElem:new a(e.DEFAULT_VALUE,{nonNullable:!0}),maitrisesMelee:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(40)]}),maitrisesDistance:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(40)]}),pdv:new a(e.DEFAULT_VALUE,{nonNullable:!0}),tacle:new a(e.DEFAULT_VALUE,{nonNullable:!0}),esquive:new a(e.DEFAULT_VALUE,{nonNullable:!0}),initiative:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),tacleEsquive:new a(e.DEFAULT_VALUE,{nonNullable:!0}),volonte:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),percentageCC:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),parade:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),maitriseCritique:new a(e.DEFAULT_VALUE,{nonNullable:!0}),maitriseDos:new a(e.DEFAULT_VALUE,{nonNullable:!0}),maitriseBerzerk:new a(e.DEFAULT_VALUE,{nonNullable:!0}),maitriseSoins:new a(e.DEFAULT_VALUE,{nonNullable:!0}),resistancesDos:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),resistancesCritique:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(20)]}),pa:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),pm:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),po:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),pw:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),controle:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),di:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]}),resistancesElementairesMajeur:new a(e.DEFAULT_VALUE,{nonNullable:!0,validators:[E.max(1)]})});constructor(){super(),this.init()}resetIntelligence(){this.form.patchValue({percentagePV:e.DEFAULT_VALUE,resistancesElementaires:e.DEFAULT_VALUE,barriere:e.DEFAULT_VALUE,soinsRecus:e.DEFAULT_VALUE,pdvArmure:e.DEFAULT_VALUE})}resetForce(){this.form.patchValue({maitriseElem:e.DEFAULT_VALUE,maitrisesMelee:e.DEFAULT_VALUE,maitrisesDistance:e.DEFAULT_VALUE,pdv:e.DEFAULT_VALUE})}resetAgilite(){this.form.patchValue({tacle:e.DEFAULT_VALUE,esquive:e.DEFAULT_VALUE,initiative:e.DEFAULT_VALUE,tacleEsquive:e.DEFAULT_VALUE,volonte:e.DEFAULT_VALUE})}resetChance(){this.form.patchValue({percentageCC:e.DEFAULT_VALUE,parade:e.DEFAULT_VALUE,maitriseCritique:e.DEFAULT_VALUE,maitriseDos:e.DEFAULT_VALUE,maitriseBerzerk:e.DEFAULT_VALUE,maitriseSoins:e.DEFAULT_VALUE,resistancesDos:e.DEFAULT_VALUE,resistancesCritique:e.DEFAULT_VALUE})}resetMajeur(){this.form.patchValue({pa:e.DEFAULT_VALUE,pm:e.DEFAULT_VALUE,po:e.DEFAULT_VALUE,pw:e.DEFAULT_VALUE,controle:e.DEFAULT_VALUE,di:e.DEFAULT_VALUE,resistancesElementairesMajeur:e.DEFAULT_VALUE})}nbPointUseInIntelligence(){return Number.parseInt(`${this.form.value.percentagePV}`)+Number.parseInt(`${this.form.value.resistancesElementaires}`)+Number.parseInt(`${this.form.value.barriere}`)+Number.parseInt(`${this.form.value.soinsRecus}`)+Number.parseInt(`${this.form.value.pdvArmure}`)}nbPointUseInForce(){return Number.parseInt(`${this.form.value.maitriseElem}`)+Number.parseInt(`${this.form.value.maitrisesMelee}`)+Number.parseInt(`${this.form.value.maitrisesDistance}`)+Number.parseInt(`${this.form.value.pdv}`)}nbPointUseInAgilite(){return Number.parseInt(`${this.form.value.tacle}`)+Number.parseInt(`${this.form.value.esquive}`)+Number.parseInt(`${this.form.value.initiative}`)+Number.parseInt(`${this.form.value.tacleEsquive}`)+Number.parseInt(`${this.form.value.volonte}`)}nbPointUseInChance(){return Number.parseInt(`${this.form.value.percentageCC}`)+Number.parseInt(`${this.form.value.parade}`)+Number.parseInt(`${this.form.value.maitriseCritique}`)+Number.parseInt(`${this.form.value.maitriseDos}`)+Number.parseInt(`${this.form.value.maitriseBerzerk}`)+Number.parseInt(`${this.form.value.maitriseSoins}`)+Number.parseInt(`${this.form.value.resistancesDos}`)+Number.parseInt(`${this.form.value.resistancesCritique}`)}nbPointUseInMajeur(){return Number.parseInt(`${this.form.value.pa}`)+Number.parseInt(`${this.form.value.pm}`)+Number.parseInt(`${this.form.value.po}`)+Number.parseInt(`${this.form.value.pw}`)+Number.parseInt(`${this.form.value.controle}`)+Number.parseInt(`${this.form.value.di}`)+Number.parseInt(`${this.form.value.resistancesElementairesMajeur}`)}handleChanges(r){let i=[{id:-7,value:4*r.percentagePV,params:[]},{id:80,value:10*r.resistancesElementaires,params:[]},{id:120,value:5*r.maitriseElem,params:[]},{id:1052,value:8*r.maitrisesMelee,params:[]},{id:1053,value:8*r.maitrisesDistance,params:[]},{id:20,value:20*r.pdv,params:[]},{id:173,value:6*r.tacle,params:[]},{id:175,value:6*r.esquive,params:[]},{id:171,value:4*r.initiative,params:[]},{id:177,value:r.volonte,params:[]},{id:150,value:r.percentageCC,params:[]},{id:875,value:r.parade,params:[]},{id:149,value:4*r.maitriseCritique,params:[]},{id:180,value:6*r.maitriseDos,params:[]},{id:1055,value:8*r.maitriseBerzerk,params:[]},{id:26,value:6*r.maitriseSoins,params:[]},{id:71,value:4*r.resistancesDos,params:[]},{id:988,value:4*r.resistancesCritique,params:[]},{id:31,value:r.pa,params:[]},{id:193,value:2*r.pw,params:[]},{id:-6,value:10*r.di,params:[]}];r.resistancesElementairesMajeur>0&&i.push({id:35,value:50,params:[]}),r.tacleEsquive>0&&(i.push({id:173,value:4*r.tacleEsquive,params:[]}),i.push({id:175,value:4*r.tacleEsquive,params:[]})),r.pm>0&&(i.push({id:41,value:r.pm,params:[]}),i.push({id:120,value:20,params:[]})),r.po>0&&(i.push({id:160,value:r.po,params:[]}),i.push({id:120,value:40,params:[]})),r.controle>0&&(i.push({id:184,value:2,params:[]}),i.push({id:120,value:40,params:[]})),this.recapStat.next(i)}setValue(r){this.form.setValue({percentagePV:r?.percentagePV??e.DEFAULT_VALUE,resistancesElementaires:r?.resistancesElementaires??e.DEFAULT_VALUE,barriere:r?.barriere??e.DEFAULT_VALUE,soinsRecus:r?.soinsRecus??e.DEFAULT_VALUE,pdvArmure:r?.pdvArmure??e.DEFAULT_VALUE,maitriseElem:r?.maitriseElem??e.DEFAULT_VALUE,maitrisesMelee:r?.maitrisesMelee??e.DEFAULT_VALUE,maitrisesDistance:r?.maitrisesDistance??e.DEFAULT_VALUE,pdv:r?.pdv??e.DEFAULT_VALUE,tacle:r?.tacle??e.DEFAULT_VALUE,esquive:r?.esquive??e.DEFAULT_VALUE,initiative:r?.initiative??e.DEFAULT_VALUE,tacleEsquive:r?.tacleEsquive??e.DEFAULT_VALUE,volonte:r?.volonte??e.DEFAULT_VALUE,percentageCC:r?.percentageCC??e.DEFAULT_VALUE,parade:r?.parade??e.DEFAULT_VALUE,maitriseCritique:r?.maitriseCritique??e.DEFAULT_VALUE,maitriseDos:r?.maitriseDos??e.DEFAULT_VALUE,maitriseBerzerk:r?.maitriseBerzerk??e.DEFAULT_VALUE,maitriseSoins:r?.maitriseSoins??e.DEFAULT_VALUE,resistancesDos:r?.resistancesDos??e.DEFAULT_VALUE,resistancesCritique:r?.resistancesCritique??e.DEFAULT_VALUE,pa:r?.pa??e.DEFAULT_VALUE,pm:r?.pm??e.DEFAULT_VALUE,po:r?.po??e.DEFAULT_VALUE,pw:r?.pw??e.DEFAULT_VALUE,controle:r?.controle??e.DEFAULT_VALUE,di:r?.di??e.DEFAULT_VALUE,resistancesElementairesMajeur:r?.resistancesElementairesMajeur??e.DEFAULT_VALUE})}setDefaultValue(){this.form.setValue({percentagePV:e.DEFAULT_VALUE,resistancesElementaires:e.DEFAULT_VALUE,barriere:e.DEFAULT_VALUE,soinsRecus:e.DEFAULT_VALUE,pdvArmure:e.DEFAULT_VALUE,maitriseElem:e.DEFAULT_VALUE,maitrisesMelee:e.DEFAULT_VALUE,maitrisesDistance:e.DEFAULT_VALUE,pdv:e.DEFAULT_VALUE,tacle:e.DEFAULT_VALUE,esquive:e.DEFAULT_VALUE,initiative:e.DEFAULT_VALUE,tacleEsquive:e.DEFAULT_VALUE,volonte:e.DEFAULT_VALUE,percentageCC:e.DEFAULT_VALUE,parade:e.DEFAULT_VALUE,maitriseCritique:e.DEFAULT_VALUE,maitriseDos:e.DEFAULT_VALUE,maitriseBerzerk:e.DEFAULT_VALUE,maitriseSoins:e.DEFAULT_VALUE,resistancesDos:e.DEFAULT_VALUE,resistancesCritique:e.DEFAULT_VALUE,pa:e.DEFAULT_VALUE,pm:e.DEFAULT_VALUE,po:e.DEFAULT_VALUE,pw:e.DEFAULT_VALUE,controle:e.DEFAULT_VALUE,di:e.DEFAULT_VALUE,resistancesElementairesMajeur:e.DEFAULT_VALUE})}static \u0275fac=function(i){return new(i||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};var p=class e{aptitudesFormService=o(m);urlServices=o(L);code=new n("");code$=this.code.asObservable();mapCode=new Map([[1,-7],[16,80],[17,-2],[27,-4],[36,-3],[23,120],[26,1052],[30,1053],[31,20],[18,173],[19,175],[20,171],[21,-5],[37,177],[9,150],[10,875],[11,149],[12,180],[13,1055],[14,26],[15,71],[34,988],[2,31],[3,41],[4,160],[5,191],[6,184],[8,-6],[35,35]]);constructor(){let r=this.urlServices.getAptitudesFromUrl();this.aptitudesFormService.recapStat$.subscribe(()=>{this.updateCode()}),r!==void 0&&(this.saveCode(r),this.code.next(r))}updateCode(){let r="",i=this.aptitudesFormService.form.value;if(!i){this.code.next("");return}i.percentagePV&&(r+=`1:${i.percentagePV}-`),i.resistancesElementaires&&(r+=`16:${i.resistancesElementaires}-`),i.barriere&&(r+=`17:${i.barriere}-`),i.soinsRecus&&(r+=`27:${i.soinsRecus}-`),i.pdvArmure&&(r+=`36:${i.pdvArmure}-`),i.maitriseElem&&(r+=`23:${i.maitriseElem}-`),i.maitrisesMelee&&(r+=`26:${i.maitrisesMelee}-`),i.maitrisesDistance&&(r+=`30:${i.maitrisesDistance}-`),i.pdv&&(r+=`31:${i.pdv}-`),i.tacle&&(r+=`18:${i.tacle}-`),i.esquive&&(r+=`19:${i.esquive}-`),i.initiative&&(r+=`20:${i.initiative}-`),i.tacleEsquive&&(r+=`21:${i.tacleEsquive}-`),i.volonte&&(r+=`37:${i.volonte}-`),i.percentageCC&&(r+=`9:${i.percentageCC}-`),i.parade&&(r+=`10:${i.parade}-`),i.maitriseCritique&&(r+=`11:${i.maitriseCritique}-`),i.maitriseDos&&(r+=`12:${i.maitriseDos}-`),i.maitriseBerzerk&&(r+=`13:${i.maitriseBerzerk}-`),i.maitriseSoins&&(r+=`14:${i.maitriseSoins}-`),i.resistancesDos&&(r+=`15:${i.resistancesDos}-`),i.resistancesCritique&&(r+=`34:${i.resistancesCritique}-`),i.pa&&(r+=`2:${i.pa}-`),i.pm&&(r+=`3:${i.pm}-`),i.po&&(r+=`4:${i.po}-`),i.pw&&(r+=`5:${i.pw}-`),i.controle&&(r+=`6:${i.controle}-`),i.di&&(r+=`8:${i.di}-`),i.resistancesElementairesMajeur&&(r+=`35:${i.resistancesElementairesMajeur}-`),r.endsWith("-")&&(r=r.slice(0,-1)),this.urlServices.setAptitudesInUrl(r),this.code.next(r)}saveCode(r){let i=r.split("-"),s={};i.forEach(c=>{let[T,I]=c.split(":"),D=parseInt(T,10),t=parseInt(I,10),u=this.mapCode.get(D);if(u!==void 0)switch(u){case-7:s.percentagePV=t;break;case 80:s.resistancesElementaires=t;break;case-2:s.barriere=t;break;case-4:s.soinsRecus=t;break;case-3:s.pdvArmure=t;break;case 120:s.maitriseElem=t;break;case 1052:s.maitrisesMelee=t;break;case 1053:s.maitrisesDistance=t;break;case 20:s.pdv=t;break;case 173:s.tacle=t;break;case 175:s.esquive=t;break;case 171:s.initiative=t;break;case-5:s.tacleEsquive=t;break;case 177:s.volonte=t;break;case 150:s.percentageCC=t;break;case 875:s.parade=t;break;case 149:s.maitriseCritique=t;break;case 180:s.maitriseDos=t;break;case 1055:s.maitriseBerzerk=t;break;case 26:s.maitriseSoins=t;break;case 71:s.resistancesDos=t;break;case 988:s.resistancesCritique=t;break;case 31:s.pa=t;break;case 41:s.pm=t;break;case 160:s.po=t;break;case 191:s.pw=t;break;case 184:s.controle=t;break;case-6:s.di=t;break;case 35:s.resistancesElementairesMajeur=t;break}}),this.aptitudesFormService.setValue(s)}static \u0275fac=function(i){return new(i||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};export{m as a,p as b};
