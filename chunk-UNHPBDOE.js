import{Bd as A,Cd as f,H as n,L as o,Ub as b,_ as R,ba as T,d as l,db as _,ia as U,ja as N,oa as v,od as L,qd as c}from"./chunk-LK624VXJ.js";var O=class r{constructor(s,e){this.el=s;this.renderer=e}isLoading=!0;loadListener;errorListener;platformId=o(T);ngOnInit(){if(!b(this.platformId))return;this.el.nativeElement.getAttribute("loading")||this.renderer.setAttribute(this.el.nativeElement,"loading","lazy"),this.injectStyles(),this.loadListener=this.renderer.listen(this.el.nativeElement,"load",()=>{this.isLoading=!1}),this.errorListener=this.renderer.listen(this.el.nativeElement,"error",()=>{this.isLoading=!1}),this.el.nativeElement.complete&&this.el.nativeElement.naturalHeight!==0&&(this.isLoading=!1)}injectStyles(){let s="lazy-image-styles";if(document.getElementById(s))return;let e=this.renderer.createElement("style");this.renderer.setAttribute(e,"id",s),this.renderer.setAttribute(e,"type","text/css");let a=this.renderer.createText(`
      img.lazy-loading {
        background-color: rgba(255, 255, 255, 0.1) !important;
        animation: lazy-pulse 1.5s ease-in-out infinite;
      }

      img.lazy-loaded {
        background-color: transparent !important;
        animation: none;
      }

      @keyframes lazy-pulse {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }
    `);this.renderer.appendChild(e,a),this.renderer.appendChild(document.head,e)}ngOnDestroy(){this.loadListener&&this.loadListener(),this.errorListener&&this.errorListener()}static \u0275fac=function(e){return new(e||r)(N(R),N(U))};static \u0275dir=v({type:r,selectors:[["img"]],hostVars:4,hostBindings:function(e,t){e&2&&_("lazy-loading",t.isLoading)("lazy-loaded",!t.isLoading)}})};var y=(i=>(i[i.Feca=1]="Feca",i[i.Osamodas=2]="Osamodas",i[i.Enutrof=3]="Enutrof",i[i.Sram=4]="Sram",i[i.Xelor=5]="Xelor",i[i.Ecaflip=6]="Ecaflip",i[i.Eniripsa=7]="Eniripsa",i[i.Iop=8]="Iop",i[i.Cra=9]="Cra",i[i.Sadida=10]="Sadida",i[i.Sacrieur=11]="Sacrieur",i[i.Pandawa=12]="Pandawa",i[i.Roublard=13]="Roublard",i[i.Zobal=14]="Zobal",i[i.Ouginak=15]="Ouginak",i[i.Steamer=16]="Steamer",i[i.Eliotrope=18]="Eliotrope",i[i.Huppermage=19]="Huppermage",i))(y||{});var p=class r extends A{static DEFAULT_VALUE=7;urlServices=o(f);classe=new l(r.DEFAULT_VALUE);classe$=this.classe.asObservable();keyEnum="KEY_CLASSE";form=new c(r.DEFAULT_VALUE,{nonNullable:!0});constructor(){super();let s=this.urlServices.getClasseFromUrl();this.init(),s!==void 0&&this.setValue(s)}handleChanges(s){this.classe.next(s),this.urlServices.setClasseInUrl(s)}setValue(s){this.form.setValue(s??r.DEFAULT_VALUE)}setDefaultValue(){this.form.setValue(r.DEFAULT_VALUE)}getValue(){return this.classe.getValue()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};var g=class r extends A{classeFormService=o(p);urlServices=o(f);static DEFAULT_SORT_NEUTRE=[0,0,0,0,0,0,0,0,0,0,0,0];static DEFAULT_SORT_PASSIF=[0,0,0,0,0,0];sortNeutres=new l(r.DEFAULT_SORT_NEUTRE);sortNeutres$=this.sortNeutres.asObservable();sortPassifs=new l(r.DEFAULT_SORT_PASSIF);sortPassifs$=this.sortPassifs.asObservable();codeBuild=new l("");codeBuild$=this.codeBuild.asObservable();firstLoad=!0;keyEnum="KEY_SORT";form=new L({sortNeutres:new c(r.DEFAULT_SORT_NEUTRE,{nonNullable:!0}),sortPassifs:new c(r.DEFAULT_SORT_PASSIF,{nonNullable:!0})});constructor(){super();let s=this.urlServices.getSortsFromUrl();this.init(),this.classeFormService.classe$.subscribe(()=>{this.firstLoad||this.setDefaultValue(),this.firstLoad=!1,s&&this.decodeAndSaveCodeBuild(s)})}handleChanges(s){this.sortNeutres.next(s.sortNeutres??r.DEFAULT_SORT_NEUTRE),this.sortPassifs.next(s.sortPassifs??r.DEFAULT_SORT_PASSIF);let e=this.generateCodeBuild(s);this.codeBuild.next(e),this.urlServices.setSortsInUrl(e)}setValue(s){this.form.setValue({sortNeutres:s?.sortNeutres??r.DEFAULT_SORT_NEUTRE,sortPassifs:s?.sortPassifs??r.DEFAULT_SORT_PASSIF})}generateCodeBuild(s){let e=s.sortNeutres?.join("-")||"",t=s.sortPassifs?.join("-")||"";return`${e}-${t}`}decodeAndSaveCodeBuild(s){let e=s.split("-"),t=e.slice(0,12).map(h=>parseInt(h,10)),a=e.slice(12).map(h=>parseInt(h,10));this.setValue({sortNeutres:t,sortPassifs:a})}sortAlreadySet(s){let e=this.sortNeutres.getValue(),t=this.sortPassifs.getValue();return e.includes(s)||t.includes(s)}setDefaultValue(){this.form.setValue({sortNeutres:[...r.DEFAULT_SORT_NEUTRE],sortPassifs:[...r.DEFAULT_SORT_PASSIF]})}addSortNeutreAt(s,e){this.sortAlreadySet(e)&&this.removeSortNeutre(e);let t=this.sortNeutres.getValue();t[s]=e,this.form.controls.sortNeutres.setValue(t)}addSortNeutre(s){if(this.sortAlreadySet(s))return;let e=this.sortNeutres.getValue(),t=e.indexOf(0);t!==-1&&(e[t]=s,this.form.controls.sortNeutres.setValue(e))}addSortPassifAt(s,e){this.sortAlreadySet(e)&&this.removeSortPassif(e);let t=this.sortPassifs.getValue();t[s]=e,this.form.controls.sortPassifs.setValue(t)}addSortPassif(s){if(this.sortAlreadySet(s))return;let e=this.sortPassifs.getValue(),t=e.indexOf(0);t!==-1&&(e[t]=s,this.form.controls.sortPassifs.setValue(e))}removeSortPassif(s){let e=this.sortPassifs.getValue(),t=e.indexOf(s);t!==-1&&(e[t]=0,this.form.controls.sortPassifs.setValue(e))}removeSortNeutre(s){let e=this.sortNeutres.getValue(),t=e.indexOf(s);t!==-1&&(e[t]=0,this.form.controls.sortNeutres.setValue(e))}removeSortNeutreAt(s){let e=this.sortNeutres.getValue();e[s]=0,this.form.controls.sortNeutres.setValue(e)}removeSortPassifAt(s){let e=this.sortPassifs.getValue();e[s]=0,this.form.controls.sortPassifs.setValue(e)}swapSortNeutre(s,e){let t=[...this.sortNeutres.getValue()],a=t[s];t[s]=t[e],t[e]=a,this.form.controls.sortNeutres.setValue(t)}swapSortPassif(s,e){let t=[...this.sortPassifs.getValue()],a=t[s];t[s]=t[e],t[e]=a,this.form.controls.sortPassifs.setValue(t)}getSortPassifs(){return this.sortPassifs.getValue()}static \u0275fac=function(e){return new(e||r)};static \u0275prov=n({token:r,factory:r.\u0275fac,providedIn:"root"})};export{O as a,y as b,p as c,g as d};
