import{A as Z,e as Q,g as J,i as X,j as K,z as Y}from"./chunk-SPEH36HV.js";import{a as H,b as k}from"./chunk-ZD3W3Z5C.js";import{Da as g,Ea as r,Hb as O,Ib as B,Kb as h,Lb as D,Mb as $,Oa as u,Ob as z,Oc as q,Pb as j,Pc as G,Qb as b,S as V,Tc as A,Ub as I,Vb as v,ca as p,dc as S,eb as E,gb as x,ha as _,hb as P,ia as C,jb as M,kb as y,lb as d,mb as a,nb as s,o as F,ob as l,ra as w,sb as T,ub as f,wb as c,y as L}from"./chunk-ANN6KIWT.js";import"./chunk-6MDQTQU3.js";function ie(i,t){if(i&1&&(a(0,"div",2),l(1,"img",3),s()),i&2){let e=c();O("background-color",e.colorRarityService.mapColors.get(e.item().rarity)),r(),d("src",e.imageService.getItemUrl(e.item().idImage),g)}}function oe(i,t){if(i&1&&l(0,"img",1),i&2){let e=c();d("src",e.backgroundItemType(),g)}}var N=class i{colorRarityService=p(J);itemChooseService=p(Y);itemTypeFormServices=p(K);imageService=p(A);backgroundItemType=S.required();itemType=S();indexItem=S(0);item=k(H(this.itemType).pipe(L(t=>t!==void 0),V(t=>this.itemChooseService.getObsItem(t)),F(t=>t[this.indexItem()])),{initialValue:void 0});static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["app-image-item"]],inputs:{backgroundItemType:[1,"backgroundItemType"],itemType:[1,"itemType"],indexItem:[1,"indexItem"]},decls:2,vars:1,consts:[[1,"itemPresent",3,"backgroundColor"],["alt","noItem",1,"noItem",3,"src"],[1,"itemPresent"],["alt","items","appFallback","",3,"src"]],template:function(e,n){e&1&&E(0,ie,2,3,"div",0)(1,oe,1,1,"img",1),e&2&&x(n.item()?0:1)},dependencies:[Q],styles:["[_nghost-%COMP%]{cursor:pointer}[_nghost-%COMP%]:hover{transform:scale(1.2)}[_nghost-%COMP%]   .noItem[_ngcontent-%COMP%]{width:30px;height:30px}[_nghost-%COMP%]   .itemPresent[_ngcontent-%COMP%]{width:30px;height:30px;position:relative}[_nghost-%COMP%]   .itemPresent[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;margin-right:10px}"]})};function ce(i,t){if(i&1&&l(0,"img",13),i&2){let e=c().$implicit,n=c(3);d("src",n.imageService.getActionIdUrl(e.idAction),g)}}function re(i,t){if(i&1){let e=T();a(0,"div",11),f("click",function(){let o=_(e).$index;c();let m=b(0),R=c(2);return C(R.applyEffet(o,m))})("contextmenu",function(o){let m=_(e).$index;c();let R=b(0),ne=c(2);return o.preventDefault(),C(ne.changeJokerState(m,R))}),l(1,"img",12),E(2,ce,1,1,"img",13),s()}if(i&2){let e=t.$implicit,n=c(3);O("cursor",n.cursorDestructStyle(e,n.effectToApply())),r(),d("src",n.imageService.getChasseColorUrl(e),g),r(),x(e.idAction?2:-1)}}function ae(i,t){if(i&1){let e=T();z(0),a(1,"div",6)(2,"app-image-item",8),f("click",function(){let o=_(e).$index,m=c(2);return C(m.selectItemType(m.displayTypeItem[o].itemType))}),s(),M(3,re,3,4,"div",9,P),a(5,"button",10),f("click",function(){_(e);let o=b(0),m=c(2);return C(m.chasseFormService.clearChasseCombinaison(o))}),h(6,"X"),s()()}if(i&2){let e=t.$implicit,n=t.$index,o=c(2);j(n),r(2),d("itemType",o.displayTypeItem[n].itemType)("indexItem",o.displayTypeItem[n].indexItem)("backgroundItemType",o.displayTypeItem[n].background),r(),y(e.chasses)}}function se(i,t){if(i&1&&l(0,"img",12),i&2){let e=t.$implicit,n=c(3);d("src",n.itemTypeService.getLogo(e),g)}}function me(i,t){if(i&1){let e=T();a(0,"button",14),f("click",function(){let o=_(e).$implicit,m=c(2);return C(m.chooseEffet(o))}),l(1,"img",12),a(2,"span"),h(3),I(4,"translate"),s(),a(5,"div",15),M(6,se,1,1,"img",12,P),s()()}if(i&2){let e,n=t.$implicit,o=c(2);B("selected",o.effectToApply()&&((e=o.effectToApply())==null?null:e.id)===n.id)("double",o.effectIsDouble(n)),r(),d("src",o.imageService.getChasseColorUrl(n.chasse),g),r(2),D(v(4,6,n.libelle)),r(3),y(n.logos)}}function le(i,t){if(i&1){let e=T();a(0,"div",1)(1,"div",2)(2,"div",3)(3,"span"),h(4),I(5,"translate"),s(),a(6,"button",4),f("click",function(){_(e);let o=c();return C(o.chasseFormService.setDefaultValue())}),h(7,"X"),s()(),a(8,"div",5),M(9,ae,7,4,"div",6,P),s()()(),a(11,"div",1)(12,"div",2)(13,"div",3),h(14),I(15,"translate"),s(),a(16,"div",5),M(17,me,8,8,"button",7,P),s()()()}if(i&2){let e=c();r(4),D(v(5,2,"enchantement.chasses")),r(5),y(e.chasses()),r(5),$(" ",v(15,4,"enchantement.effets")," "),r(3),y(e.effetsDescription)}}var U=class i{imageService=p(A);chasseFormService=p(Z);chasses=k(this.chasseFormService.chasse$);itemTypeService=p(X);effectToApply=w(void 0);itemTypeSelected=w(void 0);displayTypeItem=[{indexItem:0,itemType:8,background:"./aptitudes/EmplacementCoiffe.png"},{indexItem:0,itemType:5,background:"./aptitudes/EmplacementAmulette.png"},{indexItem:0,itemType:9,background:"./aptitudes/EmplacementPlastron.png"},{indexItem:0,itemType:3,background:"./aptitudes/EmplacementAnneauGauche.png"},{indexItem:1,itemType:3,background:"./aptitudes/EmplacementAnneauDroite.png"},{indexItem:0,itemType:4,background:"./aptitudes/EmplacementBottes.png"},{indexItem:0,itemType:6,background:"./aptitudes/EmplacementCape.png"},{indexItem:0,itemType:10,background:"./aptitudes/EmplacementEpaulettes.png"},{indexItem:0,itemType:7,background:"./aptitudes/EmplacementCeinture.png"},{indexItem:0,itemType:2,background:"./aptitudes/EmplacementPremi\xE8reMain.png"}];effetsDescription=[{id:0,chasse:{color:3,lvl:11,idAction:120},libelle:"enchantement.maitrise-elementaire",logos:[9,6]},{id:1,chasse:{color:3,lvl:11,idAction:26},libelle:"enchantement.maitrise-soin",logos:[5,10]},{id:2,chasse:{color:1,lvl:11,idAction:1052},libelle:"enchantement.maitrise-melee",logos:[8,6]},{id:3,chasse:{color:1,lvl:11,idAction:1053},libelle:"enchantement.maitrise-distance",logos:[7,2]},{id:4,chasse:{color:1,lvl:11,idAction:1055},libelle:"enchantement.maitrise-berserk",logos:[5,6]},{id:5,chasse:{color:2,lvl:11,idAction:149},libelle:"enchantement.maitrise-critique",logos:[10,2]},{id:6,chasse:{color:2,lvl:11,idAction:180},libelle:"enchantement.maitrise-dos",logos:[7,4]},{id:7,chasse:{color:3,lvl:11,idAction:173},libelle:"enchantement.tacle",logos:[3,3]},{id:8,chasse:{color:2,lvl:11,idAction:175},libelle:"enchantement.esquive",logos:[3,3]},{id:9,chasse:{color:2,lvl:11,idAction:171},libelle:"enchantement.initiative",logos:[5,6]},{id:10,chasse:{color:2,lvl:11,idAction:82},libelle:"enchantement.resistance-feu",logos:[9,7]},{id:11,chasse:{color:3,lvl:11,idAction:83},libelle:"enchantement.resistance-eau",logos:[9,10]},{id:12,chasse:{color:1,lvl:11,idAction:84},libelle:"enchantement.resistance-terre",logos:[9,4]},{id:13,chasse:{color:3,lvl:11,idAction:85},libelle:"enchantement.resistance-air",logos:[9,6]},{id:14,chasse:{color:3,lvl:11,idAction:20},libelle:"enchantement.vie",logos:[8,2]}];chooseEffet(t){this.effectToApply.set(t)}clearEffet(){this.effectToApply.set(void 0)}removeEffet(t,e){this.chasseFormService.clearEffect(t,e)}changeJokerState(t,e){this.chasseFormService.changeJokerState(t,e)}applyEffet(t,e){this.effectToApply()&&this.chasseFormService.applyEffect(t,e,{color:this.effectToApply().chasse.color,lvl:this.effectToApply().chasse.lvl,idAction:this.effectToApply().chasse.idAction,joker:!1})}cursorDestructStyle(t,e){let n=e?.chasse;return!n||!this.equalChasses(t,n)?"":"url(cursor/chasses/destructShard.png) 16 16, auto"}equalChasses(t,e){return t.color===e.color&&t.lvl===e.lvl&&t.idAction===e.idAction}effectIsDouble(t){return!!this.itemTypeSelected()&&t.logos.includes(this.itemTypeSelected())}selectItemType(t){this.itemTypeSelected()===t?this.itemTypeSelected.set(void 0):this.itemTypeSelected.set(t)}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["app-enchantement"]],decls:2,vars:3,consts:[[1,"container"],[1,"column"],[1,"card"],[1,"header"],[3,"click"],[1,"body"],[1,"group-item-chasses"],[1,"effets-description",3,"selected","double"],[3,"click","itemType","indexItem","backgroundItemType"],[1,"container-image",3,"cursor"],[1,"delete",3,"click"],[1,"container-image",3,"click","contextmenu"],[3,"src","alt"],[1,"action-image",3,"src","alt"],[1,"effets-description",3,"click"],[1,"logos"]],template:function(e,n){e&1&&(a(0,"div",0),E(1,le,19,6),s()),e&2&&(O("cursor",n.effectToApply()?"url(cursor/"+n.imageService.getChasseColorUrl(n.effectToApply().chasse)+") 16 16, auto":"default"),r(),x(n.chasses()?1:-1))},dependencies:[N,G,q],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-around;width:100%;margin:auto}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;width:fit-content}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:270px;border:2px solid #415A77;box-shadow:2px 3px 2px #f0f0f033;cursor:pointer;background-color:#fff;color:#213a57;font-weight:600;font-size:13px;height:35px;border-radius:10px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:active, .container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{transform:translateY(2px);box-shadow:2px 3px 2px #f0f0f033,inset 3px 2px 5px #1b263b;color:#fff;background-color:#1b263b}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:fit-content;background:linear-gradient(145deg,#0d1b2a,#415a77);border-radius:15px;padding:15px;color:#fff;height:fit-content;display:flex;flex-direction:column;box-shadow:0 8px 8px #0009;position:relative;margin-bottom:15px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;border-bottom:3px solid #415A77;margin-bottom:10px;padding:5px 0}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-left:auto}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:auto;width:50px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]{display:flex;flex-direction:column;vertical-align:middle;align-items:center}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]   app-image-item[_ngcontent-%COMP%]{margin-right:10px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:30px;height:30px;margin:0 5px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]:hover{transform:scale(1.2)}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]   .delete[_ngcontent-%COMP%]{width:50px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]   .container-image[_ngcontent-%COMP%]{position:relative}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .group-item-chasses[_ngcontent-%COMP%]   .container-image[_ngcontent-%COMP%]   .action-image[_ngcontent-%COMP%]{width:15px;height:15px;position:absolute;bottom:0;right:0}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .effets-description[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:10px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .effets-description[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .effets-description[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin:0 10px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .effets-description[_ngcontent-%COMP%]   .logos[_ngcontent-%COMP%]{display:flex;align-items:center}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .effets-description[_ngcontent-%COMP%]   .logos[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-right:5px}.container[_ngcontent-%COMP%]   .column[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .body[_ngcontent-%COMP%]   .double[_ngcontent-%COMP%]{background-color:orange}"]})};var te=class i{static \u0275fac=function(e){return new(e||i)};static \u0275cmp=u({type:i,selectors:[["app-enchantement-router"]],decls:1,vars:0,template:function(e,n){e&1&&l(0,"app-enchantement")},dependencies:[U],styles:["[_nghost-%COMP%]{display:flex;margin-top:10px}[_nghost-%COMP%]   app-enchantement[_ngcontent-%COMP%]{width:100%}"]})};export{te as EnchantementRouterComponent};
